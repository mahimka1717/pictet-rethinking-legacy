/*! @permutive/javascript-sdk v20.41.1 (web) (built 2025-07-09T13:33:59.281Z) */(()=>{"use strict";var __webpack_modules__={5654:(e,t,n)=>{function r(e){return e instanceof Error?e:new Error("string"==typeof e?e:JSON.stringify(e))}n.d(t,{w:()=>r})},842:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(2169),i=n(8236);function a(e){return(0,r.zG)((0,i.Y3)((()=>JSON.parse(e))),(0,i.fS)(r.gn))}},2945:(e,t,n)=>{n.d(t,{Qt:()=>o,Yt:()=>d,ap:()=>a,gz:()=>l});var r=n(2169),i=n(8614);function a(e,t){return function(n){return function(r){return e.ap(e.map(r,(function(e){return function(n){return t.ap(e,n)}})),n)}}}function o(e){return function(t,n){return function(r){return e.ap(e.map(r,(function(e){return function(n){var r;return Object.assign({},e,((r={})[t]=n,r))}})),n)}}}function s(e,t,n){return function(r){for(var i=Array(n.length+1),a=0;a<n.length;a++)i[a]=n[a];return i[n.length]=r,0===t?e.apply(null,i):s(e,t-1,i)}}var c={1:function(e){return[e]},2:function(e){return function(t){return[e,t]}},3:function(e){return function(t){return function(n){return[e,t,n]}}},4:function(e){return function(t){return function(n){return function(r){return[e,t,n,r]}}}},5:function(e){return function(t){return function(n){return function(r){return function(i){return[e,t,n,r,i]}}}}}};function u(e){return i.e$.call(c,e)||(c[e]=s(r.bc,e-1,[])),c[e]}function l(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=t.length,i=u(r),a=e.map(t[0],i),o=1;o<r;o++)a=e.ap(a,t[o]);return a}}function d(e){return function(t){for(var n=Object.keys(t),r=n.length,i=function(e){var t=e.length;switch(t){case 1:return function(t){var n;return(n={})[e[0]]=t,n};case 2:return function(t){return function(n){var r;return(r={})[e[0]]=t,r[e[1]]=n,r}};case 3:return function(t){return function(n){return function(r){var i;return(i={})[e[0]]=t,i[e[1]]=n,i[e[2]]=r,i}}};case 4:return function(t){return function(n){return function(r){return function(i){var a;return(a={})[e[0]]=t,a[e[1]]=n,a[e[2]]=r,a[e[3]]=i,a}}}};case 5:return function(t){return function(n){return function(r){return function(i){return function(a){var o;return(o={})[e[0]]=t,o[e[1]]=n,o[e[2]]=r,o[e[3]]=i,o[e[4]]=a,o}}}}};default:return s((function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i={},a=0;a<t;a++)i[e[a]]=n[a];return i}),t-1,[])}}(n),a=e.map(t[n[0]],i),o=1;o<r;o++)a=e.ap(a,t[n[o]]);return a}}},9912:(e,t,n)=>{n.d(t,{oA:()=>b,t9:()=>f,DZ:()=>y,Ew:()=>u,f2:()=>l,xH:()=>v,jV:()=>m,uK:()=>w,tV:()=>I,u4:()=>k,DY:()=>g});var r=n(2169),i=(n(6289),n(8614)),a=n(6377);i.r1;var o=function(e){return[e]};a.xP,a.Lx,a.u4,a.OE,a.nq,a.iw,a.YM,a.ZN,a.Eh,i.F4,a.YM,a.Z$,a.VV,a.Fp,a.j0;a.ur;var s=n(7812),c=n(7049);n(3226);s.P5,s.YM,s.Z$;s.cx;function u(e){return s.Ew(e)}var l=s.f2;s.JO,s.qr;var d=function(e){return e.slice()},g=function(e){return function(t){return t.length<=1?d(t):t.slice().sort(e.compare)}};var f=s.t9;function m(e){var t=f(e);return function(n,r){if(void 0===r){var i=m(e);return function(e){return i(e,n)}}return n.filter((function(e){return t(e,r)}))}}s.kp,s.Eq;var p=o,h=function(e){return function(t){return(0,r.zG)(t,function(e){return function(t){for(var n=[],r=0;r<t.length;r++)n.push.apply(n,e(r,t[r]));return n}}((function(t,n){return e(n)})))}},v=h(r.yR),_=function(e){return function(t){for(var n=[],r=0;r<t.length;r++){var a=e(r,t[r]);i.pC(a)&&n.push(a.value)}return n}},y=function(e){return _((function(t,n){return e(n)}))},b=y(r.yR),w=function(e){return E((function(t,n){return e(n)}))},E=function(e){return function(t){for(var n=[],r=[],i=0;i<t.length;i++){var a=t[i];e(i,a)?r.push(a):n.push(a)}return(0,c.s4)(n,r)}},I=function(e){return S((function(t,n){return e(n)}))},S=function(e){return function(t){for(var n=[],r=[],i=0;i<t.length;i++){var a=e(i,t[i]);"Left"===a._tag?n.push(a.left):r.push(a.right)}return(0,c.s4)(n,r)}},k=(s.Lx,s.xP,s.u4);s.OE,s.nq,s.iw,s.ZN,s.Eh,s.pR,s.pJ,s.oR,s.yW,s.j0,i.F4},6335:(e,t,n)=>{function r(e){return function(t){return function(n){return e.chain(n,(function(n){return e.map(t(n),(function(){return n}))}))}}}function i(e){return function(t,n){return function(r){return e.chain(r,(function(r){return e.map(n(r),(function(e){var n;return Object.assign({},r,((n={})[t]=e,n))}))}))}}}n.d(t,{a:()=>i,m:()=>r})},7144:(e,t,n)=>{n.d(t,{G5:()=>v,dO:()=>m,Pd:()=>w,ak:()=>q,tS:()=>y,Y$:()=>D,g_:()=>U,ij:()=>z,DT:()=>S,fS:()=>L,pF:()=>A,nM:()=>k,t$:()=>s,UI:()=>f,Vn:()=>E,EQ:()=>G,F2:()=>c,LF:()=>M,KC:()=>O,i$:()=>T,Y3:()=>x});var r=n(6335),i=n(4906),a=n(2169),o=(n(6289),n(8614)),s=o.t$,c=o.F2,u=function(e,t){return(0,a.zG)(e,f(t))},l=function(e,t){return(0,a.zG)(e,h(t))},d=function(e,t){return(0,a.zG)(e,y(t))},g="Either",f=function(e){return function(t){return k(t)?t:c(e(t.right))}},m={URI:g,map:u},p=c,h=function(e){return function(t){return k(t)?t:k(e)?e:c(t.right(e.right))}},v={URI:g,map:u,ap:l},_=function(e){return function(t){return k(t)?t:e(t.right)}},y=_,b={URI:g,map:u,ap:l,chain:d},w=function(e,t){return function(n){return k(n)?s(e(n.left)):c(t(n.right))}},E=function(e){return function(t){return k(t)?s(e(t.left)):t}},I={URI:g,fromEither:a.yR},S=(0,i.DT)(I),k=o.nM,P=(o.tO,function(e,t){return function(n){return k(n)?e(n.left):t(n.right)}}),C=P,G=P,U=G,A=function(e){return function(t){return k(t)?e(t.left):t.right}},L=A,D=(0,i.Y$)(I,b),M=function(e){return k(e)?c(e.left):s(e.right)},z=function(e){return function(t){return null==t?s(e):c(t)}},x=function(e,t){try{return c(e())}catch(e){return s(t(e))}},T=C(a.yR,a.yR);function O(e){return e instanceof Error?e:new Error(String(e))}o.F4;var q=(0,r.a)(b);o.Xl},7125:(e,t,n)=>{n.d(t,{EQ:()=>b,F2:()=>s,KQ:()=>g,LF:()=>P,LU:()=>k,LV:()=>w,NG:()=>f,Pd:()=>_,UI:()=>m,Vn:()=>y,ap:()=>p,dQ:()=>S,fS:()=>E,i$:()=>C,ij:()=>d,m8:()=>u,pk:()=>l,t$:()=>c,tS:()=>h,vx:()=>I,wp:()=>v});var r=n(2945),i=n(7144),a=n(2169),o=n(6289);function s(e){return(0,a.ls)(i.F2,e.of)}function c(e){return(0,a.ls)(i.t$,e.of)}function u(e){return function(t){return e.map(t,i.F2)}}function l(e){return function(t){return e.map(t,i.t$)}}function d(e){return function(t){return(0,a.ls)(i.ij(t),e.of)}}function g(e){var t=d(e);return function(e){var n=t(e);return function(e){return(0,a.ls)(e,n)}}}function f(e){var t=h(e),n=g(e);return function(e){var r=n(e);return function(e){return t(r(e))}}}function m(e){return(0,o.UI)(e,i.dO)}function p(e){return(0,r.ap)(e,i.G5)}function h(e){return function(t){return function(n){return e.chain(n,(function(n){return i.nM(n)?e.of(n):t(n.right)}))}}}function v(e){return function(t){return function(n){return e.chain(n,(function(n){return i.nM(n)?t():e.of(n)}))}}}function _(e){return function(t,n){return function(r){return e.map(r,i.Pd(t,n))}}}function y(e){return function(t){return function(n){return e.map(n,i.Vn(t))}}}function b(e){return function(t,n){return function(r){return e.map(r,i.EQ(t,n))}}}function w(e){return function(t,n){return function(r){return e.chain(r,i.EQ(t,n))}}}function E(e){return function(t){return function(n){return e.chain(n,i.EQ(t,e.of))}}}function I(e){return function(t){return function(n){return e.chain(n,(function(n){return i.nM(n)?t(n.left):e.of(n)}))}}}function S(e){var t=I(e);return function(n){return t((function(t){return e.map(n(t),(function(e){return i.nM(e)?e:i.t$(t)}))}))}}function k(e){return function(t){return function(n){return e.chain(n,i.EQ((function(n){return e.map(t(n),i.t$)}),(function(t){return e.of(i.F2(t))})))}}}function P(e){return function(t){return e.map(t,i.LF)}}function C(e){return function(t){return e.map(t,i.i$)}}},3689:(e,t,n)=>{n.d(t,{f7:()=>r,n_:()=>i,w4:()=>a});n(2169);var r=function(e){return{equals:function(t,n){return t===n||e(t,n)}}},i=function(e){return r((function(t,n){for(var r in e)if(!e[r].equals(t[r],n[r]))return!1;return!0}))},a={equals:function(e,t){return e===t}};a.equals},4906:(e,t,n)=>{n.d(t,{DT:()=>a,Y$:()=>c,fX:()=>s});var r=n(2169),i=n(8614);function a(e){return function(t,n){return function(r){return e.fromEither(t(r)?i.F2(r):i.t$(n(r)))}}}function o(e){return function(t){return(0,r.ls)(t,e.fromEither)}}function s(e,t){var n=o(e);return function(e){return function(r){return t.chain(r,n(e))}}}function c(e,t){return function(n,r){return function(a){return t.chain(a,(function(t){return e.fromEither(n(t)?i.F2(t):i.t$(r(t)))}))}}}},6289:(e,t,n)=>{function r(e,t){return function(n){return function(r){return e.map(r,(function(e){return t.map(e,n)}))}}}function i(e){return function(t){return function(n){return e.map(n,(function(e){var n;return(n={})[t]=e,n}))}}}function a(e){return function(t,n){return function(r){return e.map(r,(function(e){var r;return Object.assign({},e,((r={})[t]=n(e),r))}))}}}n.d(t,{Hr:()=>a,UI:()=>r,YO:()=>i})},4694:(e,t,n)=>{n.d(t,{G5:()=>l,RD:()=>m,UI:()=>s,of:()=>c});var r=n(2169),i=(n(6289),n(8614)),a=function(e,t){return function(){return t(e())}},o=function(e,t){return function(){return e()(t())}},s=function(e){return function(t){return a(t,e)}},c=r.a9,u="IO",l={URI:u,map:a,ap:o},d=(r.yR,r.yR,i.F4,c(i.Xl)),g=function(e){var t=function(e){return function(t){return function(){for(var n=[e(0,i.YM(t))()],r=1;r<t.length;r++)n.push(e(r,t[r])());return n}}}(e);return function(e){return i.Od(e)?t(e):d}},f=function(e){return g((function(t,n){return e(n)}))},m=f(r.yR)},8236:(e,t,n)=>{n.d(t,{g1:()=>U,G5:()=>G,Ri:()=>q,xu:()=>j,dO:()=>k,wp:()=>D,tS:()=>A,fX:()=>ee,mU:()=>X,hX:()=>R,DZ:()=>B,xH:()=>Z,g_:()=>$,Uo:()=>K,ij:()=>te,KQ:()=>re,DT:()=>g,Eh:()=>I,IS:()=>f,fS:()=>J,EK:()=>m,lo:()=>z,Wi:()=>Q,pC:()=>H,UI:()=>S,EQ:()=>V,aD:()=>Y,YP:()=>l,of:()=>P,RD:()=>se,G:()=>d,FS:()=>ie,Y3:()=>ne,bM:()=>M});var r=n(6335),i=n(4906),a=n(2169),o=(n(6289),n(8614)),s=n(4327),c=n(7049);n(3226);function u(e,t){return function(n){return n?t.of(void 0):e.zero()}}var l=o.YP,d=o.G;function g(e){return function(t){return e(t)?d(t):l}}var f=function(e){return"Right"===e._tag?l:d(e.left)},m=function(e){return"Left"===e._tag?l:d(e.right)},p=function(e,t){return(0,a.zG)(e,S(t))},h=function(e,t){return(0,a.zG)(e,C(t))},v=function(e,t){return(0,a.zG)(e,A(t))},_=function(e,t){return(0,a.zG)(e,R(t))},y=function(e,t){return(0,a.zG)(e,B(t))},b=function(e,t){return(0,a.zG)(e,F(t))},w=function(e,t){return(0,a.zG)(e,N(t))},E="Option",I=function(e){return{equals:function(t,n){return t===n||(Q(t)?Q(n):!Q(n)&&e.equals(t.value,n.value))}}},S=function(e){return function(t){return Q(t)?l:d(e(t.value))}},k={URI:E,map:p},P=d,C=function(e){return function(t){return Q(t)||Q(e)?l:d(t.value(e.value))}},G={URI:E,map:p,ap:h},U={URI:E,map:p,ap:h,of:P},A=function(e){return function(t){return Q(t)?l:e(t.value)}},L={URI:E,map:p,ap:h,chain:v},D=function(e){return function(t){return Q(t)?e():t}},M=function(){return l},z=u({URI:E,zero:M},{URI:E,of:P}),x=A(a.yR),T=(0,c.s4)(l,l),O=function(e){return Q(e)?T:(0,c.s4)(f(e.value),m(e.value))},q={URI:E,compact:x,separate:O},R=function(e){return function(t){return Q(t)?l:e(t.value)?t:l}},B=function(e){return function(t){return Q(t)?l:e(t.value)}},F=function(e){return function(t){return(0,c.s4)(_(t,(0,s.ff)(e)),_(t,e))}},N=function(e){return(0,a.ls)(S(e),O)},j={URI:E,map:p,compact:x,separate:O,filter:_,filterMap:y,partition:b,partitionMap:w},K=m,W={URI:E,fromEither:K},H=o.pC,Q=function(e){return"None"===e._tag},Y=function(e,t){return function(n){return Q(n)?e():t(n.value)}},V=Y,$=V,J=function(e){return function(t){return Q(t)?e():t.value}},Z=x,X=(0,r.m)(L),ee=(0,i.fX)(W,L),te=function(e){return null==e?l:d(e)},ne=function(e){try{return d(e())}catch(e){return l}},re=function(e){return(0,a.ls)(e,te)},ie=V(a.r5,a.yR);o.F4;var ae=P(o.Xl),oe=function(e){var t=function(e){return function(t){var n=e(0,o.YM(t));if(Q(n))return l;for(var r=[n.value],i=1;i<t.length;i++){var a=e(i,t[i]);if(Q(a))return l;r.push(a.value)}return d(r)}}(e);return function(e){return o.Od(e)?t(e):ae}},se=function(e){return oe((function(t,n){return e(n)}))}(a.yR)},856:(e,t,n)=>{n.d(t,{Fp:()=>c,VV:()=>s,Zt:()=>o,uZ:()=>u});var r=n(3689),i=n(2169),a=function(e){return function(t,n){return t===n||0===e(t,n)}},o=function(e){return{equals:a(e),compare:function(t,n){return t===n?0:e(t,n)}}},s=(i.W8,function(e){return function(t,n){return t===n||e.compare(t,n)<1?t:n}}),c=function(e){return function(t,n){return t===n||e.compare(t,n)>-1?t:n}},u=function(e){var t=s(e),n=c(e);return function(e,r){return function(i){return n(t(i,r),e)}}};r.w4.equals},4327:(e,t,n)=>{n.d(t,{ff:()=>r});n(2169);var r=function(e){return function(t){return!e(t)}}},7812:(e,t,n)=>{n.d(t,{$R:()=>C,DZ:()=>j,EQ:()=>p,Eh:()=>re,Eq:()=>M,Ew:()=>w,G:()=>de,Hr:()=>me,JO:()=>I,Lx:()=>V,OE:()=>$,Od:()=>f,P5:()=>v,Su:()=>R,UI:()=>q,YM:()=>_,YO:()=>fe,Z$:()=>y,ZN:()=>te,bM:()=>x,bj:()=>P,cS:()=>ue,cx:()=>b,f2:()=>E,hX:()=>F,hp:()=>k,iw:()=>Z,j0:()=>ge,kp:()=>D,nI:()=>ce,nq:()=>J,oA:()=>K,oR:()=>se,of:()=>z,oh:()=>B,pJ:()=>oe,pR:()=>ie,qr:()=>S,t9:()=>G,tS:()=>T,u4:()=>Y,uK:()=>W,uZ:()=>ne,vP:()=>X,xH:()=>O,xP:()=>Q,xb:()=>g,yW:()=>le,zo:()=>U});var r=n(3689),i=n(2169),a=n(6289),o=n(8614),s=n(3052),c=n(856),u=n(6377),l=n(7049),d=(n(3226),function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}),g=function(e){return 0===e.length},f=u.Od,m=(u.Ce,u.ws,u.R3);u.Im;var p=function(e,t){return function(n){return f(n)?t(n):e()}},h=u.dC;function v(e,t){return void 0===t?function(t){return v(e,t)}:h(e,t)?o.YP:o.G(t[e])}var _=function(e){return f(e)?o.G(u.YM(e)):o.YP},y=function(e){return f(e)?o.G(u.Z$(e)):o.YP};var b=function(e){return function(t){for(var n=0;n<t.length;n++)if(e(t[n]))return o.G(n);return o.YP}};function w(e){return function(t){for(var n=0;n<t.length;n++)if(e(t[n]))return o.G(t[n]);return o.YP}}var E=function(e){return function(t){for(var n=0;n<t.length;n++){var r=e(t[n]);if(o.pC(r))return r}return o.YP}};var I=function(e){return function(t){for(var n=t.length-1;n>=0;n--){var r=e(t[n]);if(o.pC(r))return r}return o.YP}},S=function(e){return function(t){for(var n=t.length-1;n>=0;n--)if(e(t[n]))return o.G(n);return o.YP}},k=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];"Right"===r._tag&&t.push(r.right)}return t},P=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];"Left"===r._tag&&t.push(r.left)}return t};function C(e,t){return void 0===t?function(t){return C(t,e)}:function(e,t,n){for(var r=[],i=Math.min(e.length,t.length),a=0;a<i;a++)r[a]=n(e[a],t[a]);return r}(e,t,(function(e,t){return[e,t]}))}function G(e){return function(t,n){if(void 0===n){var r=G(e);return function(e){return r(t,e)}}for(var i,a=0;a<n.length;a++)if(i=n[a],e.equals(i,t))return!0;return!1}}var U=function(e){return function(t){return g(t)?e:g(e)?t:t.concat(e)}};var A=function(e,t){return(0,i.zG)(e,q(t))},L=function(e,t,n){return(0,i.zG)(e,Y(t,n))},D=function(e,t){return(0,i.zG)(e,oe(t))},M=function(e,t){return(0,i.zG)(e,se(t))},z=u.of,x=function(){return ue},T=function(e){return function(t){return(0,i.zG)(t,function(e){return function(t){if(g(t))return ue;for(var n=[],r=0;r<t.length;r++)n.push.apply(n,e(r,t[r]));return n}}((function(t,n){return e(n)})))}},O=T(i.yR),q=function(e){return function(t){return t.map((function(t){return e(t)}))}},R=function(e){return function(t){return t.map((function(t,n){return e(n,t)}))}},B=function(e){for(var t=[],n=[],r=0,i=e;r<i.length;r++){var a=i[r];"Left"===a._tag?t.push(a.left):n.push(a.right)}return(0,l.s4)(t,n)},F=function(e){return function(t){return t.filter(e)}},N=function(e){return function(t){for(var n=[],r=0;r<t.length;r++){var i=e(r,t[r]);o.pC(i)&&n.push(i.value)}return n}},j=function(e){return N((function(t,n){return e(n)}))},K=j(i.yR),W=function(e){return H((function(t,n){return e(n)}))},H=function(e){return function(t){for(var n=[],r=[],i=0;i<t.length;i++){var a=t[i];e(i,a)?r.push(a):n.push(a)}return(0,l.s4)(n,r)}},Q=function(e){return function(t){return function(n){return n.reduce((function(n,r,i){return e.concat(n,t(i,r))}),e.empty)}}},Y=function(e,t){return $(e,(function(e,n,r){return t(n,r)}))},V=function(e){var t=Q(e);return function(e){return t((function(t,n){return e(n)}))}},$=function(e,t){return function(n){for(var r=n.length,i=e,a=0;a<r;a++)i=t(a,i,n[a]);return i}},J=function(e,t){return Z(e,(function(e,n,r){return t(n,r)}))},Z=function(e,t){return function(n){return n.reduceRight((function(e,n,r){return t(r,n,e)}),e)}},X=function(e){return function(t){return L(t,e.of(x()),(function(t,n){return e.ap(e.map(t,(function(e){return function(t){return(0,i.zG)(e,m(t))}})),n)}))}},ee="ReadonlyArray",te=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},ne=function(){return{concat:function(e,t){return g(e)?t:g(t)?e:e.concat(t)},empty:ue}},re=function(e){return(0,r.f7)((function(t,n){return t.length===n.length&&t.every((function(t,r){return e.equals(t,n[r])}))}))},ie=function(e){return(0,c.Zt)((function(t,n){for(var r=t.length,i=n.length,a=Math.min(r,i),o=0;o<a;o++){var c=e.compare(t[o],n[o]);if(0!==c)return c}return s.Df.compare(r,i)}))},ae={URI:ee,map:A},oe=function(e){return function(t){for(var n=d([],e(t),!0),r=[];n.length>0;){var i=n.shift();o.nM(i)?n.unshift.apply(n,e(i.left)):r.push(i.right)}return r}},se=function(e){return function(t){var n=e(t),r=[],i=[];function a(t){o.nM(t)?e(t.left).forEach((function(e){return r.push(e)})):i.push(t.right)}for(var s=0,c=n;s<c.length;s++){a(c[s])}for(;r.length>0;)a(r.shift());return i}},ce=(u.oo,function(e){return g(e)?ue:e.slice()}),ue=u.cS;function le(e){return function(t){return t.every(e)}}var de=function(e){return function(t){return t.some(e)}},ge=function(e){var t=u.j0(e);return function(n){return p((function(){return e.empty}),t(n))}},fe=(o.F4,(0,a.YO)(ae)),me=(0,a.Hr)(ae);u.w6,u.QI,u.Ss},6377:(e,t,n)=>{n.d(t,{R3:()=>v,Im:()=>h,ur:()=>j,QI:()=>W,cS:()=>d,Lx:()=>A,xP:()=>M,nI:()=>E,c2:()=>y,Eh:()=>O,ZN:()=>T,vM:()=>S,YM:()=>q,j0:()=>K,Od:()=>g,dC:()=>f,Z$:()=>B,UI:()=>C,Fp:()=>N,VV:()=>F,of:()=>P,Ce:()=>p,ws:()=>m,w6:()=>w,u4:()=>U,nq:()=>L,iw:()=>z,OE:()=>D,Ss:()=>H,oo:()=>_});var r,i=n(3689),a=n(2169),o=(n(6289),n(8614)),s=n(856),c=function(e){return{concat:s.VV(e)}},u=function(e){return{concat:s.Fp(e)}};r=void 0;var l=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},d=o.Xl,g=o.Od,f=function(e,t){return e<0||e>=t.length},m=function(e){return function(t){return l([e],t,!0)}},p=m,h=function(e){return function(t){return l(l([],t,!0),[e],!1)}},v=h,_=function(e,t,n){if(g(n)){var r=o.r1(n);return r.splice(e,0,t),r}return[t]},y=function(e){return g(e)?o.G(e):o.YP},b=function(e){return function(t){for(var n=Math.max(0,Math.floor(t)),r=[e(0)],i=1;i<n;i++)r.push(e(i));return r}},w=function(e,t){return e<=t?b((function(t){return e+t}))(t-e+1):[e]},E=function(e){return y(e.slice())};function I(e,t){return t?e.concat(t):function(t){return t.concat(e)}}var S=function(e){return function(t){for(var n={},r=0,i=t;r<i.length;r++){var a=i[r],s=e(a);o.e$.call(n,s)?n[s].push(a):n[s]=[a]}return n}};var k=function(e){return function(t){for(var n=[e,t[0]],r=1;r<t.length;r++)n.push(e,t[r]);return n}},P=o.ri,C=function(e){return G((function(t,n){return e(n)}))},G=function(e){return function(t){for(var n=[e(0,q(t))],r=1;r<t.length;r++)n.push(e(r,t[r]));return n}},U=function(e,t){return D(e,(function(e,n,r){return t(n,r)}))},A=function(e){return function(t){return function(n){return n.slice(1).reduce((function(n,r){return e.concat(n,t(r))}),t(n[0]))}}},L=function(e,t){return z(e,(function(e,n,r){return t(n,r)}))},D=function(e,t){return function(n){return n.reduce((function(e,n,r){return t(r,e,n)}),e)}},M=function(e){return function(t){return function(n){return n.slice(1).reduce((function(n,r,i){return e.concat(n,t(i+1,r))}),t(0,n[0]))}}},z=function(e,t){return function(n){return n.reduceRight((function(e,n,r){return t(r,n,e)}),e)}},x=o.YM,T=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},O=function(e){return(0,i.f7)((function(t,n){return t.length===n.length&&t.every((function(t,r){return e.equals(t,n[r])}))}))},q=(o.F4,x),R=o.Gb,B=function(e){return e[e.length-1]},F=function(e){var t=c(e);return function(e){return e.reduce(t.concat)}},N=function(e){var t=u(e);return function(e){return e.reduce(t.concat)}},j=function(e){return function(t){return t.reduce(e.concat)}},K=function(e){var t=j(e);return function(e){return(0,a.ls)(function(e){return function(t){var n=R(t);return g(n)?(0,a.zG)(n,k(e),p(q(t))):t}}(e),t)}};function W(e,t){return void 0===t?p(e):(0,a.zG)(t,p(e))}var H=function(e,t){return(0,a.zG)(e,I([t]))}},6450:(e,t,n)=>{n.d(t,{Bu:()=>p,CC:()=>T,DZ:()=>X,EG:()=>m,EW:()=>j,Eh:()=>ce,G:()=>L,HA:()=>M,Hd:()=>P,I8:()=>q,P5:()=>h,RF:()=>O,RJ:()=>B,SW:()=>W,Su:()=>_,UI:()=>y,Ub:()=>Q,V_:()=>N,XP:()=>d,_Y:()=>F,_r:()=>k,dp:()=>c,dx:()=>g,e$:()=>f,hX:()=>Z,jt:()=>C,kp:()=>x,mK:()=>$,mS:()=>R,nn:()=>z,nr:()=>le,nu:()=>K,oA:()=>ae,oh:()=>oe,qS:()=>V,ri:()=>I,sq:()=>U,t9:()=>D,tV:()=>te,uK:()=>ee,uZ:()=>ue,vA:()=>Y,vP:()=>S,xb:()=>u,yW:()=>A,z7:()=>G,zV:()=>H});var r=n(3689),i=n(2169),a=n(8614),o=n(7049),s=n(229),c=(n(3226),function(e){return Object.keys(e).length}),u=function(e){for(var t in e)if(a.e$.call(e,t))return!1;return!0},l=function(e){return function(t){return Object.keys(t).sort(e.compare)}},d=l(s.Df);var g=function(e,t){return function(n){if(a.e$.call(n,e)&&n[e]===t)return n;var r=Object.assign({},n);return r[e]=t,r}},f=function(e,t){return a.e$.call(t,e)};function m(e){return function(t){if(!a.e$.call(t,e))return t;var n=Object.assign({},t);return delete n[e],n}}function p(e){return function(t,n){if(void 0===n){var r=p(e);return function(e){return r(e,t)}}for(var i in t)if(!a.e$.call(n,i)||!e.equals(t[i],n[i]))return!1;return!0}}function h(e,t){return void 0===t?function(t){return h(e,t)}:a.e$.call(t,e)?a.G(t[e]):a.YP}var v={};function _(e){return function(t){var n={};for(var r in t)a.e$.call(t,r)&&(n[r]=e(r,t[r]));return n}}function y(e){return _((function(t,n){return e(n)}))}function b(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return b(s.Df).apply(void 0,e);var n=l(e[0]);return function(e,t){return function(r){for(var i=e,a=n(r),o=a.length,s=0;s<o;s++){var c=a[s];i=t(c,i,r[c])}return i}}}function w(e){if("compare"in e){var t=l(e);return function(e){return function(n){return function(r){for(var i=e.empty,a=t(r),o=a.length,s=0;s<o;s++){var c=a[s];i=e.concat(i,n(c,r[c]))}return i}}}}return w(s.Df)(e)}function E(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return E(s.Df).apply(void 0,e);var n=l(e[0]);return function(e,t){return function(r){for(var i=e,a=n(r),o=a.length-1;o>=0;o--){var s=a[o];i=t(s,r[s],i)}return i}}}var I=function(e,t){var n;return(n={})[e]=t,n};function S(e){return $(s.Df)(e)}function k(e){return function(t){var n={},r={};for(var i in t)if(a.e$.call(t,i)){var s=e(i,t[i]);switch(s._tag){case"Left":n[i]=s.left;break;case"Right":r[i]=s.right}}return(0,o.s4)(n,r)}}function P(e){return function(t){var n={},r={};for(var i in t)if(a.e$.call(t,i)){var s=t[i];e(i,s)?r[i]=s:n[i]=s}return(0,o.s4)(n,r)}}function C(e){return function(t){var n={};for(var r in t)if(a.e$.call(t,r)){var i=e(r,t[r]);a.pC(i)&&(n[r]=i.value)}return n}}function G(e){return function(t){var n={},r=!1;for(var i in t)if(a.e$.call(t,i)){var o=t[i];e(i,o)?n[i]=o:r=!0}return r?n:t}}var U=function(e){for(var t={},n=0,r=e;n<r.length;n++){var i=r[n];t[i[0]]=i[1]}return t};function A(e){return function(t){for(var n in t)if(!e(t[n]))return!1;return!0}}function L(e){return function(t){for(var n in t)if(e(t[n]))return!0;return!1}}function D(e){return function(t,n){if(void 0===n){var r=D(e);return function(e){return r(t,e)}}for(var i in n)if(e.equals(n[i],t))return!0;return!1}}var M=function(e,t){return(0,i.zG)(e,y(t))},z=function(e,t){return(0,i.zG)(e,_(t))},x=function(e){var t=ne(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},T=function(e){return function(t){var n=re(e)(t);return function(e,t){return(0,i.zG)(e,n(t))}}},O=function(e){var t=ie(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},q=function(e,t){return(0,i.zG)(e,Z(t))},R=function(e,t){return(0,i.zG)(e,X(t))},B=function(e,t){return(0,i.zG)(e,ee(t))},F=function(e,t){return(0,i.zG)(e,te(t))},N=function(e){var t=b(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},j=function(e){var t=w(e);return function(e){var n=t(e);return function(e,t){return(0,i.zG)(e,n(t))}}},K=function(e){var t=E(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},W=function(e,t){return(0,i.zG)(e,k(t))},H=function(e,t){return(0,i.zG)(e,P(t))},Q=function(e,t){return(0,i.zG)(e,C(t))},Y=function(e,t){return(0,i.zG)(e,G(t))},V=function(e){var t=J(e);return function(e){var n=t(e);return function(e,t){return n(e,(0,i.ls)(i.SK,t))}}},$=function(e){var t=V(e);return function(e){var n=t(e);return function(e){return n(e,i.yR)}}},J=function(e){return function(t){var n=l(e);return function(e,r){var i=n(e);if(0===i.length)return t.of(v);for(var a=t.of({}),o=function(n){a=t.ap(t.map(a,(function(e){return function(t){var r;return Object.assign({},e,((r={})[n]=t,r))}})),r(n,e[n]))},s=0,c=i;s<c.length;s++){o(c[s])}return a}}},Z=function(e){return G((function(t,n){return e(n)}))},X=function(e){return C((function(t,n){return e(n)}))},ee=function(e){return P((function(t,n){return e(n)}))},te=function(e){return k((function(t,n){return e(n)}))};function ne(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=b(e[0]);return function(e,t){return n(e,(function(e,n,r){return t(n,r)}))}}return ne(s.Df).apply(void 0,e)}function re(e){if("compare"in e){var t=w(e);return function(e){var n=t(e);return function(e){return n((function(t,n){return e(n)}))}}}return re(s.Df)(e)}function ie(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=E(e[0]);return function(e,t){return n(e,(function(e,n,r){return t(n,r)}))}}return ie(s.Df).apply(void 0,e)}var ae=function(e){var t={};for(var n in e)if(a.e$.call(e,n)){var r=e[n];a.pC(r)&&(t[n]=r.value)}return t},oe=function(e){var t={},n={};for(var r in e)if(a.e$.call(e,r)){var i=e[r];a.nM(i)?t[r]=i.left:n[r]=i.right}return(0,o.s4)(t,n)},se="ReadonlyRecord";function ce(e){var t=p(e);return(0,r.f7)((function(e,n){return t(e)(n)&&t(n)(e)}))}function ue(e){return{concat:function(t,n){if(u(t))return n;if(u(n))return t;var r=Object.assign({},t);for(var i in n)a.e$.call(n,i)&&(r[i]=a.e$.call(t,i)?e.concat(t[i],n[i]):n[i]);return r},empty:v}}s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df;function le(e,t){return a.e$.call(void 0===t?this:t,e)}s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df},3643:(e,t,n)=>{n.d(t,{H5:()=>s,Pd:()=>a,Yg:()=>i,li:()=>r,pL:()=>o});n(2169);function r(e){return e[0]}function i(e){return e[1]}var a=function(e,t){return function(n){return[t(r(n)),e(i(n))]}},o=function(e){return function(t){return[e(r(t)),i(t)]}},s=function(e){return function(t){return[r(t),e(i(t))]}}},5086:(e,t,n)=>{n.d(t,{ff:()=>r});var r=function(e){return function(t){return!e(t)}}},7049:(e,t,n)=>{n.d(t,{Pd:()=>i,s4:()=>r});n(2169);var r=function(e,t){return{left:e,right:t}},i=function(e,t){return function(n){return r(e(a(n)),t(o(n)))}},a=function(e){return e.left},o=function(e){return e.right}},2678:(e,t,n)=>{n.d(t,{qA:()=>w,Hi:()=>b,qo:()=>E,dO:()=>_,UA:()=>I,PM:()=>y,ap:()=>m,Qt:()=>U,ak:()=>G,YO:()=>C,tS:()=>h,mU:()=>S,At:()=>P,tD:()=>u,UI:()=>f,of:()=>p,uU:()=>M,pE:()=>z});var r=n(2945),i=n(6335),a=n(2169);function o(e,t){var n=(0,i.m)(t);return function(t){return n((0,a.ls)(t,e.fromIO))}}var s=n(6289),c=n(8614),u=function(e){return function(){return Promise.resolve().then(e)}};var l=function(e,t){return(0,a.zG)(e,f(t))},d=function(e,t){return(0,a.zG)(e,m(t))},g=function(e,t){return(0,a.zG)(e,h(t))},f=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},m=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then((function(e){return(0,e[0])(e[1])}))}}},p=function(e){return function(){return Promise.resolve(e)}},h=function(e){return function(t){return function(){return Promise.resolve().then(t).then((function(t){return e(t)()}))}}},v="Task";var _={URI:v,map:l},y={URI:v,of:p},b={URI:v,map:l,ap:d},w={URI:v,map:l,ap:d,of:p},E={URI:v,map:l,ap:d,chain:g},I={URI:v,map:l,of:p,ap:d,chain:g},S=(a.yR,(0,i.m)(E)),k={URI:v,fromIO:u},P=o(k,E),C=(c.F4,(0,s.YO)(_)),G=(0,i.a)(E),U=(0,r.Qt)(b),A=p(c.Xl),L=function(e){var t=function(e){return function(t){return function(){return Promise.all(t.map((function(t,n){return Promise.resolve().then((function(){return e(n,t)()}))})))}}}(e);return function(e){return c.Od(e)?t(e):A}},D=function(e){var t=function(e){return function(t){return function(){return c.Gb(t).reduce((function(t,n,r){return t.then((function(t){return Promise.resolve().then(e(r+1,n)).then((function(e){return t.push(e),t}))}))}),Promise.resolve().then(e(0,c.YM(t))).then(c.ri))}}}(e);return function(e){return c.Od(e)?t(e):A}},M=function(e){return L((function(t,n){return e(n)}))},z=function(e){return D((function(t,n){return e(n)}))}},132:(e,t,n)=>{n.d(t,{Do:()=>J,Qt:()=>ee,ak:()=>X,tS:()=>O,fX:()=>Q,wE:()=>$,Zl:()=>q,Y$:()=>Y,Uo:()=>w,tD:()=>y,fF:()=>b,fS:()=>k,t$:()=>m,Hr:()=>Z,UI:()=>M,Vn:()=>x,EQ:()=>E,LV:()=>S,aD:()=>I,of:()=>B,Ij:()=>te,Y3:()=>P});var r=n(2945),i=n(6335),a=n(7125),o=n(4906),s=n(2169);function c(e,t){return function(n){var r=(0,s.ls)(n,e.fromTask);return function(e){return t.chain(e,r)}}}var u=n(6289),l=n(8614),d=n(2678),g=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},f=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},m=a.t$(d.PM),p=a.F2(d.PM),h=a.m8(d.dO),v=a.pk(d.dO),_=(0,s.ls)(d.tD,h),y=(d.tD,_),b=h,w=d.of,E=(d.tD,a.EQ(d.dO)),I=E,S=a.LV(d.UA),k=a.fS(d.UA),P=function(e,t){return function(){return g(void 0,void 0,void 0,(function(){var n;return f(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e().then(l.F2)];case 1:return[2,r.sent()];case 2:return n=r.sent(),[2,l.t$(t(n))];case 3:return[2]}}))}))}},C=(d.dO,d.PM,d.PM,d.UA,d.UA,d.UA,d.UA,d.dO,function(e,t){return(0,s.zG)(e,M(t))}),G=function(e,t){return(0,s.zG)(e,T(t))},U=function(e,t){return(0,s.zG)(e,O(t))},A=function(e,t,n){return(0,s.zG)(e,z(t,n))},L=function(e,t){return(0,s.zG)(e,x(t))},D=function(e,t){return(0,s.zG)(e,R(t))},M=a.UI(d.dO),z=a.Pd(d.dO),x=a.Vn(d.dO),T=a.ap(d.Hi),O=a.tS(d.UA),q=O,R=a.wp(d.UA),B=p,F=m,N="TaskEither";var j={URI:N,map:C},K={URI:N,map:C,ap:G},W={URI:N,map:C,ap:G,chain:U},H={URI:N,fromEither:w},Q=(0,o.fX)(H,W),Y=(0,o.Y$)(H,W),V={URI:N,fromIO:y,fromTask:b},$=c(V,W);var J=B(l.F4),Z=(0,u.Hr)(j),X=(0,i.a)(W),ee=(0,r.Qt)(K),te=(l.Xl,{URI:N,bimap:A,mapLeft:L,map:C,of:B,ap:G,chain:U,alt:D,fromIO:y,fromTask:b,throwError:F})},3226:(e,t,n)=>{function r(e,t){return function(n){var r=e.traverse(n);return function(e,i){return n.map(r(e,i),t.separate)}}}function i(e,t){return function(n){var r=e.traverse(n);return function(e,i){return n.map(r(e,i),t.compact)}}}n.d(t,{BL:()=>i,Fj:()=>r})},2169:(e,t,n)=>{n.d(t,{MZ:()=>i,Q1:()=>u,SK:()=>f,W8:()=>o,a9:()=>a,bc:()=>d,gn:()=>s,ls:()=>l,r5:()=>c,yR:()=>r,zG:()=>g});function r(e){return e}var i=r;function a(e){return function(){return e}}var o=a(!0),s=a(null),c=a(void 0),u=c;function l(e,t,n,r,i,a,o,s,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return i(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return a(i(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return o(a(i(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return s(o(a(i(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return c(s(o(a(i(r(n(t(e.apply(this,arguments)))))))))}}}function d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function g(e,t,n,r,i,a,o,s,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return i(r(n(t(e))));case 6:return a(i(r(n(t(e)))));case 7:return o(a(i(r(n(t(e))))));case 8:return s(o(a(i(r(n(t(e)))))));case 9:return c(s(o(a(i(r(n(t(e))))))));default:for(var u=arguments[0],l=1;l<arguments.length;l++)u=arguments[l](u);return u}}var f=function(e,t){return t}},8614:(e,t,n)=>{n.d(t,{F2:()=>d,F4:()=>v,G:()=>s,Gb:()=>p,Od:()=>f,Wi:()=>i,Xl:()=>h,YM:()=>m,YP:()=>o,e$:()=>_,nM:()=>c,pC:()=>a,r1:()=>y,ri:()=>g,t$:()=>l,tO:()=>u});var r=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},i=function(e){return"None"===e._tag},a=function(e){return"Some"===e._tag},o={_tag:"None"},s=function(e){return{_tag:"Some",value:e}},c=function(e){return"Left"===e._tag},u=function(e){return"Right"===e._tag},l=function(e){return{_tag:"Left",left:e}},d=function(e){return{_tag:"Right",right:e}},g=function(e){return[e]},f=function(e){return e.length>0},m=function(e){return e[0]},p=function(e){return e.slice(1)},h=[],v={},_=Object.prototype.hasOwnProperty,y=function(e){return r([e[0]],e.slice(1),!0)}},3052:(e,t,n)=>{n.d(t,{Df:()=>i,Eq:()=>r});var r={equals:function(e,t){return e===t}},i={equals:r.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};r.equals,i.compare},229:(e,t,n)=>{n.d(t,{Df:()=>i,Eq:()=>r,pn:()=>o,xb:()=>a});var r={equals:function(e,t){return e===t}},i={equals:r.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},a=function(e){return 0===e.length},o=function(e,t){return function(n){return n.endsWith(e,t)}}},5158:(e,t,n)=>{n.r(t),n.d(t,{CleanRoomAddon:()=>o,load:()=>a});var r=n(377);const i="clean_room",a=e=>{(0,r.Hn)(i)("auto_init",!1)&&e.q.push({functionName:"addon",arguments:[i,{}]})};class o{constructor(){}}},6371:(e,t,n)=>{n.d(t,{GL:()=>s,HJ:()=>c,N1:()=>l,NC:()=>r,RP:()=>i,SF:()=>d,UM:()=>u,ho:()=>f,iE:()=>g});const r=performance.now(),i=(new Date).getTime();let a=[],o=!1;const s=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return c((()=>e(...n)))},c=(e,t)=>{if(!o){const n=self.setTimeout(e,t);return()=>self.clearTimeout(n)}let n;const r=()=>{void 0!==n&&o&&a.length<1e4&&a.push([n,performance.now()]),n=void 0},i=[self.setTimeout((()=>{n=performance.now(),self.requestAnimationFrame(r),e()}),t),self.setTimeout(r,t)];return()=>{void 0===n&&i.forEach((e=>self.clearTimeout(e)))}},u=(e,t)=>{if(!o){const n=self.setInterval(e,t);return()=>self.clearInterval(n)}let n=!1,r=()=>{};const i=self.setInterval((()=>{r=c((()=>{n||e()}))}),t);return()=>{n=!0,r(),self.clearInterval(i)}},l=e=>()=>{return t=e(),new Promise(((e,n)=>t.then(s(e),s(n))));var t},d=e=>{const t=l(e);return()=>new Promise((e=>c((()=>e(t())))))},g=()=>{const e=a;return a=[],e},f=e=>{o=e}},9792:(e,t,n)=>{n.d(t,{ap:()=>b,a9:()=>v,Ue:()=>m,gS:()=>p,D8:()=>G,VS:()=>w,xH:()=>E,En:()=>h,p4:()=>C,UI:()=>y,Rp:()=>I,vP:()=>S,bw:()=>U,yY:()=>P,YP:()=>_});var r=n(5654),i=n(7144),a=n(2169),o=n(8236),s=n(7812),c=n(338);function u(e){let t=e,n=[],r=!1;return{addListener(e){if(r)return()=>{};let i=t;const a=()=>{Object.is(t,i)||(i=t,e(t))};n=[...n,a];return()=>{n=n.filter((e=>e!==a))}},notify(e){if(r)throw new Error("Ref bug: Attempted to notify a terminated notifier");Object.is(e,t)||(t=e,n.forEach((e=>e())))},terminate(){r=!0,n=[]}}}function l(e,t){let n=0;return function(){try{if(n++>0)throw new Error(e);return t(...arguments)}finally{n--}}}function d(e,t){let n=[...new Set(e)].filter((e=>"final"!==e.state));if(0===n.length)return{state:"final",onStateChange:()=>()=>{}};const r=()=>0===n.length?"final":n.some((e=>"might_change"===e.state))?"might_change":"nominal",[i,a]=g(r(),(e=>"might_change"!==e&&t())),o=()=>a(r());return n.forEach((t=>{t.onStateChange((t=>{switch(t){case"final":n=e.filter((e=>"final"!==e.state)),o();break;case"might_change":a("might_change");break;case"nominal":o();break;default:throw new Error(`Ref bug: Invalid state ${t}`)}}))})),i}function g(e,t){if("final"===e)return[{state:"final",onStateChange:()=>()=>{}},()=>{}];const{terminate:n,notify:r,addListener:i}=u(e),a={state:e,onStateChange:i},o=l("Disallowed recursion in Branch.",(e=>{if("final"===a.state){if("final"===e)return;throw new Error(`Attempted to change state of final branch to ${e}.`)}try{null==t||t(e),a.state=e,r(e)}finally{"final"===e&&n()}}));return[a,o]}var f=n(4694);function m(e){const[t,n,r]=function(){const[e,t]=g("nominal"),n=l("Disallowed recursion in Branch.",(n=>{if("final"===e.state)throw new Error("Attempted to mutate a finalized Ref.");const r=e.state;try{t("might_change"),n()}finally{t(r)}}));return[e,n,()=>t("final")]}(),[i,a]=A(t,e);return[i,e=>n((()=>a(e))),r]}function p(e){let t=e.empty;const n=()=>()=>{const n=t;return t=e.empty,n},[r,i,a]=m(n());return[r,r=>{t=e.concat(t,r),i(n())},a]}function h(e,t){return n=>{let r=new Array(e).fill(t.empty);return new Array(e).fill(null).map(((e,i)=>(0,a.zG)(n,y(f.UI((e=>{const n=t.concat(r[i],e);return r=r.map(((n,r)=>r===i?t.empty:t.concat(n,e))),n}))))))}}function v(e){return{get current(){return e},onChange:()=>()=>{},branch:{state:"final",onStateChange:()=>()=>{}}}}function _(e){return t=>{const n=t.onChange(e);return e(t.current),n}}function y(e,t){if(t){const[n,r]=A(t.branch,e(t.current));return t.onChange((t=>r(e(t)))),n}return t=>y(e,t)}const b=e=>w((t=>y(t)(e)));function w(e,t){return t?E(y(e,t)):t=>E(y(e,t))}function E(e){if("final"===e.branch.state)return e.current;const[t,n]=function(e,t){let n=t;const r=[e.state,n.state].includes("might_change")?"might_change":"nominal",[i,a]=g(r),o=e=>t=>{switch(t){case"final":a(e().state);break;case"might_change":a("might_change");break;case"nominal":"might_change"===e().state?a("might_change"):a("nominal");break;default:throw new Error(`Ref bug: Unexpected upstream state ${t}`)}};e.onStateChange(o((()=>n)));const s=o((()=>e));let c=n.onStateChange(s);return[i,e=>{n=e,c(),c=e.onStateChange(s),s(n.state)}]}(e.branch,e.current.branch),[r,i]=A(t,e.current.current);let a=e.current.onChange(i);return e.onChange((e=>{a(),a=e.onChange(i),n(e.branch),i(e.current)})),r}function I(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{if(2===t.length){let n=t[0];return y((e=>(n=t[1](n,e),n)),e)}let n=o.bM();return y((e=>{const r=t[0](n,e);return n=o.G(r),r}),e)}}function S(){if(0===arguments.length||L(arguments.length<=0?void 0:arguments[0]))return k(...arguments);const e=arguments.length<=0?void 0:arguments[0],t=Object.keys(e);return(0,a.zG)(Object.values(e),(e=>k(...e)),y((0,a.ls)(s.Su(((e,n)=>[t[e],n])),Object.fromEntries)))}function k(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return v([]);if(1===t.length)return y((e=>[e]))(t[0]);let r=!1;t.forEach((e=>e.onChange((()=>{if("might_change"!==e.branch.state)throw new Error("Ref bug: Received a change notification without a `might_change` state.");r=!0}))));const i=t.map((0,c.vg)("branch")),a=()=>{r&&(r=!1,u(t.map((e=>e.current))))},o=d(i,a),[s,u]=A(o,t.map((e=>e.current)));return s}const P=e=>()=>o.pC(e.current)?Promise.resolve(e.current.value):new Promise((t=>{const n=(0,a.zG)(e,_(o.UI((e=>{n(),t(e)}))))}));function C(e){const[t,n,s]=m(o.YP);return e.then(i.F2).catch((0,a.ls)(r.w,i.t$)).then((0,a.ls)(o.G,n,s)),t}function G(e){const t=e.hasOwnProperty("equals")?e.equals:e;return function(e){return t=>{if("final"===t.branch.state)return t;let n=o.YP;return y((t=>{if(o.Wi(n))return n=o.G(t),t;const r=e(n.value,t);return n=o.G(r),r}),t)}}(((e,n)=>t(e,n)?e:n))}function U(e){return t=>(_(e)(t),t)}function A(e,t){if("final"===e.state)return[v(t),()=>{}];const n=u(t);e.onStateChange((e=>{"final"===e&&n.terminate()}));let r=t;return[{get current(){return r},onChange:n.addListener,branch:e},l("Disallowed recursion in Ref.",(e=>{r=e,n.notify(r)}))]}function L(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&"function"==typeof e.onChange}},3506:(e,t,n)=>{n.d(t,{Hr:()=>m,K4:()=>s,UI:()=>l,ak:()=>f,bw:()=>d,dQ:()=>c,of:()=>u,vP:()=>g});var r=n(9792),i=n(2169),a=n(338),o=n(6450);const s=e=>(0,i.ls)((t=>{let{previousState:n,...r}=t;return e(r)}),(e=>({value:e,state:r.a9(void 0)}))),c=i.yR,u=(0,i.ls)(i.a9,s),l=e=>t=>(0,i.ls)(t,(0,a.rO)({value:e})),d=e=>t=>(0,i.ls)(t,(0,a.rO)({value:(0,a.bw)(e)}));function g(e){return t=>{let{previousState:n,...a}=t;const s=h(n)?n:{},c=(0,i.zG)(e,o.Su(((e,t)=>t({previousState:s[e],...a}))));return{value:(0,i.zG)(c,o.UI((e=>e.value))),state:(0,i.zG)(c,o.UI((e=>e.state)),(e=>r.vP(e)))}}}function f(e,t){return n=>(0,i.ls)((0,a.rO)({previousState:p}),(a=>{const o=n(a),s=t(o.value)({...a,previousState:a.previousState[e]});return{value:(0,i.zG)([o.value,s.value],(t=>{let[n,r]=t;if(!h(n))throw new Error("Service.bind() was passed an upstream Service with a non-record value.");return{...n,[e]:r}})),state:(0,i.zG)(r.vP(o.state,s.state),r.UI((t=>{let[n,r]=t;if(void 0===n)return{[e]:r};if(!h(n))throw new Error("Service.bind() was passed an upstream Service with a non-record state.");return{...n,[e]:r}})))}}))}const m=(e,t)=>l((n=>({...n,[e]:t(n)})));function p(e){return h(e)?e:{}}function h(e){return"object"==typeof e&&null!==e}},3054:(e,t,n)=>{n(9628)},7100:(e,t,n)=>{n.d(t,{lg:()=>p,Bt:()=>v});var r=n(9912),i=n(2169),a=n(8236),o=n(229),s=n(338);var c=n(7144);class u{userId;network;api;logger;tcf;constructor(e,t,n,r,i){this.userId=e,this.network=t,this.api=n,this.logger=r,this.tcf=i}tag="appnexus";ttlInSeconds=86400;usedForThirdPartyData=!0;invalidAliases=["","0","-1"];logPrefix="identities[appnexus]:";async getId(){if((0,s.G6)(navigator.userAgent))return this.logger.debug(this.logPrefix,"skipped for Safari"),{type:"skipped"};const e=await this.tcf.getStatusOrAbortOnTimeout(2e3),t=(0,i.zG)(this.getGDPRParams(e),c.fS((()=>"")),(e=>`https://ib.adnxs.com/getuidj${e.length>0?`?${e}`:""}`));try{this.logger.debug(this.logPrefix,"start HTTP request");const e=await this.api.appnexus(t);return this.logger.debug(this.logPrefix,"end HTTP request"),{type:"attempted",result:(0,i.zG)(a.Y3((()=>e.uid)),a.tS(a.ij),a.hX((e=>this.isValidAlias(e))))}}catch(e){return this.logger.warn(this.logPrefix,"Failed to fetch id",e),{type:"attempted",result:a.YP}}}getGDPRParams(e){return c.Y3((()=>{if("missing"===e.type||"loaded"===e.type&&!e.data.gdprApplies)return"gdpr=0";return`gdpr=1&gdpr_consent=${"loaded"===e.type?e.data.tcString:""}`}),(e=>`Failed to retrieve GDPR query params. Got ${e}`))}reset(){return Promise.resolve()}isValidAlias(e){return!!e&&-1===this.invalidAliases.indexOf(e)}}class l{config;network;api;userId;logger;url;resetUrl;constructor(e,t,n,r,i){this.config=e,this.network=t,this.api=n,this.userId=r,this.logger=i,this.url=`https://e1c3fd73-dd41-4abd-b80b-4278d52bf7aa.${this.config.pxidHost}/${this.config.apiVersion}/pxid`,this.resetUrl=this.url+"/reset"}tag="pxid";ttlInSeconds=86400;usedForThirdPartyData=!1;getId(){return this.logger.debug("identities[pxid]: start HTTP request"),(0,s.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.pxid(this.url).then((e=>(this.logger.debug("identities[pxid]: end HTTP request"),{type:"attempted",result:(0,a.ij)(e.uid)})),(e=>({type:"attempted",result:a.YP})))}reset(){return(0,s.G6)(navigator.userAgent)?Promise.resolve():this.api.pxidReset(this.resetUrl)}}var d=n(9792),g=n(6450),f=n(5086);const m=f.ff((e=>void 0===e));class p{metrics;trace;permutiveData;identityProviderEnv;logger;ref;setReady;thirdParty;rawRef;identityMapRef;setIdentityMap;providers={};static emailSHA256Regex=/^[a-f0-9]{64}$/;constructor(e,t,n,r,c){this.metrics=e,this.trace=t,this.permutiveData=n,this.identityProviderEnv=r,this.logger=c;const u=this.getCachedIdentitiesAndMigrateIfRequired(),[l,f]=d.Ue(u);this.identityMapRef=l,this.setIdentityMap=f,l.onChange((0,i.ls)(g.z7((e=>!h.has(e))),(0,s.bw)((e=>{this.logger.debug("[identities] Persisting",e),this.permutiveData.setData("identities",e)})))),this.rawRef=(0,i.zG)(l,d.UI((0,i.ls)(g.UI((e=>e.value)),g.hX(m))),d.D8(g.Eh(o.Eq)));const[p,v]=d.Ue(!1);this.ref=(0,i.zG)(d.vP(p,this.rawRef),d.UI((e=>{let[t,n]=e;return(0,i.zG)(n,(0,a.DT)((()=>t)))}))),this.setReady=()=>{e.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"identity_ready",time_origin:"sdk_init"}),v(!0)},this.thirdParty=this.prepareThirdPartyIdentities()}get identities(){return this.identityMapRef.current}prepareThirdPartyIdentities(){this.logger.debug("[Identities]","loading 3rd party identities");const e=this.metrics.startTimer("sdk_get_third_party_identities_task_duration_seconds",{}),t=this.trace.startSpan("load_tpd_ids"),n=[{load:e=>{return t=e.config,n=e.network,r=e.api,i=e.userId,o=e.logger,(0,a.G)(new l(t,n,r,i,o));var t,n,r,i,o}},{load:e=>{return t=e.userId,n=e.network,r=e.api,i=e.logger,o=e.tcf,a.G(new u(t,n,r,i,o));var t,n,r,i,o}},{load:e=>(e.cookies,e.messages,a.YP)},{load:e=>(e.cookies,a.YP)},{load:e=>(e.metrics,e.permutiveData,e.permutive,e.messages,a.YP)}],o=(0,r.oA)(n.map((e=>e.load(this.identityProviderEnv)))).map((e=>this.shouldAskForNewIdentity(e)?this.retrieveIdentity(e):Promise.resolve((0,i.bc)(e,this.getCachedTPDIdentity(e.tag)))));return Promise.all(o).then((e=>e.map((e=>{let[t,n]=e;return this.providers[t.tag]=t,this.mapTPDIdentityIfPresent(t.tag,n,t.ttlInSeconds)})))).then((e=>this.setIdentities(e))).then((0,s.bw)((()=>{this.metrics.stopTimer("sdk_get_third_party_identities_task_duration_seconds",e),t.finish()})))}getPrioritizedIdentities(e){const t={default:0,appnexus:1,pxid:1},n=Object.entries(e).map((e=>{let[t,{id:n,expiry:r,priority:i}]=e;return{tag:t,...n?{id:n}:{},...r?{expiry:r}:{},...void 0!==i?{priority:i}:{}}})),i=n.filter((e=>((e,t)=>!!e.id&&!(0,r.t9)(o.Eq)(e.tag,t))(e,Object.values(this.providers).map((e=>e.tag))))),s=n.filter((e=>((e,t)=>!!e.id&&!!(0,r.t9)(o.Eq)(e.tag,t))(e,Object.values(this.providers).map((e=>e.tag))))),c=(0,r.DZ)((e=>(0,a.ij)(e.priority)))(i),u=c.length>0?Math.max(...c):0,l=i.map((e=>void 0!==e.priority?{...e,priority:e.priority}:{...e,priority:u+1})),d=s.map((e=>void 0===t[e.tag]?{tag:e.tag,id:e.id,priority:u+_}:{tag:e.tag,id:e.id,priority:u+y}));return l.concat(d)}getIdentitiesMap(){return this.getFilteredIdentities(((e,t)=>!!t.value))}parseCustomerDefinedIdentities(e){const t=`Identify must be passed a non-empty string or list of { tag, id, priority? } tuples, value passed was '${JSON.stringify(e)}'`,n=e=>"string"==typeof e.id&&"string"==typeof e.tag,a=e=>"email_sha256"!==e.tag||p.emailSHA256Regex.test(e.id);return"string"==typeof e?(s=e).length>0?{left:[],right:[{id:s,tag:"default"}]}:{left:[t],right:[]}:Array.isArray(e)?(o=e,(0,i.zG)(o,r.tV((0,i.ls)(c.DT(n,(()=>t)),c.Y$(a,(()=>"Identify called with unsupported format of email_sha256 ID. The support format is hex-encoded 64 character long lowercase string.")))))):{left:[t],right:[]};var o,s}extractIdentifyFromQueue(e){let{global:t}=e;const n=()=>t.q.findIndex((e=>"identify"===e.functionName)),r=(e,i)=>{if(e<0)return i;const a=t.q.splice(e,1)[0],o=this.parseCustomerDefinedIdentities(a.arguments[0]);return r(n(),{left:i.left.concat(o.left),right:i.right.concat(o.right)})},{left:i,right:a}=r(n(),{left:[],right:[]});return i.forEach((e=>this.logger.warn("Invalid identity provided during init",e))),a}setIdentities(e){const t=e.reduce(((e,t)=>{let{tag:n,id:r,expiry:i,priority:a}=t;return void 0===this.identities[n]&&this.logger.debug(`identities[${n}]: added`),e[n]={...r?{value:r}:{},...i?{expiry:i}:{},...void 0!==a?{priority:a}:{}},e}),{}),n=this.rawRef.current;this.setIdentityMap({...this.identities,...t});const r=this.rawRef.current;return{identifyRequestRequired:()=>!g.xb(r)&&!g.Eh(o.Eq).equals(n,r)}}async reset(){this.setIdentityMap({}),await Promise.all(Object.values(this.providers).map((e=>e.reset())))}getFilteredIdentities(e){return(0,s.m8)(...Object.entries(this.identities).filter((t=>{let[n,r]=t;return e(n,r)})).map((e=>{let[t,{value:n,expiry:r,priority:a}]=e;return(0,i.bc)(t,{id:n,...r?{expiry:r}:{},...void 0!==a?{priority:a}:{}})})))}shouldAskForNewIdentity(e){var t;const n=(0,a.ij)(null===(t=this.identities)||void 0===t?void 0:t[e.tag]);return(0,a.g_)((()=>!0),this.isIdentityExpired)(n)}getCachedTPDIdentity(e){return this.identities[e]?(0,a.ij)(this.identities[e].value):a.YP}mapTPDIdentityIfPresent(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:86400;const r=()=>Date.now()+Math.floor(1e3*n);return(0,a.g_)((()=>({tag:e,expiry:r()})),(t=>({tag:e,id:t,expiry:r()})))(t)}retrieveIdentity(e){return e.getId().then((t=>"skipped"===t.type?(0,i.bc)(e,a.YP):(0,i.zG)(t.result,(t=>this.metrics.track({name:(0,a.pC)(t)?"sdk_third_party_identity_present_count":"sdk_third_party_identity_missing_count",value:1,labels:{identity_tag:e.tag}})),(n=>(0,i.bc)(e,t.result)))))}isIdentityExpired(e){return"number"==typeof e.expiry&&Date.now()>=e.expiry}getCachedIdentitiesAndMigrateIfRequired(){return(e=>(0,s.m8)(...Object.entries(e).filter((e=>{let[t,n]=e;return!this.isIdentityExpired(n)&&!h.has(t)}))))(this.permutiveData.getData("identities")||{})}}const h=new Set(["public","email","email_md5","ip_address"]),v=(e,t,n,i,a)=>{const s=(e,t)=>{const n=["(null)"];return n.indexOf(e)>-1||!!w[e]||(0,r.jV)(o.Eq)(t,n).length>0},c=e=>"721d6d85-35f0-4e35-bb38-13eb0d465158"===e,u={"be668577-07f5-444d-98e0-222b990951b1":s,"e43c8a90-d17b-4790-bfda-81b069b3b8c2":(e,t,n)=>["thestudentroom.co.uk"].some((e=>n.indexOf(e)>-1))&&(0,r.jV)(o.Eq)(t,["tsr-"]).length>0,"5d79bce7-5d2b-427e-a6c4-b89b6c7bf048":s,"366ab8da-5efa-4355-ab00-84db3b68ded2":e=>"96539955-4d7e-40df-882b-7e2fbacedb1c"===e||"345600e7-fb5f-48b1-9aa6-cde5396419b0"===e,"f3a06674-ebb9-4b9d-ba8f-0052018c0687":c,"38dadd0d-257a-4641-b332-b8b0fd20a6cb":c,"10453011-272d-49cd-9043-1964fdb36fd8":e=>"936ba6ac-9a8b-454d-ba98-facebd7553fe"===e},l={"fe68d1f7-c9f4-45b3-8905-7cda73d3fd74":e=>!!b[e]},d=u[e]||l[t];return!!d&&d(a,n,i)},_=2,y=3,b={},w={}},2601:(e,t,n)=>{n.d(t,{z:()=>r});class r{ingestIfEligible(e){return Promise.resolve()}}},2514:(e,t,n)=>{n.d(t,{u6:()=>a});var r=n(3506);n(9792),n(338);const i={prebid:{onReady:()=>({})}},a=e=>r.of(i)},8778:(e,t,n)=>{n.d(t,{CL:()=>s,EW:()=>c,PH:()=>o,eV:()=>i,jH:()=>u,t2:()=>a});var r=n(377);const i=(0,r.MU)("track_form_submission",!0),a=((0,r.MU)("track_pageview_complete",!0),(0,r.MU)("track_pageview_engagement",!0)),o=((0,r.$S)("sync_segments_cookie",!1),(0,r.$S)("track_slot_clicked",!0)),s=(0,r.$S)("track_slot_rendered",!0),c=(0,r.$S)("track_slot_viewable",!1),u=(0,r.$S)("track_targeting_keys",!1)},5903:(e,t,n)=>{n.d(t,{v:()=>o});class r{logger;permutive;id;segmentCode;triggerType;config;workspaceLevelConfig;prefix="[Activation]";constructor(e,t,n,r,i,a,o){this.logger=e,this.permutive=t,this.id=n,this.segmentCode=r,this.triggerType=i,this.config=a,this.workspaceLevelConfig=o}getSegmentCode(){return this.segmentCode}getTriggerType(){return this.triggerType}getConfig(){return this.config}getWorkspaceLevelConfig(){return this.workspaceLevelConfig}trackImpression(e){return this.trackActivation("impression",e)}trackConversion(e){return this.trackActivation("conversion",e)}trackActivation(e,t){const n={reaction_id:this.id,type:e};this.permutive.track("Reaction",n,t),this.logger.log(this.prefix,n.type,n)}}var i=n(377);const a={dfp:{dfp:[17127,51098,18320,24101,18790,139666,74665,122046,18314,18807,17138,24105,18238,26442,19669,122051,81793,143049,24103,18797,81785,171478,77423,81789,175295,18264,20646,92622,18805,24102,18318,16982,87696,27111,81790,101060,32095,81795,22514,17068,74662,147839,17135,75874,79190,21541,17186,18310,22529,20645,102213,51101,88113,117171,74664,18270,81786,122047,106717,74661,158581,113877,81781,18246,17128,18356,151211,24104,22710,18240,18263,22515,16781,23937,18312,18300,148849,102214,66495,20534,102103,92621,30222,81794,79184,21540,32729,18735,16782,158589,21535,17183,88865,17185,117084,18295,16780,79183,87744,18248,18297,85622,122044,21538,158591,23027,81780,18298,18269,103258,21267,76402,16843,81792,149016,74657,86173,56090,164501,87738,18734,20833,74659,101171,158466,20715,175294,20531,24106,28394,17427,32094,18247,18732,122054,18803,51099,17187,18439,20494,20008,55914,18239,98074,17182,18791,158585,74660,87739,58181,18294,17117,18440,99536,18317,99689,16842,79187,26443,81791,81782,18321,18253,51100,18254,87742,153825,156961,81788,71282,26440,158583,158434,18731,81783,16987,122049,56089,17075,122045,58310,128830,17173,87740,18806,19902,81787,102153,17125,77520,18271,113879,18245,71287,20431,158465,73402,158432,55934,18260,17174,17124,18445,79188,81784,20469,102212,17180,18315,18437,113878,18212,18268,20714,18323,18250,94606,20283,87741,18733,176218,178280,180410,180411,180412,184306,186124,186125,187959,188019,188465,190331,179639,192761,192764,193156,194701,194723,195323,195324,195325,195959,195960,196268,196269,197176,197394,197395,197397,199533,199535,199538,199539,199540,196826,200508,200511,201371,202584,203239,205165,205164,206452,206485,193476,207904,207935,208372,173728,209192,209455,207153,210673,213839,214156,214858,217630,217968,218182,218272,218494,218888,218894,218936,218937,218941,218942,218943,218944,219014,219015,219772,220220,220580,220658,220949,220992,221084,220935,221508,219733,223362,225198,215422,217623,226257,226814,229836,230821,232149,232671,232996,233373,233384,235111,237358,237536,238058,238129,238168,238461,239678],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:0},appnexus:{},appnexus_adserver:[],nativo:[],rubicon_ssp:[],smart:[],freewheel:[],curation_platforms:{adv:["adv"]}};class o{logger;permutive;clientContext;constructor(e,t,n){this.logger=e,this.permutive=t,this.clientContext=n}getSpecializedActivations(e){return a[e]}getActivations(e){return(0,i.Hn)(e)("activationConfigs",[]).filter((e=>this.areContextCriteriaSatisfied(e))).map((e=>new r(this.logger,this.permutive,e.id,e.sc,e.tt,e.c,e.wc)))}areContextCriteriaSatisfied(e){const t=e.cc,n=e=>{const t=this.clientContext.getContext()[e.key];switch(e.comparison){case"EQUALS":return t===e.value;case"NOT_EQUALS":return t!==e.value;case"CONTAINS":return"string"==typeof t&&t.indexOf(e.value)>=0;case"NOT_CONTAINS":return"string"==typeof t&&t.indexOf(e.value)<0}};return!t||("AND"===(r=t).operator?r.criteria.every(n):r.criteria.some(n));var r}}},377:(e,t,n)=>{n.d(t,{$S:()=>o,Hn:()=>i,MU:()=>a});const r={overlays:{auto_init:!0,activationConfigs:[]},curation_platforms:{auto_init:!0,prebid_ssp_codes:["pubmatic","appnexus","ix","openx"],activationConfigs:[]},web:{auto_init:!1,add_alchemy_taxonomy:!1,add_alchemy_entities:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]},scriptrunner:{auto_init:!0,activationConfigs:[]},clean_room:{auto_init:!0,default_config:{},pass_cohorts_to_prebid:!0,cohort_ssp_config:[],activationConfigs:[]},dfp:{auto_init:!0,track_slot_rendered:!0,track_slot_viewable:!0,track_slot_clicked:!0,track_targeting_keys:!1,activationConfigs:[]},gam_log:{auto_init:!0,activationConfigs:[]},tracking_pixel:{auto_init:!0,activationConfigs:[]},dbm:{auto_init:!0,entity_id:926898717,product_type:"INVITE_PARTNER",activationConfigs:[]}},i=e=>{const t=r[e];return(e,n)=>(null==t?void 0:t[e])??n},a=i("web"),o=i("dfp");i("facebook_pixel_v2")},1040:(e,t,n)=>{n.d(t,{J:()=>c});var r=n(2169),i=n(8236),a=n(5);const o=e=>t=>class extends t{key=e;put(e){return this.db.then((t=>t.put(e,this.key))).then(r.Q1)}getIfPresent(){return this.db.then((e=>e.get(this.key))).then(i.ij)}reset(){return this.db.then((e=>e.delete(this.key)))}},s=e=>(0,r.zG)(class{db;constructor(e){this.db=Promise.resolve((0,a.E)(e.namespace,e.logger,e.consent))}},o(e));class c extends(s("permutive-unprocessed-pba")){constructor(e){super(e)}}},3849:(e,t,n)=>{n.d(t,{LP:()=>a,dG:()=>r,eP:()=>i});const r=4096,i=`Cookie exceeds maximum supported size of ${r} bytes for most browsers.`,a="Cookie is missing required parameters."},8182:(e,t,n)=>{n.d(t,{Eq:()=>d,X:()=>g,b:()=>l});var r=n(9792),i=n(3506),a=n(3689),o=n(229),s=n(3052),c=n(2169),u=n(8236);const l=()=>({continent:void 0,environment:"",events_count:0,os:"",sample_rate:0,sdk_version:"",segments_count:0,session_count:0,session_init_count:0,session_view_count:0,user_agent:""}),d=a.n_({continent:{equals:(e,t)=>e===t},environment:o.Eq,events_count:s.Eq,os:o.Eq,sample_rate:s.Eq,sdk_version:o.Eq,segments_count:s.Eq,session_count:s.Eq,session_init_count:s.Eq,session_view_count:s.Eq,user_agent:o.Eq}),g=e=>{const t=m(e.userId),n=(0,c.zG)(r.vP(e.userId,e.sessionId),r.UI((e=>{let[t,n]=e;return`${t},${n}`})),m),a=String(Math.random()),o=(0,c.zG)(e.sdkVariant,u.UI((e=>`-${e}`)),u.fS((()=>""))),s={environment:"web",events_count:0,os:f(window.navigator.userAgent||""),sample_rate:e.sampleRate,sdk_version:"v20.41.1"+o,segments_count:0,user_agent:window.navigator.userAgent||""};return(0,c.zG)(i.vP({session_count:t(e.sessionId),session_init_count:n(r.a9(a)),session_view_count:n(e.viewId)}),i.UI((0,c.ls)((t=>r.vP({...t,continent:(0,c.zG)(e.continent,r.UI(u.FS))})),r.UI((e=>({...s,...e}))))))},f=e=>{const t=e.toLowerCase();return t.includes("windows")?"windows":t.includes("iphone")||t.includes("ipad")?"ios":t.includes("android")?"android":t.includes("macintosh")?"macos":t.includes("linux")?"linux":"unknown"},m=e=>t=>i.dQ((n=>{let{previousState:i}=n;const u=(0,c.zG)(r.vP(e,t),r.Rp(function(e){if(null!==e&&"object"==typeof e&&"scope"in e&&"lastValue"in e&&"count"in e)return e;return{scope:"",lastValue:"",count:1}}(i),((e,t)=>{let[n,r]=t;return{scope:n,lastValue:r,count:n!==e.scope?1:r!==e.lastValue?e.count+1:e.count}})),r.D8(a.n_({scope:o.Eq,lastValue:o.Eq,count:s.Eq})));return{state:u,value:(0,c.zG)(u,r.UI((e=>e.count)))}}))},6405:(e,t,n)=>{n.d(t,{p:()=>g});var r=n(5654),i=n(2169),a=n(338),o=n(8182),s=n(9792),c=n(7812),u=n(132),l=n(2678),d=n(6371);const g=e=>{let t=e.context.current;(0,i.zG)(e.context,s.D8(o.Eq),s.Rp((0,i.bc)(o.b(),o.b()),((e,t)=>{let[,n]=e;return(0,i.bc)(n,t)})),(e=>e.onChange((e=>{let[n,r]=e;o.Eq.equals({...n,continent:void 0},{...r,continent:void 0})||f({beacon:!1}),t=r}))));const n="[Metrics Reporter]";let g=!0;const f=async a=>{let{beacon:o}=a;const s=t,d=(0,i.zG)(u.of(e.metrics.consume()),u.Y$((()=>g),(()=>{})),u.tS(c.EQ((()=>u.of(void 0)),(t=>u.Y3((()=>(async(t,n)=>{if(!t)return e.api.metrics(n);if(!e.api.metricsBeacon(n))throw new Error("Failed to send beacon.")})(o,{context:s,items:t})),(i=>{g=!1,function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];e.logger.error(n,...r)}(`Failed to publish metrics ${(0,r.w)(i).message}`,t)}))))),l.UI(i.Q1));return d()},m=()=>{(0,d.HJ)((()=>f({beacon:!1}).finally((()=>m()))),5e3)};m(),(0,a.Bf)((()=>f({beacon:!0})),{capture:!1})}},7754:(e,t,n)=>{n.d(t,{u:()=>r});class r{trace;metrics;messages;_isRealtime=!1;_isReady=!1;constructor(e,t,n){this.trace=e,this.metrics=t,this.messages=n}isRealtime(){return this._isRealtime}isReady(){return this._isReady}setAsRealtime(e){const t=performance.now();this._isRealtime=!0,this.trace.measureSinceInit("sdk_realtime").finish(),this.messages.emit("permutive:realtime"),this.metrics.trackTimeSinceInit("sdk_realtime_targeting_set_task_duration_seconds",{},t),this.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"sdk_realtime",time_origin:"sdk_init"},t),this.metrics.track({name:"sdk_user_segments_count",value:e,labels:{}})}setAsReady(){const e=performance.now();this._isReady=!0,this.trace.measureSinceInit("sdk_ready").finish(),this.messages.emit("permutive:ready"),this.metrics.trackTimeSinceInit("sdk_initialisation_task_duration_seconds",{},e),this.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"sdk_ready",time_origin:"sdk_init"},e),window.performance&&window.performance.memory&&(this.metrics.track({name:"sdk_heap_memory_bytes_used",value:window.performance.memory.usedJSHeapSize,labels:{}}),this.metrics.track({name:"sdk_heap_memory_limit_fraction_used",value:window.performance.memory.usedJSHeapSize/window.performance.memory.jsHeapSizeLimit,labels:{}}))}}},400:(e,t,n)=>{n.d(t,{a:()=>y});var r=n(2169),i=n(6450),a=n(229),o=(n(3226),i.dp,i.xb,function(e){return function(t){return Object.keys(t).sort(e.compare)}}),s=o(a.Df);i.dx,i.e$;i.Bu,i.P5,i.Su,i.UI;i.ri;function c(e){return i.vP(e)}i._r;i.jt;i.yW,i.G,i.t9;var u=i.HA,l=(i.nn,i.kp),d=i.CC,g=i.RF,f=(i.I8,i.mS,i.RJ,i._Y,i.V_),m=i.EW,p=i.nu,h=(i.SW,i.zV,i.Ub,i.vA,i.qS),v=(i.mK,function(e){return function(t){var n=o(e);return function(e,r){var i=n(e);if(0===i.length)return t.of({});for(var a=t.of({}),o=function(n){a=t.ap(t.map(a,(function(e){return function(t){return e[n]=t,e}})),r(n,e[n]))},s=0,c=i;s<c.length;s++){o(c[s])}return a}}});i.hX,i.DZ,i.uK,i.tV;i.oA,i.oh;var _="Record";i.Eh,i.uZ,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,i.nr,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df;class y{config;localStorage;logger;permutiveData;cookies;externalData;constructor(e,t,n,r,i,a){this.config=e,this.localStorage=t,this.logger=n,this.permutiveData=r,this.cookies=i,this.externalData=a}async reset(){return this.logger.log("Resetting State"),(0,r.zG)(this.cookies.deleteCookie(this.config.cookieName),(e=>this.externalData.removeExternalData(this.config.cookieName)),(e=>s({_paols:!0,_papns:!0,_pcrdbs:!0,_pcrprs:!0,_pdfps:!0,_pfws:!0,_pnativo:!0,_prps:!0,_prubicons:!0,_psegs:!0,_psmart:!0,"permutive-id":!0,"permutive-loaded":!0,"permutive-prebid-rtd":!0,"permutive-prebid-id":!0,"permutive-events-cache":!0,_pssps:!0,_ppsts:!0}).forEach((e=>this.externalData.removeExternalData(e)))),(e=>this.permutiveData.reset()),(e=>Promise.all([this.localStorage.delete(this.config.permutiveDataMiscKey),this.localStorage.delete(this.config.permutiveDataQueriesKey)])),r.Q1)}}},9809:(e,t,n)=>{n.d(t,{u:()=>r});class r{permutiveData;permutiveReset;userId;viewId;logger;constructor(e,t,n,r,i){this.permutiveData=e,this.permutiveReset=t,this.userId=n,this.viewId=r,this.logger=i}getPermutiveData(e){return this.permutiveData.getData(e)}setPermutiveData(e,t){return this.permutiveData.setData(e,t)}getStateSizeInBytes(){return this.logger.warn("getStateSizeInBytes needs to be updated to reflect new event persistence"),this.permutiveData.getDataSize()}reset(){return this.permutiveReset.reset()}}},3593:(e,t,n)=>{n.d(t,{W:()=>r});class r{ref;constructor(e){this.ref=e}get(){return this.ref.current}}},5:(e,t,n)=>{n.d(t,{E:()=>i});var r=n(1977);const i=(e,t,n)=>{const i=window.localStorage;return(0,r.rK)(i,"[Local Storage]",e,t,n)}},6749:(e,t,n)=>{n.d(t,{u:()=>i});n(2063);var r=n(1977);const i=(e,t,n)=>{const i=window.sessionStorage;return(0,r.rK)(i,"[Session Storage]",e,t,n)}},1977:(e,t,n)=>{n.d(t,{oP:()=>c,rK:()=>d});var r=n(5654),i=n(842),a=n(7144),o=n(2169),s=n(19);class c{storage;namespace;constructor(e,t){this.storage=e,this.namespace=t}async put(e,t){const n=this.namespace.getNamespacedStorageKey(t.toString());return this.storage.setItem(n,JSON.stringify(e)),t}async get(e){const t=this.namespace.getNamespacedStorageKey(e.toString()),n=this.storage.getItem(t);return null===n?null:(0,i.A)(n)}async delete(e){const t=this.namespace.getNamespacedStorageKey(e.toString());this.storage.removeItem(t)}async deleteStore(){}}const u=e=>{const{logger:t,consent:n,prefix:r}=e,i=(e,n)=>(t.debug(`${r} Failed to write ${String(n)} as consent is revoked`),Promise.resolve(n));return e=>class extends e{put=(0,s.v)(super.put.bind(this),i,(()=>!n.current))}},l=e=>{const{logger:t,prefix:n,storage:i}=e;return e=>class extends e{isSupported=null;isStorageSupported(){return null!==this.isSupported||(this.isSupported=a.Y3((()=>{const e="_permutive_ls_test";return i.setItem(e,e),i.getItem(e),i.removeItem(e),!0}),r.w),(0,o.zG)(this.isSupported,a.EQ((e=>{t.warn(`${n} Is NOT supported`,e)}),(()=>{t.debug(`${n} Is supported`)})))),this.isSupported}async put(e,t){return(0,o.zG)(this.isStorageSupported(),a.EQ((e=>{throw e}),(()=>super.put(e,t))))}async get(e){return(0,o.zG)(this.isStorageSupported(),a.EQ((()=>null),(()=>super.get(e))))}async delete(e){return(0,o.zG)(this.isStorageSupported(),a.EQ(o.Q1,(()=>super.delete(e))))}async deleteStore(){return(0,o.zG)(this.isStorageSupported(),a.EQ(o.Q1,(()=>super.deleteStore())))}}},d=(e,t,n,r,i)=>new((0,o.zG)(c,l({logger:r,prefix:t,storage:e}),u({logger:r,consent:i,prefix:t})))(e,n)},9628:(e,t,n)=>{n.d(t,{SD:()=>g});var r=n(8236),i=n(7144),a=n(7812),o=n(6450),s=n(2169),c=n(9792),u=n(338);const l={tradedesk:21,ddp:755,appnexus:32,pubmatic:76,neustar_fabrick:468},d="[TCF]",g=(e,t)=>{const[n,g,m]=(0,s.zG)(c.Ue(r.YP),(e=>{let[n,...i]=e;return[(0,s.zG)(n,c.bw(r.UI((e=>{t.debug(d,`Status "${e.type}"`,e)})))),...i]})),p=e.__tcfapi;if(p){const e=new Set(["tcloaded","useractioncomplete"]);p("addEventListener",2,((n,i)=>{i?"loaded"===n.cmpStatus&&e.has(n.eventStatus)&&(t.debug(d,"TCF API loaded",n),g(r.G({type:"loaded",data:n}))):(t.warn(d,"TCF API failed to register event listener"),g(r.G({type:"aborted"})),m())}))}else t.debug(d,"TCF API missing from the page"),g(r.G({type:"missing"})),m();const[h,v]=(0,s.zG)(c.gS(a.uZ()),(e=>{let[t,n]=e;return[t,(0,s.ls)(a.of,n)]}));return(0,s.zG)(c.vP(n,h),c.bw((e=>{let[n,a]=e;return(0,s.zG)(n,r.UI((e=>{const n=a();switch(t.debug(d,`Processing ${n.length} listeners`,n),e.type){case"missing":n.forEach((n=>{let[r,i]=n;t.debug(d,`Invoking ${r} as TCF API missing`),i(e)}));break;case"aborted":n.forEach((e=>{let[n]=e;t.debug(d,`Invoking ${n} skipped as TCF API aborted`)}));break;case"loaded":n.forEach((n=>{let[a,c]=n;(0,s.zG)(f(e.data),r.EQ((()=>{t.debug(d,`Invoking ${a} as GDPR does not apply`),c(e)}),(n=>(0,s.zG)((0,s.zG)(a,i.EQ((e=>r.G(e)),(e=>(0,s.zG)(l,o.P5(e))))),r.tS((e=>(0,s.zG)(n,o.P5(e.toString())))),r.UI((n=>{n?(t.debug(d,`${a} has consent`,{vendor:a}),c(e)):t.debug(d,`${a} does not have consent`,{vendor:a})}))))))}))}})))}))),{registerVendorOnValidConsent:(e,t)=>v([(0,s.zG)(e,i.DT((e=>"string"==typeof e),(()=>e))),t]),getStatusOrAbortOnTimeout:e=>new Promise((t=>{const i=setTimeout((()=>t({type:"aborted"})),e);(0,s.zG)(n,c.UI(r.UI((e=>{clearTimeout(i),t(e)}))))})).then((0,u.bw)((e=>t.debug(d,"TCF status resolved as",{status:e})))),tcfApiStatusRef:n}},f=e=>e.gdprApplies?r.G(e.vendor.consents):r.YP},9170:(e,t,n)=>{n.d(t,{C:()=>s});var r=n(9912),i=n(2169);n(5178),n(2514);const a=(o=[[{name:"dfp",import:Promise.resolve().then(n.bind(n,3749))}],[],[],[],[],[],[{name:"clean_room",import:Promise.resolve().then(n.bind(n,5158))}],[],[{name:"dbm",import:Promise.resolve().then(n.bind(n,2882))}],[{name:"ddp",import:Promise.resolve().then(n.bind(n,2474))}],[],[],[],[],[{name:"gam_log",import:Promise.resolve().then(n.bind(n,9026))}],[],[],[{name:"overlays",import:Promise.resolve().then(n.bind(n,2636))}],[],[],[],[],[],[],[],[{name:"scriptrunner",import:Promise.resolve().then(n.bind(n,5423))}],[{name:"tracking_pixel",import:Promise.resolve().then(n.bind(n,6509))}],[],[],[{name:"web",import:Promise.resolve().then(n.bind(n,7889))}],[],[],[],[]],(0,i.zG)((0,r.xH)(o),(0,r.u4)({},((e,t)=>({...e,[t.name]:t.import})))));var o;const s=e=>{const t=Object.entries(a).map((async t=>{let[n,r]=t;return e.logger.log(`Loading addon ${n}`),(await r).load(e)}));return Promise.all(t)}},1605:(e,t,n)=>{n.d(t,{t:()=>i});var r=n(338);function i(){return(0,r.a4)((()=>window.googletag),(()=>!!window.googletag),{waitTimeInMs:10,maxAttempts:200,exponentialBackOff:!1})}},232:(e,t,n)=>{n.r(t),n.d(t,{createAddon:()=>E,getCachedDFPSegments:()=>b});var r=n(5654),i=n(7144),a=n(2169),o=n(8236),s=n(7812),c=n(9792),u=n(377),l=n(338),d=n(1605);const g="_pdfps";n(3849);var f=n(9912),m=n(229);let p=!1;let h=null;const v=(e,t)=>{const{logger:n}=t;(0,a.zG)(e,o.UI((e=>{!0!==p&&e.pubadsReady&&(h??=r=>{let{slot:i}=r;const{getContentUrl:o}=i;if(!o||"function"!=typeof o)return;(0,a.zG)(o(),(0,m.pn)("&trunc=1"))&&(n.debug("DFP content URL has been truncated!"),(e=>{let{metrics:t,logger:n}=e;p||(t.track({name:"sdk_targeting_size_limit_exceeded_count",value:1,labels:{target:"dfp"}}),p=!0,n.debug("DFP has exceeded targeting limit"))})(t),h&&e.pubads().removeEventListener("slotRenderEnded",h),h=null)},e.pubads().addEventListener("slotRenderEnded",h))})))},_=(e,t,n,r,i)=>{const{logger:s}=t;v(e,t);(0,a.zG)(e,o.UI((e=>(e=>{e.cmd.push((()=>{const{getTargeting:t,setTargeting:a}=e.pubads(),o=t("permutive")||[],c=t("prmtvctx")||[],u=(0,f.uK)((e=>i.has(e))),{left:l}=u(o),{left:d}=u(c),g=r.concat(l).concat("rts");if(s.debug("DFP setTargeting for 'permutive'",g),a("permutive",g),n.contextualCohorts){const e=n.contextualCohorts.concat(d).concat("rts");s.debug("DFP setTargeting for 'prmtvctx'",e),a("prmtvctx",e)}}))})(e))))};var y=n(3749);const b=e=>e.getExternalJsonData(g)||[],w=(e,t,n,i,a)=>{const{logger:o,externalData:s,api:c}=t;let l=n.map(String).concat(i.cloudCohorts);o.debug("DFP is updating with targeting values",l),_(e,t,i,l,a);try{s.setExternalJsonData(g,l)}catch(e){const t=(0,r.w)(e),n="DFP failed to set data. Got:";o.error(n,t),c.reportError(`${n} ${t.message}`)}return((e,t)=>{let{api:n,logger:r}=e;(0,u.$S)("sync_segments_cookie",!1)?(r.debug("DFP syncing segment cookie _pdfps"),n.segmentSync({key:g,value:t})):r.debug("DFP sync segments cookie not enabled, skipping sync")})(t,JSON.stringify(l)),o.debug("DFP live segments updated to",n),n},E=async e=>{const t={segments:{liveSegments:[],cloudCohorts:[],eligibleSegments:{}},getGAMKeyValues:()=>({permutive:""})};const{api:n,logger:r,activationManager:u,messages:f,externalData:m,nextGenOutput:p,userId:h,cookies:v}=e,_=await(0,d.t)();o.Wi(_)&&r.error("[DFP]: unable to find google tag script on the page"),(0,a.zG)(_,o.UI((e=>(e=>e.cmd.push((()=>e.pubads().setTargeting("prmtvsdk","web"))))(e))));t.getGAMKeyValues=()=>{const r={...(0,a.zG)((0,y.generateProjectSpecificKVs)(e),i.Vn((e=>{var t;return t=e,n.reportError(`[DFP] ${t}`,h.get()),e})),i.fS((()=>({})))),permutive:t.segments.liveSegments.join(",")};return t.segments.contextualCohorts&&(r.prmtvctx=t.segments.contextualCohorts.join(",")),r};const b=new Set("rts");t.segments.eligibleSegments=(e=>{const t=e.getSpecializedActivations("dfp"),n={};for(const e of t.dfp)n[e]=e;for(const e of Object.keys(t.dfp_legacy)){const r=Number(e);n[r]=t.dfp_legacy[r]}return n})(u),Object.values(t.segments.eligibleSegments).forEach((e=>{b.add(String(e))}));const E=(0,a.zG)(p.queryLanguageCohorts.all,c.UI((e=>{return r.debug("DFP received QL segments",{qlSegments:e}),n=e,i=t.segments.eligibleSegments,n.filter((e=>e in i)).map((e=>i[e]));var n,i})),c.D8(l.cO)),I=(0,a.zG)(p.activations.dfp??c.a9(s.cS),c.UI((e=>e||s.cS))),S=p.activations.dfp_contextual??c.a9(void 0);return(0,a.zG)(c.vP(I,(0,a.zG)(S,c.UI((e=>e||[])))),c.UI(s.xH),c.Rp(s.bM(),((e,t)=>[...new Set([...e,...t])])),c.bw((e=>e.forEach((e=>b.add(e)))))),(0,a.zG)(c.vP(E,I,S),c.YP((0,l.Z_)(n,h,(n=>{let[i,a,o]=n;r.debug("DFP received updated cohorts",{filteredQlSegments:i,cloudCohorts:a,contextualCohorts:o}),t.segments.cloudCohorts=a,o&&(t.segments.contextualCohorts=o),t.segments.liveSegments=w(_,e,i,t.segments,b)})))),r.debug("DFP initialised with segments",t.segments),(0,a.zG)(_,o.UI((e=>{e.secureSignalProviders=e.secureSignalProviders||[],e.secureSignalProviders.push({id:"permutive-secure-signal",collectorFunction:c.yY(p.addons.secureSignal)})}))),f.on("permutive:reset",(0,l.Z_)(n,h,(()=>{r.debug("DFP received 'permutive:reset' event"),m.removeExternalData(g),v.deleteCookie(g)}))),f.emit("permutive:dfp:ready"),t}},3749:(e,t,n)=>{n.r(t),n.d(t,{generateProjectSpecificKVs:()=>C,load:()=>g});var r=n(5654),i=n(7144),a=n(8236),o=n(2169),s=n(8778),c=n(377),u=n(338),l=n(232);const d={},g=e=>{(0,c.Hn)("dfp")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["dfp",{}]}),window.googletag=window.googletag||{},window.googletag.cmd.push((()=>f(e)))},f=e=>{e.permutive.ready((0,u.Z_)(e.api,e.userId,(()=>I(e.metrics))),"realtime");S(e.externalData);(0,o.zG)(C(e),i.tS((e=>i.Y3((()=>(0,u.qh)(e).forEach((e=>{let[t,n]=e;googletag.pubads().setTargeting(t,n)}))),r.w))),i.Vn((t=>e.api.reportError(`[DFP:load], ${t}`,e.userId.get())))),y(e.permutive),googletag.cmd.push((()=>{b(e.permutive),w(e.permutive)})),window.addEventListener("message",p(e.permutive),!1)},m=e=>{let{advertiserId:t,campaignId:n,lineItemId:r,creativeId:i}=e;return{advertiser_id:(0,u.rH)(t),campaign_id:(0,u.rH)(n),line_item_id:(0,u.rH)(r),creative_id:(0,u.rH)(i)}},p=e=>t=>{try{const n=JSON.parse(t.data);if(!n.permutive_type||"google_ad_click"!==n.permutive_type)return;const{ad_unit_path:r,creative_id:i,advertiser_id:a,order_id:o,line_item_id:s}=(null==n?void 0:n.data)??{},c=m({lineItemId:s,advertiserId:a,campaignId:o,creativeId:i});let u;Object.keys(d).some((e=>{const{slot:t,creative_id:n}=d[e];if((null==t?void 0:t.ad_unit_path)===r&&n===c.creative_id)return u=d[e],!0})),u=u??{...c,is_empty:!1},h(e,u)}catch{}},h=(e,t)=>{s.PH&&t&&e.track("SlotClicked",t)},v={},_=(e,t,n)=>{d[t]=n,E(e,n),v[t]&&v[t](),v[t]=P(e,t)},y=e=>{const t=googletag.pubadsReady&&googletag.pubads().getSlots();t&&t.forEach((t=>{const n=t.getResponseInformation();if(!n)return;const r={...m(n),is_empty:!1,service_name:"publisher_ads",slot:k(t)},i=t.getSlotElementId();_(e,i,r)}))},b=e=>{googletag.pubads().addEventListener("slotRenderEnded",(t=>{const n={...m(t),is_empty:t.isEmpty,service_name:t.serviceName,slot:k(t.slot)};if(t.size){const[e,r]=t.size;"number"==typeof e&&"number"==typeof r&&(n.width=e,n.height=r)}const r=t.slot.getSlotElementId();_(e,r,n)}))},w=e=>{s.EW&&googletag.pubads().addEventListener("impressionViewable",(t=>{let{slot:n,serviceName:r}=t;const i=n.getResponseInformation();if(!i)return;const a={...m(i),service_name:r,slot:k(n)};e.track("SlotViewable",a)}))},E=(e,t)=>{if(!s.CL)return;var n;n={...t,rendered_timestamp:Date.now()},e.track("SlotRendered",n)},I=e=>{let t=0;const n=googletag.pubadsReady&&googletag.pubads().getSlots();n&&n.forEach((e=>e.getResponseInformation()&&t++));const r=0===t?"sdk_targeting_realtime_success_count":"sdk_targeting_realtime_fail_count";e.track({name:r,value:1,labels:{target:"dfp"}})},S=e=>{const t=(0,l.getCachedDFPSegments)(e);googletag.cmd.push((()=>{const{getTargeting:e,setTargeting:n}=googletag.pubads(),r=e("permutive")||[];n("permutive",[...new Set([...t.map(String),...r])])}))},k=e=>{const t={ad_unit_path:e.getAdUnitPath(),slot_element_id:e.getSlotElementId()};return s.jH?{...t,...(()=>{const t={},n=[];let r=[];const i=(e,i)=>{const a="slot"===e?e=>t[e]=1:()=>{},o=i.getTargetingKeys();r=o;for(let o=0;o<r.length;o++){const s=r[o];if(void 0!==t[s]&&"service"===e)continue;const c=[],u=i.getTargeting(s);for(let e=0;e<u.length;e++)c.push(u[e].toString());c.length>0&&(a(s),n.push({key:s,value:c}))}};return i("slot",e),i("service",googletag.pubads()),{targeting_keys:n}})()}:t},P=(e,t)=>{let n=[];const r=()=>(0,o.zG)((0,o.bc)((0,o.zG)(a.Y3((()=>document.getElementById(t))),a.tS(a.ij),a.tS(a.KQ((e=>e.querySelector("iframe"))))),a.ij(document.activeElement)),a.RD,a.UI((n=>{let[r,i]=n;"hidden"===document.visibilityState&&r===i&&h(e,d[t])})));return document.addEventListener("visibilitychange",r),n.push((()=>document.removeEventListener("visibilitychange",r))),()=>{n.forEach((e=>e())),n=[]}},C=e=>{let{userId:t,viewId:n}=e;return i.Y3((()=>({})),r.w)}},9026:(e,t,n)=>{n.r(t),n.d(t,{GamLogAddon:()=>s,load:()=>o});var r=n(8236),i=n(377),a=n(1605);const o=e=>{(0,i.Hn)("dfp")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["gam_log",{}]})};class s{options;constructor(e){this.options=e,this.setTargeting({puid:e.userId.get(),prmtvvid:e.viewId.get(),prmtvsid:e.sessionManager.getSessionId(),prmtvwid:"e1c3fd73-dd41-4abd-b80b-4278d52bf7aa"})}async setTargeting(e){r.g_((()=>this.options.logger.error("[GAM Log]: unable to find google tag script on the page")),(t=>{t.cmd.push((()=>Object.entries(e).forEach((e=>{let[n,r]=e;return t.pubads().setTargeting(n,r)}))))}))(await(0,a.t)())}}},2636:(e,t,n)=>{n.r(t),n.d(t,{OverlaysAddon:()=>s,load:()=>o});var r=n(6371),i=n(377),a=n(338);const o=e=>{(0,i.Hn)("overlays")("auto_init",!1)&&e.q.unshift({functionName:"addon",arguments:["overlays",{}]})};class s{permutive;options;loadedImageCounts;activations;constructor(e){const t=this;this.permutive=e.permutive,this.options=e,this.activations=this.options.activationManager.getActivations("overlays"),this.loadedImageCounts={};for(let n=0;n<this.activations.length;n++){const r=this.activations[n],i=r.getSegmentCode(),o=r.getTriggerType(),s=r.getConfig(),c=this.buildOverlayCss(s,n);document.head.insertAdjacentHTML("beforeend",c);const u=this.buildOverlayBody(s,n);document.body.insertAdjacentHTML("beforeend",u);const l=`permutive-overlay-${n}`,d=document.getElementById(l);if(d){const e=d.getElementsByClassName("close")[0],t=d.getElementsByClassName("content")[0],n=()=>{d.style.visibility="hidden",d.style.opacity="0"},i=e=>{(null==t?void 0:t.contains(e.target))||(n(),d.removeEventListener("click",i))};e.addEventListener("click",n),d.addEventListener("click",i);[].slice.call(d.getElementsByTagName("a")).slice(1).forEach((e=>{e.addEventListener("click",(function(){r.trackConversion({useBeacon:!0})}))}));const a=d.getElementsByTagName("form")[0];a&&a.addEventListener("submit",(function(e){e.preventDefault(),r.trackConversion({success:function(){a.submit()}})}))}const g=function(e,n){t.showOverlay(e),n.trackImpression()};"EveryTime"===o?this.permutive.segment(i,(0,a.Z_)(e.api,e.userId,(e=>{e?g(l,r):this.permutive.trigger(i,"result",(function(e){e.result&&g(l,r)}))}))):"OnEntry"===o?this.permutive.trigger(i,"result",(0,a.Z_)(e.api,e.userId,(function(e){e.result&&g(l,r)}))):"OnExit"===o&&this.permutive.trigger(i,"result",(0,a.Z_)(e.api,e.userId,(function(e){e.result||g(l,r)})))}}buildOverlayCss(e,t){return'<style type="text/css">.${overlay_class}{position:fixed;top:0;bottom:0;left:0;right:0;width:100%;height:100%;background:rgba(0,0,0,0.${opacity_percentage});transition:opacity ${opacity_transition_ms}ms;visibility:hidden;opacity:0;z-index:1000000;}.${modal_class}{position:fixed;padding:10px;background:#fff;border-radius:5px;z-index:1000001}.${modal_class} .content{overflow:auto;z-index:1000002;}.${modal_class} .close{position:absolute;top:20px;right:30px;transition:all 200ms;font-size:30px;font-weight:bold;text-decoration:none;color:#333;z-index:1000003}.${modal_class} .close:hover{color:orange;}</style>'.replace(/\${overlay_class}/g,"permutive-overlay-"+t).replace(/\${modal_class}/g,"permutive-modal-"+t).replace("${opacity_percentage}",e.opacity_percentage.toString()).replace("${opacity_transition_ms}",e.opacity_transition_ms.toString())}buildOverlayBody(e,t){const n=this.options.config.windowKey;let r="";return!function(e){return void 0!==e.html}(e)?function(e){return void 0!==e.image_url&&void 0!==e.image_link}(e)&&(r='<a href="'+e.image_link+'"><img src="'+e.image_url+'"/></a>'):r=e.html,'<div id="${overlay_class}" class="${overlay_class}"><div id="${modal_class}" class="${modal_class}"><a class="close" href="javascript:;">&times;</a><div class="content">${content}</div></div></div>'.replace(/\${overlay_class}/g,"permutive-overlay-"+t).replace(/\${modal_class}/g,"permutive-modal-"+t).replace("${content}",r).replace(/<img /g,`<img onload='window[${n}].addons.overlays.loadedImage("permutive-overlay-" + num + "")' `)}showOverlay(e){const t=document.getElementById(`${e}`);if(!t)return;const n=()=>{const e=t.getElementsByTagName("div")[0],n=e.getBoundingClientRect().height,r=e.getBoundingClientRect().width;e.style.left=window.innerWidth/2-r/2+"px",e.style.top=window.innerHeight/2-n/2+"px",t.style.visibility="visible",t.style.opacity="1"},i=t.getElementsByTagName("img");if(i.length>0){let t=0;const a=()=>{t<10&&(!(e in this.loadedImageCounts)||this.loadedImageCounts[e]<i.length)?(t+=1,(0,r.HJ)(a,500)):n()};a()}else n()}loadedImage(e){e in this.loadedImageCounts?this.loadedImageCounts[e]=this.loadedImageCounts[e]+1:this.loadedImageCounts[e]=1}}},2882:(e,t,n)=>{n.r(t),n.d(t,{load:()=>i});var r=n(377);const i=e=>{(0,r.Hn)("dbm")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["dbm",{}]})}},2474:(e,t,n)=>{n.r(t),n.d(t,{DDPPixel:()=>c,load:()=>u});class r{options;storageKey;syncTimeoutSeconds;tcfStatus;constructor(e,t,n){this.options=e,this.storageKey=t,this.syncTimeoutSeconds=n,this.tcfStatus=e.tcfStatus,this.sendPixel()}sendPixel(){const e=this.options.permutiveData.getData(this.storageKey);e&&!this.isExpired(e)||this.makeUrl(this.options.config.apiKey,this.options.state.userId.get()).then((e=>{this.fire(e),this.options.permutiveData.setData(this.storageKey,(new Date).getTime())}))}fire(e){(new Image).src=e}isExpired(e){return isNaN(e)||(new Date).getTime()>e+1e3*this.syncTimeoutSeconds}}var i=n(7144),a=n(2169),o=n(338);const s=("https:"===location.protocol?"https:":"http:")+"//cm.g.doubleclick.net/pixel?google_nid=permutive_dmp&google_cm&type=ddp";class c extends r{constructor(e){super(e,"addon:ddp",86400)}async makeUrl(e,t){return(0,a.zG)(this.addGDPRParams(),i.Vn((0,o.bw)((e=>this.options.api.reportError(`Failed to make ddp url. ${e}`,t)))),i.EQ((()=>""),(n=>`${s}&k=${e}&u=${t}&${n}`)))}addGDPRParams(){return i.Y3((()=>{if("missing"===this.options.tcfStatus.type)return"gdpr=0";return`gdpr=1&gdpr_consent=${"loaded"===this.options.tcfStatus.type?this.options.tcfStatus.data.tcString:""}`}),(e=>`Failed to retrieve GDPR query params. Got ${e}`))}}const u=()=>{}},5423:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ScriptRunnerAddon:()=>ScriptRunnerAddon,load:()=>load});const load=e=>{e.q.unshift({functionName:"addon",arguments:["scriptrunner",{}]})};class ScriptRunnerAddon{permutive;options;api;activations;constructor(options){this.permutive=options.permutive,this.options=options,this.api=options.api,this.activations=this.options.activationManager.getActivations("scriptrunner");const segmentTransitions=this.options.nextGenOutput.segmentTransitionsSinceInit.current;for(let i=0;i<this.activations.length;i++){const activation=this.activations[i],triggerType=activation.getTriggerType(),segmentCode=activation.getSegmentCode(),run=activation=>{const script=activation.getConfig().script.replace(/impression\(\)/g,"activation.trackImpression();").replace(/conversion\(\)/g,"activation.trackConversion();");try{eval(script)}catch(e){e instanceof Error&&(e.message="Error running custom script: "+e.message,this.api.reportError(e,this.options.userId.get()))}};"EveryTime"===triggerType?this.permutive.segment(segmentCode,(e=>{e?run(activation):this.permutive.trigger(segmentCode,"result",(function(e){e.result&&run(activation)}))})):"OnEntry"===triggerType?segmentTransitions.segmentsEntered.includes(segmentCode)?run(activation):this.permutive.trigger(segmentCode,"result",(function(e){e.result&&run(activation)})):"OnExit"===triggerType&&(segmentTransitions.segmentsExited.includes(segmentCode)?run(activation):this.permutive.trigger(activation.getSegmentCode(),"result",(function(e){e.result||run(activation)})))}}}},6509:(e,t,n)=>{n.r(t),n.d(t,{PixelAddon:()=>u,load:()=>c});var r=n(377),i=n(338),a=n(2169),o=n(7144),s=n(132);const c=e=>{(0,r.Hn)("tracking_pixel")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["tracking_pixel",{}]})};class u{options;activations;latestStateByDomain;eligibleSegmentsForEntries;eligibleSegmentsForExits;constructor(e){const t=this;this.options=e,this.latestStateByDomain=this.options.permutiveData.getData("addon:tracking_pixel")||{},this.activations=this.options.activationManager.getActivations("tracking_pixel");const n=0===Object.keys(this.latestStateByDomain).length;this.eligibleSegmentsForEntries={},this.eligibleSegmentsForExits={};for(let e=0;e<this.activations.length;e++){const t=this.activations[e],n=t.getTriggerType(),r=t.getSegmentCode(),i=t.getConfig().pixel_url,a=this.extractPixelType(i);"OnEntry"===n?(a in this.eligibleSegmentsForEntries||(this.eligibleSegmentsForEntries[a]={}),this.eligibleSegmentsForEntries[a][r]=t):"OnExit"===n&&(a in this.eligibleSegmentsForExits||(this.eligibleSegmentsForExits[a]={}),this.eligibleSegmentsForExits[a][r]=t)}const r=e.nextGenOutput.queryLanguageCohorts.all;n&&(0,i.Z_)(e.api,e.userId,(()=>this.firePixelsIfNecessary(r.current))),r.onChange((0,i.Z_)(e.api,e.userId,(e=>t.firePixelsIfNecessary(e))))}extractPixelType(e){return e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]}firePixelsIfNecessary(e){const t=Object.keys({...this.eligibleSegmentsForEntries,...this.eligibleSegmentsForExits}),n={},r=this.eligibleSegmentsForEntries,i=this.eligibleSegmentsForExits;t.forEach((t=>{n[t]=n[t]||[];for(let a=0;a<e.length;a++){const o=e[a];(r[t]&&r[t][o]||i[t]&&i[t][o])&&n[t].push(e[a])}})),t.forEach((e=>{const t=n[e]||[],a=Array.isArray(this.latestStateByDomain[e])?this.latestStateByDomain[e]:[];for(let n=0;n<t.length;n++){const i=t[n];if(-1===a.indexOf(i)){const t=r[e]&&r[e][i];"OnEntry"===(null==t?void 0:t.getTriggerType())&&this.firePixel(t)}}for(let n=0;n<a.length;n++){const r=a[n];if(-1===t.indexOf(r)){const t=i[e]&&i[e][r];"OnExit"===(null==t?void 0:t.getTriggerType())&&this.firePixel(t)}}})),this.latestStateByDomain=n,this.options.state.setPermutiveData("addon:tracking_pixel",this.latestStateByDomain)}firePixel(e){const t=e.getConfig().tcf_vendor_id,n=e.getConfig().pixel_url;"string"==typeof t&&t.length>0?(0,a.zG)(this.addGDPRParams(new URL(n),t),s.aD((e=>this.options.api.reportError(`[tracking_pixel] Failed to create tracking pixel. ${e}`,this.options.userId.get())),(t=>{(new Image).src=t.toString(),e.trackImpression()})),(e=>e())):((new Image).src=n,e.trackImpression())}addGDPRParams(e,t){return(0,a.zG)(parseInt(t),o.DT((e=>!isNaN(e)),(()=>"Invalid tcf vendor ID")),s.Uo,s.tS((t=>s.fF((()=>new Promise((n=>{this.options.tcf.registerVendorOnValidConsent(t,(t=>{const r="gdpr";"loaded"===t.type?(e.searchParams.set(r,"1"),e.searchParams.set("gdpr_consent",t.data.tcString)):e.searchParams.set(r,"0"),n(e)}))})))))))}}},7889:(e,t,n)=>{n.r(t),n.d(t,{WebAddon:()=>E,load:()=>w});var r=n(5654),i=n(7144),a=n(2169),o=n(3052),s=n(8236),c=n(856),u=n(8778),l=n(377),d=n(338);const g=(0,l.MU)("add_alchemy_entities",!1),f=(0,l.MU)("add_alchemy_taxonomy",!1);function m(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{...e&&f?{taxonomy_labels:"$alchemy_taxonomy_labels"}:{},...e&&g?{entity_names:"$alchemy_entity_names"}:{}}}function p(e,t,n,r){const i={isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",...h(),...e,...t};n.track("Pageview",i).then((e=>{e&&r.emit("permutive:event:pageview",e)}))}function h(){return{}}var v=n(6371);const _=["mousemove","click","scroll"],y=["email","tel","submit","reset","button","file","password","radio","checkbox"],b=["email","e-mail","password","tel","telephone","phone","name_first","name_last","sa_zip"],w=e=>{(0,l.Hn)("web")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["web",{auto_init:!0}]})};class E{permutive;options;api;clientContext;logger;dirtyState=!1;cancelEngagementTimer=()=>{};totalCompletion=0;totalEngagedTime=0;pageEngagementDetected;cleanupPageEngagementDetection=a.Q1;constructor(e){this.permutive=e.permutive,this.options=e,this.api=e.api,this.clientContext=e.clientContext,this.logger=e.logger,this.options.customProperties.setCustomProps(e.page||{});this.pageEngagementDetected=(()=>{this.dirtyState=!0}).bind(this),p(m(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),this.enablePageEngagementDetection(),"loading"!==document.readyState?this.attachListeners():window.addEventListener("DOMContentLoaded",this.attachListeners.bind(this),!1),u.t2&&(this.cancelEngagementTimer=this.registerEngagementInterval(this.getEventInterval()))}sendFormSubmissionEvent(e){{const t=e.currentTarget,n={form:{method:t.method||"GET",properties:this.serializeForm(t),..."string"==typeof t.id?{id:t.id}:{},...t.name&&"string"==typeof t.name?{name:t.name}:{},...t.action&&"string"==typeof t.action?{action:t.action}:{}}};this.permutive.track("FormSubmission",n)}}async trackEngagementInterval(e){const t=this.updateState(e);!function(e,t,n,r,i,a){const o={isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",engaged_time:e,total_engaged_time:t,...i,completion:n,total_completion:r};a.track("PageviewEngagement",o)}(t.engaged_time,t.total_engaged_time,t.completion,t.total_completion,this.options.customProperties.getCustomProps(),this.permutive)}async reset(e){this.disablePageEngagementDetection(),this.dirtyState=!1;const t=this.updateWebOptions(e);this.options.pageviewState.setState(((e,n)=>{var r,i;return{viewId:(null===(r=t.context)||void 0===r?void 0:r.view_id)??(0,d.k$)(),watsonEnabled:(null===(i=t.watson)||void 0===i?void 0:i.enabled)??n.watsonEnabled}})),this.totalCompletion=0,this.totalEngagedTime=0,this.options.customProperties.setCustomProps(this.options.page||{}),this.enablePageEngagementDetection(),p(m(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),u.t2&&(this.cancelEngagementTimer(),this.cancelEngagementTimer=this.registerEngagementInterval(this.getEventInterval()))}serializeForm(e){return[...e.getElementsByTagName("input")].filter((e=>!(!e.type||!e.id||e.disabled||e.checked||"fieldset"===e.nodeName.toLowerCase()||-1!==y.indexOf(e.type.toLowerCase())||-1!==b.indexOf(e.name.toLowerCase())))).map((e=>({name:e.name||e.id,value:e.value}))).filter((e=>e.value.length<120))}registerEngagementInterval(e){return(0,v.UM)((()=>{this.dirtyState&&this.trackEngagementInterval(e)}),1e3*e)}attachListeners(){const e=e=>"a"===e.tagName.toLowerCase(),t=e=>e instanceof Element,n=t=>e(t)?(0,s.G)(t):t.parentElement?e(t.parentElement)?(0,s.G)(t.parentElement):n(t.parentElement):s.YP;u.eV&&[].slice.call(document.getElementsByTagName("form"),0).forEach((e=>e.addEventListener("submit",(0,a.ls)(s.DT(this.canTrackPermutiveEvent("FormSubmission")),s.UI((0,d.Z_)(this.options.api,this.options.userId,this.sendFormSubmissionEvent.bind(this)))))));(0,l.MU)("track_link_click",!0)&&document.body.addEventListener("click",(0,a.ls)(s.DT(this.canTrackPermutiveEvent("LinkClick")),s.UI((e=>({event:e,anchor:(0,a.zG)(e.target,s.ij,s.tS(s.DT(t)),s.tS(n))}))),s.DZ((e=>{let{event:t,anchor:n}=e;return s.pC(n)?s.G({event:t,anchor:n.value}):s.YP})),s.UI((e=>{let{event:t,anchor:n}=e;return I(this.permutive,n,(r=t,!("_blank"===n.target||r.metaKey||r.ctrlKey||r.shiftKey||2===r.which||3===r.which)));var r}))),{capture:!0})}updateState(e){const t=Math.max(this.totalCompletion,this.getCurrentCompletion()),n=t-this.totalCompletion;return this.totalEngagedTime+=e,this.totalCompletion=t,this.dirtyState=!1,{engaged_time:e,total_engaged_time:this.totalEngagedTime,completion:n,total_completion:this.totalCompletion}}getCurrentCompletion(){if("function"==typeof this.options.getPageCompletion)return(0,a.zG)((0,i.Y3)((0,a.ls)(this.options.getPageCompletion,Number,(e=>isNaN(e)?0:e),(0,c.uZ)(o.Df)(0,1)),r.w),(0,i.EQ)((e=>(this.logger.warn("Web: invoking getPageCompletion threw an error. Got",e),0)),(e=>(this.logger.debug("Web: invoking getPageCompletion returned",e),e))));return(()=>{const e=document.documentElement.scrollHeight,t=window.pageYOffset+window.innerHeight;return t<=0?0:t>=e?1:t/e})()}registerPageEngagementCleanup(e){"function"==typeof e?this.cleanupPageEngagementDetection=()=>(0,i.Y3)((()=>{e(),this.cleanupPageEngagementDetection=a.Q1}),(e=>this.logger.warn("Page detection cleanup threw an error",(0,r.w)(e)))):this.logger.warn("No page detection cleanup was registered")}enablePageEngagementDetection(){this.options.addPageEngagementDetection&&(0,a.zG)(this.options.addPageEngagementDetection(this.pageEngagementDetected),(e=>this.registerPageEngagementCleanup(e))),this.setDirtyEventListenersTo(!0,this.getDirtyEvents())}disablePageEngagementDetection(){this.cleanupPageEngagementDetection(),this.setDirtyEventListenersTo(!1,this.getDirtyEvents())}setDirtyEventListenersTo(e,t){const n=e?window.addEventListener:window.removeEventListener;return t.forEach((e=>n(e,this.pageEngagementDetected))),null}getDirtyEvents(){return this.options.dirtyEvents||_}getEventInterval(){return this.options.eventInterval||5}canTrackPermutiveEvent(e){return t=>{var n,o;return(0,a.zG)(null===(n=this.options)||void 0===n||null===(o=n.filterPermutiveEvent)||void 0===o?void 0:o[e],s.DT((e=>"function"==typeof e)),s.tS((0,a.ls)((e=>i.Y3((()=>e(t)),(e=>new Error(`Threw an unexpected error: ${(0,r.w)(e)}`)))),i.tS(i.DT((e=>"boolean"==typeof e),(()=>new Error("Did not return a boolean")))),(0,d.bw)(i.Vn((t=>this.logger.error(`Filter predicate for "${e}" event failed`,t)))),s.Uo)),s.fS((()=>!0)))}}updateWebOptions(e){(0,d.Kn)(e)||(e={}),e.watson&&"object"==typeof e.watson&&"enabled"in e.watson&&"boolean"==typeof e.watson.enabled||delete e.watson,"object"==typeof e.filterPermutiveEvent&&null!==e.filterPermutiveEvent||delete e.filterPermutiveEvent,"context"in e&&!(0,d.Kn)(e.context)&&delete e.context;const t={addPageEngagementDetection:void 0,context:void 0,dirtyEvents:void 0,eventInterval:void 0,filterPermutiveEvent:void 0,getPageCompletion:void 0,page:void 0,watson:void 0};return this.options={...this.options,...t,...e}}}const I=(e,t,n)=>{if(window.location.href&&t.href){const r=0===t.href.indexOf("data:")?"NOT_URL":t.href;e.track("LinkClick",{dest_url:r},{useBeacon:n})}}},3994:(e,t,n)=>{n.d(t,{a:()=>r});class r{messages;handlers={};messageQueue={};constructor(e){var t,n;this.messages=e;null===(t=(n=window).addEventListener)||void 0===t||t.call(n,"message",(e=>{var t;"permutive"===(null==e||null===(t=e.data)||void 0===t?void 0:t.origin)&&this.handle(e)}),!1),this.messages.once("permutive:api:ready",(function(){var e,t;null===(e=(t=window).postMessage)||void 0===e||e.call(t,{origin:"permutive",type:"sdk-init"},"*")}))}listen(e,t){if(e in this.handlers||(this.handlers[e]=[]),this.handlers[e].push(t),e in this.messageQueue){const t=this.messageQueue[e];if(void 0===t)return;for(let e=0;e<t.length;e++){const n=t[e];this.handle(n)}}}handle(e){if(e.data.type in this.handlers)this.handlers[e.data.type].forEach((t=>{t(e)}));else{(this.messageQueue[e.data.type]??=[]).push(e)}}}},7537:(e,t,n)=>{n.d(t,{o:()=>r,s:()=>i});class r extends Error{static errorName="NetworkRequestFailedError";name=r.errorName;constructor(){super(r.defaultMessage)}static get defaultMessage(){return"Network request failed"}}class i extends Error{static errorName="NetworkRequestTimeoutError";name=i.errorName;constructor(){super(i.defaultMessage)}static get defaultMessage(){return"Network request timed out"}}},4338:(e,t,n)=>{n.d(t,{F:()=>d});var r=n(5654),i=n(2169),a=n(8236),o=n(7812),s=n(6853),c=n(7537),u=n(4694);class l{urls;config;network;metricsCollector;logger;webClient;prefix="[API]";constructor(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:()=>a.YP;this.urls=e,this.config=t,this.network=n,this.metricsCollector=r,this.logger=i,this.webClient=o}async reportError(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;const l=(0,r.w)(e);if(this.logError("Reporting error:\n",l),!this.config.sendClientErrors)return void this.logDebug("Send errors not enabled. Skipping");const d=(0,i.zG)(this.webClient,u.UI(a.fS((()=>{var e,t,n,r;return{domain:(null===(e=self.location)||void 0===e?void 0:e.hostname)??"",referrer:"document"in self?null===(t=self.document)||void 0===t?void 0:t.referrer:"",url:(null===(n=self.location)||void 0===n?void 0:n.href)??"",user_agent:(null===(r=navigator)||void 0===r?void 0:r.userAgent)??""}}))),u.UI((e=>{var r,i;const a={error_message:(null==l||null===(r=l.message)||void 0===r?void 0:r.toString())??"",stack_trace:null==l||null===(i=l.stack)||void 0===i?void 0:i.split("\n")},o=t?{user_id:t}:{};return{platform:"web",sdk_version:"v20.41.1",ql_runtime_version:"v14.1.0",timestamp:n,domain:e.domain,url:(0,s.bk)(e.url),referrer:(0,s.bk)(e.referrer),user_agent:e.user_agent,error_message:a.error_message??String(l),stack_trace:a.stack_trace,...o}}))),g=e=>this.network.req({url:this.urls.getSdkErrorsUrl("/errors",a.G(this.config.sdkErrorsApiVersion)),method:"POST",payload:[e],contentType:"text/plain",dataType:"text",withCredentials:!1}),f=e=>{this.metricsCollector.trackCounter({name:"sdk_http_generic_network_request_fail_count_total",value:1,labels:{network_error_type:e}})};await(0,i.zG)([c.o,c.s],o.Ew((e=>l.name===e.errorName||l.message.indexOf(e.errorName)>=0||l.message.indexOf(e.defaultMessage)>=0)),a.g_((()=>{const e=d();return g(e).catch((0,i.ls)(r.w,(e=>this.logError(e))))}),(async e=>f(e.errorName))))}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(this.prefix,...t)}logError(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(this.prefix,...t)}}class d extends l{identifyPromise;identify(e,t,n){const r=()=>this.reqWithMetrics(e,"sdk_http_identify_seconds",{url:this.urls.getEndpointUrl("/identify",a.G(this.config.apiVersion)),method:"POST",payload:{user_id:t.get(),aliases:n},contentType:"text/plain",dataType:"json",withCredentials:!0});return this.identifyPromise?this.identifyPromise=this.identifyPromise.then(r):this.identifyPromise=r()}metrics(e){return this.network.req({url:this.urls.getEndpointUrl("/internal/metrics",a.G(this.config.apiVersion)),method:"POST",payload:e,contentType:"text/plain",dataType:"text",withCredentials:!1})}metricsBeacon(e){return this.network.reqWithBeacon({url:this.urls.getEndpointUrl("/internal/metrics",a.G(this.config.apiVersion)),payload:e})}reset(e){return this.reqWithMetrics(e,"sdk_http_reset_seconds",{url:this.urls.getEndpointUrl("/reset",a.G(this.config.apiVersion)),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}segmentSync(e){return this.network.req({url:`https://${this.config.segmentSyncApiHost}/sync/${e.key}`,method:"POST",payload:`value=${encodeURIComponent(e.value)}`,contentType:"application/x-www-form-urlencoded",dataType:"json",withCredentials:!0})}appnexus(e){return this.network.req({url:e,method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}pxid(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}queries(){const e={addons:{dfp:{activations:{dfp:[],dfp_legacy:{}},auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!1,track_slot_clicked:!1,track_targeting_keys:!1,sync_segments_cookie:!1},web:{auto_init:!1,track_pageview_engagement:!0,track_pageview_complete:!0,track_form_submission:!1,track_link_click:!1,engagement_edge_only:!0,segment_transition_edge_only:!1}},queries:{queries:{},eventSegments:{},eventsLookup:[],literalsLookup:[],subexpressionsLookup:[],stateSyncReplays:[],propertiesLookup:[],ahoCorasickLookup:[]},queries_metadata:{}},t=`${this.config.cdnBaseUrl.startsWith("dev.local:")?"http":"https"}://${this.config.cdnBaseUrl}/queries/e1c3fd73-dd41-4abd-b80b-4278d52bf7aa-amp.json`;return this.network.req({url:t,withCredentials:!1,dataType:"json",method:"GET"}).catch((()=>e))}pxidReset(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}uploadCohortMemberships(e,t){return this.reqWithMetrics(e,"sdk_http_upload_cohort_memberships_seconds",{url:this.urls.getCCSCohortMembershipEndpointUrl("/amp/cohorts",a.G("alpha"),[["i",t.user_id]]),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}reqWithMetrics(e,t,n){const r=e.startTimer(t,{});return this.network.req(n).then((n=>(0,i.zG)(e.stopTimer(t,r),(e=>n))))}}},8019:(e,t,n)=>{n.d(t,{E:()=>y});var r=n(7144),i=n(2169),a=n(7537),o=n(6371),s=n(8236),c=n(8614),u=function(e){return"Left"===e._tag},l=function(e){return"Right"===e._tag};function d(e){return{_tag:"Left",left:e}}function g(e){return{_tag:"Right",right:e}}function f(e,t){return{_tag:"Both",left:e,right:t}}var m=function(e,t,n){return function(r){switch(r._tag){case"Left":return e(r.left);case"Right":return t(r.right);case"Both":return n(r.left,r.right)}}},p=m;p(g,d,(function(e,t){return f(t,e)}));var h=g,v="These",_=(i.yR,i.yR,c.Xl,n(338));class y{metrics;constructor(e){this.metrics=e}req(e){return this.reqImpl(e).then((e=>(0,i.MZ)(e)))}reqWithBeacon(e){var t,n;let{url:r,payload:i}=e;const a=JSON.stringify(i),o=(null===(t=navigator)||void 0===t||null===(n=t.sendBeacon)||void 0===n?void 0:n.call(t,r,JSON.stringify(i)))??!1;return this.trackRequestMetrics({is_beacon:!0,is_error:!o,request:{method:"POST",url:r,content_length:a.length}}),o}reqImpl(e){const t="arraybuffer",{url:n,dataType:u,contentType:l,method:d,withCredentials:m,timeout:p}=e;return new Promise(((h,v)=>{const y=new XMLHttpRequest,b="POST"===e.method?"string"==typeof(w=e.payload)?w:JSON.stringify(w):null;var w;const E=e=>this.trackRequestMetrics({is_beacon:!1,request:{method:d,url:n,content_length:(null==b?void 0:b.length)??0},response:e});y.onload=(0,o.GL)((()=>{var e,n;return(0,i.zG)(y.status,r.DT((e=>e<400),(()=>{const e="text"===y.responseType||""===y.responseType?y.responseText:"Couldn't access response text";return`Failed ajax request. Status code was ${y.status}. ${e}`})),r.tS((()=>"json"===u?y.responseText?r.Y3((()=>JSON.parse(y.responseText)),(e=>`Failed to parse response as JSON. Response was ${JSON.stringify(y.responseText)}. Got ${e}`)):r.F2(null):"text"===u?r.F2(y.responseText):r.F2(y.response))),(0,_.bw)((0,i.ls)(s.IS,(n={content_length:"text"===y.responseType||""===y.responseType?(null===(e=y.responseText)||void 0===e?void 0:e.length)??0:y.responseType===t?y.response.byteLength:0,response_time_ms:self.performance.now()-I,status_code:y.status},function(e){return c.Wi(e)?g(n):f(e.value,n)}),E)),r.EQ(v,h))})),y.onerror=(0,o.GL)((()=>{E(r.t$("network error")),v(new a.o)})),y.ontimeout=(0,o.GL)((()=>{E(r.t$("timeout")),v(new a.s)})),y.open(d,n,!0),l&&y.setRequestHeader("content-type",l),y.timeout=p||y.timeout,y.withCredentials=m||y.withCredentials,y.responseType="binary"===u?t:y.responseType;const I=self.performance.now();y.send(b)}))}trackRequestMetrics(e){var t;if(null===(t=this.metrics)||void 0===t||!t.isEnabled())return;const n=new URL(e.request.url).pathname;if(n.includes("metrics"))return;const r=t=>this.metrics.track({name:"sdk_http_request_count_total",value:1,labels:{request_method:e.request.method,request_path:n,request_content_length:e.request.content_length,...t}});var a;!0===e.is_beacon?r({is_beacon:!0,is_error:e.is_error}):(0,i.zG)((a=e.response,u(a)?c.YP:(l(a),c.G(a.right))),s.aD((()=>({})),(e=>({response_content_length:e.content_length,response_status:e.status_code,response_time_ms:e.response_time_ms}))),(t=>({is_beacon:!1,is_error:!l(e.response),...t})),r)}}},1553:(e,t,n)=>{n.r(t),n.d(t,{startMaster:()=>ue});var r=n(9792),i=n(2169),a=n(3506),o=n(8236),s=n(7812),c=n(338),u=n(4694),l=n(6450),d=n(2945),g=n(4327),f=n(6377);var m=n(2678),p=n(6335),h=n(6289),v=n(7049);function _(e,t){return function(n){return e.map(n,t.compact)}}function y(e,t,n){var r=_(e,t),a=(0,h.UI)(e,n);return function(e){return v.s4(r((0,i.zG)(e,a(o.IS))),r((0,i.zG)(e,a(o.EK))))}}function b(e,t){return function(n){return function(r){return e.map(r,(function(e){return t.filter(e,n)}))}}}function w(e,t){return function(n){return function(r){return e.map(r,(function(e){return t.filterMap(e,n)}))}}}function E(e,t){var n=b(e,t);return function(e){var t=n((0,g.ff)(e)),r=n(e);return function(e){return(0,v.s4)(t(e),r(e))}}}function I(e,t){var n=w(e,t);return function(e){return function(t){return(0,v.s4)((0,i.zG)(t,n((function(t){return(0,o.IS)(e(t))}))),(0,i.zG)(t,n((function(t){return(0,o.EK)(e(t))}))))}}}var S=n(8614);function k(e){return(0,i.ls)(o.G,e.of)}function P(e){return(0,i.a9)(e.of(o.YP))}function C(e){return function(t){return e.map(t,o.G)}}function G(e){return(0,i.ls)(o.ij,e.of)}function U(e){var t=G(e);return function(e){return(0,i.ls)(e,t)}}function A(e){var t=B(e),n=U(e);return function(e){return t(n(e))}}function L(e){return function(t){return(0,i.ls)(t,e.of)}}function D(e){var t=B(e),n=L(e);return function(e){return t(n(e))}}function M(e){return function(t){return function(n){return e.of(o.DT(t)(n))}}}function z(e){return(0,i.ls)(o.Uo,e.of)}function x(e){return function(t,n){return function(r){return e.map(r,o.EQ(t,n))}}}function T(e){return function(t,n){return function(r){return e.chain(r,o.EQ(t,n))}}}function O(e){return function(t){return function(n){return e.chain(n,o.EQ(t,e.of))}}}function q(e){return(0,h.UI)(e,o.dO)}function R(e){return(0,d.ap)(e,o.G5)}function B(e){var t=P(e);return function(n){return function(r){return e.chain(r,o.EQ((function(){return t()}),n))}}}function F(e){var t=k(e);return function(n){return function(r){return e.chain(r,o.EQ(n,t))}}}var N=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},j=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},K=k(m.PM),W=(m.PM,m.of,m.PM,m.dO,m.UI(o.Uo)),H=(m.dO,m.qo,m.UA,m.PM,function(e){return function(){return N(void 0,void 0,void 0,(function(){return j(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e().then(S.G)];case 1:return[2,t.sent()];case 2:return t.sent(),[2,S.YP];case 3:return[2]}}))}))}}),Q=(m.PM,m.UA,m.PM,m.UA,q(m.dO)),Y=R(m.Hi),V=K,$=B(m.UA),J=(m.UA,m.PM,m.dO,o.Ri,m.dO,o.Ri,o.dO,m.dO,o.xu,m.dO,o.xu,m.dO,o.xu,m.dO,o.xu,function(e,t){return(0,i.zG)(e,Q(t))}),Z=function(e,t){return(0,i.zG)(e,Y(t))},X=function(e,t){return(0,i.zG)(e,$(t))},ee="TaskOption",te={URI:ee,map:J},ne={URI:ee,map:J,ap:Z,chain:X},re=(S.F4,(0,h.YO)(te)),ie=(0,p.a)(ne),ae=(S.Xl,n(6371)),oe=n(3643);const se=(e,t)=>{const[n,a]=r.gS(s.uZ());return(0,i.zG)(t,r.UI(u.UI((t=>{s.Od(t)&&e.all().then((e=>(0,i.zG)(t,s.UI((0,oe.H5)((()=>e))),a)))}))),r.UI((e=>e()))),n},ce=(e,t)=>{let n=!1;return r.UI(u.UI((0,c.bw)((r=>{n||(n=(0,i.zG)(r,s.G((e=>{let[,t]=e;return"Pageview"===t.name}))),n&&e.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:t,time_origin:"sdk_init"}))}))))};function ue(e){let{eventsCacheFactory:t,metrics:p,trace:h,migratedStateMaps:v,worker:_,...y}=e;return e=>a.dQ((0,i.ls)((0,c.rO)({previousState:le}),(a=>{let{stopped:c,previousState:b}=a;(0,i.zG)(c,r.YP((e=>e&&_.stop()))),_.send({...y,migratedStateMaps:b.stateMigrated?{external:o.YP,internal:o.YP}:v(),previousState:b.workerState}),h.measureSinceInit("post_worker_config_duration").finish(),p.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"master_sent_worker_config",time_origin:"sdk_init"},performance.now());const w=h.startSpan("worker_config_response_duration"),E=_.next();E.then((()=>{w.finish(),p.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"master_received_worker_config_response",time_origin:"sdk_init"},performance.now())}));const I=((e,t)=>{const a=(0,i.zG)((()=>t),m.UI((e=>o.lo(!e))),$((()=>W(e()))),re("eventsCache"),ie("eventsCacheService",(()=>(0,i.zG)((0,ae.N1)(H((()=>Promise.resolve().then(n.bind(n,9612))))),Q((e=>e.eventCacheService)))))),c=a();return e=>{let{priorCachedEventsRequests:t,...n}=e;return e=>{let{previousState:a,stopped:l}=e;const d=r.a9(u.of(s.bM())),[g,f]=r.Ue({eventsToPublish:r.a9(u.of(s.bM())),priorCachedEventsResponses:d,state:r.a9(a)});return c.then(o.EQ((()=>f({eventsToPublish:n.eventsToPublish,priorCachedEventsResponses:d,state:r.a9(void 0)})),(e=>{let{eventsCache:r,eventsCacheService:i}=e;const{state:o,value:{newEvents:s}}=i({eventsCache:r,newEvents:n.eventsToPublish})({previousState:a,stopped:l});f({eventsToPublish:s,priorCachedEventsResponses:se(r,t),state:o})}))),{state:(0,i.zG)(g,r.VS((e=>e.state))),value:(0,i.bc)((0,i.zG)(g,r.VS((e=>e.priorCachedEventsResponses))),{...n,eventsToPublish:(0,i.zG)(g,r.VS((e=>e.eventsToPublish)))})}}}})(t,E.then((e=>e.eventsCachedInWorker)));return(0,i.zG)((()=>_.read()),function(e,t){const n=e=>(0,i.zG)(e,l.Hd((e=>e in t)),(e=>{let{left:t,right:n}=e;return{buffers:n,nonBuffers:t}}));return a=>{const{buffers:o,nonBuffers:s}=n(e),[c,u]=r.Ue({...s,...(0,i.zG)(o,l.Su((e=>()=>{const n=o[e];return o[e]=t[e].empty,n})))});return(async()=>{for(;;){const e=(0,i.zG)(await a(),f.UI(n),f.ur({concat:(e,n)=>({nonBuffers:{...e.nonBuffers,...n.nonBuffers},buffers:(()=>{const r={...e.buffers};for(const e in n.buffers)r[e]=e in r?t[e].concat(r[e],n.buffers[e]):n.buffers[e];return r})()})})),r=(0,i.zG)(e.buffers,l.Su(((e,n)=>(o[e]=t[e].concat(o[e],n),()=>{const n=o[e];return o[e]=t[e].empty,n}))));u({...c.current,...e.nonBuffers,...r})}})(),(0,i.zG)(e,l.Su((e=>(0,i.zG)(c,r.UI((t=>t[e]))))))}}({activations:b.activations,cohorts:b.cohorts,context:{},eventsToPublish:s.cS,eventsToPublishOnPageUnload:s.cS,externalData:{},geoIP:o.YP,metrics:s.cS,priorCachedEventsRequests:s.cS,realtime:!1,state:b.workerState,transitionsSinceInit:{segmentsEntered:s.cS,segmentsExited:s.cS},workerStateFlushed:!1,stateMigratedThisInitialisation:!1,secureSignal:o.YP},{eventsToPublish:s.uZ(),metrics:s.uZ(),priorCachedEventsRequests:s.uZ()}),(e=>{let{metrics:t,...n}=e;return t.onChange((e=>e().forEach((e=>p.track(e))))),n}),(t=>{let{workerStateFlushed:n,stateMigratedThisInitialisation:a,activations:f,cohorts:m,state:h,secureSignal:v,...y}=t;const{value:[w,E],state:S}=I(y)({stopped:c,previousState:b.masterEventsCache});return function(e,t,n){const a=(0,i.zG)(r.vP(t),r.UI((0,i.ls)(l.UI((e=>"function"==typeof e?e:u.of(e))),(0,d.Yt)(u.G5))));let s=a.current();e(s),(0,i.zG)(a,r.YP((t=>{const r=t(),a=(0,i.zG)(r,l.z7(((e,t)=>{var r;return t!==s[e]&&(null===(r=n[e])||void 0===r||!r.isEmpty(t))})),o.DT((0,g.ff)(l.xb)));o.pC(a)&&(s={...s,...a.value},e(a.value))})))}(_.send,{consent:e.consent,contextualCohorts:e.contextualCohorts,enrichmentReplacementMap:e.enrichmentReplacementMap,eventSourceId:e.eventSourceId,identities:e.identities,userId:e.userId,userIdIsNewlyGenerated:e.userIdIsNewlyGenerated,newEvents:(0,i.zG)(e.newEvents,ce(p,"pageview_sent_to_worker")),sessionId:e.sessionId,viewId:e.viewId,webClient:e.webClient,pageviewState:e.pageviewState,priorCachedEventsResponses:w},{newEvents:{isEmpty:s.xb},priorCachedEventsResponses:{isEmpty:s.xb}}),p.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"master_sent_worker_input",time_origin:"sdk_init"},performance.now()),{state:r.vP({activations:f,cohorts:m,masterEventsCache:S,workerState:h,stateMigrated:(0,i.zG)(r.vP(n,a),r.Rp(b.stateMigrated,((e,t)=>{let[n,r]=t;return e||n&&r})))}),value:{...E,stateMigratedThisInitialisation:a,activations:f,cohorts:{all:r.UI((e=>e.all),m),ql:r.UI((e=>e.ql),m),qlCustom:r.UI((e=>e.qlCustom),m),qlStandard:r.UI((e=>e.qlStandard),m)},secureSignal:v}}}))})))}const le=e=>pe(e)?{activations:de(e.activations),cohorts:fe(e.cohorts),masterEventsCache:e.masterEventsCache,workerState:e.workerState,stateMigrated:!!e.stateMigrated}:{activations:de(null),cohorts:fe(null),masterEventsCache:null,workerState:null,stateMigrated:!1},de=e=>pe(e)?{dfp:me(e.dfp),dfp_contextual:void 0,xandr_ssp:me(e.xandr_ssp),xandr_ssp_contextual:void 0}:ge(),ge=()=>({dfp:s.cS,dfp_contextual:void 0,xandr_ssp:s.cS,xandr_ssp_contextual:void 0}),fe=e=>pe(e)?{all:me(e.all),ql:me(e.ql),qlCustom:me(e.qlCustom),qlStandard:me(e.qlStandard)}:he(),me=e=>Array.isArray(e)?e:s.cS,pe=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),he=()=>({all:s.cS,ql:s.cS,qlCustom:s.cS,qlStandard:s.cS})},7491:(e,t,n)=>{n.r(t),n.d(t,{runNextGenFeatures:()=>_t});var r=n(2169),i=n(9792),a=n(3506),o=n(6371),s=n(8236),c=n(338);function u(e){let{messages:t}=e;const[n,r]=i.Ue(new Set);return t.on("permutive:addon:preinit",(e=>r(new Set([...n.current,e])))),n}function l(){const e=()=>Math.floor(Date.now()/1e3),[t,n]=i.Ue(e());return(0,o.UM)((()=>n(e())),1e3),t}function d(){const[e,t]=i.Ue(!1);return(0,c.aT)((()=>t(!0)),navigator.userAgent),e}var g=n(7812),f=n(5654),m=n(7144),p=n(6377),h=n(5086),v=n(6450),_=n(7049),y=n(377);const b="[PrebidJS]";function w(e){const t=(()=>{const e=["pbjs",...window._pbjsGlobals||[]];return[...new Set(e)]})();e.logger.debug(b,"Found keys",t);return a.K4((()=>(0,r.zG)(t,g.UI((0,r.ls)((e=>(e=>{const t={maxAttempts:100,waitTimeInMs:50};let n;return{windowPropertyKey:e,pbjs:(0,c.a4)((()=>n),(()=>{const t=(0,r.zG)(window,(0,c.vg)(e));return!(null==t||!t.que||"function"!=typeof(null==t?void 0:t.getEvents)||(n=t,0))}),t)}})(e)),(t=>(0,r.zG)(i.p4(t.pbjs),i.UI((n=>{const i=m.pF((n=>(n.message=`Failed to resolve key "${t.windowPropertyKey}". ${n.message}`,e.reportError(`${b} ${n.toString()}`),s.YP)));return(0,r.zG)(n,(0,c.bw)(s.UI((n=>e.logger.debug(b,`Completed check for key "${t.windowPropertyKey}"`,{result:n})))),s.UI(i),s.UI(s.UI((e=>({windowPropertyKey:t.windowPropertyKey,pbjs:e})))))})))))),(e=>i.vP(...e)),i.UI((e=>({completedChecks:e.every(s.pC),pbjsKeyPairs:e.map(s.xH)}))),i.UI((e=>{let{pbjsKeyPairs:t,completedChecks:n}=e;const i=t.filter(s.pC),[a,...o]=i;return{completedChecks:n,mainPair:a??s.YP,otherPairs:(0,r.zG)(o,g.DZ(r.yR))}})))))}const E="[Prebid Monitoring]",I=(e,t)=>{e.metrics.trackCounter({name:"sdk_prebid_monitoring_key_flag_count_total",labels:t,value:1})},S=(e,t)=>{e.metrics.trackCounter({name:"sdk_prebid_monitoring_key_bidder_flag_count_total",labels:t,value:1})},k=function(e,t){const n=P(e);return a.K4((()=>(0,r.zG)(t,i.UI((0,r.ls)(s.DT((e=>e.consent)),s.UI((e=>e.prebidJS)))),i.D8(s.Eh((0,c.Or)())),i.bw((0,r.ls)(s.tS((e=>e.completedChecks?e.mainPair:s.YP)),s.UI((t=>I(e,{flag:"prebid_main_key",prebid_key:t.windowPropertyKey}))))),i.UI(s.UI((e=>(0,r.zG)(e.mainPair,s.UI((t=>[t,...e.otherPairs])),s.fS((()=>e.otherPairs)))))),i.Rp(new Set,((t,i)=>(0,r.zG)(i,s.UI(g.hX((e=>!t.has(e.windowPropertyKey)))),s.hX(g.Od),(0,c.bw)(s.EQ((()=>e.logger.debug(E,"Nothing to report")),(t=>e.logger.debug(E,"Reporting",t)))),s.fS((()=>[])),g.UI((t=>(0,r.zG)((t=>(0,r.zG)(m.Y3((function(){var n;const{pbjs:i,windowPropertyKey:a}=t;e.logger.log(E,`Reporting on "${a}"`,t);const o=C(i);e.logger.debug(E,`Version ${i.version} parsed as`,o);const s=(e=>"function"==typeof e.readConfig?e.readConfig():e.getConfig())(i);e.logger.debug(E,"Read config",s);const c=(0,r.zG)((null===(n=s.realTimeData)||void 0===n?void 0:n.dataProviders)??[],g.Ew((e=>"permutive"===e.name)));return e.logger.debug(E,"Read data provider config",c),{pbjs:i,config:s,dataProviderConfig:c,installedModules:i.installedModules||[],version:o,windowPropertyKey:a}}),f.w),m.ak("bidders",(e=>n.acBidders(e))),m.ak("permutiveRTDProvider",(e=>n.permutiveRTDProvider(e))),m.ak("consent",(e=>n.consent(e))),m.ak("targeting",(e=>n.targeting(e)))))(t),m.Pd((n=>e.reportError(`[Prebid Monitoring] Failed to report pair "${t.windowPropertyKey}", ${n.message}`)),(()=>t.windowPropertyKey))))),g.hp,(e=>new Set([...t,...e]))))),(e=>({reportedKeys:e})))))};const P=e=>({acBidders:t=>m.Y3((()=>{(0,y.Hn)("prebid")("data_provider_config",{ac_bidders:[]});const n=[],i=(0,r.zG)(t.dataProviderConfig,s.UI((e=>{var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.acBidders)??[]})),s.fS((()=>[]))),a=[...new Set([...n,...i])];return e.logger.debug(E,"Determined acBidders as",{acBidders:a,dynamicBidders:n,staticBidders:i}),a.forEach((n=>{S(e,{flag:"prebid_ac_bidder",prebid_key:t.windowPropertyKey,prebid_bidder:n})})),{acBidders:a,dynamicBidders:n,readBidders:i}}),f.w),consent:t=>m.Y3((()=>{var n,r,i,a,o,s;const c=t.windowPropertyKey;t.config.consentManagement&&"object"==typeof t.config.consentManagement&&I(e,{prebid_key:c,flag:"prebid_has_consent_management"});const u=t.installedModules.includes("gdprEnforcement");u&&I(e,{prebid_key:c,flag:"prebid_gdpr_enforcement_module"});const l=(null===(n=t.config)||void 0===n||null===(r=n.consentManagement)||void 0===r||null===(i=r.gdpr)||void 0===i||null===(a=i.rules)||void 0===a||null===(o=a.find((e=>"storage"===(null==e?void 0:e.purpose))))||void 0===o||null===(s=o.vendorExceptions)||void 0===s?void 0:s.includes("permutive"))||!1;return l&&I(e,{prebid_key:c,flag:"prebid_storage_exception"}),{hasGDPREnforcementModule:u,addedAsStorageException:l}}),f.w),permutiveRTDProvider:t=>m.Y3((()=>{const n=t.installedModules.includes("permutiveRtdProvider");return n&&I(e,{prebid_key:t.windowPropertyKey,flag:"prebid_permutive_rtd"}),n}),f.w),targeting:t=>{const n=(0,r.ls)(g.UI((e=>[e,null])),v.sq),i=(t,n)=>(0,r.zG)(t,(0,c.bw)((t=>e.logger.debug(E,`Processing ${t.length} bidder request(s)`,t))),g.hX((e=>n.hasOwnProperty(e.bidderCode)&&null===n[e.bidderCode])),p.vM((e=>e.bidderCode)),v.DZ(g.f2((0,c.lo)([[e=>(e=>{var t,n,r;const i=null==e||null===(t=e.user)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.find((e=>"permutive.com"===e.name));return!(null==i||null===(r=i.segment)||void 0===r||!r.length)})(e.ortb2),()=>s.G("ortb2")],[e=>{return t=e.params,["permutive","p_standard"].some((e=>{var n,r,i,a;return(null==t||null===(n=t.visitor)||void 0===n||null===(r=n[e])||void 0===r?void 0:r.length)||(null==t||null===(i=t.keywords)||void 0===i||null===(a=i[e])||void 0===a?void 0:a.length)}));var t},()=>s.G("params")],()=>s.YP]))),(0,c.bw)((t=>e.logger.debug(E,"Bidders targeting method's updated",t)))),a=a=>{e.logger.debug(E,"Bidders found with no targeting method",a);let o=n(a);const s=n=>(0,r.zG)(i([n],o),(0,c.bw)((e=>{o={...o,...e}})),(0,c.bw)(v.Su(((n,r)=>S(e,{flag:`prebid_${r}_targeting_success`,prebid_key:t.windowPropertyKey,prebid_bidder:n})))),(0,c.bw)((()=>{Object.values(o).includes(null)||(e.logger.debug(E,`Cleaning up "bidRequested" listener for ${t.windowPropertyKey}`),t.pbjs.offEvent("bidRequested",s))})));t.pbjs.onEvent("bidRequested",s)};return m.Y3((()=>{const o=(0,r.zG)(t.pbjs.getEvents(),g.DZ((0,r.ls)(s.DT((e=>"bidRequested"===e.eventType)),s.UI((0,c.vg)("args")))));return(0,r.zG)(t.bidders.acBidders,s.DT(g.Od),s.EQ((()=>e.logger.debug(E,"No bidders for targeting")),(0,r.ls)(n,(e=>({...e,...i(o,e)})),v.uK(h.ff((e=>null===e))),_.Pd((0,r.ls)(v.XP,s.DT(g.Od),s.UI(a)),v.Su(((n,r)=>S(e,{prebid_bidder:n,prebid_key:t.windowPropertyKey,flag:`prebid_${r}_targeting_success`})))))))}),f.w)}}),C=e=>{const[t,n,r]=e.version.split("-")[0].replace("v","").split(".").map((e=>parseInt(e)));return{major:t,minor:n,patch:r}},G=function(e,t){const n=(0,r.zG)(t.pbjs,i.VS((0,r.ls)(s.tS(s.KQ((e=>{var t;return null===(t=e.getUserIdsAsync)||void 0===t?void 0:t.call(e).then((()=>{var t;return(null===(t=e.getUserIdsAsEids)||void 0===t?void 0:t.call(e))??[]}))}))),s.UI(i.p4),s.fS((()=>i.a9(s.YP))))),i.UI(s.tS(s.Uo)),i.bw(s.mU((t=>(t.length>0?t.forEach((t=>{e.metrics.trackCounter({name:"sdk_prebid_alternative_identifiers_count_total",labels:{alternative_user_id_name:t.source},value:1})})):e.metrics.trackCounter({name:"sdk_prebid_alternative_identifiers_count_total",labels:{identifier:"NONE"},value:1}),s.YP))))),o=(0,r.zG)(t.pbjs,i.UI(s.tS(s.KQ((e=>{var t;return null===(t=e.getUserIdsAsEids)||void 0===t?void 0:t.call(e)})))));return a.K4((()=>(0,r.zG)(i.vP(n,o),i.UI((e=>{let[t,n]=e;return(0,r.zG)(t,s.wp((()=>n)))})),i.UI((0,r.ls)(s.UI(g.DZ((e=>{var t,n;return"string"==typeof(null===(t=e.uids)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.id)?s.G((0,r.bc)(e.source,{id:e.uids[0].id})):s.YP}))),s.tS(p.c2),s.UI(v.sq))),i.bw((t=>{s.pC(t)&&e.logger.debug("[Prebid Identifiers]","Found identifiers",t.value)})))))};const U=function(e){let{externalData:t}=e;return a.K4((()=>{t.removeExternalData(A)}))};const A="_pfws",L=new Set(["AdRequest","Reaction","PageviewEngagement","SegmentEntry","SegmentExit"]);class D{events;listeners;static highVolumeEvents=(()=>{const e=new Set([...L]);return e.delete("Reaction"),e})();constructor(){this.events=[],this.listeners=[]}newEvent(e,t){D.highVolumeEvents.has(e.name)||this.events.push([e,t]),[...this.listeners].forEach((n=>{this.handle(e,t,n)}))}addListener(e){this.listeners.push(e);const t={replay:()=>(this.replay(e),t),remove:()=>(this.remove(e),t)};return t}handle(e,t,n){const r="string"==typeof n.name&&e.name===n.name,i=n.name.test&&n.name.test(e.name),a=r||i;if(a)try{n.callback(e,t)}catch(e){window.console&&window.console.error&&window.console.error("callback error: ",e)}a&&n.once&&this.remove(n)}replay(e){let t=-1!==this.listeners.indexOf(e);for(let n=0;n<this.events.length&&t;n++)this.handle(this.events[n][0],this.events[n][1],e),t=-1!==this.listeners.indexOf(e)}remove(e){const t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}}var M=n(4694),z=n(2945);var x=n(3643),T=n(132),O=n(2678);const q="[Event Upload]",R=(e,t,n,s)=>a.dQ((a=>{let{stopped:u,previousState:l}=a;Array.isArray(l)&&(0,r.zG)(l,g.UI((0,x.H5)((0,c.rO)({event:(0,c.rO)({time:Q})}))),K(e))();const d=new Set([...L]),[f,{appendUntrackedEvents:p,appendUploadResults:h}]=(0,r.zG)((()=>{const[e,t]=i.gS(g.uZ()),[n,a]=i.gS(g.uZ());return(0,r.bc)({uploadResults:e,untrackedEvents:n},{appendUploadResults:t,appendUntrackedEvents:a})})(),(0,x.pL)((0,r.ls)((function(e){const[t,n]=(0,r.zG)(e.uploadResults,W(g.bj));return{...e,uploadResults:t,erroredEventsAsJSON:n}}),(function(e){const[t,n]=(0,r.zG)(e.erroredEventsAsJSON,W(g.UI((0,x.H5)((0,c.rO)({event:(0,c.rO)({time:e=>new Date(e)})})))));return{...e,erroredEventsAsJSON:t,erroredEvents:n}}),(function(e){let{uploadResults:t,untrackedEvents:n,...a}=e;const o=(0,r.zG)(t,i.UI(M.UI((0,r.ls)(g.hp,g.UI((0,x.H5)((0,c.rO)({time:e=>new Date(e)}))))))),s=(0,r.zG)(i.vP(o,n),i.UI(M.RD),i.UI(M.UI((e=>{let[t,n]=e;return n.concat(t)}))));return{...a,successEvents:s}}),(function(e){const[t,n]=(0,r.zG)(e.successEvents,W(g.UI((0,x.H5)((0,c.rO)({time:e=>e.toISOString()})))));return{...e,successEvents:t,successEventsAsJSON:n}})))),[v,_]=i.Ue(0),[y,b]=i.Ue(0),w=(0,r.zG)(t,i.UI(M.UI((e=>(0,r.zG)(e,g.uK((e=>{let[,t]=e;return!d.has(t.event.name)})),(e=>{let{left:t,right:n}=e;return(0,r.zG)(t,g.UI((0,x.H5)((e=>e.event))),p),n}))))),i.UI(M.UI((e=>(e.length>0&&((0,o.HJ)((()=>_(v.current+e.length)),500),(0,o.HJ)((()=>b(y.current+e.length)),5e3)),e))))),E=e=>t=>(0,r.zG)(e,g.hX((e=>{let[n]=e;return!t.closeEventsProcessed.includes(n)})),g.zo(t.queue)),I=(0,r.zG)(i.vP(v,y,w,n,u,s),i.Rp({closeEventsProcessed:g.cS,noQueueItemsProcessed:0,queue:g.cS},((t,n)=>{let[i,a,o,s,u,l]=n;return u?t:(0,r.zG)(t,(0,c.rO)({queue:g.zo(o())}),(t=>l?(0,r.zG)(t,(t=>n=>(0,r.zG)(n,E(t),j(e),(0,c.rO)({right:(0,c.bw)((0,r.ls)(g.UI((0,r.ls)((0,x.H5)((0,c.rO)({time:e=>e.toISOString()})),m.F2)),h))}),(e=>{let{left:t,right:i}=e;return(0,r.zG)(n,(0,c.rO)({closeEventsProcessed:(0,r.zG)(i,g.UI(x.li),g.zo),queue:(0,r.zG)(t.map(x.li),(e=>new Set(e)),(e=>g.hX((t=>{let[n]=t;return e.has(n)})))),noQueueItemsProcessed:e=>e+n.queue.length}))})))(s)):a>t.noQueueItemsProcessed||i===t.noQueueItemsProcessed+t.queue.length?(t=>((0,r.zG)(t.queue,K(e),O.UI(h))(),{closeEventsProcessed:t.closeEventsProcessed,noQueueItemsProcessed:t.noQueueItemsProcessed+t.queue.length,queue:g.cS}))(t):t))}))),S=(0,r.zG)(n,i.UI(E),i.ap(I),i.D8(g.Eh({equals:(e,t)=>e[0]===t[0]})),i.UI(g.UI((0,x.H5)((0,c.rO)({event:(0,c.rO)({time:H})})))));return{state:S,value:f}})),B=(e,t)=>e.permutiveUrls.getEndpointUrl("/batch/events",s.G(e.config.apiVersion),[["enrich",JSON.stringify(t.requiresEnrichment)],["sdkp",JSON.stringify(t.sdkProcessed)]]),F=e=>(0,r.zG)(e.events,g.UI((0,r.ls)(x.Yg,(e=>e.event)))),N=(0,r.ls)(p.vM((e=>{let[t,n]=e;return`${n.requiresEnrichment}${n.sdkProcessed}`})),(e=>Object.values(e)),g.UI((e=>({requiresEnrichment:e[0][1].requiresEnrichment,events:e,sdkProcessed:e[0][1].sdkProcessed})))),j=e=>(0,r.ls)(N,g.YO("request"),g.Hr("success",(t=>{let{request:n}=t;return e.logger.debug(q,"Uploading via beacon",n),e.permutiveApi.reqWithBeacon({url:B(e,n),payload:F(n)})})),g.tS((e=>(0,r.zG)(e.request.events,g.UI((t=>{let[n,{event:i}]=t;return e.success?m.F2((0,r.bc)(n,i)):m.t$((0,r.bc)(n,i))}))))),g.UI((0,c.bw)(m.EQ((t=>{let[,n]=t;return e.metrics.trackCounter({name:"sdk_event_beacon_fail_count_total",labels:{event_name:n.name},value:1})}),(t=>{let[,n]=t;return e.metrics.trackCounter({name:"sdk_event_beacon_success_count_total",labels:{event_name:n.name},value:1})})))),g.oh),K=e=>t=>(0,r.zG)(N(t),O.uU((t=>(0,r.zG)(t,(e=>t=>(e.logger.debug(q,"Uploading",t),T.Y3((()=>e.permutiveApi.req({payload:F(t),url:B(e,t),method:"POST",contentType:"text/plain",dataType:"json",withCredentials:!1})),(t=>(e.reportError(`Error sending events batch. Got ${m.KC(t)}`),t)))))(e),T.UI(g.UI((e=>e.body))),T.EQ((e=>(0,r.zG)(t.events,g.UI((()=>m.t$(e))))),g.UI(m.F2)),O.UI(g.$R(t.events))))),O.UI(g.tS(g.UI((t=>{let[n,[i,{event:a}]]=t;return(0,r.zG)(n,m.EQ((e=>m.t$((0,r.bc)(i,{event:{...a,time:a.time.toISOString()},error:e}))),(e=>"request_id"in e?m.t$((0,r.bc)(i,{event:{...a,time:a.time.toISOString()},error:e})):m.F2((0,r.bc)(i,{...a,id:e.id,time:e.time})))),(0,c.bw)(m.EQ((t=>{let[,{event:n}]=t;return e.metrics.trackCounter({name:"sdk_event_upload_fail_count_total",labels:{event_name:n.name},value:1})}),(t=>{let[,n]=t;return e.metrics.trackCounter({name:"sdk_event_upload_success_count_total",labels:{event_name:n.name},value:1})}))))}))))),W=e=>t=>(0,r.zG)(t,i.En(2,g.uZ()),(0,x.H5)(i.UI(M.UI(e)))),H=e=>Q(e).toISOString(),Q=e=>{if(null==e)return new Date;if(Y(e))return e;const t=new Date(e);return Y(t)?t:new Date},Y=e=>isFinite(e)&&e instanceof Date,V=(e,t,n,o)=>(0,r.zG)(a.K4((()=>{const[e,t]=i.Ue(i.a9(M.of([])));return{eventsToPublishBufferRef:i.xH(e),publishEvents:n=>{(0,r.zG)(i.vP(e.current,n),i.UI(M.RD),i.UI(M.UI(g.xH)),t)}}})),a.ak("eventUpload",(t=>{let{eventsToPublishBufferRef:r}=t;return R(e,r,n,o)})),a.ak("eventHandler",(e=>{let{eventUpload:t}=e;return n=t.successEventsAsJSON,o=t.erroredEventsAsJSON,a.K4((()=>{const e=new D;return(0,r.zG)(n,i.UI((e=>e())),i.bw((t=>t.forEach((t=>{let[,n]=t;return e.newEvent(n,null)}))))),(0,r.zG)(o,i.UI((e=>e())),i.bw((t=>t.forEach((t=>{let[,{event:n,error:r}]=t;return e.newEvent(n,r)}))))),{eventHandlerAfterUpload:e}}));var n,o})),a.ak("eventResolver",(e=>{let{eventUpload:n}=e;return((e,t,n,o)=>a.K4((()=>{(0,r.zG)(i.vP({unresolvedEvents:t,erroredEvents:o,successEvents:n}),i.UI((0,z.Yt)(M.G5)),i.Rp({},((e,t)=>{const n=t();return(0,r.zG)(n.unresolvedEvents,s.DT(g.Od),s.UI((0,r.ls)(v.sq,(t=>({...e,...t})))),s.fS((()=>e)),(e=>(0,r.zG)(n.successEvents,g.u4(e,((e,t)=>{let[n,i]=t;return(0,r.zG)(v.P5(n,e),s.UI((t=>(t.succeed(i),v.EG(n)(e)))),s.fS((()=>e)))})))),(e=>(0,r.zG)(n.erroredEvents,g.u4(e,((e,t)=>{let[n,{event:i,error:a}]=t;return(0,r.zG)(v.P5(n,e),s.UI((t=>(t.fail(`Failed to track ${i.name}. ${"error"in a?a.error.message:a.message}`),v.EG(n)(e)))),s.fS((()=>e)))})))))})))})))(0,t,n.successEvents,n.erroredEvents)})),a.UI((e=>{let{publishEvents:t,eventHandler:n}=e;return{eventHandlerAfterUpload:n.eventHandlerAfterUpload,publishEvents:t}}))),$="_pnativo",J=function(e){let{externalData:t}=e;return a.K4((()=>{t.removeExternalData($)}))};var Z,X,ee,te,ne,re=-1,ie=function(e){addEventListener("pageshow",(function(t){t.persisted&&(re=t.timeStamp,e(t))}),!0)},ae=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},oe=function(){var e=ae();return e&&e.activationStart||0},se=function(e,t){var n=ae(),r="navigate";return re>=0?r="back-forward-cache":n&&(document.prerendering||oe()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},ce=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},ue=function(e,t,n,r){var i,a;return function(o){t.value>=0&&(o||r)&&((a=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=a,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},le=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},de=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},ge=function(e){var t=!1;return function(){t||(e(),t=!0)}},fe=-1,me=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},pe=function(e){"hidden"===document.visibilityState&&fe>-1&&(fe="visibilitychange"===e.type?e.timeStamp:0,ve())},he=function(){addEventListener("visibilitychange",pe,!0),addEventListener("prerenderingchange",pe,!0)},ve=function(){removeEventListener("visibilitychange",pe,!0),removeEventListener("prerenderingchange",pe,!0)},_e=function(){return fe<0&&(fe=me(),he(),ie((function(){setTimeout((function(){fe=me(),he()}),0)}))),{get firstHiddenTime(){return fe}}},ye=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},be=[1800,3e3],we=[.1,.25],Ee=function(e,t){t=t||{},function(e,t){t=t||{},ye((function(){var n,r=_e(),i=se("FCP"),a=ce("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(a.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-oe(),0),i.entries.push(e),n(!0)))}))}));a&&(n=ue(e,i,be,t.reportAllChanges),ie((function(r){i=se("FCP"),n=ue(e,i,be,t.reportAllChanges),le((function(){i.value=performance.now()-r.timeStamp,n(!0)}))})))}))}(ge((function(){var n,r=se("CLS",0),i=0,a=[],o=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=a[0],n=a[a.length-1];i&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(i+=e.value,a.push(e)):(i=e.value,a=[e])}})),i>r.value&&(r.value=i,r.entries=a,n())},s=ce("layout-shift",o);s&&(n=ue(e,r,we,t.reportAllChanges),de((function(){o(s.takeRecords()),n(!0)})),ie((function(){i=0,r=se("CLS",0),n=ue(e,r,we,t.reportAllChanges),le((function(){return n()}))})),setTimeout(n,0))})))},Ie=0,Se=1/0,ke=0,Pe=function(e){e.forEach((function(e){e.interactionId&&(Se=Math.min(Se,e.interactionId),ke=Math.max(ke,e.interactionId),Ie=ke?(ke-Se)/7+1:0)}))},Ce=function(){return Z?Ie:performance.interactionCount||0},Ge=function(){"interactionCount"in performance||Z||(Z=ce("event",Pe,{type:"event",buffered:!0,durationThreshold:0}))},Ue=[],Ae=new Map,Le=0,De=[],Me=function(e){if(De.forEach((function(t){return t(e)})),e.interactionId||"first-input"===e.entryType){var t=Ue[Ue.length-1],n=Ae.get(e.interactionId);if(n||Ue.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};Ae.set(r.id,r),Ue.push(r)}Ue.sort((function(e,t){return t.latency-e.latency})),Ue.length>10&&Ue.splice(10).forEach((function(e){return Ae.delete(e.id)}))}}},ze=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=ge(e),"hidden"===document.visibilityState?e():(n=t(e),de(e)),n},xe=[200,500],Te=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},ye((function(){var n;Ge();var r,i=se("INP"),a=function(e){ze((function(){e.forEach(Me);var t=function(){var e=Math.min(Ue.length-1,Math.floor((Ce()-Le)/50));return Ue[e]}();t&&t.latency!==i.value&&(i.value=t.latency,i.entries=t.entries,r())}))},o=ce("event",a,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});r=ue(e,i,xe,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),de((function(){a(o.takeRecords()),r(!0)})),ie((function(){Le=Ce(),Ue.length=0,Ae.clear(),i=se("INP"),r=ue(e,i,xe,t.reportAllChanges)})))})))},Oe=[2500,4e3],qe={},Re={passive:!0,capture:!0},Be=new Date,Fe=function(e,t){X||(X=t,ee=e,te=new Date,Ke(removeEventListener),Ne())},Ne=function(){if(ee>=0&&ee<te-Be){var e={entryType:"first-input",name:X.type,target:X.target,cancelable:X.cancelable,startTime:X.timeStamp,processingStart:X.timeStamp+ee};ne.forEach((function(t){t(e)})),ne=[]}},je=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){Fe(e,t),i()},r=function(){i()},i=function(){removeEventListener("pointerup",n,Re),removeEventListener("pointercancel",r,Re)};addEventListener("pointerup",n,Re),addEventListener("pointercancel",r,Re)}(t,e):Fe(t,e)}},Ke=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,je,Re)}))},We=[100,300];const He=function(e){let t=0;const n=n=>{if(0===t)return;const r=Qe(n);r&&e.metrics.track({name:`sdk_web_vitals_${r.suffix}`,labels:{},value:r.value})},o=(0,c.HP)((()=>{Ee(n),function(e,t){t=t||{},ye((function(){var n,r=_e(),i=se("LCP"),a=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-oe(),0),i.entries=[e],n())}))},o=ce("largest-contentful-paint",a);if(o){n=ue(e,i,Oe,t.reportAllChanges);var s=ge((function(){qe[i.id]||(a(o.takeRecords()),o.disconnect(),qe[i.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return ze(s)}),!0)})),de(s),ie((function(r){i=se("LCP"),n=ue(e,i,Oe,t.reportAllChanges),le((function(){i.value=performance.now()-r.timeStamp,qe[i.id]=!0,n(!0)}))}))}}))}(n),function(e,t){t=t||{},ye((function(){var n,r=_e(),i=se("FID"),a=function(e){e.startTime<r.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),n(!0))},o=function(e){e.forEach(a)},s=ce("first-input",o);n=ue(e,i,We,t.reportAllChanges),s&&(de(ge((function(){o(s.takeRecords()),s.disconnect()}))),ie((function(){var r;i=se("FID"),n=ue(e,i,We,t.reportAllChanges),ne=[],ee=-1,X=null,Ke(addEventListener),r=a,ne.push(r),Ne()})))}))}(n),Te(n)}));return a.K4((n=>{let{stopped:a}=n;t++,(0,r.zG)(a,i.YP((e=>{e&&t--}))),e.metrics.isEnabled()&&o()}))};const Qe=e=>(e=>"CLS"===e.name)(e)?{value:e.value,suffix:`${e.name.toLowerCase()}_score`}:(e=>["INP","FID","LCP"].includes(e.name))(e)?{value:e.value/1e3,suffix:`${e.name.toLowerCase()}_seconds`}:void 0;var Ye=n(1868);const Ve=(e,t)=>{const{activationManager:n,externalData:o,metrics:s,permutiveData:c}=e;return(0,r.zG)(a.of({}),a.ak("psegs",(()=>((e,t)=>a.K4((n=>{let{stopped:a}=n;const o="_psegs";(0,r.zG)(i.vP(t,a),i.YP((t=>{let[n,i]=t;i||(0,r.zG)(n,g.EQ((()=>e.removeExternalData(o)),(t=>e.setExternalJsonData(o,t))))})))})))(e.externalData,t.qlSegments))),a.ak("webVitals",(()=>He(e))),a.ak("nativo",(()=>J({activationManager:n,externalData:o,metrics:s,queryLanguageCohorts:t.qlSegments,...t}))),a.ak("twitterPixel",(()=>(0,Ye.eJ)({activationManager:n,metrics:s,permutiveData:c,queryLanguageCohorts:t.qlSegments,...t}))),a.ak("prebidJS",(()=>w(e))))};var $e=n(8182);const Je=()=>{const[e,t]=i.gS(g.uZ());return{trackEvent:e=>{let n,r,{event:i,useBeacon:a}=e;const o=new Promise(((e,t)=>{n=e,r=t}));return t([{localId:(0,c.k$)(),event:i,fail:r,succeed:n,useBeacon:a}]),o},trackedEvents:e}},Ze=function(e,t,n){return a.of({replacementMap:i.a9(s.of({$privacy_sandbox_topics_v2:[]}))})};var Xe=n(2514),et=n(9628),tt=n(6289);n(7125);const nt=e=>[e,O.of(e)],rt=x.li,it=x.Yg,at=e=>nt(m.F2(e)),ot="RefEventual",st=e=>t=>i.vP((0,r.zG)(t,i.UI(rt),i.UI(e)),(0,r.zG)(t,i.UI(it),i.UI(O.UI(e)))),ct=e=>t=>i.vP((0,r.zG)(i.vP((0,r.zG)(e,i.UI(rt)),(0,r.zG)(t,i.UI(rt))),i.UI((e=>{let[t,n]=e;return n(t)}))),(0,r.zG)(i.vP((0,r.zG)(e,i.UI(it)),(0,r.zG)(t,i.UI(it))),i.UI((e=>{let[t,n]=e;return O.ap(t)(n)})))),ut={URI:ot,map:(e,t)=>st(t)(e)},lt={URI:ot,map:ut.map,ap:(e,t)=>ct(t)(e)},dt=e=>i.a9(at(e)),gt=(m.dO,m.G5,dt(g.bM()),(0,c.mQ)((e=>s.YP)),e=>{const t=i.a9(s.G(g.bM()));return{activations:{gam:t,xandr:t},cohorts:t,contextualAddon:s.YP,data:i.a9(s.G(void 0)),enrichedEvents:e.events,replacementMap:i.a9(s.G({}))}}),ft=e=>{const t=e=>{if("number"==typeof e&&!Number.isNaN(e))return e;throw new Error("Received unexpected "+(Number.isNaN(e)?"NaN":"type "+typeof e))},n=e=>Math.max(0,t(e)/1e3);return{compressed:!!e.decodedBodySize&&e.decodedBodySize!==e.encodedBodySize,decoded_body_size:t(e.decodedBodySize),dns_lookup_duration:n(e.domainLookupEnd-e.domainLookupStart),encoded_body_size:t(e.encodedBodySize),fetch_duration:n(e.responseEnd-e.fetchStart),fetch_end:n(e.responseEnd),fetch_start:n(e.fetchStart),redirect_duration:n(e.redirectEnd-e.redirectStart),request_duration:n(e.responseStart-e.requestStart),retrieved:mt(e),service_worker_duration:n(0===e.workerStart?0:e.fetchStart-e.workerStart),start_time:n(e.startTime),tcp_handshake_duration:n(e.connectEnd-e.connectStart),total_duration:n(e.duration),tls_negotiation:n(e.requestStart-e.secureConnectionStart),transfer_duration:n(e.responseEnd-e.requestStart),transfer_size:t(e.transferSize)}},mt=e=>0===e.transferSize?"cache":e.transferSize>e.encodedBodySize?"network":"revalidate";s.YP,i.a9(s.YP),i.a9([]),i.a9([]),i.a9([]),i.a9($e.b()),i.a9(s.YP),i.a9({segmentsEntered:[],segmentsExited:[]}),i.a9(!1),i.a9((e=>{let{event:t}=e;return Promise.resolve(t)})),new D,i.a9(s.YP),i.a9(!1);function pt(e,t,n){const{addonsLoaded:u,consent:l,currentTimestampSecs:d,enabledAddons:f,identities:h,sdkVariant:v,sessionId:_,userId:y,userIdIsNewlyGenerated:b,viewId:w,pageviewState:E}=t,[I,S]=(0,r.zG)(i.Ue(i.a9(g.cS)),(e=>{let[t,n]=e;return[i.xH(t),n]})),P=s.ij(e.permutiveData.getData("event-source-id")),C=(0,r.zG)(y,i.Rp(-1,(e=>e+1)),i.UI((t=>(0,r.zG)(P,s.hX((()=>0===t)),s.fS((()=>{const t=(0,c.k$)();return e.permutiveData.setData("event-source-id",t),t}))))));return(0,r.zG)(a.vP({computeTimeMetrics:(A=e.metrics,a.K4((e=>{let{stopped:t}=e;const n=(0,o.HJ)((()=>{(0,r.zG)((0,o.iE)(),(0,c.bw)((()=>(0,o.ho)(!1))),g.UI((e=>{let[t,n]=e;return(n-t)/1e3})),(e=>{A.track({name:"sdk_ui_thread_compute_first10s_total_seconds",value:e.reduce(((e,t)=>e+t),0),labels:{}}),A.track({name:"sdk_ui_thread_compute_first10s_total_task_overrun_seconds",value:(0,r.zG)(e,g.hX((e=>e>.05)),g.UI((e=>e-.05)),g.u4(0,((e,t)=>e+t))),labels:{}}),A.track({name:"sdk_ui_thread_compute_first10s_longest_task_seconds",value:Math.max(0,...e),labels:{}})}))}),1e4);(0,r.zG)(t,i.YP((e=>e&&n())))}))),privacySandboxTopics:Ze(e,_,l)}),a.UI((t=>{const{reset:n,trackEvent:a,trackedEvents:o}=((e,t)=>{const[n,a]=i.Ue(0),o=(0,r.zG)(i.vP(n,t),i.UI((()=>[]))),s=(0,r.zG)(i.vP(o,e),i.D8(((e,t)=>{let[,n]=e,[,r]=t;return n===r})),i.UI((e=>{let[t]=e;const n=Je();return t.forEach(n.trackEvent),n})));return{reset:()=>a(n.current+1),trackEvent:(0,r.zG)(i.vP(s,o),i.UI((e=>{let[t,n]=e;return e=>(n.push(e),t.trackEvent(e))}))),trackedEvents:(0,r.zG)(s,i.VS((e=>e.trackedEvents)))}})(y,w),{enrichedEvents:s,...c}=(e=>gt(e))({consent:l,events:o,logger:e.logger,pageUrl:(0,r.zG)((()=>e.clientContext.getClientAsync()),O.UI((e=>e.url))),permutiveApi:e.permutiveApi,permutiveUrls:e.permutiveUrls,viewId:w}),[u,d,f]=(0,r.zG)(s,i.En(3,g.uZ()));return{...t,contextual:c,reset:n,trackEvent:a,unresolvedEvents:(0,r.zG)(u,i.UI(M.UI(g.UI((e=>(0,r.bc)(e.localId,{fail:e.fail,succeed:e.succeed})))))),eventsToProcessLocally:(0,r.zG)(d,i.UI(M.UI(g.hX((e=>!e.useBeacon))))),eventsToUploadViaBeacon:(0,r.zG)(f,i.UI(M.UI(g.hX((e=>e.useBeacon)))))}})),a.ak("eventPublication",(n=>{let{unresolvedEvents:r}=n;return V(e,r,I,t.sdkClosing)})),a.Hr("enrichmentReplacementMap",(e=>{let{contextual:t,privacySandboxTopics:n}=e;return(0,r.zG)(i.vP(t.replacementMap,n.replacementMap),i.UI((e=>{let[t,n]=e;return(0,z.gz)(s.g1)(t,n)})),i.UI(s.UI((e=>{let[t,n]=e;return{...t,...n}}))))})),a.ak("core",(o=>{let{contextual:c,enrichmentReplacementMap:u,eventPublication:f,eventsToProcessLocally:m}=o;return(0,r.zG)(n({contextualCohorts:(0,r.zG)(i.vP(c.cohorts,c.activations.gam,c.activations.xandr),i.UI(s.RD),i.UI(s.UI((e=>{let[t,n,r]=e;return{all:t,gam:n,xandrSsp:r}})))),consent:l,currentTimestampSecs:d,enrichmentReplacementMap:u,eventSourceId:C,identities:h,newEvents:(0,r.zG)(m,i.UI(M.UI(g.UI((e=>(0,r.bc)(e.localId,e.event)))))),sessionId:_,userId:y,userIdIsNewlyGenerated:b,viewId:w,webClient:t.webClient,pageviewState:E}),a.bw((e=>{let{eventsToPublish:t}=e;return(0,r.zG)(t,i.UI(M.UI(ht)),f.publishEvents)})),a.bw((e=>{let{eventsToPublishOnPageUnload:t}=e;return(0,r.zG)(t,i.UI(ht),S)})),a.bw((t=>{let{externalData:n}=t;return(0,r.zG)(n,i.UI((t=>(0,r.zG)(Object.entries(t),g.UI((t=>{let[n,i]=t;return(0,r.zG)(i,s.EQ((()=>e.externalData.removeExternalData(n)),(t=>e.externalData.setExternalJsonData(n,t))))}))))))})),a.bw((t=>{let{context:n}=t;return(0,r.zG)(n,i.UI((t=>{const n=Object.entries(t);e.clientContext.updateContext(...n)})))})))})),a.bw((e=>{let{core:n,eventPublication:a,eventsToUploadViaBeacon:o}=e;return(0,r.zG)(i.vP({cohorts:n.cohorts.all,eventsIO:o,segments:n.cohorts.ql,sessionId:_,userId:y,viewId:w,webClient:t.webClient}),i.UI((e=>{let{webClient:t,...n}=e;return(0,r.zG)(t,s.UI((e=>({...n,webClient:e}))))})),i.UI(s.EQ((()=>M.of(g.bM())),(e=>{let{cohorts:t,eventsIO:n,segments:i,sessionId:a,userId:o,viewId:s,webClient:c}=e;return(0,r.zG)(n,M.UI(g.UI((e=>{let{event:n,localId:u}=e;return(0,r.bc)(u,{requiresEnrichment:!0,sdkProcessed:!1,event:{user_id:o,name:n.name,segments:i,cohorts:t,properties:{...n.properties,client:{...c,...n.properties.client??{}}},session_id:a,time:new Date,view_id:s}})}))))}))),a.publishEvents)})),a.ak("metricContext",(e=>{let{core:n}=e;return(0,r.zG)(n.geoIP,i.UI(s.tS((e=>{var t;return s.ij(null===(t=e.geo_info)||void 0===t?void 0:t.continent)}))),(e=>$e.X({continent:e,sampleRate:t.metricSampleRate,sdkVariant:v,sessionId:_,userId:y,viewId:w})))})),a.ak("sdkql",(t=>{let{core:n}=t;return Ve(e,{addonsLoaded:u,consent:l,initdAddons:f,qlSegments:n.cohorts.ql})})),a.ak("strategicPartnerships",(t=>{let{sdkql:n}=t;return((e,t)=>a.vP({prebid_identifiers:G(e,t)}))(e,{pbjs:(0,r.zG)(n.prebidJS,i.UI((e=>(0,r.zG)(e.mainPair,s.UI((e=>e.pbjs))))))})})),a.ak("mediaAndEntertainment",(t=>{let{core:n}=t;return((e,t)=>(0,r.zG)(a.vP({freewheel:U({activationManager:e.activationManager,externalData:e.externalData,...t})}),a.UI((0,r.a9)({}))))(e,{addonsLoaded:u,consent:l,initdAddons:f,queryLanguageCohorts:n.cohorts.ql})})),a.ak("advertisers",(t=>{let{sdkql:n}=t;return((e,t)=>(0,r.zG)(a.of(t),a.ak("prebidMonitoring",(t=>{let{consent:n,prebidJS:r}=t;return k(e,i.vP({consent:n,prebidJS:r}))})),a.UI(r.Q1)))(e,{consent:l,prebidJS:n.prebidJS})})),a.ak("identityManager",(t=>{let{core:n}=t;return(0,Xe.u6)({...e,consent:l,tcfApiStatus:(0,et.SD)(window,e.logger).tcfApiStatusRef,currentTimestampSecs:d,geoIP:n.geoIP},h)})),a.bw((function(){(0,r.zG)((0,z.gz)(s.G5)(e.performance,(0,r.zG)(t.currentScript,s.UI((e=>e.src)),s.hX((e=>"string"==typeof e)))),s.UI((n=>{let[i,a]=n;var o;(o={consent:t.consent,logger:e.logger,metrics:e.metrics,name:a,performance:i}).consent.current&&o.metrics.isEnabled()&&(0,r.zG)(p.nI(o.performance.getEntriesByName(o.name,"resource")),s.UI(p.YM),s.hX((e=>self.PerformanceResourceTiming&&e instanceof self.PerformanceResourceTiming)),s.fX((e=>m.Y3((()=>ft(e)),(0,c.bw)((t=>o.logger.warn("[resource timing] Failed to compute labels",{error:t,entry:e})))))),s.UI((e=>{const{total_duration:t,...n}=e;o.metrics.track({name:"sdk_resource_timing_seconds",value:t,labels:{...n,name:o.name}})})))})))})),a.UI((e=>{let{core:t,contextual:n,metricContext:r,sdkql:a,trackEvent:o,eventPublication:s,strategicPartnerships:c,identityManager:u,reset:l}=e;return{activations:{dfp:i.UI((e=>e.dfp),t.activations),dfp_contextual:i.UI((e=>e.dfp_contextual),t.activations),xandr_ssp:i.UI((e=>e.xandr_ssp),t.activations),xandr_ssp_contextual:i.UI((e=>e.xandr_ssp_contextual),t.activations)},addons:{contextual:n.contextualAddon,identityManager:u,secureSignal:t.secureSignal},metricContext:r,pbjsPair:i.UI((e=>e.mainPair),a.prebidJS),queryLanguageCohorts:{all:t.cohorts.ql,custom:t.cohorts.qlCustom,standard:t.cohorts.qlStandard},segmentTransitionsSinceInit:t.transitionsSinceInit,trackEvent:o,realtime:t.realtime,eventHandlerAfterUpload:s.eventHandlerAfterUpload,prebidIdentifiers:c.prebid_identifiers,reset:l,stateMigratedThisInitialisation:t.stateMigratedThisInitialisation}})));var A}const ht=g.UI((0,x.H5)((e=>({event:e,requiresEnrichment:!1,sdkProcessed:!0}))));function vt(e){return(0,r.ls)((0,c.rO)({previousState:e=>{if("string"!=typeof e)return{};try{return JSON.parse(e)}catch{return{}}}}),e,(0,c.rO)({state:i.UI(JSON.stringify)}))}function _t(e){const t=function(e){const{activationManager:t,api:n,clientContext:r,config:i,externalData:a,logger:o,metrics:c,permutiveData:u,network:l,urls:d,namespace:g,trace:f}=e;return{activationManager:t,api:n,clientContext:r,config:i,externalData:a,logger:o,metrics:c,performance:s.ij(self.performance),permutiveData:u,permutiveApi:l,permutiveUrls:d,reportError:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.reportError(e,null==t?void 0:t.userId,null==t?void 0:t.timestamp)},namespace:g,trace:f}}(e),n=function(e){const t={addonsLoaded:e.addonsLoaded,currentScript:e.currentScript,consent:(n=e.consentTracking,(0,r.zG)(n,s.EQ((()=>i.a9(!0)),(e=>e.consentRef)))),currentTimestampSecs:l(),enabledAddons:u(e),identities:e.identities,sdkClosing:d(),metricSampleRate:e.config.metricsSamplingPercentage/100,sdkVariant:s.ij(e.sdkVariant),sessionId:i.a9(e.sessionManager.getSessionId()),userId:e.userId.ref,userIdIsNewlyGenerated:e.userId.isNewlyGenerated,viewId:e.viewId.ref,pageviewState:e.pageviewState,webClient:e.webClient};var n;return t}(e);return function(e,t,n,s){const u=5e3,l=(0,r.zG)(e,function(e,t){return n=>a=>{const{value:s,state:c}=n(a),[u,l]=i.Ue(c.current),d=(0,o.UM)((()=>l(c.current)),e),g=(0,r.zG)(i.vP(c,u),i.UI((e=>{let[t,n]=e;return t===n})));return(0,r.zG)(t,i.bw((e=>e&&d()))),{value:(0,r.bc)(g,s),state:(0,r.zG)(i.vP(t,c,u),i.UI((e=>{let[t,n,r]=e;return t?n:r})))}}}(u,s),vt,function(e){return t=>(0,r.ls)((0,c.rO)({previousState:t=>e.current?t:void 0}),t,(0,c.rO)({state:(0,r.ls)((t=>i.vP(e,t)),i.UI((e=>{let[t,n]=e;return t?n:void 0})))}))}(n),function(e){return t=>(0,r.ls)((0,c.rO)({previousState:()=>localStorage.getItem(e)}),t,(0,c.rO)({state:(0,c.bw)(i.YP((t=>{switch(typeof t){case"string":localStorage.setItem(e,t);break;case"undefined":localStorage.removeItem(e);break;case"object":if(null===t){localStorage.removeItem(e);break}throw new Error("Permutive app raised an invalid state.");default:throw new Error("Permutive app raised an invalid state.")}})))}))}(t),a.UI((e=>{let[t,n]=e;return n})));return l({stopped:i.a9(!1)}).value}(pt(t,n,e.core),e.namespace.getNamespacedStorageKey("permutive-app"),n.consent,n.sdkClosing)}},2063:(e,t,n)=>{n.d(t,{B9:()=>m,iq:()=>d,ti:()=>h});var r=n(5654),i=n(842),a=n(7144),o=n(8236),s=n(2169),c=n(338),u=n(6853);const l="__permutive.",d="__permutiveConfigQueryParams";const g={default:{windowKey:"permutive",environment:"default",apiHost:"api.permutive.com",apiKey:"",apiProtocol:"https",cdnBaseUrl:"cdn.permutive.com",cdnProtocol:"https",pxidHost:"prmutv.co",apiVersion:"v2.0",sdkErrorsApiVersion:"v2",advertiserApiVersion:"v2",classificationModelsApiVersion:"v1",loggingEnabled:!1,tracingEnabled:!1,requestTimeout:5e3,cookieDomain:"."+(0,u._Y)(window.location.hostname),cookieName:"permutive-id",cookieExpiry:function(){const e=new Date;return e.setMonth(e.getMonth()+6),e.toUTCString()}(),eventsTTLInDays:null,permutiveDataMiscKey:"permutive-data-misc",permutiveDataQueriesKey:"permutive-data-queries",stateNamespace:"",sendClientErrors:!0,metricsSamplingPercentage:20,eventsCacheLimitBytes:25e5,segmentSyncApiHost:"e1c3fd73-dd41-4abd-b80b-4278d52bf7aa.partner.permutive.app",consentRequired:!1,sdkType:"stable",viewId:null,localStorageDebouncedKeys:[],localStorageWriteDelay:1e3,localStorageWriteMaxDelay:1500,watson:{enabled:!0},secureSignalsApiHost:"secure-signals.permutive.app",prebidAuctionsRandomDownsamplingThreshold:0},production:{},development:{apiProtocol:"http",loggingEnabled:!0,tracingEnabled:!0,sendClientErrors:!1}},f=e=>{const t={consentRequired:!0,loggingEnabled:!0,sendClientErrors:!0,tracingEnabled:!0},n={eventsTTLInDays:!0,eventsCacheLimitBytes:!0,metricsSamplingPercentage:!0,requestTimeout:!0,localStorageWriteDelay:!0,localStorageWriteMaxDelay:!0,prebidAuctionsRandomDownsamplingThreshold:!0};return Object.keys(e).reduce(((r,i)=>{if(t.hasOwnProperty(i)){const t="true"===e[i];return{...r,[i]:t}}if(n.hasOwnProperty(i)){const t=Number(e[i]);return isNaN(t)?r:{...r,[i]:t}}return{...r,[i]:e[i]}}),{})},m=function(){let{getQueryParams:e=u.zM}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e=>Object.entries(e).reduce(((e,t)=>{let[n,r]=t;if(!(0===n.indexOf(l)))return e;const i=n.replace(l,"");return[...e,[i,r]]}),[]);return(0,s.zG)(a.Y3((()=>(0,s.zG)(e(),t,(e=>(0,c.m8)(...e)),f,(e=>p({queryConfig:e})))),(e=>`Failed to parse query params. Got ${(0,r.w)(e).message}`)))},p=e=>{let{queryConfig:t}=e;const n=(0,s.zG)(o.Y3((()=>window.sessionStorage.getItem(d))),o.tS(o.ij),o.tS((0,s.ls)(i.A,o.ij)),o.fS((()=>({}))));return(0,c.PM)(n,t)},h=(e,t)=>{const n=(e.environment&&g[e.environment])??{};return(0,c.PM)(g.default,n,e,t)}},19:(e,t,n)=>{n.d(t,{v:()=>r});const r=(e,t,n)=>function(){const r=n()?t:e;return r(...arguments)}},7709:(e,t,n)=>{n.d(t,{S:()=>p});var r=n(2169),i=n(8236),a=n(9912),o=n(9792),s=n(7100),c=n(6371);var u=n(338);class l{wait_prev;block_next;task;started;complete;constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.wait_prev=t.wait_prev||!1,this.block_next=t.block_next||!1,this.started=!1,this.complete=!1,this.task=e}waits(){return this.wait_prev}blocks(){return this.block_next}execute(e){this.started=!0,this.task((()=>{this.complete=!0,e()}))}}var d=n(3395);n(5178);class g{logger;api;activationManager;sessionManager;metrics;viewId;userId;network;clientContext;unprocessedEvents;taskQueue;identities;permutiveReset;messages;addons;trace;permutiveRealtime;state;customProperties;config;permutiveData;externalData;cookies;identitiesIngestor;global;nextGen;pageviewState;tcf;initialisedAddons=[];constructor(e,t,n,r,i,a,o,s,c,u,l,d,g,f,m,p,h,v,_,y,b,w,E,I,S,k,P,C){this.logger=e,this.api=t,this.activationManager=n,this.sessionManager=r,this.metrics=i,this.viewId=a,this.userId=o,this.network=s,this.clientContext=c,this.unprocessedEvents=u,this.taskQueue=l,this.identities=d,this.permutiveReset=g,this.messages=f,this.addons=m,this.trace=p,this.permutiveRealtime=h,this.state=v,this.customProperties=_,this.config=y,this.permutiveData=b,this.externalData=w,this.cookies=E,this.identitiesIngestor=I,this.global=S,this.nextGen=k,this.pageviewState=P,this.tcf=C}identify(e){const t="[Identify]";this.logger.debug("<call> identify",e);const n=(0,u.b2)(),{left:o,right:c}=this.identities.parseCustomerDefinedIdentities(e);if(o.length>0)throw new Error(o.join(" "));const g={...this.identities.getIdentitiesMap(),...c.reduce(((e,t)=>{let{tag:n,id:r,priority:i,expiry:a}=t;return{...e,[n]:{id:r,...void 0!==i?{priority:i}:{},...void 0!==a?{expiry:a}:{}}}}),{})},f=(0,r.zG)(Object.values(g),a.DZ((e=>i.ij(e.id)))),m=this.identities.getPrioritizedIdentities(g);if("string"==typeof e&&(0,s.Bt)("e1c3fd73-dd41-4abd-b80b-4278d52bf7aa","e1c3fd73-dd41-4abd-b80b-4278d52bf7aa",f,window.location.hostname,this.userId.get()))return n.resolve(),n.promise;const p=async e=>{await(0,d.Yj)({clientContext:this.clientContext,global:this.global,identities:this.identities,logger:this.logger,reset:this.permutiveReset,userId:this.userId},e.user_id)};return this.taskQueue.add(new l((async e=>{this.logger.debug("<task> identify",c);const r=async()=>{this.logger.log(t,"request identity");const e=await this.api.identify(this.metrics,this.userId,m);this.userId.isEqual(e.user_id)?this.metrics.track({name:"sdk_identity_remained_total",value:1,labels:{identify_reason:"identify_call"}}):(this.metrics.track({name:"sdk_identity_changed_total",value:1,labels:{identify_reason:"identify_call"}}),await p(e))};this.identities.setIdentities(c).identifyRequestRequired()?await r():this.logger.log(t,"skip request"),this.logger.debug("<done> identify",c),e(),n.resolve(),await this.identitiesIngestor.ingestIfEligible(c).catch((e=>this.api.reportError(`Couldn't ingest identities, got ${e}`,this.userId.get())))}),{wait_prev:!0,block_next:!0})),n.promise}on(e,t){return this.nextGen.eventHandlerAfterUpload.addListener({name:e,callback:t,once:!1})}once(e,t){return this.nextGen.eventHandlerAfterUpload.addListener({name:e,callback:t,once:!0})}pageviewTracked=!1;track(){const[e,t,n]=[arguments.length<=0?void 0:arguments[0],(arguments.length<=1?void 0:arguments[1])||{},(arguments.length<=2?void 0:arguments[2])||{}],r=this.trace.startSpan(`track("${e}")`);this.logger.log("<call> track",e);const i=(0,u.b2)();this.pageviewTracked||"Pageview"!==e||(this.pageviewTracked=!0,this.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"pageview_tracked",time_origin:"sdk_init"})),this.metrics.trackCounter({name:"sdk_event_track_count_total",labels:{event_name:e},value:1}),i.promise.then((()=>{this.metrics.trackCounter({name:"sdk_event_track_success_count_total",labels:{event_name:e},value:1}),r.finish()}),(()=>{this.metrics.trackCounter({name:"sdk_event_track_fail_count_total",labels:{event_name:e},value:1}),r.finish()}));const a=n.unprocessedData??{},o=a.sessionId??this.sessionManager.getSessionId(),s=a.viewId??this.viewId.get(),c={success:n.success||(e=>{}),error:n.error||((e,t)=>{})};return this.taskQueue.add(new l((r=>{this.logger.log("<task> track",e);return(a.client?Promise.resolve(a.client):this.clientContext.getClientAsync()).then((a=>{const l={name:e,properties:{...t,client:t.client?(0,u.PM)(a,t.client):a},session_id:o,view_id:s,time:new Date};return this.nextGen.trackEvent.current({event:l,useBeacon:n.useBeacon??!1}).then((e=>{this.logger.log("<done> track",l.name),c.success(e),i.resolve(l),r()})).catch((e=>{c.error(e),this.api.reportError(e,this.userId.get()),i.reject(e)}))}))}))),i.promise}trigger(e,t,n){const r=(0,u.b2)();this.logger.log("<call> trigger",e);const i=t=>(i,a)=>{if(i.properties.segment_number===e){const o={result:t};this.logger.debug("<fire> trigger",{event:i,error:a,segmentCode:e,payload:o}),n(o),r.resolve(o)}};return this.nextGen.eventHandlerAfterUpload.addListener({name:"SegmentEntry",callback:i(!0),once:!1}),this.nextGen.eventHandlerAfterUpload.addListener({name:"SegmentExit",callback:i(!1),once:!1}),this.logger.log("<done> trigger",e),r.promise}query(){return Promise.resolve({result:!1})}segment(e,t){const n=(0,u.b2)();this.logger.log("<call> segment",e);return this.taskQueue.add(new l((r=>{this.logger.log("<task> segment",e);const i=this.nextGen.queryLanguageCohorts.all.current.includes(e)||!1;t(i),n.resolve(),this.logger.log("<done> segment",e),r()}))),n.promise}segments(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";const n=(0,u.b2)();this.logger.log("<call> segments");return this.taskQueue.add(new l((r=>{this.logger.log("<task> segments ("+t+")");const i=i=>{e(i),n.resolve(i),this.logger.log("<done> segments ("+t+")"),r()};"dfp"===t?this.messages.once("permutive:dfp:ready",(()=>{this.addons.dfp&&i([...this.addons.dfp.segments.liveSegments])})):i([...this.nextGen.queryLanguageCohorts.all.current])}))),n.promise}reset(){return Promise.all([this.api.reset(this.metrics),this.identities.reset(),this.permutiveReset.reset(),this.nextGen.reset(),this.userId.reset()]).then((()=>{this.messages.emit("permutive:reset")})).catch((e=>{this.api.reportError(`Error resetting internals. Got ${e}`)}))}addon(e,t){this.logger.debug("[Addon]",`Called for ${e}`,t);const a={...t,permutive:this,api:this.api,activationManager:this.activationManager,network:this.network,clientContext:this.clientContext,logger:this.logger,unprocessedEvents:this.unprocessedEvents,metrics:this.metrics,state:this.state,messages:this.messages,userId:this.userId,viewId:this.viewId,customProperties:this.customProperties,config:this.config,permutiveData:this.permutiveData,sessionManager:this.sessionManager,addons:this.addons,externalData:this.externalData,cookies:this.cookies,nextGenOutput:this.nextGen,identities:this.identities,pageviewState:this.pageviewState,tcf:this.tcf},s=((0,r.zG)(this.nextGen.pbjsPair,o.UI(i.UI((0,u.vg)("pbjs")))),e=>{this.initialisedAddons.push(e),this.messages.emit("permutive:addon:preinit",e)});if("contextual"===e&&i.pC(this.nextGen.addons.contextual))return"contextual"in this.addons||(s(e),this.addons.contextual=this.nextGen.addons.contextual.value),this.addons.contextual(t),this.addons.contextual;if(-1===this.initialisedAddons.indexOf(e))switch(s(e),e){case"web":Promise.resolve().then(n.bind(n,7889)).then((e=>this.addons.web=new e.WebAddon(a))).then((()=>this.messages.emit("permutive:web:ready")));break;case"publishers":case"nativo":case"freewheel":case"facebook_pixel_v2":case"tiktok_pixel":case"eyeota_pixel":case"rubicon":case"rubicon_ssp":case"twitter_pixel":case"pinterest_pixel":case"local_storage":case"appnexus_adserver":case"prebid":case"classification_models":case"prebid_analytics":case"smart":case"tradedesk":case"appnexus":case"pubmatic":case"ssp":0;break;case"overlays":Promise.resolve().then(n.bind(n,2636)).then((e=>this.addons.overlays=new e.OverlaysAddon(a)));break;case"scriptrunner":Promise.resolve().then(n.bind(n,5423)).then((e=>this.addons.scriptrunner=new e.ScriptRunnerAddon(a)));break;case"dfp":Promise.resolve().then(n.bind(n,232)).then((async e=>this.addons.dfp=await e.createAddon(a)));break;case"tracking_pixel":Promise.resolve().then(n.bind(n,6509)).then((e=>this.addons.tracking_pixel=new e.PixelAddon(a)));break;case"clean_room":Promise.resolve().then(n.bind(n,5158)).then((e=>this.addons.clean_room=new e.CleanRoomAddon));break;case"gam_log":Promise.resolve().then(n.bind(n,9026)).then((async e=>this.addons.gam_log=new e.GamLogAddon(a)));break;case"ddp":case"dbm":Promise.resolve().then(n.bind(n,2474)).then((e=>this.tcf.registerVendorOnValidConsent("ddp",(t=>this.addons.ddp=new e.DDPPixel({...a,tcfStatus:t})))))}else"web"===e&&!0!==t.auto_init&&((e,t,n,r)=>new Promise(((a,o)=>{const s=(0,i.Y3)(e);if((0,i.pC)(s))return a(s.value);n.once(t,(()=>(0,i.g_)((()=>o(new Error(`Error after waiting for event ${t}`))),a)((0,i.Y3)(e))));const u=(null==r?void 0:r.timeout)??1e4;(0,c.HJ)((()=>o(new Error(`Event ${t} was not received within the timeout period ${u}ms`))),u)})))((()=>{if(!this.addons.web)throw new Error('"web" addon not ready');return this.addons.web.reset(t)}),"permutive:web:ready",this.messages).catch((e=>{this.api.reportError(`Got error while trying to reset web. Got ${e.message}`,this.state.userId.get())}))}ready(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"initialised";const n=(0,u.b2)(),r=()=>{e(),n.resolve()};switch(t){case"initialised":this.permutiveRealtime.isReady()?r():this.messages.on("permutive:ready",r);break;case"realtime":this.permutiveRealtime.isRealtime()?r():this.messages.once("permutive:realtime",r)}return n.promise}}var f=n(19);const m=e=>{const{logger:t,consentTracking:n}=e,i=function(){return t.debug("Methods[track]: Cannot track as consent is revoked"),Promise.resolve(null)};return e=>class extends e{constructor(){super(...arguments),n.isRevoked()&&this.consentRevoked(),n.listenForConsent((()=>this.consentRevoked()),r.Q1)}async consentRevoked(){return await this.sessionManager.reset(),this.reset()}track=(0,f.v)(super.track.bind(this),i,n.isRevoked)}},p=(e,t,n,i,a,o,s,c,u,l,d,f,p,h,v,_,y,b,w,E,I,S,k,P,C,G,U,A,L)=>new((0,r.zG)(g,m({consentTracking:G,logger:e})))(e,t,n,i,a,o,s,c,u,l,d,f,p,h,v,_,y,b,w,E,I,S,k,P,C,U,A,L)},3395:(e,t,n)=>{n.d(t,{Yj:()=>c,TZ:()=>s});var r=n(5654),i=n(338);var a=n(7100);const o=async e=>{await e.identities.thirdParty,await function(e,t){return(0,a.Bt)("e1c3fd73-dd41-4abd-b80b-4278d52bf7aa","e1c3fd73-dd41-4abd-b80b-4278d52bf7aa",e.identities.getPrioritizedIdentities(e.identities.getIdentitiesMap()).map((e=>e.id)),window.location.hostname,e.userId.get())?t.reset():Promise.resolve()}(e,e.permutiveMethods);const t=await function(e){const t=e.trace.startSpan("identify");0;return(async e=>{const t="[Identify Init]",{logger:n,api:r,userId:a,identities:o,metrics:s,identitiesIngestor:c,messages:u,sessionManager:l}=e,d=await o.thirdParty,g=o.extractIdentifyFromQueue(e),f={...o.getIdentitiesMap(),...g.reduce(((e,t)=>{let{tag:n,id:r,priority:i,expiry:a}=t;return{...e,[n]:{id:r,...a?{expiry:a}:{},...void 0!==i?{priority:i}:{}}}}),{})},m=o.setIdentities(Object.entries(f).map((e=>{let[t,{id:n,priority:r,expiry:i}]=e;return{tag:t,id:n,...i?{expiry:i}:{},...void 0!==r?{priority:r}:{}}})));o.setReady();const p=o.getPrioritizedIdentities(f);n.log("Begin identification");const h=e.sessionCount>1&&l.sessionHasChanged()||d.identifyRequestRequired()||m.identifyRequestRequired()?await(n.debug(t,"request identity"),r.identify(s,a,p).then((e=>{const r=e.user_id;return a.isEqual(r)?{identityChanged:!1}:(n.debug(t,"fetch received new user id",r),{identityChanged:!0,userId:r})})).catch((e=>(r.reportError(`${t} Fetch failed. Got ${e}`,a.get()),{identityChanged:!1}))).then((0,i.bw)((t=>e.metrics.track({name:`sdk_identity_${t.identityChanged?"changed":"remained"}_total`,value:1,labels:{identify_reason:"sdk_init"}}))))):(n.debug(t,"skip request"),{identityChanged:!1});return c.ingestIfEligible(p).catch((e=>r.reportError(`Couldn't ingest identities, got ${e}`,h.identityChanged?h.userId:a.get()))),u.emit("permutive:user:ready"),n.debug(t,"result",h),h})(e).catch((t=>(e.api.reportError(`Failed to identify. Got ${(0,r.w)(t)}`),{identityChanged:!1}))).then((e=>(t.finish(),e)))}(e);return t.identityChanged?await c(e,t.userId):e.logger.log("Identity has not changed"),t},s=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{};o(e).then(t),u(e.global,e.clientContext)};async function c(e,t){e.logger.log("Identity has changed"),await e.reset.reset(),e.userId.set(t),u(e.global,e.clientContext),e.identities.setIdentities([])}function u(e,t){return e.context=t.getContext()}},4614:(e,t,n)=>{function r(e,t,n,r){r.debug("set SDK as ready"),e.emit("permutive:api:ready"),e.emit("permutive:queries:initialised"),t.track({name:"sdk_local_storage_byte_total",value:n.getStateSizeInBytes(),labels:{}}),r.warn("sdk_query_states_byte_total metric needs re-implementing")}n.d(t,{R:()=>r})},9184:(e,t,n)=>{n.d(t,{LA:()=>s});var r=n(9912),i=n(856),a=n(338);const o=(e,t,n)=>{let{api:r,state:i}=n;r.reportError(`Function "permutive.${t.functionName}" caused an error: ${e.message}`,i.userId.get())};function s(e,t,n,r,i,a){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:d;const u=c(e),l=a.startSpan("queued_methods"),g={api:i,state:t},f=e=>{if(e.functionName in n){n[e.functionName].apply(r,e.arguments)}else o(new Error("Does not exist."),e,g)},m=e=>!s.includes(e);u.forEach((e=>{try{m(e.functionName)&&f(e)}catch(t){const n=t instanceof Error?t:new Error("Unknown error.");o(n,e,g)}})),l.finish()}function c(e){const t=(0,r.uK)((e=>-1!==l.indexOf(e.functionName)))(e),n=t.right,o=t.left.filter((e=>"consent"!==e.functionName)),s=(0,i.Zt)(((e,t)=>u(e)&&u(t)?(0,a.lW)(g).compare(e.arguments[0],t.arguments[0]):(0,a.lW)(l).compare(e.functionName,t.functionName)));return(0,r.DY)(s)(n).concat(o)}const u=e=>"addon"===e.functionName,l=["identify","trigger","addon","track"],d=["identify"],g=["dfp","appnexus_adserver","web"]},64:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{initialiseWebSDK:()=>initialiseWebSDK});var _permutive_permutive_utils_ts_error__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(5654),fp_ts_Option__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(8236),fp_ts_Either__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(7144),fp_ts_function__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(2169),fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(132),_framework_ref__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9792),_identity_legacy_NeustarFabrickIdentitiesIngestor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3054),_identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7100),_identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(2601),_sdkql_blockers__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(6458),_core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5903),_core_activations_PermutiveAddons__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(377),_sdkql_event_collection_events_cache_store_crypto_HashcodeDigest__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8629),_sdkql_event_collection_events_cache_store_crypto_SHA256Digest__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6330),_sdkql_event_collection_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(5169),_core_events_unprocessed_UnprocessedPrebidAuctions__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(1040),_core_metrics_MetricReporter__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(6405),_core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(7754),_core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(400),_core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(9809),_core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(3593),_core_store_LocalStorage__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(5),_core_tcf_TCF__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(9628),_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(9170),_dynamic_messages_PermutiveMessages__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(3994),_http_PermutiveApi__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(4338),_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(338),_utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(3785),_Config__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(2063),_initialisation_identity__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(3395),_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(4614),_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(9184),_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(7709),_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(6371),fp_ts_Task__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(2678),main_core_store_SessionStorage__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(6749),main_http_PermutiveNetwork__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(8019);const prefix="[Initialisation Web]",initialiseWebSDK=_ref=>{let{cookieStore,clientContext,currentScript,consentModule,core,externalData,localStorage,logger,messages,metrics,namespace,pageviewState,partialTagWithKey,permutiveData,sessionManager,tag,trace,configFromQueryParams,urls,userId}=_ref;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.Y3)((async()=>{const windowKey=partialTagWithKey.key,permutiveGlobal=window[windowKey],config=tag.config,viewId=(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(pageviewState.ref,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.UI((e=>e.viewId)),(e=>new _core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_23__.W(e))),network=new main_http_PermutiveNetwork__WEBPACK_IMPORTED_MODULE_20__.E(metrics),sessionStorage=(0,main_core_store_SessionStorage__WEBPACK_IMPORTED_MODULE_19__.u)(namespace,logger,consentModule.consentTracking.consentRef),{consentTracking,consentValidation}=consentModule;(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(consentTracking.consentRef,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((e=>{e?sessionStorage.put(configFromQueryParams,_Config__WEBPACK_IMPORTED_MODULE_14__.iq).then(fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.Q1,(e=>{logger.warn(prefix,`Failed to cache "${_Config__WEBPACK_IMPORTED_MODULE_14__.iq}".`,(0,_permutive_permutive_utils_ts_error__WEBPACK_IMPORTED_MODULE_24__.w)(e))})):sessionStorage.delete(_Config__WEBPACK_IMPORTED_MODULE_14__.iq)}))),window[windowKey].consent=consentValidation;const createInternalsSpan=trace.startSpan("internals");(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(viewId.ref,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((e=>clientContext.updateContext(["view_id",e])))),(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(userId.ref,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((e=>clientContext.updateContext(["user_id",e]))));const api=new _http_PermutiveApi__WEBPACK_IMPORTED_MODULE_11__.F(urls,config,network,metrics,logger),tcf=(0,_core_tcf_TCF__WEBPACK_IMPORTED_MODULE_9__.SD)(window,logger),identityProviderEnv={permutive:permutiveGlobal,network,api,userId,metrics,permutiveData,messages,config,cookies:cookieStore,logger,tcf},identities=new _identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_2__.lg(metrics,trace,permutiveData,identityProviderEnv,logger),identitiesIngestor=new _identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_25__.z,permutiveRealtime=new _core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_26__.u(trace,metrics,messages),unprocessedArgs={consent:consentTracking.consentRef,logger,namespace},unprocessedEvents={PrebidAuctions:new _core_events_unprocessed_UnprocessedPrebidAuctions__WEBPACK_IMPORTED_MODULE_27__.J(unprocessedArgs)},customProperties=new _sdkql_event_collection_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_7__.X,permutiveReset=new _core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_28__.a(config,localStorage,logger,permutiveData,cookieStore,externalData),taskQueue=new _utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_13__.i(messages),activationManager=new _core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_3__.v(logger,permutiveGlobal,clientContext),[addonsLoadedRef,setAddonsLoaded]=_framework_ref__WEBPACK_IMPORTED_MODULE_0__.Ue(!1),webClient=(()=>{const[e,t]=_framework_ref__WEBPACK_IMPORTED_MODULE_0__.Ue(Date.now());return(0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.UM)((()=>t(Date.now())),1e3),(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(_framework_ref__WEBPACK_IMPORTED_MODULE_0__.vP(viewId.ref,e),_framework_ref__WEBPACK_IMPORTED_MODULE_0__.UI((()=>clientContext.getClient())),_framework_ref__WEBPACK_IMPORTED_MODULE_0__.D8(((e,t)=>e===t||JSON.stringify(e)===JSON.stringify(t))))})(),eventCacheStoreFactory=()=>(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.N1)((0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.Y3)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,9075))),String),trace.traceTask("import-DBStore-main-thread"))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.UI)((e=>{let{DBStore:t}=e;return new t((0,_core_store_LocalStorage__WEBPACK_IMPORTED_MODULE_29__.E)(namespace,logger,consentTracking.consentRef))}))),eventsCacheFactory=()=>(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.SF)((0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.Y3)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,7819))),String),trace.traceTask("import-events-cache"))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.tS)((e=>{let{EventsCache:t}=e;return(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(t.initialise(config,logger,(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};api.reportError(e,null==t?void 0:t.userId,null==t?void 0:t.timestamp)}),trace,metrics,userId.ref,eventCacheStoreFactory),trace.traceTask("initialise-events-cache-main-thread"))}))),nextGen=await(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.SF)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,7491)))),trace.traceTask("import-next-gen"),fp_ts_Task__WEBPACK_IMPORTED_MODULE_30__.Qt("configureCore",core),fp_ts_Task__WEBPACK_IMPORTED_MODULE_30__.tS((e=>{let{runNextGenFeatures:t,configureCore:n}=e;return(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.N1)((async()=>t({activationManager,addonsLoaded:addonsLoadedRef,api,currentScript,clientContext,config,consentTracking:fp_ts_Option__WEBPACK_IMPORTED_MODULE_31__.G(consentTracking),core:n({eventsCacheFactory,migratedStateMaps:()=>({internal:(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(permutiveData.getData("internal_query_states"),fp_ts_Option__WEBPACK_IMPORTED_MODULE_31__.DT(_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_12__.Kn)),external:(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(permutiveData.getData("external_query_states"),fp_ts_Option__WEBPACK_IMPORTED_MODULE_31__.DT(_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_12__.Kn))})}),externalData,identities:identities.ref,logger,messages,metrics,namespace,network,permutiveData,sessionManager,urls,userId,viewId,pageviewState:pageviewState.ref,trace,webClient:(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(webClient,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.UI(fp_ts_Option__WEBPACK_IMPORTED_MODULE_31__.G))}))),trace.traceTask("run-next-gen-features"))})))();(0,_core_metrics_MetricReporter__WEBPACK_IMPORTED_MODULE_8__.p)({api,context:nextGen.metricContext,logger,messages,metrics});const state=new _core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_32__.u(permutiveData,permutiveReset,userId,viewId,logger),addons={},permutiveMethods=(0,_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_17__.S)(logger,api,activationManager,sessionManager,metrics,viewId,userId,network,clientContext,unprocessedEvents,taskQueue,identities,permutiveReset,messages,addons,trace,permutiveRealtime,state,customProperties,config,permutiveData,externalData,cookieStore,identitiesIngestor,permutiveGlobal,consentTracking,nextGen,pageviewState,tcf);createInternalsSpan.finish();const context=clientContext.getMutableContextUNSAFE();[].forEach((s=>{fp_ts_Either__WEBPACK_IMPORTED_MODULE_33__.Y3((()=>eval(s)),(e=>{api.reportError({...e,message:`Error running custom script ${s}`},userId.get())}))}));const blockers=(0,_sdkql_blockers__WEBPACK_IMPORTED_MODULE_34__.X)({logger,messages});blockers.addBlocker("permutive:queries:initialised");const initialIdentifyResult=(0,_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_12__.b2)();let globalIdentifyBound=!1;messages.on("permutive:user:ready",(()=>{permutiveGlobal.identify=permutiveMethods.identify.bind(permutiveMethods),globalIdentifyBound=!0;const e=identities.extractIdentifyFromQueue({global:permutiveGlobal});e.length>0?initialIdentifyResult.resolve(permutiveGlobal.identify(e)):initialIdentifyResult.resolve()})),messages.on("permutive:blockers:empty",(()=>{if(!globalIdentifyBound){const e=permutiveGlobal.identify;permutiveGlobal.identify=t=>(e(t),initialIdentifyResult.promise)}permutiveGlobal.on=permutiveMethods.on.bind(permutiveMethods),permutiveGlobal.once=permutiveMethods.once.bind(permutiveMethods),permutiveGlobal.track=permutiveMethods.track.bind(permutiveMethods),permutiveGlobal.trigger=permutiveMethods.trigger.bind(permutiveMethods),permutiveGlobal.query=permutiveMethods.query.bind(permutiveMethods),permutiveGlobal.segment=permutiveMethods.segment.bind(permutiveMethods),permutiveGlobal.segments=permutiveMethods.segments.bind(permutiveMethods),permutiveGlobal.reset=permutiveMethods.reset.bind(permutiveMethods),permutiveGlobal.ready=permutiveMethods.ready.bind(permutiveMethods),permutiveGlobal.addon=permutiveMethods.addon.bind(permutiveMethods),permutiveGlobal.context=clientContext.getMutableContextUNSAFE(),permutiveGlobal.addons=addons,permutiveGlobal.config=config,permutiveRealtime.setAsReady(),(0,_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_16__.LA)(permutiveGlobal.q,state,permutiveGlobal,permutiveMethods,api,trace),setAddonsLoaded(!0)}));const loadAddonsSpan=trace.startSpan("load_addons");(0,_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_10__.C)({extMessages:new _dynamic_messages_PermutiveMessages__WEBPACK_IMPORTED_MODULE_35__.a(messages),nextGen,messages,viewId,state,sessionManager,api,clientContext,externalData,logger,metrics,namespace,network,permutive:permutiveGlobal,q:permutiveGlobal.q,userId}),loadAddonsSpan.finish(),await(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_15__.TZ)({api,clientContext,externalData,global:permutiveGlobal,identities,identitiesIngestor,logger,messages,metrics,network,permutiveMethods,reset:permutiveReset,trace,userId,sessionManager,sessionCount:nextGen.metricContext.current.session_count}),(0,_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_36__.R)(messages,metrics,state,logger),(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(_framework_ref__WEBPACK_IMPORTED_MODULE_0__.vP(nextGen.realtime,nextGen.queryLanguageCohorts.all),_framework_ref__WEBPACK_IMPORTED_MODULE_0__.D8(((e,t)=>e[0]===t[0])),_framework_ref__WEBPACK_IMPORTED_MODULE_0__.bw((e=>{let[t,n]=e;t&&permutiveRealtime.setAsRealtime(n.length)})))}),(e=>`Exception during initialisation. Got ${e}`))}},618:(e,t,n)=>{n.r(t),n.d(t,{runSdk:()=>ue});var r=n(7144),i=n(2169);var a=n(132),o=n(2678),s=n(8236);var c=n(3849);class u{namespace;config;logger;constructor(e,t,n){this.namespace=e,this.config=t,this.logger=n}makeCookie(e,t,n){return[encodeURIComponent(this.namespace.getNamespacedStorageKey(e)),"=",t?encodeURIComponent(t):"","; expires=",n,"; domain=",this.config.cookieDomain,"; path=/; samesite=none; secure"].join("")}setCookie(e,t){if(!(t&&e&&this.config.cookieExpiry&&this.config.cookieDomain)){const{cookieExpiry:n,cookieDomain:r}=this.config??{};throw this.logger.warn(`Unable to set cookie. ${c.LP}`,{value:t,cookieName:e,cookieExpiry:n,cookieDomain:r}),new Error(c.LP)}const n=this.makeCookie(e,t,this.config.cookieExpiry);if(n.length>c.dG)throw this.logger.warn(`Unable to set cookie ${this.namespace.getNamespacedStorageKey(e)}. ${c.eP}`),new Error(c.eP);return this.logger.debug(`Setting cookie ${n}`),document.cookie=n,!0}getCookie(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e:this.namespace.getNamespacedStorageKey(e),n=new RegExp("\\b"+encodeURIComponent(t)+"=([^;]+)").exec(document.cookie);return null!==n?decodeURIComponent(n[1]):null}deleteCookie(e){if(!e||!this.config.cookieDomain)return!1;const t=this.makeCookie(e,void 0,"Thu, 01 Jan 1970 00:00:00 UTC");return this.logger.debug(`Deleting cookie ${t}`),document.cookie=t,!0}}var l=n(19);const d=e=>{const{logger:t,consentTracking:n}=e,r=e=>(t.debug(`Cookie: Failed to set cookie ${e} as consent is revoked`),!1);return e=>class extends e{setCookie=(0,l.v)(super.setCookie.bind(this),r,n.isRevoked)}};var g=n(5654),f=n(842);class m{namespace;constructor(e){this.namespace=e}getExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);return window.localStorage.getItem(t)}getExternalJsonData(e){const t=this.getExternalData(e);return null===t?null:(0,f.A)(t)}setExternalData(e,t){const n=this.namespace.getNamespacedStorageKey(e);try{window.localStorage.setItem(n,t)}catch(e){}}setExternalJsonData(e,t){return(0,i.zG)((n=t,(0,r.Y3)((function(){var e=JSON.stringify(n);if("string"!=typeof e)throw new Error("Converting unsupported structure to JSON");return e}),i.yR)),(0,r.UI)((t=>this.setExternalData(e,t))),(0,r.g_)((e=>{throw(0,g.w)(e)}),i.Q1));var n}removeExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);window.localStorage.removeItem(t)}}const p=e=>{const{logger:t,consentTracking:n}=e,r=e=>{t.debug(`External Data: Failed to set key ${e} as consent is revoked`)},i=r,a=r;return e=>class extends e{setExternalData=(0,l.v)(super.setExternalData.bind(this),i,n.isRevoked);setExternalJsonData=(0,l.v)(super.setExternalJsonData.bind(this),a,n.isRevoked)}};var h=n(6371);class v{sdkInitTimestamp;prefix="[Permutive]"+(self.document?"[Main]":"[Worker]");debugStyle=["color: blue"].join(";");constructor(e){this.sdkInitTimestamp=e}get timeDeltaFromInit(){return`[${(new Date).getTime()-this.sdkInitTimestamp}ms]`}log(){return console.log.bind(self.console,this.timeDeltaFromInit,this.prefix)(...arguments)}debug(){return console.debug.bind(self.console,"%s%c%s",this.timeDeltaFromInit,this.debugStyle,this.prefix)(...arguments)}warn(){return console.warn.bind(self.console,this.timeDeltaFromInit,this.prefix)(...arguments)}error(){return console.error.bind(self.console,this.timeDeltaFromInit,this.prefix)(...arguments)}}class _{log(){}debug(){}warn(){}error(){}}const y="[MESSAGES]";class b{logger;messageListenerMap={};replayQueue={};onceTracker={};defaultMessageOptions={withReplay:!1,once:!1};constructor(e){this.logger=e}on(e,t,n){const r=this.mergeMessageOptions(n);r.withReplay&&this.processReplayQueue(e,t);const i=w(e,this.messageListenerMap).push(t)-1;return r.once&&this.addToOnceTracker(e,i),i}once(e,t){return this.on(e,t,{once:!0})}off(e,t){if(null==t)return this.messageListenerMap[e]=[],void(this.replayQueue[e]=[]);t<0?this.logError('Index for "off" fell out of range',{index:t}):w(e,this.messageListenerMap)[t]=i.Q1}emit(e,t,n){const r=this.mergeMessageOptions(n);w(e,this.messageListenerMap).length>0?(this.logDebug(`Emitting Event: ${e}`),this.emitMessageWithPayload(e,t)):r.withReplay&&this.addToReplayQueue(e,t)}addToReplayQueue(e,t){w(e,this.replayQueue).push(t)}processReplayQueue(e,t){var n;null===(n=this.replayQueue[e])||void 0===n||n.forEach((e=>t(e)))}emitMessageWithPayload(e,t){var n;null===(n=this.messageListenerMap[e])||void 0===n||n.forEach(((n,r)=>{n(t),this.removeListenerIfSetToFireOnlyOnce(e,r)}))}addToOnceTracker(e,t){w(e,this.onceTracker).push(t)}removeListenerIfSetToFireOnlyOnce(e,t){var n;null!==(n=this.onceTracker[e])&&void 0!==n&&n.includes(t)&&this.off(e,t)}mergeMessageOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...this.defaultMessageOptions,...e}}logError(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(y,...t)}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(y,...t)}}const w=(e,t)=>t[e]??=[];var E=n(2945);class I{sdkInitTimestamp;timeOriginSdkInit;logger;prefix="[Metrics]";timeOriginForContext=P();pendingMetrics=[];pendingCounters={};pendingTimers={};noMetricsTracked=0;constructor(e,t,n){this.sdkInitTimestamp=e,this.timeOriginSdkInit=t,this.logger=n}isEnabled(){return!0}getNoMetricsTracked(){return this.noMetricsTracked}consume(){const e=this.pendingMetrics.concat(Object.values(this.pendingCounters).flat());return this.pendingMetrics=[],this.pendingCounters={},e}track(e){this.noMetricsTracked++,this.logDebug(`Tracking ${e.name}`,{metric:e}),this.pendingMetrics.push(e)}trackCounter(e){if(this.noMetricsTracked++,this.logDebug(`Tracking ${e.name}`,{metric:e}),e.name in this.pendingCounters){const t=Object.keys(e.labels),n=this.pendingCounters[e.name].findIndex((n=>Object.keys(n.labels).length===t.length&&t.every((t=>n.labels[t]===e.labels[t]))));-1===n?this.pendingCounters[e.name].push(e):this.pendingCounters[e.name][n]=k(this.pendingCounters[e.name][n],e.value)}else this.pendingCounters[e.name]=[e]}synchroniseTimeBetweenContexts(e){return(0,i.zG)(E.gz(s.G5)(this.timeOriginForContext,this.timeOriginSdkInit),s.UI((t=>{let[n,r]=t;return e+n-r})))}trackTimeSinceInit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:performance.now();(0,i.zG)(this.synchroniseTimeBetweenContexts(n),s.UI((e=>(e-this.sdkInitTimestamp)/1e3)),s.UI((n=>this.track({name:e,value:n,labels:t}))))}startTimer(e,t){const n=performance.now(),r=this.generateRandomKey(e);return this.pendingTimers[r]={startTime:n,labels:t},r}stopTimer(e,t){const n=this.pendingTimers[t];if(n){const r=(performance.now()-n.startTime)/1e3;this.logDebug("timer stopped",e,r),this.track({name:e,value:r,labels:n.labels}),delete this.pendingTimers[t]}}generateRandomKey(e){return`${e}-${[...Array(24)].map((()=>Math.random().toString(36)[2])).join("")}`}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(this.prefix,...t)}}class S{isEnabled(){return!1}getNoMetricsTracked(){return 0}consume(){return[]}track(e){}trackCounter(e){}trackTimeSinceInit(e,t){}startTimer(e,t){return""}stopTimer(e,t){}}const k=(e,t)=>({...e,value:e.value+t}),P=()=>(0,i.zG)(s.Y3((()=>performance.timeOrigin)),s.hX((e=>"number"==typeof e&&!Number.isNaN(e))));var C=n(338),G=n(5725),U=n(1868);class A{config;namespace;logger;prefix="[Data Store]";permutiveData={};permutiveDataSize=0;localStorageScheduler;localStorageQueue=new Set;debouncedStorageKeys;debouncedFlush;constructor(e,t,n){this.config=e,this.namespace=t,this.logger=n,this.localStorageScheduler=new G.b(e.localStorageWriteDelay,e.localStorageWriteMaxDelay),this.debouncedFlush=this.localStorageScheduler.schedule(this.flushLocalStorageQueue.bind(this)),this.debouncedStorageKeys=new Set(e.localStorageDebouncedKeys),this.localStorageScheduler.scheduleForPageUnload(this.flushLocalStorageQueue.bind(this)),this.permutiveData=this.buildData()}reset(){this.permutiveData={}}getDataSize(){return this.permutiveDataSize}getData(e){return this.permutiveData[e]}setData(e,t){this.permutiveData[e]=t,this.requestWrite(e)}deleteKey(e){delete this.permutiveData[e],this.requestWrite(e)}requestWrite(e){this.debouncedStorageKeys.has(e)?(this.localStorageQueue.add(e),this.debouncedFlush()):this.writeData(e)}flushLocalStorageQueue(){for(let e of this.localStorageQueue)this.writeData(e);this.localStorageQueue.clear()}buildData(){return{...this.getDataChunk("misc"),...this.getDataChunk("queries")}}getDataChunk(e){const t=this.namespace.getNamespacedStorageKey(this.chunkKeyToStorageKey(e)),n=window.localStorage.getItem(t),r=null===n?null:(0,f.A)(n);return n&&r?(this.permutiveDataSize+=2*n.length,r):{}}chunkKeyToStorageKey(e){switch(e){case"queries":return this.config.permutiveDataQueriesKey;case"misc":return this.config.permutiveDataMiscKey;default:throw new Error(`Unhandled chunk key "${e}"`)}}writeData(e){this.logger.debug(`Data Store: Writing ${e} to localStorage`);const[t,n]=this.dataKeyToChunkInfo(e);return r.Y3((()=>window.localStorage.setItem(this.namespace.getNamespacedStorageKey(t),JSON.stringify(n))),(t=>{const n=(0,g.w)(t);return this.logError(`Failed to set ${e}. Got ${n}`),n}))}dataKeyToChunkInfo(e){const t=e=>(0,C.eu)(this.permutiveData,e);switch(e){case"internal_query_states":case"external_query_states":case"event-source-id":return[this.chunkKeyToStorageKey("queries"),t(L)];case U.Kd:case"identities":case"amp_ready":case"metricsEnabled":case"addon:tradedesk":case"addon:tracking_pixel":case"addon:eyeota_pixel":case"addon:pinterest_pixel":case"addon:facebook_pixel_v2":case"addon:tiktok_pixel":case"addon:appnexus":case"addon:ddp":case"addon:gigya":case"addon:neustar_fabrick":case"pubmatic":case"lotame":return[this.chunkKeyToStorageKey("misc"),t(D)];default:throw new Error(`Unhandled data key "${e}"`)}}logError(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(this.prefix,...t)}}const L=["internal_query_states","external_query_states","event-source-id"],D=[U.Kd,"identities","amp_ready","metricsEnabled","addon:tradedesk","addon:tracking_pixel","addon:eyeota_pixel","addon:pinterest_pixel","addon:facebook_pixel_v2","addon:tiktok_pixel","addon:appnexus","addon:ddp","addon:gigya","addon:neustar_fabrick","pubmatic","lotame"],M=e=>{const{logger:t,consentTracking:n}=e,i=e=>(t.debug(`Data Store: Failed to write ${e} as consent is revoked`),r.F2(void 0));return e=>class extends e{writeData=(0,l.v)(super.writeData.bind(this),i,n.isRevoked)}};class z{config;constructor(e){this.config=e}getNamespacedStorageKey(e){return`${this.config.stateNamespace}${e}`}}var x=n(9792);class T{config;cookies;externalData;ref;isNewlyGenerated;setState;constructor(e,t,n,r){this.config=e,this.cookies=t,this.externalData=n;const[a,o]=x.Ue(this.getOrGenerateUserId());this.ref=(0,i.zG)(a,x.UI((e=>e.userId))),this.isNewlyGenerated=(0,i.zG)(a,x.UI((e=>e.isNewlyGenerated))),this.setState=o,(0,i.zG)(x.vP(this.ref,r),x.YP((e=>{let[t,n]=e;n?(this.cookies.setCookie(this.config.cookieName,t),this.externalData.setExternalData(this.config.cookieName,t)):(this.cookies.deleteCookie(this.config.cookieName),this.externalData.removeExternalData(this.config.cookieName))})))}isEqual(e){return this.ref.current===e}get(){return this.ref.current}set(e){this.setState({userId:e,isNewlyGenerated:!1})}reset(){this.setState({userId:(0,C.k$)(),isNewlyGenerated:!0})}getOrGenerateUserId(){return(0,i.zG)(this.getUserIdFromCookie(),s.wp((()=>this.getUserIdFromLocalStorage())),s.UI((e=>({userId:e,isNewlyGenerated:!1}))),s.fS((()=>({userId:(0,C.k$)(),isNewlyGenerated:!0}))))}getUserIdFromCookie(){return this.getUserIdFromStorageIfValid("cookie")}getUserIdFromLocalStorage(){return this.getUserIdFromStorageIfValid("localStorage")}getUserIdFromStorageIfValid(e){const t=s.DT(C.Gz);return(0,i.zG)("cookie"===e?this.cookies.getCookie(this.config.cookieName):this.externalData.getExternalData(this.config.cookieName),s.ij,s.tS(t))}}class O{config;PATH_JOINER_Q="?";PATH_JOINER_A="&";constructor(e){this.config=e}getBaseUrl(){return`${this.config.apiProtocol}://${this.config.apiHost}`}getEndpointUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("base",e,t,n)}getSdkErrorsUrl(e,t){return this.getUrl("sdk-errors",e,t,[])}getAdvertiserEndpointUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("adv",e,t,n)}getClassificationModelsEndpointUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("clm",e,t,n)}getAudienceMatchingEndpointUrl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const i=`${e}/${n}/audiences`;return this.getUrl("audience-matching",i,t,r)}getCCSCohortMembershipEndpointUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("ccs",e,t,n)}makeAuthenticatedUrl(e){return this.makeUrlWithQueryParams(e,[["k",this.config.apiKey]])}getUrlPrefix(e){switch(e){case"base":return"";case"adv":return"/adv";case"sdk-errors":return"/sdk-errors";case"clm":return"/clm";case"audience-matching":return"/audience-matching";case"ccs":return"/ccs"}}getUrl(e,t,n,r){const i=this.getUrlPrefix(e),a=(0,s.g_)((()=>""),(e=>`/${e}`))(n),o=`${this.getBaseUrl()}${i}${a}${t}`;return this.makeUrlWithQueryParams(o,r.concat([["k",this.config.apiKey]]))}makeUrlWithQueryParams(e,t){const n=t.map((e=>{let[t,n]=e;return`${t}=${n}`})).join(this.PATH_JOINER_A),r=e.includes(this.PATH_JOINER_Q)?this.PATH_JOINER_A:this.PATH_JOINER_Q;return`${e}${r}${n}`}}const q=`permutive.${self.document?"main":"worker"}.`;class R{config;shouldUsePerformanceMark=!1;constructor(e){var t;this.config=e,this.shouldUsePerformanceMark=((null===(t=self.performance)||void 0===t?void 0:t.mark)&&this.config.tracingEnabled)??!1}startSpan(e){const t=this.generateSpan(e);return t.start(),{spanId:t.spanId,finish:t.finish}}measureSinceInit(e){const t=this.generateSpan(`${e}_since_init`);return t.start({startTime:h.NC}),{spanId:t.spanId,finish:t.finish}}traceTask(e){return t=>async()=>{const n=this.startSpan(e),r=await t();return n.finish(),r}}measureBetween(e,t,n){const r=this.generateSpan(e);r.start({startTime:t}),r.finish({startTime:n})}generateSpan(e){if(!this.shouldUsePerformanceMark)return{spanId:null,start:()=>{},finish:()=>{}};const{spanName:t,startMarkerName:n,endMarkerName:r}=R.generateUniqueMarkerNames(e);return{spanId:n,start:e=>{var t;return null===(t=self.performance)||void 0===t?void 0:t.mark(n,e)},finish:e=>{var i,a,o;null===(i=self.performance)||void 0===i||i.mark(r,{startTime:(null==e?void 0:e.startTime)??performance.now()}),null===(a=self.performance)||void 0===a||null===(o=a.measure)||void 0===o||o.call(a,t,n,r)}}}static generateUniqueMarkerNames(e){const t=`${q}${e}`,n=`${t}${R.generateId()}`;return{spanName:t,startMarkerName:`${n}_start`,endMarkerName:`${n}_end`}}static generateId(){return"_"+Math.random().toString(36).substr(2,9)}}var B=n(2063),F=n(1977);const N="permutive-consent",j=(e,t)=>(0,i.zG)((0,s.ij)(t),(t=>!1===e&&(0,s.Wi)(t)?{isValid:!0,consentData:K()}:(e=>(0,s.pC)(e)&&(e=>null!==e&&"object"==typeof e)(e.value)&&(e=>{var t;return!0===e.opt_in&&"string"==typeof e.token&&(null===(t=e.token)||void 0===t?void 0:t.length)>0})(e.value))(t)?{isValid:!0,consentData:t.value}:{isValid:!1,consentData:W()})),K=()=>({opt_in:!0,token:N}),W=()=>({opt_in:!1,token:""}),H=e=>{return(0,i.ls)((t=e,e=>(0,i.zG)(j(t.consentRequired,e),(e=>{let{consentData:n,isValid:r}=e;return t.consentDatabase.put(n,N),r}))),(e=>{let{logger:t,messages:n}=e;return e=>{const r=e?"given":"revoked";return t.log("Consent has been",r),n.emit(`permutive:consent:${r}`),e}})(e));var t},Q=e=>(t,n)=>{e.on("permutive:consent:revoked",t),e.on("permutive:consent:given",n)},Y=async e=>{const{logger:t,namespace:n,consentRequired:o,messages:s}=e,c=new F.oP(window.localStorage,n),u=j(o,await c.get(N)),l=await(0,i.zG)(a.Y3((()=>c.put(u.consentData,N)),(e=>new Error(`LocalStorage access is required. ${(0,g.w)(e).message}`))),(e=>e()));if(r.nM(l))return l;const{consentRef:d,giveConsent:f,revokeConsent:m,isRevoked:p,isGiven:h}=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const[t,n]=x.Ue(e),r=()=>!0===t.current;return{consentRef:t,revokeConsent:()=>(n(!1),t.current),giveConsent:()=>(n(!0),t.current),isRevoked:()=>!r(),isGiven:r}}(u.isValid),v={consentRef:d,isGiven:h,isRevoked:p,listenForConsent:Q(s)};v.listenForConsent(m,f);const _=H({consentDatabase:c,consentRequired:o,logger:t,messages:s});return r.F2({consentTracking:v,consentValidation:_,consentDatabase:c})};var V=n(9912),$=n(64);const J=e=>{const{partialTagWithKey:t}=e,n=t.key;var a;window[n].consent=(a=e,(0,i.ls)(a.consentModule.consentValidation,s.DT(Boolean),s.UI((0,$.initialiseWebSDK)(a)),i.Q1));const c=(0,s.EQ)((()=>{return t={consentDatabase:e.consentModule.consentDatabase,consentRequired:e.tag.config.consentRequired},(0,i.zG)((0,i.a9)(t.consentDatabase.get(N)),(0,o.UI)((e=>j(t.consentRequired,e).isValid)));var t}),o.of);return(0,i.zG)((0,i.zG)((e=>{let{consentModule:t,tag:n}=e;const r=(0,V.Ew)((function(e){return"consent"===e.functionName}))(n.q);return(0,s.UI)((e=>t.consentValidation(e.arguments[0])))(r)})(e),c),(0,o.UI)((e=>e?(0,r.F2)(!0):(0,r.t$)("No consent to run on the page"))))},Z=e=>(0,i.zG)((e=>"function"==typeof e.Map?(0,r.F2)(new e.Map([["a",1]])):(0,r.t$)("Maps not supported"))(e),r.tS((e=>1===e.size?(0,r.F2)(null):(0,r.t$)("Iterable Maps not supported")))),X=e=>(0,i.zG)((e=>"function"==typeof e.Set?(0,r.F2)(new e.Set([1,2])):(0,r.t$)("Sets not supported"))(e),r.tS((e=>2===e.size?(0,r.F2)(null):(0,r.t$)("Iterable Sets not supported")))),ee=e=>(0,i.zG)((0,E.gz)(r.G5)(Z(e),X(e),(e=>e.Worker&&e.Blob?(0,r.F2)(null):(0,r.t$)("WebWorkers not supported"))(e)),(e=>(0,r.UI)(i.Q1)(e)));const te=()=>{const e=(0,n(725).Z)(),t=(e=>{const t=[],n=[],r=()=>{for(;t.length>0&&n.length>0;)n.shift()()},i=e=>new Promise((t=>{n.push((()=>t(e()))),(0,h.HJ)(r)}));return e.addEventListener("message",(0,h.GL)((e=>{null!==e.data&&(t.push(e.data),(0,h.HJ)(r))}))),{next:()=>i((()=>t.shift())),read:()=>i((()=>t.splice(0)))}})(e);return e.postMessage(null),r=>function(e){let{worker:t,trace:r,metrics:a,...c}=e;return t.send({...c,globals:self._____workerGlobals,initialTimestampSecs:(0,i.zG)(s.lo(!1),s.UI((()=>Math.floor(Date.now()/1e3)))),metricsEnabled:a.isEnabled(),timeOriginMainContext:P()}),(0,i.zG)((0,h.SF)((()=>Promise.resolve().then(n.bind(n,1553)))),r.traceTask("import-master-low-priority"),o.UI((e=>n=>e.startMaster({...n,metrics:a,trace:r,worker:t}))))}({...r,worker:{...t,send:t=>e.postMessage(t),stop:()=>e.terminate()}})};var ne=n(5);class re{db;options;constructor(e,t){this.db=e,this.options=t}getSessionId(){return this.options.session_id}sessionHasChanged(){return this.options.hasChanged}static decodeSessionData(e){return e&&"object"==typeof e&&e.hasOwnProperty("session_id")&&e.hasOwnProperty("last_updated")?{...e,last_updated:new Date(e.last_updated)}:null}reset(){return this.db.delete(this.options.session_data_key)}async persistSessionData(e){const t=e.last_updated.toISOString();await this.db.put({...e,last_updated:t},this.options.session_data_key)}static generateNewSession(e){return{session_id:(0,C.k$)(),last_updated:e}}static hasExpired(e,t,n){if(isNaN(t.getTime()))return!0;return e>new Date(t.getTime()+1e3*n)}static async initialise(e,t,n){const r={timeout_seconds:1800,session_data_key:"permutive-session",hasChanged:!1,logger:n};e.deleteCookie(r.session_data_key);const a=new Date,o=await t.get(r.session_data_key).catch(i.gn),s=re.decodeSessionData(o),c=null===s||re.hasExpired(a,s.last_updated,r.timeout_seconds)?{...re.generateNewSession(a),hasChanged:!0}:{...s,last_updated:a,hasChanged:!1},u=new re(t,(0,C.PM)(r,c));return await u.persistSessionData(c),u}}var ie=n(6853),ae=n(7812);class oe{getContextFromEnvironment;context;lastContextFromEnvironment;constructor(e,t){this.getContextFromEnvironment=t,this.lastContextFromEnvironment=t(),this.context=e,this.updateContext(...Object.entries(this.lastContextFromEnvironment),...Object.entries(e))}getMutableContextUNSAFE(){return this.refresh(),this.context}getContext(){return this.refresh(),{...this.context}}getClient(){return this.refresh(),{domain:this.context.domain,referrer:this.context.referrer,title:this.context.title,type:this.context.type,url:this.context.url,user_agent:oe.applyUserAgentExtension(this.context.user_agent)}}static applyUserAgentExtension(e){const t="PermutiveWebSDK/v20.41.1";return e?`${e} ${t}`:t}refresh(){const e=this.getContextFromEnvironment(),t=t=>this.lastContextFromEnvironment[t]===this.context[t]?e[t]:this.context[t]||e[t];this.updateContext(...(0,i.zG)(Object.keys(e),ae.UI((e=>(0,i.bc)(e,t(e)))))),this.lastContextFromEnvironment=e}updateContext(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>{let[t,n]=e;this.context[t]=n}))}}class se extends oe{constructor(e,t){super(e,(()=>({type:"web",user_agent:navigator.userAgent,url:(0,ie.bk)(window.location.href),domain:window.location.hostname||"",title:document.title,referrer:(0,ie.bk)(document.referrer),path:window.location.pathname,view_id:t()})))}async getClientAsync(){return this.getClient()}}const ce=e=>(0,i.zG)(a.Do,(0,i.ls)(a.Qt("support",a.Uo(ee(self))),a.Qt("partialTagWithKey",a.Uo((e=>{var t,n;const a="e1c3fd73-dd41-4abd-b80b-4278d52bf7aa",o=void 0!==(null===(t=e[a])||void 0===t?void 0:t.q)&&void 0!==(null===(n=e[a])||void 0===n?void 0:n.config)?a:"permutive";return(0,i.zG)(e[o],(0,r.ij)("Can't find permutive tag on the page"),(0,r.UI)((e=>({tag:e,key:o}))))})(window))),a.UI((e=>{const t=e.partialTagWithKey.key;return window[t].sdkVersion="v20.41.1",e})),a.Qt("configFromQueryParams",a.Uo((0,B.B9)())),a.Hr("tag",(e=>((e,t)=>{let{tag:n,key:r}=e;return{...n,config:(0,B.ti)({...n.config,windowKey:r},t)}})(e.partialTagWithKey,e.configFromQueryParams))),a.UI((e=>{{const n=e.partialTagWithKey.key,r=window[n];t=r,window.googletag=window.googletag||{cmd:[]},window.googletag.cmd.push((()=>{const e=googletag.pubads(),n=()=>{t.track("AdRequest",{ad_server_id:"dfp",cohorts:e.getTargeting("permutive")})},r=e.getSlots().filter((e=>e.getResponseInformation())).length;for(let e=0;e<r;e++)n();e.addEventListener("slotRequested",n)}))}var t;return e})),a.Hr("trace",(e=>{let{tag:t}=e;return new R(t.config)})),a.Hr("namespace",(e=>{let{tag:t}=e;return new z(t.config)})),a.Hr("logger",(e=>{let{tag:t}=e;return function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.RP;return e.loggingEnabled&&void 0!==(null===(t=self.console)||void 0===t?void 0:t.log)?new v(n):new _}(t.config)}))),a.Hr("urls",(e=>{let{tag:t}=e;return new O(t.config)})),a.Hr("messages",(e=>{let{logger:t}=e;return new b(t)})),a.Hr("worker",(()=>te())),a.ak("consentModule",(e=>(0,i.zG)((()=>Y({...e,consentRequired:e.tag.config.consentRequired})),a.Vn((e=>e.message))))),a.Hr("cookieStore",(e=>{let{consentModule:t,logger:n,namespace:r,tag:a}=e;return((e,t,n,r)=>new((0,i.zG)(u,d({consentTracking:r,logger:n})))(e,t,n))(r,a.config,n,t.consentTracking)})),a.Hr("externalData",(e=>{let{consentModule:t,logger:n,namespace:r}=e;return((e,t,n)=>new((0,i.zG)(m,p({consentTracking:n,logger:t})))(e))(r,n,t.consentTracking)})),a.Hr("userId",(e=>{let{cookieStore:t,consentModule:n,externalData:r,tag:i}=e;return new T(i.config,t,r,n.consentTracking.consentRef)})),a.Hr("permutiveData",(e=>{let{tag:t,namespace:n,logger:r,consentModule:a}=e;return((e,t,n,r)=>new((0,i.zG)(A,M({consentTracking:r,logger:n})))(e,t,n))(t.config,n,r,a.consentTracking)})),a.Hr("metrics",(t=>{let{tag:n,logger:r,permutiveData:i}=t;return function(e,t,n,r,i){const a=r.getData("metricsEnabled")??(()=>{const e=Math.random()<=n.metricsSamplingPercentage/100;return r.setData("metricsEnabled",e),e})()?new I(e,t,i):new S;return a.track({name:"sdk_initialisation_start_time_seconds",value:e/1e3,labels:{}}),a}(e.contextsInitTimestampPerformance,P(),n.config,i,r)})),a.Hr("pageviewState",(e=>{let{tag:t}=e;return(e=>{const t={viewId:(0,i.zG)(e.viewId,s.DT((e=>"string"==typeof e&&(0,C.Gz)(e))),s.fS(C.k$)),watsonEnabled:e.watson.enabled};return(0,i.zG)(x.Ue(t),(e=>{let[n,r]=e;return{ref:n,setState:(0,i.ls)((e=>e(n.current,t)),r)}}))})(t.config)})),(0,i.ls)(a.Hr("localStorage",(e=>{let{logger:t,namespace:n,consentModule:r}=e;return(0,ne.E)(n,t,r.consentTracking.consentRef)})),a.ak("sessionManager",(e=>{let{cookieStore:t,localStorage:n,logger:r}=e;return a.Y3((()=>re.initialise(t,n,r)),(e=>`Failed to initialise session manager: ${e.message}`))})),a.Hr("clientContext",(e=>{let{tag:t,pageviewState:n}=e;return new se(t.context||{},(()=>n.ref.current.viewId))})),a.Hr("core",(t=>{let{clientContext:n,consentModule:r,metrics:a,pageviewState:o,permutiveData:c,sessionManager:u,trace:l,tag:d,userId:g,worker:f}=t;const{eventSourceId:m,isFirstPageview:p}=(0,i.zG)(s.ij(c.getData("event-source-id")),s.hX(C.Gz),s.UI((e=>({eventSourceId:e,isFirstPageview:!1}))),s.fS((()=>({eventSourceId:(0,C.k$)(),isFirstPageview:!0})))),h=r.consentTracking.consentRef;if(p)if(h.current)c.setData("event-source-id",m);else{let e=!1;h.onChange((()=>{e||(e=!0,c.setData("event-source-id",m))}))}return f({consent:h.current,eventSourceId:m,isFirstPageview:p,isSecureContext:(v=d.config,"development"===v.environment?self.isSecureContext:"https:"===self.location.protocol),metrics:a,permutiveConfig:d.config,organizationId:"e1c3fd73-dd41-4abd-b80b-4278d52bf7aa",pageviewState:o.ref.current,sdkInitTimestampPerformance:e.contextsInitTimestampPerformance,sdkInitTimestampDate:e.contextsInitTimestamp,sessionId:u.getSessionId(),trace:l,trackPageviewComplete:!0,userId:g.get(),userIdIsNewlyGenerated:g.isNewlyGenerated.current,webClient:n.getClient()});var v})),a.Hr("currentScript",(()=>s.ij(e.currentScript))),a.ak("consent",(e=>J(e))),a.tS((e=>(0,i.zG)((0,h.SF)((()=>Promise.resolve().then(n.bind(n,64)))),e.trace.traceTask("permutive.main.import_permutiveWebLowPriority"),o.tS((t=>t.initialiseWebSDK(e)))))))),ue=e=>(e=>{e().then((0,r.g_)((e=>console.warn(`Permutive was not initialized. ${e}`)),i.Q1))})(ce(e))},338:(e,t,n)=>{n.d(t,{Bf:()=>_,G6:()=>I,Gz:()=>b,HP:()=>A,Kn:()=>l,Or:()=>P,PM:()=>g,PQ:()=>S,Z_:()=>G,a4:()=>m,aT:()=>v,b2:()=>f,bw:()=>M,cO:()=>k,eu:()=>p,k$:()=>y,lW:()=>C,lo:()=>z,m8:()=>w,mQ:()=>L,qh:()=>d,rH:()=>T,rO:()=>D,vg:()=>U});var r=n(9912),i=n(2169),a=n(8236),o=n(856),s=n(4327),c=n(229),u=n(6371);const l=e=>"object"==typeof e&&!Array.isArray(e)&&null!==e,d=e=>Object.entries(e);function g(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>({...e,...t})),{})}s.ff(c.xb);function f(){let e,t;return{promise:new Promise(((n,r)=>{e=n,t=r})),reject:t,resolve:e}}function m(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={waitTimeInMs:50,exponentialBackOff:!1,maxAttempts:20},{waitTimeInMs:o,exponentialBackOff:s,maxAttempts:c}=g(r,n);let l=0;const d=n=>new Promise((r=>Promise.resolve(t()).then((t=>t?Promise.resolve(e()).then((e=>r((0,a.G)(e)))):(0,i.zG)(l++,(e=>e<c?(0,u.HJ)((()=>r(d(n*(s?2:1)))),n):r(a.YP)))))));return d(o)}function p(e,t){const n=Object.create(null);for(const r of t)n[r]=e[r];return n}let h=[];function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:navigator.userAgent;if(h.unshift(e),h.length>1)return;const n=["beforeunload","pagehide"],r=n.concat(["visibilitychange"]),i=e=>{if(!a&&e){a=!0;const e=h;h=[],e.forEach((e=>{try{e()}catch{}}))}};let a=!1;r.forEach((e=>{window.addEventListener(e,(()=>{const n=("visibilitychange"!==e||document.hidden)&&E(t);i(n)}))})),n.forEach((e=>{window.addEventListener(e,(()=>i(!0)))}))}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t={capture:!0,...t};const n=["visibilitychange","pagehide"];n.forEach((n=>window.addEventListener(n,(()=>a.Y3((()=>{"pagehide"!==n&&"hidden"!==document.visibilityState||e()}))),{capture:t.capture})))}function y(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^(self.crypto||self.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function b(e){return 36===e.length&&/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(e)}function w(){const e={},t=arguments.length;for(let n=0;n<t;n++){const[t,r]=n<0||arguments.length<=n?void 0:arguments[n];e[t]=r}return e}function E(e){return/Mobi|Android/i.test(e)}function I(e){return/^((?!chrome|android).)*safari/i.test(e)}function S(e,t){return new Promise((n=>{(0,u.HJ)((()=>{Promise.resolve(e()).then(n)}),(null==t?void 0:t.timeout)??0)}))}function k(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}const P=()=>({equals:(e,t)=>Object.is(e,t)});function C(e){return(0,o.Zt)(((t,n)=>{const r=e.indexOf(t),i=e.indexOf(n);switch(!0){case-1===r&&-1===i:return 0;case-1!==r&&-1===i:return-1;case-1===r&&-1!==i:return 1;default:return r<=i?-1:1}}))}function G(e,t,n){return function(){try{return n(...arguments)}catch(n){e.reportError(n,t.get())}}}function U(e){return t=>null!=t&&e in t?t[e]:void 0}function A(e){let t=a.YP;const n=(0,a.fS)((()=>{const n=e();return t=(0,a.G)(n),n}));return()=>n(t)}const L=e=>{const t=new Map;return n=>(t.has(n)||t.set(n,e(n)),t.get(n))},D=e=>t=>{const n={...t};for(const i in e){var r;n[i]=null===(r=e[i])||void 0===r?void 0:r.call(e,t[i])}return n};function M(e){return t=>(e(t),t)}const z=e=>t=>{const n=e.slice(0,-1),o=e.slice(-1)[0];return(0,i.zG)(n,r.f2((e=>{let[n,r]=e;return(0,i.zG)(t,a.DT(n),a.UI(r))})),a.fS((()=>o(t))))},x=e=>t=>{if("number"==typeof t)return t;if("string"==typeof t){const n=e(t);return Number.isNaN(n)?void 0:n}},T=x(parseInt);x(parseFloat)},5725:(e,t,n)=>{n.d(t,{b:()=>a});var r=n(338),i=n(6371);class a{timeoutDurationInMilliseconds;maxTimeOutDurationInMilliseconds;constructor(e,t){this.timeoutDurationInMilliseconds=e,this.maxTimeOutDurationInMilliseconds=t}schedule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeoutDurationInMilliseconds,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,t,n)}scheduleAccumulated(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeoutDurationInMilliseconds,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,n,r,t)}scheduleForPageUnload(e){return(0,r.aT)(e)}debounce(e,t,n,a){let o,s,c,u=[];return l=>{a&&(c=a.concat(c??a.empty,l));const d=(0,r.b2)();u.push(d);var g;return null===(g=o)||void 0===g||g(),o=(0,i.HJ)((()=>{var t;null===(t=s)||void 0===t||t(),s=void 0;const n=e(c||l);u.forEach((e=>e.resolve(n))),c=null==a?void 0:a.empty,u=[]}),t),s||(s=(0,i.HJ)((()=>{var t;null===(t=o)||void 0===t||t(),s=void 0;const n=e(c||l);u.forEach((e=>e.resolve(n))),c=null==a?void 0:a.empty,u=[]}),n)),d.promise}}}},3785:(e,t,n)=>{n.d(t,{i:()=>i});var r=n(6371);class i{messages;queue=[];nextNotify=null;constructor(e){this.messages=e,e.on("permutive:taskQueue:update",(()=>{this.execute()}))}add(e){this.queue.push(e),this.notify()}notify(){const e=()=>{this.messages.emit("permutive:taskQueue:update")},t=(new Date).getTime();null===this.nextNotify||this.nextNotify<t-50?(this.nextNotify=t,e()):this.nextNotify<=t&&(this.nextNotify=t+50,(0,r.HJ)(e,50))}execute(){if(0===this.queue.length)return;let e=!1,t=!1,n=0;for(let r=0;r<this.queue.length;r++){const i=this.queue[r];if(i.complete)n+=1;else if(i.started)t=!0,e=e||i.blocks();else{if(i.waits()&&t)break;e||(t=!0,e=e||i.blocks(),i.execute((()=>{this.notify()})))}}this.queue.splice(0,n)}size(){return this.queue.length}}},6853:(e,t,n)=>{n.d(t,{_Y:()=>o,bk:()=>a,zM:()=>i});var r=n(2169);const i=()=>{var e,t;const n=null===(e=window.location.href.split("?")[1])||void 0===e||null===(t=e.split("#")[0])||void 0===t?void 0:t.split("&");return void 0===n?{}:n.reduce(((e,t)=>{const[n,r]=t.split("=");return{...e,[n]:r}}),{})},a=e=>{if(!e)return"";return(0,r.zG)(e,(e=>{const t=e.length-1;return"/"===e[t]?e.slice(0,t):e}))};function o(e){const t=e.match(/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/),n=e.match(/[a-z0-9][a-z0-9-]+\.[a-z.]{2,24}$/i),r=e.match(/localhost/);if(n&&n.length>0){const t=e.split(".").reverse();return t.length>=3&&t[1].match(/^(com|edu|gov|net|mil|org|nom|co|ac|name|info|biz)$/i)?t[2]+"."+t[1]+"."+t[0]:t[1]+"."+t[0]}return t&&(null==t?void 0:t.length)>0?t[0]:r&&(null==r?void 0:r.length)>0?"localhost":""}},5178:(e,t,n)=>{n(377),n(338),n(6371)},6458:(e,t,n)=>{n.d(t,{X:()=>r});const r=e=>{let t=!0;const n=[];return{addBlocker:r=>{n.push(r),e.logger.log("<blockers> added blocker "+r),e.messages.on(r,(()=>{if(t){const i=n.indexOf(r);i>=0&&(n.splice(i,1),e.logger.log("<blockers> removed blocker "+r)),0===n.length&&(t=!1,e.messages.emit("permutive:blockers:empty"),e.logger.log("<blockers> complete"))}}))}}}},5169:(e,t,n)=>{n.d(t,{X:()=>i});var r=n(9792);class i{ref;setCustomProps;constructor(){const[e,t]=r.Ue({});this.ref=e,this.setCustomProps=t}getCustomProps(){return this.ref.current}}},7819:(e,t,n)=>{n.r(t),n.d(t,{EventsCache:()=>E,RESET_HISTORICAL:()=>y});var r=n(5654),i=n(2945),a=n(7812),o=n(7144),s=n(2169),c=n(8236),u=n(2678),l=n(132);const d=e=>({id:e.id,name:e.name,time:new Date(e.time),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),g=e=>({id:e.id,name:e.name,time:(f(e.time)?e.time:new Date).toISOString(),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),f=e=>isFinite(e)&&e instanceof Date;var m=n(338),p=n(5725);class h extends Error{constructor(e){super(e),this.name="StoreClosingError"}}const v="permutive-events-cache",_="permutive-events-for-page",y="historical",b="[EVENTSCACHE]",w=e=>"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name;class E{config;logger;reportError;trace;metrics;userId;makeEventsStore;eventStore;eventsCache=this.makeEventsRepository(v);eventsForPage=this.makeEventsRepository(_);eventsTTLInMilliseconds;readiness;debouncedReportError=(()=>new p.b(5e3,5e3).schedule((e=>this.reportError(e.errorMessage,{userId:e.userId}))))();static initialise(e,t,n,r,i,a,o){return(0,s.zG)(o(),l.UI((s=>new E(e,t,n,r,i,a,o,s))))}constructor(e,t,n,r,i,a,o,l){this.config=e,this.logger=t,this.reportError=n,this.trace=r,this.metrics=i,this.userId=a,this.makeEventsStore=o,this.eventStore=l,this.eventsTTLInMilliseconds=(0,s.zG)((0,c.ij)(this.config.eventsTTLInDays),(0,c.tS)((e=>"number"==typeof e&&e>0?(0,c.G)(24*e*3600):c.YP))),this.eventsCache.events=(0,m.HP)((()=>(0,m.PQ)((0,s.zG)(u.tD((()=>this.trace.startSpan("load_event_cache"))),u.tS((e=>(0,s.zG)(this.loadFromDisk(),u.At((t=>()=>{e.finish(),this.logDebug(`Event cache loaded, #e ${t.length}`)}))))))))),this.readiness=this.eventsCache.events().then((()=>this.migratePreviousPagesEvents())),a.onChange((()=>this.reset()))}async migratePreviousPagesEvents(){const e=this.trace.startSpan("migrate_previous_for_page_events"),t=(0,u.pE)((e=>(0,l.Y3)((()=>e.flush()),r.w)));return(0,s.zG)([this.eventsForPage,this.eventsCache],t,(0,u.UI)((t=>{const n=a.bj(t);return n.length>0&&this.reportError(`Migrate previous events failed. Got:\n${n.join("\n ")}`,{userId:this.userId.current}),e.finish()})),(e=>e()))}all(){return Promise.all([this.eventsCache.events(),this.eventsForPage.events()]).then(a.xH)}async add(e,t){let{persistOnDisk:n}=t;return this.logDebug("Adding to cache",e),this.eventsForPage.events=(0,s.zG)(this.eventsForPage.events,u.UI((t=>[...t,e])),m.HP),n&&this.readiness.then((()=>this.eventsForPage.flush())),e}filterEventsByWorkspace(e){return e}pruneEventsToSizeLimit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config.eventsCacheLimitBytes;if(n<=0||t<=n)return this.logDebug(`Event size of ${t} less than limit of ${n}`),{events:e,sizeInBytes:t};this.logDebug("Events before pruning",{count:e.length,sizeInBytes:t,byteLimit:n});let r=1,i=[...e];for(;t>n;)i.splice(0,r),r*=2,t=2*JSON.stringify(i).length;return this.logDebug("Events after pruning",{count:i.length,sizeInBytes:t}),{events:i,sizeInBytes:t}}loadFromDisk(){const e=()=>[],t=(0,s.zG)(this.eventsTTLInMilliseconds,c.EQ((()=>s.yR),(e=>a.hX((t=>e>Date.now()-t.time.getTime())))));return(0,s.zG)(u.tD((()=>(this.logLog("Loading event cache..."),this.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{})))),u.YO("loadEventsCacheTask"),u.ak("eventsFromDisk",(()=>(0,s.zG)(a.nI([this.eventStore.get(v),this.eventStore.get(_)]),a.UI(l.LV((0,m.lo)([[e=>e instanceof h,(0,s.ls)(e,u.of)],t=>(0,s.zG)(u.tD((()=>this.reportError(`Error fetching data from store. Got ${t}`,{userId:this.userId.current}))),u.tS((()=>()=>this.reset("historical"))),u.UI(e))]),(0,s.ls)(c.fS(e),u.of))),a.vP(u.qA)))),u.At((e=>{let{eventsFromDisk:t,loadEventsCacheTask:n}=e;return()=>{this.logDebug("Read events from store:",t),this.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",n)}})),u.UI((0,s.ls)((0,m.vg)("eventsFromDisk"),a.xH,this.filterEventsByWorkspace,(e=>this.pruneEventsToSizeLimit(e,2*JSON.stringify(e).length)),(e=>(this.eventsCache.sizeInBytes=e.sizeInBytes,this.eventsCache.sizeInBytesLastSuccessfulWrite=e.sizeInBytes,e.events.length>0&&(this.metrics.track({name:"sdk_events_cache_byte_total",value:e.sizeInBytes,labels:{}}),this.metrics.track({name:"sdk_events_cache_size_total",value:e.events.length,labels:{}})),e.events)),a.UI(d),t)))}async reset(e){return(0,s.zG)(u.tD((()=>this.logDebug("Resetting Events Cache"))),u.tS((()=>this.eventStore.deleteStore())),l.tS((()=>this.makeEventsStore())),l.Zl((t=>(this.eventStore=t,e===y?i.gz(l.Ij)(this.eventsCache.reset,this.eventsForPage.flush):i.gz(l.Ij)(this.eventsCache.reset,this.eventsForPage.reset)))),l.wE((()=>()=>this.all())),l.fS((()=>u.of(I()))),(e=>e()))}getStateSizeInBytes(){return this.eventsForPage.sizeInBytes+this.eventsCache.sizeInBytes}makeEventsRepository(e){const t=(()=>{let e=Promise.resolve(o.F2((0,s.Q1)()));return t=>e=e.then(t)})(),n=e=>(0,s.zG)(u.tD((()=>this.logDebug(`Writing ${e.length} events to ${v.key}`))),u.tS((()=>this.eventStore.put(e.map(g),v.key))),l.UI(s.Q1)),i=(0,s.zG)(u.tD((()=>this.logDebug(`Deleting events for ${v.key}`))),u.tS((()=>this.eventStore.delete(v.key))),l.Vn(r.w)),a=(0,s.ls)(u.of,u.At((e=>()=>this.logError(`Events cache failed to put ${v.key}. Got ${e}`))),u.tS((0,m.lo)([[e=>w(e)&&v.retryAttempts<9,()=>(0,s.zG)(u.tD((()=>{v.retryAttempts+=1,this.logDebug(`Attempt #${v.retryAttempts} to write ${v.key} to EventsStore`)})),u.tS((()=>h)),u.tS((()=>d)))],[e=>w(e),e=>(0,s.zG)(u.tD((()=>this.logDebug(`Attempted ${v.retryAttempts} rewrite attempts and reached limit of 9 max writes.`,"Reporting QuotaExceededError to API"))),u.tS((()=>()=>this.debouncedReportError({errorMessage:`Events cache failed to put ${v.key}. Got ${e}`,userId:this.userId.current}))),u.tS((()=>l.t$(e))))],l.t$]))),c=e=>l.tD((()=>{this.logDebug(`Successfully wrote events for ${v.key} after ${v.retryAttempts} attempts`),v.retryAttempts=0,v.sizeInBytes=2*JSON.stringify(e).length,v.sizeInBytesLastSuccessfulWrite=v.sizeInBytes})),d=(0,s.zG)((()=>v.events()),u.tS((e=>(0,s.zG)(n(e),u.mU(o.EQ(a,(()=>c(e)))))))),f=(e,t)=>(0,s.zG)(e.events,u.UI((n=>{const r=2*JSON.stringify(n).length,i=this.pruneEventsToSizeLimit(n,r,t);return e.events=u.of(i.events),e.sizeInBytes=i.sizeInBytes,t-e.sizeInBytes}))),p=(e,t)=>{let[n,...r]=e;return n&&0!==t?(0,s.zG)(f(n,t),u.tS((e=>(this.logDebug(`${e} left after pruning ${n.key}`),p(r,e))))):u.of((0,s.Q1)())},h=(0,s.zG)(l.tD((()=>this.eventsForPage.sizeInBytes-this.eventsForPage.sizeInBytesLastSuccessfulWrite)),l.fX(o.DT((e=>e>0),(e=>new Error(`${this.eventsForPage.key} failed to write the same or smaller events cache of size ${e}`)))),l.tS((e=>{const t=1.2*e,n=[this.eventsCache,this.eventsForPage];return this.logDebug(`Pruning ${t} bytes from`,n),(0,s.zG)(p(n,t),l.fF)}))),v={key:e,events:u.of([]),sizeInBytes:0,sizeInBytesLastSuccessfulWrite:0,retryAttempts:0,flush:()=>(0,s.zG)(u.tD((()=>this.trace.startSpan(`write_${v.key}`))),u.tS((e=>(0,s.zG)(d,u.At((()=>()=>e.finish()))))),t),reset:()=>(0,s.zG)(u.tD((()=>{v.events=u.of([]),v.sizeInBytes=0,v.sizeInBytesLastSuccessfulWrite=0})),u.tS((()=>i)),t)};return v}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(b,...t)}logWarn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.warn(b,...t)}logError(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(b,...t)}logLog(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.log(b,...t)}}const I=()=>[]},9075:(e,t,n)=>{n.r(t),n.d(t,{DBStore:()=>o});var r=n(5654),i=n(8236),a=n(132);class o{db;constructor(e){this.db=Promise.resolve(e)}put(e,t){return(0,a.Y3)((()=>this.db.then((n=>n.put(e,t)))),r.w)}get(e){return(0,a.Y3)((()=>this.db.then((t=>t.get(e))).then(i.ij)),r.w)}delete(e){return(0,a.Y3)((()=>this.db.then((t=>t.delete(e)))),(e=>String(e)))}deleteStore(){return(0,a.Y3)((()=>this.db.then((e=>e.deleteStore()))),(e=>String(e)))}}},8629:(e,t,n)=>{n(338)},6330:(e,t,n)=>{n(6371)},9612:(e,t,n)=>{n.r(t),n.d(t,{eventCacheService:()=>u,eventNameBlacklist:()=>l});var r=n(9792),i=n(3506),a=n(4694),o=n(2169),s=n(7812),c=n(338);const u=e=>i.K4((()=>({newEvents:(0,o.zG)(e.newEvents,r.UI(a.UI((0,c.bw)(s.UI((t=>{let[,n]=t;l.has(n.name)||e.eventsCache.add(n,{persistOnDisk:!0})})))))),priorEvents:()=>e.eventsCache.all()}))),l=new Set(["AdRequest","PageviewEngagement","PrebidAuctions","Reaction","SegmentEntry","SegmentExit","SlotRendered","ThirdPartySegments","VideoEngagement"])},1868:(e,t,n)=>{n.d(t,{Kd:()=>i,eJ:()=>a});n(377);var r=n(3506);n(9792),n(338);const i="addon:twitter_pixel",a=function(e){return r.K4((()=>{}))}},725:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(1005),i=n.n(r);function a(){return i()('/*! @permutive/javascript-sdk v20.41.1 (web) (built 2025-07-09T13:33:59.281Z) */(()=>{"use strict";var e={654:(e,t,n)=>{function r(e){return e instanceof Error?e:new Error("string"==typeof e?e:JSON.stringify(e))}n.d(t,{w:()=>r})},945:(e,t,n)=>{n.d(t,{N:()=>o,Qt:()=>c,Yt:()=>g,a1:()=>s,ap:()=>a,gM:()=>u,gz:()=>d});var r=n(169),i=n(614);function a(e,t){return function(n){return function(r){return e.ap(e.map(r,(function(e){return function(n){return t.ap(e,n)}})),n)}}}function o(e){return function(t){return function(n){return e.ap(e.map(n,(function(e){return function(){return e}})),t)}}}function s(e){return function(t){return function(n){return e.ap(e.map(n,(function(){return function(e){return e}})),t)}}}function c(e){return function(t,n){return function(r){return e.ap(e.map(r,(function(e){return function(n){var r;return Object.assign({},e,((r={})[t]=n,r))}})),n)}}}function u(e){return function(t){return{concat:function(n,r){return e.ap(e.map(n,(function(e){return function(n){return t.concat(e,n)}})),r)}}}}function l(e,t,n){return function(r){for(var i=Array(n.length+1),a=0;a<n.length;a++)i[a]=n[a];return i[n.length]=r,0===t?e.apply(null,i):l(e,t-1,i)}}var f={1:function(e){return[e]},2:function(e){return function(t){return[e,t]}},3:function(e){return function(t){return function(n){return[e,t,n]}}},4:function(e){return function(t){return function(n){return function(r){return[e,t,n,r]}}}},5:function(e){return function(t){return function(n){return function(r){return function(i){return[e,t,n,r,i]}}}}}};function m(e){return i.e$.call(f,e)||(f[e]=l(r.bc,e-1,[])),f[e]}function d(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=t.length,i=m(r),a=e.map(t[0],i),o=1;o<r;o++)a=e.ap(a,t[o]);return a}}function g(e){return function(t){for(var n=Object.keys(t),r=n.length,i=function(e){var t=e.length;switch(t){case 1:return function(t){var n;return(n={})[e[0]]=t,n};case 2:return function(t){return function(n){var r;return(r={})[e[0]]=t,r[e[1]]=n,r}};case 3:return function(t){return function(n){return function(r){var i;return(i={})[e[0]]=t,i[e[1]]=n,i[e[2]]=r,i}}};case 4:return function(t){return function(n){return function(r){return function(i){var a;return(a={})[e[0]]=t,a[e[1]]=n,a[e[2]]=r,a[e[3]]=i,a}}}};case 5:return function(t){return function(n){return function(r){return function(i){return function(a){var o;return(o={})[e[0]]=t,o[e[1]]=n,o[e[2]]=r,o[e[3]]=i,o[e[4]]=a,o}}}}};default:return l((function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i={},a=0;a<t;a++)i[e[a]]=n[a];return i}),t-1,[])}}(n),a=e.map(t[n[0]],i),o=1;o<r;o++)a=e.ap(a,t[n[o]]);return a}}},340:(e,t,n)=>{n.d(t,{Ce:()=>u,DY:()=>S,Eh:()=>O,GY:()=>E,Gb:()=>g,KB:()=>f,Lx:()=>T,Od:()=>c,Qp:()=>b,Su:()=>G,UI:()=>L,YM:()=>d,f2:()=>w,fw:()=>q,hX:()=>x,ke:()=>p,md:()=>v,oA:()=>z,pR:()=>R,tS:()=>A,yL:()=>I,yW:()=>F,zT:()=>h});var r=n(169),i=(n(289),n(614)),a=n(606),o=n(812),s=(n(49),n(226),function(e){return 0===e.length}),c=a.Od,u=a.Ce,l=(a.ws,a.R3),f=(a.Im,function(e,t){return e<=0?[]:a.KB(t)(e)});var m=a.dC,d=(o.P5,o.YM),g=(o.Z$,function(e){return c(e)?i.G(a.Gb(e)):i.YP}),p=function(e){return function(t){return m(e,t)?_(t):t.slice(0,e)}};var y=function(e,t){for(var n=e.length,r=0;r<n&&t(e[r]);r++);return r};function h(e){return function(t){var n=k(y(t,e))(t);return{init:n[0],rest:n[1]}}}var v=function(e){return function(t){return e<=0||s(t)?_(t):e>=t.length?[]:t.slice(e,t.length)}};function b(e){return function(t){return t.slice(y(t,e))}}o.cx;var w=o.f2;o.JO,o.qr;var _=function(e){return e.slice()},E=function(e){return s(e)?[]:e.slice().reverse()},S=function(e){return function(t){return t.length<=1?_(t):t.slice().sort(e.compare)}},I=function(e,t,n){for(var r=[],i=Math.min(e.length,t.length),a=0;a<i;a++)r[a]=n(e[a],t[a]);return r};o.t9;var k=function(e){return function(t){return e>=1&&c(t)?a.lx(e)(t):s(t)?[_(t),[]]:[[],_(t)]}};o.kp,o.Eq;var C=a.of,L=function(e){return function(t){return t.map((function(t){return e(t)}))}},A=function(e){return function(t){return(0,r.zG)(t,function(e){return function(t){for(var n=[],r=0;r<t.length;r++)n.push.apply(n,e(r,t[r]));return n}}((function(t,n){return e(n)})))}},G=function(e){return function(t){return t.map((function(t,n){return e(n,t)}))}},P=function(e){return function(t){for(var n=[],r=0;r<t.length;r++){var a=e(r,t[r]);i.pC(a)&&n.push(a.value)}return n}},U=function(e){return P((function(t,n){return e(n)}))},z=U(r.yR),x=function(e){return function(t){return t.filter(e)}},T=o.Lx,M=(o.xP,o.u4,o.OE),q=(o.nq,o.iw,function(e){var t=D(e);return function(e){return t((function(t,n){return e(n)}))}}),D=function(e){return function(t){return M(e.of([]),(function(n,i,a){return e.ap(e.map(i,(function(e){return function(t){return(0,r.zG)(e,l(t))}})),t(n,a))}))}},O=(o.ZN,o.Eh),R=o.pR,F=(o.pJ,o.oR,a.oo,o.yW);o.j0,i.F4,a.w6,a.QI,a.Ss},335:(e,t,n)=>{function r(e){return function(t){return function(n){return e.chain(n,(function(n){return e.map(t(n),(function(){return n}))}))}}}function i(e){return function(t,n){return function(r){return e.chain(r,(function(r){return e.map(n(r),(function(e){var n;return Object.assign({},r,((n={})[t]=e,n))}))}))}}}n.d(t,{a:()=>i,m:()=>r})},144:(e,t,n)=>{n.d(t,{g1:()=>w,G5:()=>b,dO:()=>y,Pd:()=>I,ak:()=>j,YO:()=>B,tS:()=>E,g_:()=>x,ij:()=>D,Yo:()=>A,DT:()=>L,Eh:()=>g,fS:()=>T,nM:()=>G,t$:()=>c,UI:()=>p,Vn:()=>k,EQ:()=>z,aD:()=>U,of:()=>h,vx:()=>q,F2:()=>u,LF:()=>M,KC:()=>N,i$:()=>F,Y3:()=>O,it:()=>R});var r=n(335),i=n(906),a=n(169),o=n(289),s=n(614),c=s.t$,u=s.F2,l=function(e,t){return(0,a.zG)(e,p(t))},f=function(e,t){return(0,a.zG)(e,v(t))},m=function(e,t){return(0,a.zG)(e,E(t))},d="Either",g=function(e,t){return{equals:function(n,r){return n===r||(G(n)?G(r)&&e.equals(n.left,r.left):P(r)&&t.equals(n.right,r.right))}}},p=function(e){return function(t){return G(t)?t:u(e(t.right))}},y={URI:d,map:l},h=u,v=function(e){return function(t){return G(t)?t:G(e)?e:u(t.right(e.right))}},b={URI:d,map:l,ap:f},w={URI:d,map:l,ap:f,of:h},_=function(e){return function(t){return G(t)?t:e(t.right)}},E=_,S={URI:d,map:l,ap:f,chain:m},I=function(e,t){return function(n){return G(n)?c(e(n.left)):u(t(n.right))}},k=function(e){return function(t){return G(t)?c(e(t.left)):t}},C={URI:d,fromEither:a.yR},L=(0,i.DT)(C),A=(0,i.Yo)(C),G=s.nM,P=s.tO,U=function(e,t){return function(n){return G(n)?e(n.left):t(n.right)}},z=U,x=z,T=function(e){return function(t){return G(t)?e(t.left):t.right}},M=function(e){return G(e)?u(e.left):c(e.right)},q=function(e){return function(t){return G(t)?e(t.left):t}},D=function(e){return function(t){return null==t?c(e):u(t)}},O=function(e,t){try{return u(e())}catch(e){return c(t(e))}},R=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return O((function(){return e.apply(void 0,n)}),t)}},F=U(a.yR,a.yR);function N(e){return e instanceof Error?e:new Error(String(e))}s.F4;var B=(0,o.YO)(y),j=(0,r.a)(S);s.Xl},125:(e,t,n)=>{n.d(t,{EQ:()=>w,F2:()=>s,KQ:()=>m,LF:()=>C,LU:()=>k,LV:()=>_,NG:()=>d,Pd:()=>v,UI:()=>g,Vn:()=>b,ap:()=>p,dQ:()=>I,fS:()=>E,i$:()=>L,ij:()=>f,m8:()=>u,pk:()=>l,t$:()=>c,tS:()=>y,vx:()=>S,wp:()=>h});var r=n(945),i=n(144),a=n(169),o=n(289);function s(e){return(0,a.ls)(i.F2,e.of)}function c(e){return(0,a.ls)(i.t$,e.of)}function u(e){return function(t){return e.map(t,i.F2)}}function l(e){return function(t){return e.map(t,i.t$)}}function f(e){return function(t){return(0,a.ls)(i.ij(t),e.of)}}function m(e){var t=f(e);return function(e){var n=t(e);return function(e){return(0,a.ls)(e,n)}}}function d(e){var t=y(e),n=m(e);return function(e){var r=n(e);return function(e){return t(r(e))}}}function g(e){return(0,o.UI)(e,i.dO)}function p(e){return(0,r.ap)(e,i.G5)}function y(e){return function(t){return function(n){return e.chain(n,(function(n){return i.nM(n)?e.of(n):t(n.right)}))}}}function h(e){return function(t){return function(n){return e.chain(n,(function(n){return i.nM(n)?t():e.of(n)}))}}}function v(e){return function(t,n){return function(r){return e.map(r,i.Pd(t,n))}}}function b(e){return function(t){return function(n){return e.map(n,i.Vn(t))}}}function w(e){return function(t,n){return function(r){return e.map(r,i.EQ(t,n))}}}function _(e){return function(t,n){return function(r){return e.chain(r,i.EQ(t,n))}}}function E(e){return function(t){return function(n){return e.chain(n,i.EQ(t,e.of))}}}function S(e){return function(t){return function(n){return e.chain(n,(function(n){return i.nM(n)?t(n.left):e.of(n)}))}}}function I(e){var t=S(e);return function(n){return t((function(t){return e.map(n(t),(function(e){return i.nM(e)?e:i.t$(t)}))}))}}function k(e){return function(t){return function(n){return e.chain(n,i.EQ((function(n){return e.map(t(n),i.t$)}),(function(t){return e.of(i.F2(t))})))}}}function C(e){return function(t){return e.map(t,i.LF)}}function L(e){return function(t){return e.map(t,i.i$)}}},689:(e,t,n)=>{n.d(t,{MW:()=>c,Uz:()=>o,bc:()=>a,f7:()=>r,n_:()=>i,w4:()=>s});n(169);var r=function(e){return{equals:function(t,n){return t===n||e(t,n)}}},i=function(e){return r((function(t,n){for(var r in e)if(!e[r].equals(t[r],n[r]))return!1;return!0}))},a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r((function(t,n){return e.every((function(e,r){return e.equals(t[r],n[r])}))}))},o=function(e){return function(t){return r((function(n,r){return t.equals(e(n),e(r))}))}},s={equals:function(e,t){return e===t}},c=i;s.equals},906:(e,t,n)=>{n.d(t,{DT:()=>o,Dj:()=>s,Yo:()=>a,fX:()=>c});var r=n(169),i=n(614);function a(e){return function(t){return function(n){return e.fromEither(i.Wi(n)?i.t$(t()):i.F2(n.value))}}}function o(e){return function(t,n){return function(r){return e.fromEither(t(r)?i.F2(r):i.t$(n(r)))}}}function s(e){return function(t){return(0,r.ls)(t,e.fromEither)}}function c(e,t){var n=s(e);return function(e){return function(r){return t.chain(r,n(e))}}}},755:(e,t,n)=>{n.d(t,{At:()=>o,oU:()=>a});var r=n(335),i=n(169);function a(e,t){return function(n){var r=(0,i.ls)(n,e.fromIO);return function(e){return t.chain(e,r)}}}function o(e,t){var n=(0,r.m)(t);return function(t){return n((0,i.ls)(t,e.fromIO))}}},241:(e,t,n)=>{n.d(t,{oU:()=>a,wt:()=>i});var r=n(169);function i(e){return function(t){return(0,r.ls)(t,e.fromTask)}}function a(e,t){return function(n){var i=(0,r.ls)(n,e.fromTask);return function(e){return t.chain(e,i)}}}},289:(e,t,n)=>{function r(e,t){return function(n){return function(r){return e.map(r,(function(e){return t.map(e,n)}))}}}function i(e){return function(t){return function(n){return e.map(n,(function(e){return e(t)}))}}}function a(e){return function(t){return function(n){return e.map(n,(function(e){var n;return(n={})[t]=e,n}))}}}function o(e){return function(t,n){return function(r){return e.map(r,(function(e){var r;return Object.assign({},e,((r={})[t]=n(e),r))}))}}}n.d(t,{Hr:()=>o,OV:()=>i,UI:()=>r,YO:()=>a})},694:(e,t,n)=>{n.d(t,{G5:()=>d,PM:()=>m,RD:()=>b,UA:()=>p,UI:()=>c,dO:()=>f,of:()=>u,qo:()=>g});var r=n(169),i=(n(289),n(614)),a=function(e,t){return function(){return t(e())}},o=function(e,t){return function(){return e()(t())}},s=function(e,t){return function(){return t(e())()}},c=function(e){return function(t){return a(t,e)}},u=r.a9,l="IO",f={URI:l,map:a},m={URI:l,of:u},d={URI:l,map:a,ap:o},g={URI:l,map:a,ap:o,chain:s},p={URI:l,map:a,ap:o,of:u,chain:s},y=(r.yR,r.yR,i.F4,u(i.Xl)),h=function(e){var t=function(e){return function(t){return function(){for(var n=[e(0,i.YM(t))()],r=1;r<t.length;r++)n.push(e(r,t[r])());return n}}}(e);return function(e){return i.Od(e)?t(e):y}},v=function(e){return h((function(t,n){return e(n)}))},b=v(r.yR)},606:(e,t,n)=>{n.d(t,{Ce:()=>l,Eh:()=>E,Gb:()=>I,Im:()=>f,KB:()=>y,Od:()=>s,QI:()=>C,R3:()=>m,Ss:()=>L,dC:()=>c,lx:()=>_,nI:()=>p,of:()=>b,oo:()=>d,ur:()=>k,w6:()=>h,ws:()=>u,yL:()=>w});var r=n(169),i=(n(289),n(614)),a=n(214),o=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},s=function(e){return e.length>0},c=function(e,t){return e<0||e>=t.length},u=function(e){return function(t){return o([e],t,!0)}},l=u,f=function(e){return function(t){return o(o([],t,!0),[e],!1)}},m=f,d=function(e,t,n){if(s(n)){var r=g(n);return r.splice(e,0,t),r}return[t]},g=i.r1,p=function(e){return s(e)?i.G(e):i.YP},y=function(e){return function(t){for(var n=Math.max(0,Math.floor(t)),r=[e(0)],i=1;i<n;i++)r.push(e(i));return r}},h=function(e,t){return e<=t?y((function(t){return e+t}))(t-e+1):[e]};var v=g,b=function(e){return[e]},w=function(e,t,n){for(var r=[n(e[0],t[0])],i=Math.min(e.length,t.length),a=1;a<i;a++)r[a]=n(e[a],t[a]);return r};a.xP,a.Lx;var _=function(e){return function(t){var n=Math.max(1,e);return n>=t.length?[v(t),[]]:[(0,r.zG)(t.slice(1,n),l(S(t))),t.slice(n)]}},E=(a.u4,a.OE,a.nq,a.iw,a.YM,a.ZN,a.Eh),S=(i.F4,a.YM),I=function(e){return e.slice(1)},k=(a.Z$,a.VV,a.Fp,function(e){return function(t){return t.reduce(e.concat)}});a.j0;function C(e,t){return void 0===t?l(e):(0,r.zG)(t,l(e))}var L=function(e,t){return(0,r.zG)(e,m(t))};a.ur},507:(e,t,n)=>{n.d(t,{DT:()=>g,Dj:()=>ue,Do:()=>ve,EK:()=>y,EQ:()=>re,Eh:()=>k,FS:()=>he,G:()=>d,G5:()=>x,Gk:()=>D,Hr:()=>we,IS:()=>p,KQ:()=>ge,NG:()=>pe,OV:()=>se,Qt:()=>Ee,Ri:()=>Q,UI:()=>A,Uo:()=>Z,WG:()=>ye,Wi:()=>te,Y3:()=>me,YO:()=>be,YP:()=>m,aD:()=>ne,ak:()=>_e,bM:()=>R,dO:()=>G,fS:()=>oe,fX:()=>le,fw:()=>X,g1:()=>T,g_:()=>ie,hX:()=>V,ij:()=>fe,it:()=>de,lo:()=>N,pC:()=>ee,pF:()=>ae,pR:()=>C,tS:()=>M,uZ:()=>L,wp:()=>O,xH:()=>ce,xu:()=>J});var r=n(945),i=n(335),a=n(906),o=n(169),s=n(289),c=n(614),u=n(327),l=n(49),f=(n(226),n(302)),m=c.YP,d=c.G;function g(e){return function(t){return e(t)?d(t):m}}var p=function(e){return"Right"===e._tag?m:d(e.left)},y=function(e){return"Left"===e._tag?m:d(e.right)},h=function(e,t){return(0,o.zG)(e,A(t))},v=function(e,t){return(0,o.zG)(e,z(t))},b=function(e,t){return(0,o.zG)(e,M(t))},w=function(e,t){return(0,o.zG)(e,V(t))},_=function(e,t){return(0,o.zG)(e,W(t))},E=function(e,t){return(0,o.zG)(e,Y(t))},S=function(e,t){return(0,o.zG)(e,K(t))},I="Option",k=function(e){return{equals:function(t,n){return t===n||(te(t)?te(n):!te(n)&&e.equals(t.value,n.value))}}},C=function(e){return{equals:k(e).equals,compare:function(t,n){return t===n?0:ee(t)?ee(n)?e.compare(t.value,n.value):1:-1}}},L=function(e){return{concat:function(t,n){return te(t)?n:te(n)?t:d(e.concat(t.value,n.value))},empty:m}},A=function(e){return function(t){return te(t)?m:d(e(t.value))}},G={URI:I,map:h},P=d,U={URI:I,of:P},z=function(e){return function(t){return te(t)||te(e)?m:d(t.value(e.value))}},x={URI:I,map:h,ap:v},T={URI:I,map:h,ap:v,of:P},M=function(e){return function(t){return te(t)?m:e(t.value)}},q={URI:I,map:h,ap:v,chain:b},D=function(e){return function(t){return te(t)?e():t}},O=D,R=function(){return m},F={URI:I,zero:R},N=(0,f.l)(F,U),B=M(o.yR),j=(0,l.s4)(m,m),H=function(e){return te(e)?j:(0,l.s4)(p(e.value),y(e.value))},Q={URI:I,compact:B,separate:H},V=function(e){return function(t){return te(t)?m:e(t.value)?t:m}},W=function(e){return function(t){return te(t)?m:e(t.value)}},Y=function(e){return function(t){return(0,l.s4)(w(t,(0,u.ff)(e)),w(t,e))}},K=function(e){return(0,o.ls)(A(e),H)},J={URI:I,map:h,compact:B,separate:H,filter:w,filterMap:_,partition:E,partitionMap:S},X=function(e){return function(t){return function(n){return te(n)?e.of(m):e.map(t(n.value),d)}}},Z=y,$={URI:I,fromEither:Z},ee=c.pC,te=function(e){return"None"===e._tag},ne=function(e,t){return function(n){return te(n)?e():t(n.value)}},re=ne,ie=re,ae=function(e){return function(t){return te(t)?e():t.value}},oe=ae,se=(0,s.OV)(G),ce=B,ue=(0,a.Dj)($),le=(0,a.fX)($,q),fe=function(e){return null==e?m:d(e)},me=function(e){try{return d(e())}catch(e){return m}},de=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return me((function(){return e.apply(void 0,t)}))}},ge=function(e){return(0,o.ls)(e,fe)},pe=function(e){return function(t){return te(t)?m:fe(e(t.value))}},ye=re(o.gn,o.yR),he=re(o.r5,o.yR);var ve=P(c.F4),be=(0,s.YO)(G),we=(0,s.Hr)(G),_e=(0,i.a)(q),Ee=(0,r.Qt)(x);c.Xl},856:(e,t,n)=>{n.d(t,{Fp:()=>m,Uz:()=>s,VV:()=>f,Zt:()=>o,gf:()=>l,gt:()=>u,lt:()=>c});var r=n(689),i=n(169),a=function(e){return function(t,n){return t===n||0===e(t,n)}},o=function(e){return{equals:a(e),compare:function(t,n){return t===n?0:e(t,n)}}},s=function(e){return function(t){return o((function(n,r){return t.compare(e(n),e(r))}))}},c=(i.W8,function(e){return function(t,n){return-1===e.compare(t,n)}}),u=function(e){return function(t,n){return 1===e.compare(t,n)}},l=function(e){return function(t,n){return-1!==e.compare(t,n)}},f=function(e){return function(t,n){return t===n||e.compare(t,n)<1?t:n}},m=function(e){return function(t,n){return t===n||e.compare(t,n)>-1?t:n}};r.w4.equals},327:(e,t,n)=>{n.d(t,{ff:()=>r,xD:()=>i});n(169);var r=function(e){return function(t){return!e(t)}},i=function(e){return function(t){return function(n){return t(n)&&e(n)}}}},812:(e,t,n)=>{n.d(t,{Ce:()=>p,DZ:()=>X,EQ:()=>b,Eh:()=>me,Eq:()=>B,Ew:()=>A,G:()=>Ie,Hr:()=>Ce,JO:()=>P,Lx:()=>re,N7:()=>x,OE:()=>ie,OV:()=>pe,Od:()=>g,P5:()=>_,R3:()=>y,Su:()=>Y,UI:()=>W,YM:()=>E,Yo:()=>h,Z$:()=>S,ZN:()=>ue,aD:()=>v,bM:()=>H,bj:()=>z,cS:()=>Ee,cx:()=>L,f2:()=>G,hX:()=>K,iw:()=>oe,j0:()=>ke,jG:()=>le,jj:()=>M,kp:()=>N,lo:()=>ve,md:()=>C,nI:()=>_e,nq:()=>ae,oA:()=>Z,oR:()=>we,of:()=>j,pJ:()=>be,pO:()=>q,pR:()=>de,pc:()=>O,qr:()=>U,t9:()=>T,tS:()=>Q,u4:()=>ne,uK:()=>$,uZ:()=>fe,vP:()=>se,xH:()=>V,xP:()=>te,xb:()=>d,yW:()=>Se,zT:()=>k});var r=n(689),i=n(169),a=n(289),o=n(614),s=n(52),c=n(856),u=n(214),l=n(49),f=(n(226),n(302)),m=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},d=function(e){return 0===e.length},g=u.Od,p=u.Ce,y=(u.ws,u.R3);u.Im;var h=function(e){return o.Wi(e)?Ee:[e.value]},v=function(e,t){return function(n){return g(n)?t(n):e()}},b=v,w=u.dC;function _(e,t){return void 0===t?function(t){return _(e,t)}:w(e,t)?o.YP:o.G(t[e])}var E=function(e){return g(e)?o.G(u.YM(e)):o.YP},S=function(e){return g(e)?o.G(u.Z$(e)):o.YP};var I=function(e,t){for(var n=e.length,r=0;r<n&&t(e[r]);r++);return r};function k(e){return function(t){var n=D(I(t,e))(t);return{init:n[0],rest:n[1]}}}var C=function(e){return function(t){return e<=0||d(t)?t:e>=t.length?Ee:t.slice(e,t.length)}};var L=function(e){return function(t){for(var n=0;n<t.length;n++)if(e(t[n]))return o.G(n);return o.YP}};function A(e){return function(t){for(var n=0;n<t.length;n++)if(e(t[n]))return o.G(t[n]);return o.YP}}var G=function(e){return function(t){for(var n=0;n<t.length;n++){var r=e(t[n]);if(o.pC(r))return r}return o.YP}};var P=function(e){return function(t){for(var n=t.length-1;n>=0;n--){var r=e(t[n]);if(o.pC(r))return r}return o.YP}},U=function(e){return function(t){for(var n=t.length-1;n>=0;n--)if(e(t[n]))return o.G(n);return o.YP}},z=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];"Left"===r._tag&&t.push(r.left)}return t};var x=function(e){for(var t=[],n=[],r=0;r<e.length;r++)t[r]=e[r][0],n[r]=e[r][1];return[t,n]};function T(e){return function(t,n){if(void 0===n){var r=T(e);return function(e){return r(t,e)}}for(var i,a=0;a<n.length;a++)if(i=n[a],e.equals(i,t))return!0;return!1}}var M=function(e){var t=u.jj(e);return function(e){return g(e)?t(e):e}},q=function(e){var t=u.pO(e);return function(e){return g(e)?t(e):Ee}},D=function(e){return function(t){return e>=1&&g(t)?u.lx(e)(t):d(t)?[t,Ee]:[Ee,t]}},O=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return h(e.apply(void 0,t))}};var R=function(e,t){return(0,i.zG)(e,W(t))},F=function(e,t,n){return(0,i.zG)(e,ne(t,n))},N=function(e,t){return(0,i.zG)(e,be(t))},B=function(e,t){return(0,i.zG)(e,we(t))},j=u.of,H=function(){return Ee},Q=function(e){return function(t){return(0,i.zG)(t,function(e){return function(t){if(d(t))return Ee;for(var n=[],r=0;r<t.length;r++)n.push.apply(n,e(r,t[r]));return n}}((function(t,n){return e(n)})))}},V=Q(i.yR),W=function(e){return function(t){return t.map((function(t){return e(t)}))}},Y=function(e){return function(t){return t.map((function(t,n){return e(n,t)}))}},K=function(e){return function(t){return t.filter(e)}},J=function(e){return function(t){for(var n=[],r=0;r<t.length;r++){var i=e(r,t[r]);o.pC(i)&&n.push(i.value)}return n}},X=function(e){return J((function(t,n){return e(n)}))},Z=X(i.yR),$=function(e){return ee((function(t,n){return e(n)}))},ee=function(e){return function(t){for(var n=[],r=[],i=0;i<t.length;i++){var a=t[i];e(i,a)?r.push(a):n.push(a)}return(0,l.s4)(n,r)}},te=function(e){return function(t){return function(n){return n.reduce((function(n,r,i){return e.concat(n,t(i,r))}),e.empty)}}},ne=function(e,t){return ie(e,(function(e,n,r){return t(n,r)}))},re=function(e){var t=te(e);return function(e){return t((function(t,n){return e(n)}))}},ie=function(e,t){return function(n){for(var r=n.length,i=e,a=0;a<r;a++)i=t(a,i,n[a]);return i}},ae=function(e,t){return oe(e,(function(e,n,r){return t(n,r)}))},oe=function(e,t){return function(n){return n.reduceRight((function(e,n,r){return t(r,n,e)}),e)}},se=function(e){return function(t){return F(t,e.of(H()),(function(t,n){return e.ap(e.map(t,(function(e){return function(t){return(0,i.zG)(e,y(t))}})),n)}))}},ce="ReadonlyArray",ue=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},le=function(){return{concat:function(e,t){return d(e)?t:d(t)?e:e.concat(t)}}},fe=function(){return{concat:le().concat,empty:Ee}},me=function(e){return(0,r.f7)((function(t,n){return t.length===n.length&&t.every((function(t,r){return e.equals(t,n[r])}))}))},de=function(e){return(0,c.Zt)((function(t,n){for(var r=t.length,i=n.length,a=Math.min(r,i),o=0;o<a;o++){var c=e.compare(t[o],n[o]);if(0!==c)return c}return s.Df.compare(r,i)}))},ge={URI:ce,map:R},pe=(0,a.OV)(ge),ye={URI:ce,of:j},he={URI:ce,zero:H},ve=(0,f.l)(he,ye),be=function(e){return function(t){for(var n=m([],e(t),!0),r=[];n.length>0;){var i=n.shift();o.nM(i)?n.unshift.apply(n,e(i.left)):r.push(i.right)}return r}},we=function(e){return function(t){var n=e(t),r=[],i=[];function a(t){o.nM(t)?e(t.left).forEach((function(e){return r.push(e)})):i.push(t.right)}for(var s=0,c=n;s<c.length;s++){a(c[s])}for(;r.length>0;)a(r.shift());return i}},_e=(u.oo,function(e){return d(e)?Ee:e.slice()}),Ee=u.cS;function Se(e){return function(t){return t.every(e)}}var Ie=function(e){return function(t){return t.some(e)}},ke=function(e){var t=u.j0(e);return function(n){return b((function(){return e.empty}),t(n))}},Ce=(o.F4,(0,a.Hr)(ge));u.w6,u.QI,u.Ss},214:(e,t,n)=>{n.d(t,{Ce:()=>m,Eh:()=>M,Fp:()=>N,Im:()=>d,Lx:()=>A,OE:()=>P,Od:()=>u,QI:()=>V,R3:()=>g,Ss:()=>W,UI:()=>k,VV:()=>F,YM:()=>q,Z$:()=>O,ZN:()=>T,aL:()=>j,c2:()=>h,cS:()=>c,dC:()=>l,iw:()=>z,j0:()=>Q,jj:()=>y,lx:()=>S,nq:()=>G,of:()=>I,oo:()=>p,pO:()=>E,u4:()=>L,ur:()=>B,ut:()=>H,w6:()=>b,ws:()=>f,xP:()=>U});var r=n(689),i=n(169),a=(n(289),n(614)),o=n(794),s=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},c=a.Xl,u=a.Od,l=function(e,t){return e<0||e>=t.length},f=function(e){return function(t){return s([e],t,!0)}},m=f,d=function(e){return function(t){return s(s([],t,!0),[e],!1)}},g=d,p=function(e,t,n){if(u(n)){var r=a.r1(n);return r.splice(e,0,t),r}return[t]},y=function(e){return function(t){if(1===t.length)return t;for(var n=[q(t)],r=function(t){n.every((function(n){return!e.equals(n,t)}))&&n.push(t)},i=0,a=D(t);i<a.length;i++){r(a[i])}return n}},h=function(e){return u(e)?a.G(e):a.YP},v=function(e){return function(t){for(var n=Math.max(0,Math.floor(t)),r=[e(0)],i=1;i<n;i++)r.push(e(i));return r}},b=function(e,t){return e<=t?v((function(t){return e+t}))(t-e+1):[e]};function w(e,t){return t?e.concat(t):function(t){return t.concat(e)}}var _=function(e){return function(t){for(var n=[e,t[0]],r=1;r<t.length;r++)n.push(e,t[r]);return n}},E=function(e){return function(t){for(var n=e(t),r=[n[0]],i=n[1];u(i);){var a=e(i),o=a[0],s=a[1];r.push(o),i=s}return r}},S=function(e){return function(t){var n=Math.max(1,e);return n>=t.length?[t,c]:[(0,i.zG)(t.slice(1,n),m(q(t))),t.slice(n)]}},I=a.ri,k=function(e){return C((function(t,n){return e(n)}))},C=function(e){return function(t){for(var n=[e(0,q(t))],r=1;r<t.length;r++)n.push(e(r,t[r]));return n}},L=function(e,t){return P(e,(function(e,n,r){return t(n,r)}))},A=function(e){return function(t){return function(n){return n.slice(1).reduce((function(n,r){return e.concat(n,t(r))}),t(n[0]))}}},G=function(e,t){return z(e,(function(e,n,r){return t(n,r)}))},P=function(e,t){return function(n){return n.reduce((function(e,n,r){return t(r,e,n)}),e)}},U=function(e){return function(t){return function(n){return n.slice(1).reduce((function(n,r,i){return e.concat(n,t(i+1,r))}),t(0,n[0]))}}},z=function(e,t){return function(n){return n.reduceRight((function(e,n,r){return t(r,n,e)}),e)}},x=a.YM,T=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},M=function(e){return(0,r.f7)((function(t,n){return t.length===n.length&&t.every((function(t,r){return e.equals(t,n[r])}))}))},q=(a.F4,x),D=a.Gb,O=function(e){return e[e.length-1]},R=function(e){return e.slice(0,-1)},F=function(e){var t=o.VV(e);return function(e){return e.reduce(t.concat)}},N=function(e){var t=o.Fp(e);return function(e){return e.reduce(t.concat)}},B=function(e){return function(t){return t.reduce(e.concat)}},j=function(e){return function(t){return e(q(t),D(t))}},H=function(e){return function(t){return e(R(t),O(t))}},Q=function(e){var t=B(e);return function(e){return(0,i.ls)(function(e){return function(t){var n=D(t);return u(n)?(0,i.zG)(n,_(e),m(q(t))):t}}(e),t)}};function V(e,t){return void 0===t?m(e):(0,i.zG)(t,m(e))}var W=function(e,t){return(0,i.zG)(e,w([t]))}},450:(e,t,n)=>{n.d(t,{Bu:()=>h,CC:()=>R,DZ:()=>ne,EG:()=>y,EW:()=>V,Eh:()=>fe,G:()=>T,HA:()=>q,Hd:()=>A,I8:()=>N,P5:()=>v,RF:()=>F,RJ:()=>j,SW:()=>Y,Su:()=>w,UI:()=>_,Ub:()=>J,V_:()=>Q,XP:()=>f,Yz:()=>U,_Y:()=>H,_r:()=>L,cS:()=>b,dp:()=>c,dx:()=>g,e$:()=>p,hX:()=>te,jt:()=>G,kp:()=>O,mK:()=>$,mS:()=>B,nn:()=>D,nr:()=>de,nu:()=>W,oA:()=>ce,oh:()=>ue,qS:()=>Z,ri:()=>k,sq:()=>z,t9:()=>M,tV:()=>ie,uK:()=>re,uZ:()=>me,vA:()=>X,vP:()=>C,xb:()=>u,yW:()=>x,z7:()=>P,zV:()=>K});var r=n(689),i=n(169),a=n(614),o=n(49),s=n(229),c=(n(226),function(e){return Object.keys(e).length}),u=function(e){for(var t in e)if(a.e$.call(e,t))return!1;return!0},l=function(e){return function(t){return Object.keys(t).sort(e.compare)}},f=l(s.Df);function m(e){if("function"==typeof e)return m(s.Df)(e);var t=l(e);return function(e){return function(n){for(var r=[],i=0,a=t(n);i<a.length;i++){var o=a[i];r.push(e(o,n[o]))}return r}}}var d=m(s.Df)((function(e,t){return[e,t]}));var g=function(e,t){return function(n){if(a.e$.call(n,e)&&n[e]===t)return n;var r=Object.assign({},n);return r[e]=t,r}},p=function(e,t){return a.e$.call(t,e)};function y(e){return function(t){if(!a.e$.call(t,e))return t;var n=Object.assign({},t);return delete n[e],n}}function h(e){return function(t,n){if(void 0===n){var r=h(e);return function(e){return r(e,t)}}for(var i in t)if(!a.e$.call(n,i)||!e.equals(t[i],n[i]))return!1;return!0}}function v(e,t){return void 0===t?function(t){return v(e,t)}:a.e$.call(t,e)?a.G(t[e]):a.YP}var b={};function w(e){return function(t){var n={};for(var r in t)a.e$.call(t,r)&&(n[r]=e(r,t[r]));return n}}function _(e){return w((function(t,n){return e(n)}))}function E(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return E(s.Df).apply(void 0,e);var n=l(e[0]);return function(e,t){return function(r){for(var i=e,a=n(r),o=a.length,s=0;s<o;s++){var c=a[s];i=t(c,i,r[c])}return i}}}function S(e){if("compare"in e){var t=l(e);return function(e){return function(n){return function(r){for(var i=e.empty,a=t(r),o=a.length,s=0;s<o;s++){var c=a[s];i=e.concat(i,n(c,r[c]))}return i}}}}return S(s.Df)(e)}function I(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return I(s.Df).apply(void 0,e);var n=l(e[0]);return function(e,t){return function(r){for(var i=e,a=n(r),o=a.length-1;o>=0;o--){var s=a[o];i=t(s,r[s],i)}return i}}}var k=function(e,t){var n;return(n={})[e]=t,n};function C(e){return $(s.Df)(e)}function L(e){return function(t){var n={},r={};for(var i in t)if(a.e$.call(t,i)){var s=e(i,t[i]);switch(s._tag){case"Left":n[i]=s.left;break;case"Right":r[i]=s.right}}return(0,o.s4)(n,r)}}function A(e){return function(t){var n={},r={};for(var i in t)if(a.e$.call(t,i)){var s=t[i];e(i,s)?r[i]=s:n[i]=s}return(0,o.s4)(n,r)}}function G(e){return function(t){var n={};for(var r in t)if(a.e$.call(t,r)){var i=e(r,t[r]);a.pC(i)&&(n[r]=i.value)}return n}}function P(e){return function(t){var n={},r=!1;for(var i in t)if(a.e$.call(t,i)){var o=t[i];e(i,o)?n[i]=o:r=!0}return r?n:t}}var U=d,z=function(e){for(var t={},n=0,r=e;n<r.length;n++){var i=r[n];t[i[0]]=i[1]}return t};function x(e){return function(t){for(var n in t)if(!e(t[n]))return!1;return!0}}function T(e){return function(t){for(var n in t)if(e(t[n]))return!0;return!1}}function M(e){return function(t,n){if(void 0===n){var r=M(e);return function(e){return r(t,e)}}for(var i in n)if(e.equals(n[i],t))return!0;return!1}}var q=function(e,t){return(0,i.zG)(e,_(t))},D=function(e,t){return(0,i.zG)(e,w(t))},O=function(e){var t=ae(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},R=function(e){return function(t){var n=oe(e)(t);return function(e,t){return(0,i.zG)(e,n(t))}}},F=function(e){var t=se(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},N=function(e,t){return(0,i.zG)(e,te(t))},B=function(e,t){return(0,i.zG)(e,ne(t))},j=function(e,t){return(0,i.zG)(e,re(t))},H=function(e,t){return(0,i.zG)(e,ie(t))},Q=function(e){var t=E(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},V=function(e){var t=S(e);return function(e){var n=t(e);return function(e,t){return(0,i.zG)(e,n(t))}}},W=function(e){var t=I(e);return function(e,n,r){return(0,i.zG)(e,t(n,r))}},Y=function(e,t){return(0,i.zG)(e,L(t))},K=function(e,t){return(0,i.zG)(e,A(t))},J=function(e,t){return(0,i.zG)(e,G(t))},X=function(e,t){return(0,i.zG)(e,P(t))},Z=function(e){var t=ee(e);return function(e){var n=t(e);return function(e,t){return n(e,(0,i.ls)(i.SK,t))}}},$=function(e){var t=Z(e);return function(e){var n=t(e);return function(e){return n(e,i.yR)}}},ee=function(e){return function(t){var n=l(e);return function(e,r){var i=n(e);if(0===i.length)return t.of(b);for(var a=t.of({}),o=function(n){a=t.ap(t.map(a,(function(e){return function(t){var r;return Object.assign({},e,((r={})[n]=t,r))}})),r(n,e[n]))},s=0,c=i;s<c.length;s++){o(c[s])}return a}}},te=function(e){return P((function(t,n){return e(n)}))},ne=function(e){return G((function(t,n){return e(n)}))},re=function(e){return A((function(t,n){return e(n)}))},ie=function(e){return L((function(t,n){return e(n)}))};function ae(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=E(e[0]);return function(e,t){return n(e,(function(e,n,r){return t(n,r)}))}}return ae(s.Df).apply(void 0,e)}function oe(e){if("compare"in e){var t=S(e);return function(e){var n=t(e);return function(e){return n((function(t,n){return e(n)}))}}}return oe(s.Df)(e)}function se(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=I(e[0]);return function(e,t){return n(e,(function(e,n,r){return t(n,r)}))}}return se(s.Df).apply(void 0,e)}var ce=function(e){var t={};for(var n in e)if(a.e$.call(e,n)){var r=e[n];a.pC(r)&&(t[n]=r.value)}return t},ue=function(e){var t={},n={};for(var r in e)if(a.e$.call(e,r)){var i=e[r];a.nM(i)?t[r]=i.left:n[r]=i.right}return(0,o.s4)(t,n)},le="ReadonlyRecord";function fe(e){var t=h(e);return(0,r.f7)((function(e,n){return t(e)(n)&&t(n)(e)}))}function me(e){return{concat:function(t,n){if(u(t))return n;if(u(n))return t;var r=Object.assign({},t);for(var i in n)a.e$.call(n,i)&&(r[i]=a.e$.call(t,i)?e.concat(t[i],n[i]):n[i]);return r},empty:b}}s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df;function de(e,t){return a.e$.call(void 0===t?this:t,e)}s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df},794:(e,t,n)=>{n.d(t,{Z$:()=>u,Fp:()=>s,VV:()=>o,n_:()=>c});var r,i=n(614),a=n(856),o=function(e){return{concat:a.VV(e)}},s=function(e){return{concat:a.Fp(e)}},c=function(e){return{concat:function(t,n){var r={};for(var a in e)i.e$.call(e,a)&&(r[a]=e[a].concat(t[a],n[a]));return r}}},u=function(){return{concat:function(e,t){return t}}};r=void 0},49:(e,t,n)=>{n.d(t,{F2:()=>o,Vn:()=>i,s4:()=>r});n(169);var r=function(e,t){return{left:e,right:t}},i=function(e){return function(t){return r(e(a(t)),o(t))}},a=function(e){return e.left},o=function(e){return e.right}},46:(e,t,n)=>{n.d(t,{At:()=>C,Do:()=>L,Hi:()=>w,Hr:()=>G,PM:()=>b,UA:()=>S,UI:()=>d,YO:()=>A,ak:()=>P,ap:()=>g,dO:()=>v,gw:()=>u,mU:()=>I,of:()=>p,pE:()=>M,qA:()=>_,qo:()=>E,tD:()=>c,tS:()=>y,uU:()=>T});var r=n(335),i=n(755),a=n(169),o=n(289),s=n(614),c=function(e){return function(){return Promise.resolve().then(e)}};function u(e){return function(t){return function(){return new Promise((function(n){setTimeout((function(){Promise.resolve().then(t).then(n)}),e)}))}}}var l=function(e,t){return(0,a.zG)(e,d(t))},f=function(e,t){return(0,a.zG)(e,g(t))},m=function(e,t){return(0,a.zG)(e,y(t))},d=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},g=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then((function(e){return(0,e[0])(e[1])}))}}},p=function(e){return function(){return Promise.resolve(e)}},y=function(e){return function(t){return function(){return Promise.resolve().then(t).then((function(t){return e(t)()}))}}},h="Task";var v={URI:h,map:l},b={URI:h,of:p},w={URI:h,map:l,ap:f},_={URI:h,map:l,ap:f,of:p},E={URI:h,map:l,ap:f,chain:m},S={URI:h,map:l,of:p,ap:f,chain:m},I=(a.yR,(0,r.m)(E)),k={URI:h,fromIO:c},C=(0,i.At)(k,E),L=p(s.F4),A=(0,o.YO)(v),G=(0,o.Hr)(v),P=(0,r.a)(E),U=p(s.Xl),z=function(e){var t=function(e){return function(t){return function(){return Promise.all(t.map((function(t,n){return Promise.resolve().then((function(){return e(n,t)()}))})))}}}(e);return function(e){return s.Od(e)?t(e):U}},x=function(e){var t=function(e){return function(t){return function(){return s.Gb(t).reduce((function(t,n,r){return t.then((function(t){return Promise.resolve().then(e(r+1,n)).then((function(e){return t.push(e),t}))}))}),Promise.resolve().then(e(0,s.YM(t))).then(s.ri))}}}(e);return function(e){return s.Od(e)?t(e):U}},T=function(e){return z((function(t,n){return e(n)}))},M=function(e){return x((function(t,n){return e(n)}))}},6:(e,t,n)=>{n.d(t,{At:()=>te,DT:()=>Z,EQ:()=>k,F2:()=>y,Hi:()=>Y,Hr:()=>ae,Ij:()=>ce,LV:()=>C,OV:()=>W,Op:()=>w,QM:()=>h,Qt:()=>se,UI:()=>q,Vn:()=>O,Y3:()=>A,YO:()=>ie,Zl:()=>N,ak:()=>oe,dk:()=>b,fF:()=>E,fS:()=>L,fX:()=>X,fj:()=>I,it:()=>G,lk:()=>v,oU:()=>ee,of:()=>j,t$:()=>p,tD:()=>_,tS:()=>F,wE:()=>re,wp:()=>B});var r=n(945),i=n(335),a=n(125),o=n(906),s=n(755),c=n(241),u=n(169),l=n(289),f=n(614),m=n(46),d=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},g=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},p=a.t$(m.PM),y=a.F2(m.PM),h=a.m8(m.dO),v=a.pk(m.dO),b=(0,u.ls)(m.tD,h),w=(0,u.ls)(m.tD,v),_=b,E=h,S=m.of,I=m.tD,k=a.EQ(m.dO),C=a.LV(m.UA),L=a.fS(m.UA),A=function(e,t){return function(){return d(void 0,void 0,void 0,(function(){var n;return g(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e().then(f.F2)];case 1:return[2,r.sent()];case 2:return n=r.sent(),[2,f.t$(t(n))];case 3:return[2]}}))}))}},G=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return A((function(){return e.apply(void 0,n)}),t)}},P=(m.dO,m.PM,m.PM,m.UA,m.UA,m.UA,m.UA,m.dO,function(e,t){return(0,u.zG)(e,q(t))}),U=function(e,t){return(0,u.zG)(e,R(t))},z=function(e,t){return(0,u.zG)(e,F(t))},x=function(e,t,n){return(0,u.zG)(e,D(t,n))},T=function(e,t){return(0,u.zG)(e,O(t))},M=function(e,t){return(0,u.zG)(e,B(t))},q=a.UI(m.dO),D=a.Pd(m.dO),O=a.Vn(m.dO),R=a.ap(m.Hi),F=a.tS(m.UA),N=F,B=a.wp(m.UA),j=y,H=p,Q="TaskEither";var V={URI:Q,map:P},W=(0,l.OV)(V),Y={URI:Q,map:P,ap:U},K={URI:Q,map:P,ap:U,chain:z},J={URI:Q,fromEither:S},X=(0,o.fX)(J,K),Z=(0,o.DT)(J),$={URI:Q,fromIO:_},ee=(0,s.oU)($,K),te=(0,s.At)($,K),ne={URI:Q,fromIO:_,fromTask:E},re=(0,c.oU)(ne,K);f.F4;var ie=(0,l.YO)(V),ae=(0,l.Hr)(V),oe=(0,i.a)(K),se=(0,r.Qt)(Y),ce=(f.Xl,{URI:Q,bimap:x,mapLeft:T,map:P,of:j,ap:U,chain:z,alt:M,fromIO:_,fromTask:E,throwError:H})},226:(e,t,n)=>{function r(e,t){return function(n){var r=e.traverse(n);return function(e,i){return n.map(r(e,i),t.separate)}}}function i(e,t){return function(n){var r=e.traverse(n);return function(e,i){return n.map(r(e,i),t.compact)}}}n.d(t,{BL:()=>i,Fj:()=>r})},302:(e,t,n)=>{function r(e,t){return function(n){return n?t.of(void 0):e.zero()}}n.d(t,{l:()=>r})},169:(e,t,n)=>{n.d(t,{MZ:()=>a,Q1:()=>l,SK:()=>g,W8:()=>s,a9:()=>o,bc:()=>m,gn:()=>c,ls:()=>f,nn:()=>r,r5:()=>u,yR:()=>i,zG:()=>d});var r=function(e){return function(t){return t(e)}};function i(e){return e}var a=i;function o(e){return function(){return e}}var s=o(!0),c=o(null),u=o(void 0),l=u;function f(e,t,n,r,i,a,o,s,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return i(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return a(i(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return o(a(i(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return s(o(a(i(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return c(s(o(a(i(r(n(t(e.apply(this,arguments)))))))))}}}function m(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function d(e,t,n,r,i,a,o,s,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return i(r(n(t(e))));case 6:return a(i(r(n(t(e)))));case 7:return o(a(i(r(n(t(e))))));case 8:return s(o(a(i(r(n(t(e)))))));case 9:return c(s(o(a(i(r(n(t(e))))))));default:for(var u=arguments[0],l=1;l<arguments.length;l++)u=arguments[l](u);return u}}var g=function(e,t){return t}},614:(e,t,n)=>{n.d(t,{F2:()=>f,F4:()=>h,G:()=>s,Gb:()=>p,Od:()=>d,Wi:()=>i,Xl:()=>y,YM:()=>g,YP:()=>o,e$:()=>v,nM:()=>c,pC:()=>a,r1:()=>b,ri:()=>m,t$:()=>l,tO:()=>u});var r=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},i=function(e){return"None"===e._tag},a=function(e){return"Some"===e._tag},o={_tag:"None"},s=function(e){return{_tag:"Some",value:e}},c=function(e){return"Left"===e._tag},u=function(e){return"Right"===e._tag},l=function(e){return{_tag:"Left",left:e}},f=function(e){return{_tag:"Right",right:e}},m=function(e){return[e]},d=function(e){return e.length>0},g=function(e){return e[0]},p=function(e){return e.slice(1)},y=[],h={},v=Object.prototype.hasOwnProperty,b=function(e){return r([e[0]],e.slice(1),!0)}},52:(e,t,n)=>{n.d(t,{Df:()=>i,Eq:()=>r,Pc:()=>o});var r={equals:function(e,t){return e===t}},i={equals:r.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},a=(r.equals,i.compare,{concat:function(e,t){return e+t}}),o={concat:a.concat,empty:0}},229:(e,t,n)=>{n.d(t,{Df:()=>i,Eq:()=>r,HD:()=>a,xb:()=>o});var r={equals:function(e,t){return e===t}},i={equals:r.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},a=function(e){return"string"==typeof e},o=function(e){return 0===e.length}},371:(e,t,n)=>{n.d(t,{GL:()=>s,HJ:()=>c,N1:()=>f,NC:()=>r,RP:()=>i,UM:()=>u,t_:()=>l});const r=performance.now(),i=(new Date).getTime();let a=[],o=!1;const s=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return c((()=>e(...n)))},c=(e,t)=>{if(!o){const n=self.setTimeout(e,t);return()=>self.clearTimeout(n)}let n;const r=()=>{void 0!==n&&o&&a.length<1e4&&a.push([n,performance.now()]),n=void 0},i=[self.setTimeout((()=>{n=performance.now(),self.requestAnimationFrame(r),e()}),t),self.setTimeout(r,t)];return()=>{void 0===n&&i.forEach((e=>self.clearTimeout(e)))}},u=(e,t)=>{if(!o){const n=self.setInterval(e,t);return()=>self.clearInterval(n)}let n=!1,r=()=>{};const i=self.setInterval((()=>{r=c((()=>{n||e()}))}),t);return()=>{n=!0,r(),self.clearInterval(i)}},l=e=>new Promise(((t,n)=>e.then(s(t),s(n)))),f=e=>()=>l(e())},792:(e,t,n)=>{n.d(t,{g1:()=>I,YO:()=>_,oQ:()=>x,a9:()=>h,Ue:()=>g,gS:()=>p,D8:()=>z,VS:()=>k,xH:()=>C,En:()=>y,fF:()=>U,Hr:()=>E,UI:()=>b,u4:()=>L,Rp:()=>A,vP:()=>G,bw:()=>T,YP:()=>v});var r=n(169),i=n(507),a=n(812),o=n(338);function s(e){let t=e,n=[],r=!1;return{addListener(e){if(r)return()=>{};let i=t;const a=()=>{Object.is(t,i)||(i=t,e(t))};n=[...n,a];return()=>{n=n.filter((e=>e!==a))}},notify(e){if(r)throw new Error("Ref bug: Attempted to notify a terminated notifier");Object.is(e,t)||(t=e,n.forEach((e=>e())))},terminate(){r=!0,n=[]}}}function c(e,t){let n=0;return function(){try{if(n++>0)throw new Error(e);return t(...arguments)}finally{n--}}}function u(e,t){let n=[...new Set(e)].filter((e=>"final"!==e.state));if(0===n.length)return{state:"final",onStateChange:()=>()=>{}};const r=()=>0===n.length?"final":n.some((e=>"might_change"===e.state))?"might_change":"nominal",[i,a]=l(r(),(e=>"might_change"!==e&&t())),o=()=>a(r());return n.forEach((t=>{t.onStateChange((t=>{switch(t){case"final":n=e.filter((e=>"final"!==e.state)),o();break;case"might_change":a("might_change");break;case"nominal":o();break;default:throw new Error(`Ref bug: Invalid state ${t}`)}}))})),i}function l(e,t){if("final"===e)return[{state:"final",onStateChange:()=>()=>{}},()=>{}];const{terminate:n,notify:r,addListener:i}=s(e),a={state:e,onStateChange:i},o=c("Disallowed recursion in Branch.",(e=>{if("final"===a.state){if("final"===e)return;throw new Error(`Attempted to change state of final branch to ${e}.`)}try{null==t||t(e),a.state=e,r(e)}finally{"final"===e&&n()}}));return[a,o]}var f=n(289),m=n(694);const d="Ref";function g(e){const[t,n,r]=function(){const[e,t]=l("nominal"),n=c("Disallowed recursion in Branch.",(n=>{if("final"===e.state)throw new Error("Attempted to mutate a finalized Ref.");const r=e.state;try{t("might_change"),n()}finally{t(r)}}));return[e,n,()=>t("final")]}(),[i,a]=M(t,e);return[i,e=>n((()=>a(e))),r]}function p(e){let t=e.empty;const n=()=>()=>{const n=t;return t=e.empty,n},[r,i,a]=g(n());return[r,r=>{t=e.concat(t,r),i(n())},a]}function y(e,t){return n=>{let i=new Array(e).fill(t.empty);return new Array(e).fill(null).map(((e,a)=>(0,r.zG)(n,b(m.UI((e=>{const n=t.concat(i[a],e);return i=i.map(((n,r)=>r===a?t.empty:t.concat(n,e))),n}))))))}}function h(e){return{get current(){return e},onChange:()=>()=>{},branch:{state:"final",onStateChange:()=>()=>{}}}}function v(e){return t=>{const n=t.onChange(e);return e(t.current),n}}function b(e,t){if(t){const[n,r]=M(t.branch,e(t.current));return t.onChange((t=>r(e(t)))),n}return t=>b(e,t)}const w={URI:d,map:(e,t)=>b(t)(e)},_=f.YO(w),E=f.Hr(w),S=e=>k((t=>b(t)(e))),I={URI:d,of:h,map:w.map,ap:(e,t)=>S(t)(e)};function k(e,t){return t?C(b(e,t)):t=>C(b(e,t))}function C(e){if("final"===e.branch.state)return e.current;const[t,n]=function(e,t){let n=t;const r=[e.state,n.state].includes("might_change")?"might_change":"nominal",[i,a]=l(r),o=e=>t=>{switch(t){case"final":a(e().state);break;case"might_change":a("might_change");break;case"nominal":"might_change"===e().state?a("might_change"):a("nominal");break;default:throw new Error(`Ref bug: Unexpected upstream state ${t}`)}};e.onStateChange(o((()=>n)));const s=o((()=>e));let c=n.onStateChange(s);return[i,e=>{n=e,c(),c=e.onStateChange(s),s(n.state)}]}(e.branch,e.current.branch),[r,i]=M(t,e.current.current);let a=e.current.onChange(i);return e.onChange((e=>{a(),a=e.onChange(i),n(e.branch),i(e.current)})),r}function L(e){return t=>{if("final"===t.branch.state)return t;let n=i.YP;return b((t=>{if(i.Wi(n))return n=i.G(t),t;const r=e(n.value,t);return n=i.G(r),r}),t)}}function A(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{if(2===t.length){let n=t[0];return b((e=>(n=t[1](n,e),n)),e)}let n=i.bM();return b((e=>{const r=t[0](n,e);return n=i.G(r),r}),e)}}function G(){if(0===arguments.length||q(arguments.length<=0?void 0:arguments[0]))return P(...arguments);const e=arguments.length<=0?void 0:arguments[0],t=Object.keys(e);return(0,r.zG)(Object.values(e),(e=>P(...e)),b((0,r.ls)(a.Su(((e,n)=>[t[e],n])),Object.fromEntries)))}function P(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return h([]);if(1===t.length)return b((e=>[e]))(t[0]);let r=!1;t.forEach((e=>e.onChange((()=>{if("might_change"!==e.branch.state)throw new Error("Ref bug: Received a change notification without a `might_change` state.");r=!0}))));const i=t.map((0,o.vg)("branch")),a=()=>{r&&(r=!1,l(t.map((e=>e.current))))},s=u(i,a),[c,l]=M(s,t.map((e=>e.current)));return c}function U(e){const[t,n,a]=g(i.YP);return e().then((0,r.ls)(i.G,n,a)),t}function z(e){const t=e.hasOwnProperty("equals")?e.equals:e;return L(((e,n)=>t(e,n)?e:n))}function x(e){return q(e)?e:h(e)}function T(e){return t=>(v(e)(t),t)}function M(e,t){if("final"===e.state)return[h(t),()=>{}];const n=s(t);e.onStateChange((e=>{"final"===e&&n.terminate()}));let r=t;return[{get current(){return r},onChange:n.addListener,branch:e},c("Disallowed recursion in Ref.",(e=>{r=e,n.notify(r)}))]}function q(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&"function"==typeof e.onChange}},506:(e,t,n)=>{n.d(t,{Hr:()=>y,K4:()=>c,KD:()=>b,UI:()=>f,VS:()=>d,YO:()=>h,ak:()=>p,bw:()=>m,dQ:()=>u,kR:()=>w,of:()=>l,vP:()=>g,yi:()=>v});var r=n(792),i=n(169),a=n(338),o=n(450),s=n(507);const c=e=>(0,i.ls)((t=>{let{previousState:n,...r}=t;return e(r)}),(e=>({value:e,state:r.a9(void 0)}))),u=i.yR,l=(0,i.ls)(i.a9,c),f=e=>t=>(0,i.ls)(t,(0,a.rO)({value:e})),m=e=>t=>(0,i.ls)(t,(0,a.rO)({value:(0,a.bw)(e)}));function d(e){return t=>n=>{let{previousState:i,...a}=n;const o=t({previousState:Array.isArray(i)?i[0]:void 0,...a}),s=e(o.value)({previousState:Array.isArray(i)?i[1]:void 0,...a});return{value:s.value,state:r.vP(o.state,s.state)}}}function g(e){return t=>{let{previousState:n,...a}=t;const s=S(n)?n:{},c=(0,i.zG)(e,o.Su(((e,t)=>t({previousState:s[e],...a}))));return{value:(0,i.zG)(c,o.UI((e=>e.value))),state:(0,i.zG)(c,o.UI((e=>e.state)),(e=>r.vP(e)))}}}function p(e,t){return n=>(0,i.ls)((0,a.rO)({previousState:E}),(a=>{const o=n(a),s=t(o.value)({...a,previousState:a.previousState[e]});return{value:(0,i.zG)([o.value,s.value],(t=>{let[n,r]=t;if(!S(n))throw new Error("Service.bind() was passed an upstream Service with a non-record value.");return{...n,[e]:r}})),state:(0,i.zG)(r.vP(o.state,s.state),r.UI((t=>{let[n,r]=t;if(void 0===n)return{[e]:r};if(!S(n))throw new Error("Service.bind() was passed an upstream Service with a non-record state.");return{...n,[e]:r}})))}}))}const y=(e,t)=>f((n=>({...n,[e]:t(n)})));function h(e){return t=>(0,i.ls)((0,a.rO)({previousState:(0,i.ls)(E,(t=>t[e]))}),t,(0,a.rO)({value:t=>({[e]:t}),state:r.UI((t=>({[e]:t})))}))}const v=(e,t)=>{const n=t||(t=>t===e);return t=>u((o=>{let{previousState:s,...c}=o;const u=Array.isArray(s)&&2===s.length&&n(s[0])?s[1]:void 0;return(0,i.zG)({previousState:u,...c},t,(0,a.rO)({state:r.UI((t=>[e,t]))}))}))},b=e=>{const t=e.slice(0,-1),n=e.slice(-1)[0],r=[...t.map((e=>{let[t,n]=e;return[t,(0,i.a9)(n)]})),(0,i.a9)(n)];return w((0,a.lo)(r))};function w(e){return(0,i.ls)(r.UI(e),_)}function _(e){const t=(0,i.zG)(e,r.Rp(0,(e=>e+1)));return n=>{let{previousState:a,stopped:o,...c}=n;return(0,i.zG)(r.vP(e,t),r.Rp(((e,n)=>{let[u,l]=n;return(0,i.zG)(e,s.UI((e=>e.state.current)),s.fS((()=>a)),(e=>u({previousState:e,stopped:(0,i.zG)(r.vP(o,t),r.UI((e=>{let[t,n]=e;return t||n!==l}))),...c})))})),(e=>({value:r.UI((e=>e.value),e),state:r.VS((e=>e.state),e)})))}}function E(e){return S(e)?e:{}}function S(e){return"object"==typeof e&&null!==e}},999:(e,t,n)=>{n.d(t,{d:()=>f,m:()=>l});var r=n(169),i=n(144),a=n(507),o=n(792),s=n(338),c=n(506),u=n(689);const l=e=>c.dQ((t=>{let{stopped:n,previousState:c}=t;const u=function(e){return y(e)?e:{validityKey:"",lastSuccess:a.YP}}(c),l=(0,r.zG)(u,(e=>({...e,inFlight:a.YP,lastSuccess:(0,r.zG)(e.lastSuccess,a.UI(i.F2))}))),f=(0,r.zG)(e,o.UI((e=>"currentTimestampSecs"in e&&"freshness"in e&&"validity"in e?e:{currentTimestampSecs:0,validity:{key:e.validityKey,maxAge:Number.MAX_SAFE_INTEGER},freshness:{key:e.freshnessKey,maxAge:Number.MAX_SAFE_INTEGER},refresh:e.refresh})),(e=>o.vP(e,n)),o.Rp(o.a9(l),((e,t)=>{let[n,c]=t;if(c)return e;const u=n.validity.key(),l=a.hX((e=>n.currentTimestampSecs-e.timestamp<=n.validity.maxAge)),f=(0,s.HP)(n.freshness.key),m=a.hX((e=>n.currentTimestampSecs-e.timestamp<=n.freshness.maxAge&&e.freshnessKey===f())),d=(0,r.zG)(e,o.UI((0,r.ls)(a.DT((e=>e.validityKey===u)),a.EQ((()=>({validityKey:u,inFlight:a.YP,lastSuccess:a.YP})),(0,s.rO)({inFlight:l,lastSuccess:a.tS(i.EQ((e=>a.G(i.t$(e))),(0,r.ls)(a.G,l,a.UI((e=>i.F2(e))))))})))),o.D8(g()));if((0,r.zG)(d.current,(e=>(0,r.zG)(e.inFlight,a.wp((()=>(0,r.zG)(e.lastSuccess,a.tS(a.Uo)))),m,a.pC))))return d;const p=()=>({timestamp:n.currentTimestampSecs,freshnessKey:f(),output:a.YP});return(0,r.zG)(n.refresh,a.EQ((()=>d),(0,r.ls)((0,r.nn)({previous:(0,r.zG)(d.current.lastSuccess,a.tS(a.Uo),a.tS((e=>e.output)))}),o.fF,o.UI(a.EQ((()=>(0,r.zG)(d,o.UI((0,s.rO)({inFlight:()=>a.G(p())})))),i.EQ((e=>(0,r.zG)(d,o.UI((0,s.rO)({inFlight:()=>a.YP,lastSuccess:(0,r.ls)(a.tS((0,r.ls)(a.Uo,a.hX((e=>a.pC(e.output))))),i.Yo((()=>e)),a.G)})))),(e=>o.a9({validityKey:u,inFlight:a.YP,lastSuccess:a.G(i.F2({...p(),output:a.G(e)}))}))))),o.xH)))})),o.xH,o.D8(g())),m=(0,r.zG)(f,o.UI((e=>({validityKey:e.validityKey,lastSuccess:(0,r.zG)(e.lastSuccess,a.tS(a.Uo))}))),o.D8(p())),d=(0,r.zG)(m,o.Rp(-1,(e=>e+1)));return{value:(0,r.zG)(f,o.UI((0,r.ls)((0,s.vg)("lastSuccess"),a.UI(i.UI((e=>e.output))),a.fS((()=>i.F2(a.YP)))))),state:(0,r.zG)(o.vP(m,d),o.UI((e=>{let[t,n]=e;return n>0?t:p().equals(t,u)?c:t})))}})),f=e=>t=>(0,r.ls)((0,s.rO)({previousState:(0,r.ls)(a.DT(y),a.YO("s1"),a.Hr("s2",(t=>{let{s1:n}=t;return(0,r.zG)(n,(0,s.rO)({lastSuccess:a.UI((0,s.rO)({output:a.tS(e)}))}))})),a.UI((e=>{let{s1:t,s2:n}=e;return p().equals(t,n)?t:n})),a.FS)}),t),m=()=>u.n_({freshnessKey:(0,s.Or)(),timestamp:(0,s.Or)(),output:a.Eh((0,s.Or)())});function d(e){return"object"==typeof e&&null!==e&&(!(!("freshnessKey"in e)||!h(e.freshnessKey))&&("timestamp"in e&&"number"==typeof e.timestamp&&!(!("output"in e)||!(0,s.El)(e.output))))}const g=()=>u.n_({validityKey:(0,s.Or)(),inFlight:a.Eh(m()),lastSuccess:a.Eh(i.Eh((0,s.Or)(),m()))}),p=()=>u.n_({validityKey:(0,s.Or)(),lastSuccess:a.Eh(m())});function y(e){return"object"==typeof e&&null!==e&&(!(!("validityKey"in e)||!h(e.validityKey))&&!!("lastSuccess"in e&&(0,s.El)(e.lastSuccess)&&(0,r.zG)(e.lastSuccess,a.EQ((()=>!0),d))))}function h(e){return null===e||"string"==typeof e||"number"==typeof e}},903:(e,t,n)=>{n.r(t),n.d(t,{PermutiveActivationManagerWeb:()=>o,optimisedActivationsConfig:()=>a});class r{logger;permutive;id;segmentCode;triggerType;config;workspaceLevelConfig;prefix="[Activation]";constructor(e,t,n,r,i,a,o){this.logger=e,this.permutive=t,this.id=n,this.segmentCode=r,this.triggerType=i,this.config=a,this.workspaceLevelConfig=o}getSegmentCode(){return this.segmentCode}getTriggerType(){return this.triggerType}getConfig(){return this.config}getWorkspaceLevelConfig(){return this.workspaceLevelConfig}trackImpression(e){return this.trackActivation("impression",e)}trackConversion(e){return this.trackActivation("conversion",e)}trackActivation(e,t){const n={reaction_id:this.id,type:e};this.permutive.track("Reaction",n,t),this.logger.log(this.prefix,n.type,n)}}var i=n(377);const a={dfp:{dfp:[17127,51098,18320,24101,18790,139666,74665,122046,18314,18807,17138,24105,18238,26442,19669,122051,81793,143049,24103,18797,81785,171478,77423,81789,175295,18264,20646,92622,18805,24102,18318,16982,87696,27111,81790,101060,32095,81795,22514,17068,74662,147839,17135,75874,79190,21541,17186,18310,22529,20645,102213,51101,88113,117171,74664,18270,81786,122047,106717,74661,158581,113877,81781,18246,17128,18356,151211,24104,22710,18240,18263,22515,16781,23937,18312,18300,148849,102214,66495,20534,102103,92621,30222,81794,79184,21540,32729,18735,16782,158589,21535,17183,88865,17185,117084,18295,16780,79183,87744,18248,18297,85622,122044,21538,158591,23027,81780,18298,18269,103258,21267,76402,16843,81792,149016,74657,86173,56090,164501,87738,18734,20833,74659,101171,158466,20715,175294,20531,24106,28394,17427,32094,18247,18732,122054,18803,51099,17187,18439,20494,20008,55914,18239,98074,17182,18791,158585,74660,87739,58181,18294,17117,18440,99536,18317,99689,16842,79187,26443,81791,81782,18321,18253,51100,18254,87742,153825,156961,81788,71282,26440,158583,158434,18731,81783,16987,122049,56089,17075,122045,58310,128830,17173,87740,18806,19902,81787,102153,17125,77520,18271,113879,18245,71287,20431,158465,73402,158432,55934,18260,17174,17124,18445,79188,81784,20469,102212,17180,18315,18437,113878,18212,18268,20714,18323,18250,94606,20283,87741,18733,176218,178280,180410,180411,180412,184306,186124,186125,187959,188019,188465,190331,179639,192761,192764,193156,194701,194723,195323,195324,195325,195959,195960,196268,196269,197176,197394,197395,197397,199533,199535,199538,199539,199540,196826,200508,200511,201371,202584,203239,205165,205164,206452,206485,193476,207904,207935,208372,173728,209192,209455,207153,210673,213839,214156,214858,217630,217968,218182,218272,218494,218888,218894,218936,218937,218941,218942,218943,218944,219014,219015,219772,220220,220580,220658,220949,220992,221084,220935,221508,219733,223362,225198,215422,217623,226257,226814,229836,230821,232149,232671,232996,233373,233384,235111,237358,237536,238058,238129,238168,238461,239678],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:0},appnexus:{},appnexus_adserver:[],nativo:[],rubicon_ssp:[],smart:[],freewheel:[],curation_platforms:{adv:["adv"]}};class o{logger;permutive;clientContext;constructor(e,t,n){this.logger=e,this.permutive=t,this.clientContext=n}getSpecializedActivations(e){return a[e]}getActivations(e){return(0,i.Hn)(e)("activationConfigs",[]).filter((e=>this.areContextCriteriaSatisfied(e))).map((e=>new r(this.logger,this.permutive,e.id,e.sc,e.tt,e.c,e.wc)))}areContextCriteriaSatisfied(e){const t=e.cc,n=e=>{const t=this.clientContext.getContext()[e.key];switch(e.comparison){case"EQUALS":return t===e.value;case"NOT_EQUALS":return t!==e.value;case"CONTAINS":return"string"==typeof t&&t.indexOf(e.value)>=0;case"NOT_CONTAINS":return"string"==typeof t&&t.indexOf(e.value)<0}};return!t||("AND"===(r=t).operator?r.criteria.every(n):r.criteria.some(n));var r}}},377:(e,t,n)=>{n.d(t,{Hn:()=>i});const r={overlays:{auto_init:!0,activationConfigs:[]},curation_platforms:{auto_init:!0,prebid_ssp_codes:["pubmatic","appnexus","ix","openx"],activationConfigs:[]},web:{auto_init:!1,add_alchemy_taxonomy:!1,add_alchemy_entities:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]},scriptrunner:{auto_init:!0,activationConfigs:[]},clean_room:{auto_init:!0,default_config:{},pass_cohorts_to_prebid:!0,cohort_ssp_config:[],activationConfigs:[]},dfp:{auto_init:!0,track_slot_rendered:!0,track_slot_viewable:!0,track_slot_clicked:!0,track_targeting_keys:!1,activationConfigs:[]},gam_log:{auto_init:!0,activationConfigs:[]},tracking_pixel:{auto_init:!0,activationConfigs:[]},dbm:{auto_init:!0,entity_id:926898717,product_type:"INVITE_PARTNER",activationConfigs:[]}},i=e=>{const t=r[e];return(e,n)=>(null==t?void 0:t[e])??n};i("web"),i("dfp"),i("facebook_pixel_v2")},373:(e,t,n)=>{n.d(t,{X:()=>i,k:()=>r});const r=e=>({id:e.id,name:e.name,time:new Date(e.time),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),i=e=>({id:e.id,name:e.name,time:(a(e.time)?e.time:new Date).toISOString(),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),a=e=>isFinite(e)&&e instanceof Date},637:(e,t,n)=>{n.d(t,{F:()=>u,I:()=>c});var r=n(792),i=n(694),a=n(812),o=n(169),s=n(338);const c=(e,t)=>{let n=!1;return r.UI(i.UI((0,s.bw)((r=>{n||(n=(0,o.zG)(r,a.G((e=>{let[,t]=e;return"Pageview"===t.name}))),n&&e.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:t,time_origin:"sdk_init"}))}))))},u=(e,t)=>{const n=c(e,t);return(0,o.ls)(r.En(2,a.uZ()),(e=>{let[t,i]=e;return(0,o.zG)(i,n,r.UI((e=>e()))),t}))}},14:(e,t,n)=>{n.r(t),n.d(t,{service:()=>Va});var r=n(169),i=n(506),a=n(792),o=n(507);function s(e){return e[0]}function c(e){return e[1]}var u=function(e){return function(t){return[e(s(t)),c(t)]}},l=function(e){return function(t){return[s(t),e(c(t))]}};const f=e=>{const t=e.current;return(0,r.zG)(e,a.UI((e=>e===t?{segmentsEntered:[],segmentsExited:[]}:{segmentsEntered:(0,r.zG)(e,d(t)),segmentsExited:(0,r.zG)(t,d(e))})))},m=e=>new Set(e),d=e=>t=>(0,r.zG)(t,g((t=>!e.has(t)))),g=e=>t=>{const n=[];return t.forEach((t=>e(t)&&n.push(t))),n};var p=n(694),y=n(371),h=n(338);const v=()=>({kind:"null",value:null}),b=e=>({kind:"string",value:e}),w=e=>({kind:"number",value:e}),_=e=>({kind:"array",value:e}),E=e=>({kind:"object",value:e}),S=e=>e,I=()=>({kind:"bottom"}),k=e=>({kind:"inner",a:e}),C=e=>({kind:"top",error:e}),L=e=>({kind:"unbounded",group:e}),A=(e,t)=>({kind:"windowed",key:t,group:e}),G=(e,t,n)=>({kind:"countLimit",n,limit:t,group:e}),P=(e,t,n)=>({kind:"uniqueLimit",n,limit:t,group:e}),U=e=>({kind:"numberGroup",group:e}),z=e=>({kind:"stringGroup",group:e}),x=e=>({kind:"tuple",tuple:e}),T=e=>({state:e}),M=(e,t)=>({commands:e,payload:t});var q=n(856),D=n(229);const O=(e,t)=>{switch(e.kind){case"bottom":return{kind:"bottom"};case"inner":return k(t(e.a));case"top":return C(e.error)}},R=e=>(0,q.Zt)(((t,n)=>{if("bottom"===t.kind&&"bottom"===n.kind)return 0;if("bottom"===t.kind)return-1;if("bottom"===n.kind)return 1;if("top"===t.kind&&"top"===n.kind)return D.Df.compare(t.error,n.error);if("top"===t.kind)return 1;if("top"===n.kind)return-1;if("inner"===t.kind&&"inner"===n.kind)return e.compare(t.a,n.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var F=n(606),N=n(340),B=n(144),j=function(e){return-1===e?1:1===e?-1:0};function H(e,t){return(0,N.oA)(e.map(t))}function Q(e,t,n,r){const i=(e,t)=>{if(0===e.length)return(0,N.oA)(t.map((e=>(0,o.G)({1:e[1],2:n(o.YP,(0,o.G)(e[2]))}))));if(0===t.length)return(0,N.oA)(e.map((e=>(0,o.G)({1:e[1],2:n((0,o.G)(e[2]),o.YP)}))));if(e.length>0&&t.length>0&&(0,q.lt)(r)(e[0][1],t[0][1])){const[r,...a]=e,s=r[1],c=r[2];return(0,N.Ce)({1:s,2:n((0,o.G)(c),o.YP)})(i(a,t))}if(e.length>0&&t.length>0&&(0,q.gt)(r)(e[0][1],t[0][1])){const[r,...a]=t,s=r[1],c=r[2];return(0,N.Ce)({1:s,2:n(o.YP,(0,o.G)(c))})(i(e,a))}if(e.length>0&&t.length>0){const[r,...a]=e,[s,...c]=t,u=r[1],l=r[2],f=s[2];return(0,N.Ce)({1:u,2:n((0,o.G)(l),(0,o.G)(f))})(i(a,c))}throw new Error("Non exhaustive match in mapOption2")},a=(0,q.Uz)((e=>e[1]))(r),s=(e=>{const t=H(e,(e=>(0,o.pC)(e[2])?(0,o.G)({1:e[1],2:e[2].value}):o.YP));return 0===t.length?o.YP:(0,o.G)(t)})(i((0,N.DY)(a)([...e].map((e=>({1:e[0],2:e[1]})))),(0,N.DY)(a)([...t].map((e=>({1:e[0],2:e[1]}))))));return(0,o.UI)((e=>new Map(e.map((e=>[e[1],e[2]])))))(s)}function V(e,t,n,r){const i=(0,q.Uz)((e=>e[0]))(r),a=(0,N.DY)(i)([...t]).reduceRight(((e,t)=>{if((0,B.nM)(e)){const r=n(t[1],e.left);return(0,o.pC)(r)?(0,B.t$)(r.value):(0,B.F2)(t[0])}return e}),(0,B.t$)(e));return(0,o.Uo)(a)}function W(e,t){return new Map([...e].map(t))}function Y(e,t){return new Map([...e].filter(t))}var K=n(689),J=n(52);function X(e){return JSON.stringify(Z(e))}function Z(e){switch(e.kind){case"null":return te.encode(e);case"string":return ne.encode(e);case"number":return re.encode(e);case"array":return ie.encode(e);case"object":return ae.encode(e)}}function $(e){return null===e?te.decode(e):"number"==typeof e?re.decode(e):"string"==typeof e?ne.decode(e):Array.isArray(e)?ie.decode(e):ae.decode(e)}const ee=(e,t)=>(0,B.t$)(`Failed to decode. Input was ${JSON.stringify(e)}. Codec type was ${t}`),te={encode:e=>null,decode:e=>null===e?(0,B.F2)({kind:"null",value:null}):ee(e,"SimpleNull")},ne={encode:e=>e.value,decode:e=>"string"==typeof e?(0,B.F2)(b(e)):ee(e,"SimpleString")},re={encode:e=>e.value,decode:e=>"number"==typeof e?(0,B.F2)(w(e)):ee(e,"SimpleNumber")},ie={encode:e=>e.value.map(Z),decode:e=>{if(Array.isArray(e)){const t=(0,N.fw)(B.g1)($)(e);return(0,B.UI)(_)(t)}return ee(e,"SimpleArray")}},ae={encode:e=>{const t=[...e.value.entries()];return Object.assign({},...Array.from(t,(e=>{let[t,n]=e;return{[t]:Z(n)}})))},decode:e=>{if(e&&e.constructor===Object){const t=(0,N.fw)(B.g1)((e=>{let[t,n]=e;return(0,r.zG)($(n),(0,B.UI)((e=>(0,r.bc)(t,e))))}))(Object.entries(e));return(0,B.UI)((e=>E(new Map([...e]))))(t)}return ee(e,"SimpleObject")}};function oe(e){return(0,r.zG)(e,ce,(0,o.UI)(X),(0,o.fS)((()=>"<encode error>")))}function se(e){return(0,o.UI)(ge)(function(e){switch(e.state.kind){case"top":return(0,o.G)(b(e.state.error));case"bottom":return o.YP;case"inner":return ce(e.state.a)}}(e))}function ce(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return ue(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?(0,o.G)(_(function(e,t){const n=(0,o.UI)((e=>(0,N.Ce)(e)(t)))(e);return(0,o.fS)((()=>t))(n)}((0,o.UI)((e=>b(function(e){const t=e=>(0,o.EQ)((()=>""),(e=>"b"+JSON.stringify(e)))(e.bound),n=e=>{switch(e.operation){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},r=e=>{const r=t(e[1])+n(e[1]);return 1===e[2]?r:r+JSON.stringify(e[2])};return e.map(r).join("")}(e))))(e.commands),function(e){const t=e=>{switch(e.kind){case"bottom":return{kind:"null",value:null};case"top":return b(e.error);case"inner":return w(e.a)}},n=e=>H([le,fe,e=>(0,r.zG)(e,de,E,o.G)],(t=>t(e))),i=e=>H([le,me,e=>(0,r.zG)(e,de,(e=>W(e,(e=>{let[t,n]=e;return[JSON.stringify(t),n]}))),E,o.G)],(t=>t(e)));switch(e.kind){case"tuple":return e.tuple.map(t);case"stringGroup":return n(e.group);case"numberGroup":return i(e.group)}}(e.payload)))):o.YP}function ue(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||(0,o.pC)(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||(0,o.pC)(e.limit)}}function le(e){switch(e.kind){case"unbounded":return o.YP;case"windowed":return(0,o.G)(b("w"));case"countLimit":return(0,o.G)(b(1===e.n?"x":`x${e.n}`));case"uniqueLimit":return(0,o.G)(b(1===e.n?"u":`u${e.n}`))}}function fe(e){switch(e.kind){case"unbounded":return o.YP;case"windowed":return(0,o.G)(b((0,o.pC)(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return(0,o.G)(b((0,o.pC)(e.limit)?e.limit.value:""))}}function me(e){switch(e.kind){case"unbounded":return o.YP;case"windowed":return(0,o.pC)(e.key)?(0,o.G)(w(e.key.value)):(0,o.G)({kind:"null",value:null});case"countLimit":case"uniqueLimit":return(0,o.pC)(e.limit)?(0,o.G)(w(e.limit.value)):(0,o.G)({kind:"null",value:null})}}function de(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function ge(e){switch(e.kind){case"array":return 0===e.value.length?{kind:"null",value:null}:1===e.value.length?ge(e.value[0]):_(e.value.map(ge));case"object":return(0,r.zG)(Y(e.value,(e=>{let[t,n]=e;return"null"!==n.kind})),(e=>W(e,(e=>[e[0],ge(e[1])]))),E);default:return e}}function pe(e){const t=e=>{if(0===e.length)return{kind:"bottom"};const t=(e=>{if(4!==e.length)return o.YP;const[t,n,r,i]=e;if("string"===t.kind&&"string"===n.kind&&"object"===i.kind){const e=(0,o.DT)((e=>ye(e[1].value)&&he(e[2].value)))({1:t,2:n});return(0,o.UI)((e=>({prim:e[1].value,grp:e[2].value,cutoff:r,m:i.value})))(e)}return o.YP})(e);if((0,o.pC)(t)){const{prim:e,grp:n,cutoff:r,m:i}=t.value,a=ve(r,i,be(n));return"string"==typeof a?C(a):k(M(we(e),a))}const n=(e=>{if(3!==e.length)return o.YP;const[t,n,r]=e;if("string"===t.kind&&"object"===r.kind){const e=(0,o.DT)((e=>he(e.value)))(t);return(0,o.UI)((e=>({grp:e.value,cutoff:n,m:r.value})))(e)}return o.YP})(e);if((0,o.pC)(n)){const{grp:e,cutoff:t,m:r}=n.value,i=ve(t,r,be(e));return"string"==typeof i?C(i):k(M(o.YP,i))}const r=(e=>{if(2!==e.length)return o.YP;const[t,n]=e;if("string"===t.kind&&"object"===n.kind){const e=(0,o.DT)((e=>ye(e.value)))(t);return(0,o.UI)((e=>({prim:e.value,m:n.value})))(e)}return o.YP})(e);if((0,o.pC)(r)){const{prim:e,m:t}=r.value;return k(M(we(e),z(L(t))))}const i=(e=>{if(1!==e.length)return o.YP;const[t]=e;return"object"===t.kind?(0,o.G)({m:t.value}):o.YP})(e);if((0,o.pC)(i)){const{m:e}=i.value;return k(M(o.YP,z(L(e))))}const a=(e=>{if(e.length<1)return o.YP;const[t,...n]=e;if("string"===t.kind){const e=(0,o.DT)((e=>ye(e.value)))(t);return(0,o.UI)((e=>({prim:e.value,rest:n})))(e)}return o.YP})(e);if((0,o.pC)(a)){const{prim:e,rest:t}=a.value;return k(M(we(e),Ee(t)))}return k(M(o.YP,Ee(e)))},n=e=>"array"===e.kind?(0,N.tS)(n)(e.value):[e];return"null"===e.kind?T({kind:"bottom"}):T(t(n(e)))}function ye(e){const t=e.split("");if(!0==(0===t.length))return!1;{const[e,...n]=t;return-1!=="bpmvn".indexOf(e)&&n.every((e=>-1!=="bpmvn0123456789.".indexOf(e)))}}function he(e){const t=e.split("");switch(!0){case 0===t.length:return!1;case"w"===t[0]&&void 0===t[1]:return!0;default:{const[e,...n]=t;return-1!=="ux".indexOf(e)&&-1===n.map((e=>!isNaN(parseInt(e)))).indexOf(!1)}}}function ve(e,t,n){switch(e.kind){case"string":return z(n({1:(0,o.G)(e.value),2:t}));case"number":case"null":return U(n({1:"null"===e.kind?o.YP:(0,o.G)(e.value),2:Y(W(t,(e=>{let[t,n]=e;return[Number(t),n]})),(e=>!isNaN(e[0])))}));default:return"{bad cutoff}"}}function be(e){const t=e=>t=>P(t[2],t[1],e),n=e=>t=>G(t[2],t[1],e),r=e.split("");switch(!0){case"w"===r[0]&&void 0===r[1]:return e=>A(e[2],e[1]);case"u"===r[0]&&void 0===r[1]:return t(1);case"u"===r[0]&&void 0!==r[1]:return t(parseInt(r.slice(1).join("")));case"x"===r[0]&&void 0===r[1]:return n(1);case"x"===r[0]&&void 0!==r[1]:return n(parseInt(r.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function we(e){const t=e=>(0,o.Wi)(e.bound)||"add"===e.operation||"mul"===e.operation?(0,o.G)(e):o.YP,n=(e,n,i)=>{const a=((e,n)=>(0,r.zG)(e,(e=>{switch(e){case"p":return(0,o.G)("add");case"m":return(0,o.G)("mul");case"v":return(0,o.G)("max");case"n":return(0,o.G)("min");default:return o.YP}}),o.UI((e=>({operation:e,bound:n}))),o.tS(t)))(e,i);return(0,o.UI)((e=>{const{init:t,rest:r}=(0,N.zT)((e=>{return"number"==typeof(t=parseInt(e))&&isFinite(t)&&Math.floor(t)===t;var t}))(n);return{1:{1:e,2:0===t.length?1:parseInt(t.join(""))},2:r.join("")}}))(a)};return(0,o.UI)(S)((0,F.nI)(_e(e,(e=>{const t=e.split("");if(0===t.length)return o.YP;const[i,...a]=t;if("b"===i){const{init:e,rest:t}=(0,r.zG)(a,(0,N.zT)((e=>-1!=="1234567890.".indexOf(e))));if(0===e.length||0===t.length)return o.YP;const i=parseFloat(e.join("")),[s,...c]=t;return n(s,c,(0,o.G)(i))}return n(i,a,o.YP)}))))}function _e(e,t){const n=t(e);return(0,o.fS)((()=>[]))((0,o.UI)((e=>[e[1]].concat(_e(e[2],t))))(n))}function Ee(e){return x(e.map(Se))}function Se(e){switch(e.kind){case"number":return k(e.value);case"string":return C(e.value);case"null":return{kind:"bottom"};case"object":return C("{object}");case"array":return C("{array}")}}var Ie=n(945);const ke={strategy:(e,t,n)=>r=>{if((0,o.Wi)(n))return t;if("delta"===e&&(0,o.Wi)(t))return o.YP;if((0,o.Wi)(t))return n;if((0,o.pC)(t)&&(0,o.pC)(n))return r(t.value,n.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,t,n,i,a,s)=>{const c=(0,N.pR)(R(s)),u=(0,r.zG)(t.bound,o.EQ((()=>r.yR),(e=>t=>(0,q.VV)(s)(a.fromNumber(e),t))));if("append"===e&&"add"===t.operation)return(0,N.yL)(n,i,ze("append",(0,r.ls)(a.plus,u)));if("append"===e&&"mul"===t.operation)return(0,N.yL)(n,i,ze("append",(0,r.ls)(a.times,u)));if("append"===e&&"max"===t.operation)return(0,q.Fp)(c)(n,i);if("join"===e&&"add"===t.operation)return(0,N.yL)(n,i,ze("join",(0,q.Fp)(s)));if("join"===e&&"mul"===t.operation)return(0,N.yL)(n,i,ze("join",(0,q.Fp)(s)));if("join"===e&&"max"===t.operation)return(0,q.Fp)(c)(n,i);if("min"===t.operation)return ke.operation(e,{operation:"max",bound:t.bound},n,i,a,function(e){return(0,q.Zt)(((t,n)=>j(e.compare(t,n))))}(s));if("delta"===e&&"max"===t.operation)return(0,q.gt)(c)(n,i)?n:i.map(I);if("delta"===e)return(0,N.yL)(n,i,((e,t)=>(0,q.gt)(R(s))(e,t)?O(e,u):{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(e,t,n,r)=>{if("delta"===e&&"top"===n.kind&&"top"===r.kind)return(0,q.gt)(D.Df)(n.error,r.error)?C(n.error):{kind:"bottom"};if("delta"===e&&"bottom"===r.kind)return n;if("delta"===e&&"bottom"===n.kind)return{kind:"bottom"};if("top"===n.kind&&"top"===r.kind)return C((0,q.Fp)(D.Df)(n.error,r.error));if("top"===n.kind)return n;if("top"===r.kind)return r;if("inner"===n.kind&&"inner"===r.kind)return t(n.a,r.a);if("bottom"===n.kind)return r;if("bottom"===r.kind)return n;throw new Error("Non exhaustive match in extend")}},Ce={fromNumber:r.yR,plus:(e,t)=>e+t,times:(e,t)=>e*t};function Le(e,t,n,r){if("unbounded"===e.kind&&"unbounded"===t.kind){const i=e.group,a=t.group;return(0,o.fS)(I)((0,o.UI)((e=>k(L(e))))(Q(i,a,n,r)))}if("windowed"===e.kind&&"windowed"===t.kind){const i=e.key,a=e.group,s=t.key,c=t.group,u=(0,q.Fp)((0,o.pR)(r))(i,s);return(0,o.fS)(I)((0,o.UI)((e=>k(A(e,u))))(Q(a,c,n,r)))}if("countLimit"===e.kind&&"countLimit"===t.kind){const i=e.n,a=t.n;if(i===a){const a=e.limit,s=e.group,c=t.limit,u=t.group,l=(0,q.Fp)((0,o.pR)(r))(a,c);return(0,o.fS)(I)((0,o.UI)((e=>k(G(e,l,i))))(Q(s,u,n,r)))}return C("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===t.kind){const i=e.n,a=t.n;if(i===a){const a=e.limit,s=e.group,c=t.limit,u=t.group,l=(0,q.Fp)((0,o.pR)(r))(a,c);return(0,o.fS)(I)((0,o.UI)((e=>k(P(e,l,i))))(Q(s,u,n,r)))}return C("Non matching counts")}return C("Non matching group types")}function Ae(e,t,n){return(0,o.fS)(v)(Ge(e,o.YP)(t,n))}function Ge(e,t){const n=t=>(n,r)=>ke.strategy(e,n,r)(Ge(e,t)),i=(t,r,i)=>{if("stringGroup"===r.kind&&"stringGroup"===i.kind){const e=Le(r.group,i.group,n(t),D.Df);return O(e,(e=>z(Ue(e,D.Df))))}if("numberGroup"===r.kind&&"numberGroup"===i.kind){const e=Le(r.group,i.group,n(t),J.Df);return O(e,(e=>U(Ue(e,J.Df))))}if("tuple"===r.kind&&"tuple"===i.kind){const n=(0,o.pC)(t)?t.value:[];return k(x(function(e,t,n,r,i,a){const s=(e,t)=>({1:(0,N.ke)(e)(t).concat((0,N.KB)(Math.max(0,e-t.length),I)),2:(0,N.md)(e)(t)}),c=(t,n,r)=>{if(0===t.length)return ke.operation(e,{operation:"max",bound:o.YP},n,r,i,a);if(t.length>0){const[o,...u]=t,l=s(o[2],n),f=l[1],m=l[2],d=s(o[2],r),g=d[1],p=d[2];return ke.operation(e,o[1],f,g,i,a).concat(c(u,m,p))}throw new Error("Non exhaustive match in recurse")};return(0,N.GY)((0,N.Qp)((e=>"bottom"===e.kind))((0,N.GY)(c(t,n,r))))}(e,n,r.tuple,i.tuple,Ce,J.Df)))}throw new Error(`Non matching payload. Got ${r.kind} and ${i.kind}`)},a=(e,n)=>{if((0,o.Eh)((0,F.Eh)((0,K.n_)({1:(0,K.n_)({operation:D.Eq,bound:(0,o.Eh)(J.Eq)}),2:J.Eq}))).equals(e.commands,n.commands)){const r=(0,o.Wi)(e.commands)?t:e.commands,a=i(r,e.payload,n.payload);return O(a,(t=>M(e.commands,t)))}if(a=e.commands,s=n.commands,(0,o.Eh)((0,F.Eh)((0,K.n_)({1:(0,K.n_)({operation:D.Eq}),2:J.Eq}))).equals(a,s)){const a=(0,r.zG)(((e,t)=>(0,r.zG)((0,Ie.gz)(o.G5)(e,t),(0,o.UI)((e=>{let[t,n]=e;return F.yL(t,n,((e,t)=>({1:{operation:e[1].operation,bound:(0,r.zG)((0,Ie.gz)(o.G5)(e[1].bound,t[1].bound),o.UI((e=>{let[t,n]=e;return Math.min(t,n)})),o.wp((()=>e[1].bound)),o.wp((()=>t[1].bound)))},2:e[2]})))}))))(e.commands,n.commands),o.wp((()=>t))),s=i(a,e.payload,n.payload);return O(s,(e=>M(a,e)))}throw new Error(`Non matching primitive strings. Got ${oe(e)} and ${oe(n)}`);var a,s};return(t,n)=>se(T(ke.extend(e,a,pe(t).state,pe(n).state)))}function Pe(e,t,n){const r=(0,o.UI)((t=>Y(e,(e=>{let[r,i]=e;return(0,q.gf)(n)(r,t)}))))(t);return(0,o.fS)((()=>e))(r)}function Ue(e,t){switch(e.kind){case"unbounded":return e;case"windowed":return(0,o.Wi)(e.key)?e:A(Pe(e.group,e.key,t),e.key);case"countLimit":{const n=e.limit,r=e.n,i=e.group,a=V(r,i,((e,t)=>t<=1?o.YP:(0,o.G)(t-1)),t),s=(0,q.Fp)((0,o.pR)(t))(n,a);return G(Pe(i,s,t),s,r)}case"uniqueLimit":{const n=e.limit,r=e.n,i=e.group,a=(e,t)=>{if("object"===e.kind){const n=[...e.value.keys(),...t.keys()],i=new Set(n);return i.size>=r?o.YP:(0,o.G)(i)}return o.YP},s=V(new Set,i,a,t),c=(0,q.Fp)((0,o.pR)(t))(n,s);return P(Pe(i,c,t),c,r)}}}function ze(e,t){return(n,r)=>ke.extend(e,((e,n)=>k(t(e,n))),n,r)}function xe(e,t){return Ae("append",e,t)}function Te(e,t){return Ae("join",e,t)}var Me=n(450),qe=n(327),De=n(6),Oe=n(335),Re=n(289),Fe=n(49);function Ne(e,t){return function(n){return e.map(n,t.compact)}}function Be(e,t,n){var i=Ne(e,t),a=(0,Re.UI)(e,n);return function(e){return Fe.s4(i((0,r.zG)(e,a(o.IS))),i((0,r.zG)(e,a(o.EK))))}}function je(e,t){return function(n){return function(r){return e.map(r,(function(e){return t.filter(e,n)}))}}}function He(e,t){return function(n){return function(r){return e.map(r,(function(e){return t.filterMap(e,n)}))}}}function Qe(e,t){var n=je(e,t);return function(e){var t=n((0,qe.ff)(e)),r=n(e);return function(e){return(0,Fe.s4)(t(e),r(e))}}}function Ve(e,t){var n=He(e,t);return function(e){return function(t){return(0,Fe.s4)((0,r.zG)(t,n((function(t){return(0,o.IS)(e(t))}))),(0,r.zG)(t,n((function(t){return(0,o.EK)(e(t))}))))}}}var We=n(755),Ye=n(241),Ke=n(614);function Je(e){return(0,r.ls)(o.G,e.of)}function Xe(e){return(0,r.a9)(e.of(o.YP))}function Ze(e){return function(t){return e.map(t,o.G)}}function $e(e){return(0,r.ls)(o.ij,e.of)}function et(e){var t=$e(e);return function(e){return(0,r.ls)(e,t)}}function tt(e){var t=ft(e),n=et(e);return function(e){return t(n(e))}}function nt(e){return function(t){return(0,r.ls)(t,e.of)}}function rt(e){var t=ft(e),n=nt(e);return function(e){return t(n(e))}}function it(e){return function(t){return function(n){return e.of(o.DT(t)(n))}}}function at(e){return(0,r.ls)(o.Uo,e.of)}function ot(e){return function(t,n){return function(r){return e.map(r,o.EQ(t,n))}}}function st(e){return function(t,n){return function(r){return e.chain(r,o.EQ(t,n))}}}function ct(e){return function(t){return function(n){return e.chain(n,o.EQ(t,e.of))}}}function ut(e){return(0,Re.UI)(e,o.dO)}function lt(e){return(0,Ie.ap)(e,o.G5)}function ft(e){var t=Xe(e);return function(n){return function(r){return e.chain(r,o.EQ((function(){return t()}),n))}}}function mt(e){var t=Je(e);return function(n){return function(r){return e.chain(r,o.EQ(n,t))}}}var dt=n(46),gt=Je(dt.PM),pt=(dt.PM,dt.of),yt=(dt.PM,function(e){return ht(dt.tD(e))}),ht=Ze(dt.dO),vt=dt.UI(o.Uo),bt=(dt.dO,st(dt.qo)),wt=(dt.UA,dt.PM,dt.PM,dt.UA,dt.PM,rt(dt.UA)),_t=ut(dt.dO),Et=lt(dt.Hi),St=gt,It=ft(dt.UA),kt=(dt.UA,dt.PM,dt.dO,o.Ri,dt.dO,o.Ri,o.dO,je(dt.dO,o.xu)),Ct=(dt.dO,o.xu,dt.dO,o.xu,dt.dO,o.xu,function(e,t){return(0,r.zG)(e,_t(t))}),Lt=function(e,t){return(0,r.zG)(e,Et(t))},At=function(e,t){return(0,r.zG)(e,It(t))},Gt="TaskOption",Pt={URI:Gt,map:Ct},Ut={URI:Gt,map:Ct,ap:Lt,chain:At},zt={URI:Gt,fromIO:yt},xt=(0,We.At)(zt,Ut),Tt={URI:Gt,fromIO:yt,fromTask:ht},Mt=(0,Ye.wt)(Tt),qt=(0,Ye.oU)(Tt,Ut),Dt=(Ke.F4,(0,Re.Hr)(Pt)),Ot=(0,Oe.a)(Ut),Rt=(Ke.Xl,Je(p.PM)),Ft=(p.PM,p.of,p.PM,p.dO,o.Uo,p.dO,p.qo,p.UA,p.UI(o.FS),p.UI(o.WG),p.PM,p.PM,p.UA,p.PM,p.UA,p.dO,p.G5,Rt),Nt=(p.UA,mt(p.UA)),Bt=(p.PM,p.dO,o.Ri,p.dO,o.Ri,o.dO,p.dO,o.xu,p.dO,o.xu,p.dO,o.xu,p.dO,o.xu,Ke.F4,Ke.Xl,n(812));const jt=new Set(["AdRequest","Reaction","PageviewEngagement","SegmentEntry","SegmentExit"]),Ht=e=>i.dQ((t=>{let{previousState:n}=t;const[i,s]=a.Ue(!1);const[c,u]=a.gS({empty:o.YP,concat:(e,t)=>(0,r.zG)(Bt.oA([e,t]),o.DT(Bt.Od),o.UI((e=>e.reduce(((e,t)=>({...e,...t}))))))}),l=(0,r.zG)((0,h.Kn)(n)?n:{},(0,h.rO)({stateOffset:(0,r.ls)(o.DT(h.BJ),o.fS((()=>0))),fetchUnseenKey:(0,r.ls)(o.DT(h.HD),o.fS((()=>"")))})),f=(0,r.zG)(a.gS(o.uZ({concat:function(e,t){return Object.assign({},e,t)}})),(t=>{let[n,i]=t;return(0,r.zG)(a.vP(e.lastProcessedEvents,e.internalStateDiff,e.queryLanguageProcessing),a.bw((e=>{let[t,n,r]=e;if(r)return;return t().filter((e=>!jt.has(e.name))).length>0?i(n()):void 0}))),(0,r.zG)(a.vP({internalStateDiff:n,internalStateMap:e.internalStateMap}),a.D8(((e,t)=>e.internalStateDiff===t.internalStateDiff)))})),m=(0,r.zG)(a.vP(e.sessionId,f,i),a.Rp(a.a9({...l,inFlightRequest:!1,previousDecodedState:(0,r.zG)(e.internalStateMap.current,Vt,$,B.fS((()=>E(new Map)))),sendFullStateWithUnseen:!1}),((t,n)=>{let[i,{internalStateDiff:s,internalStateMap:c},l]=n;return(0,r.zG)(t,a.VS((t=>{if(t.inFlightRequest)return a.a9(t);const n=!l&&t.sendFullStateWithUnseen,f=n||!e.groupIdIsNewlyGenerated&&i!==t.fetchUnseenKey;return(0,r.zG)(n?Ft(c):s,Nt((()=>()=>(0,r.zG)({},o.DT((()=>f))))),dt.tD,It((0,r.ls)(Yt(t.previousDecodedState),De.Vn((0,h.bw)((t=>e.logger.error(t)))),vt)),bt((()=>dt.of({...t,inFlightRequest:!1})),(0,r.ls)(dt.of,dt.ak("processed",(n=>(0,r.zG)(e,Qt({delta:n.delta,stateOffset:t.stateOffset,fetchUnseen:f}),dt.UI((0,h.bw)((0,r.ls)(o.UI((0,h.vg)("stateDelta")),o.hX(qe.ff(Me.xb)),u)))))),dt.UI((e=>({fetchUnseenKey:i,inFlightRequest:!1,sendFullStateWithUnseen:t.sendFullStateWithUnseen&&!n,previousDecodedState:e.decodedState,stateOffset:(0,r.zG)(e.processed,o.UI((e=>e.response.state_offset)),o.fS((()=>t.stateOffset)))}))))),a.fF,a.UI(o.fS((()=>({...t,inFlightRequest:!0})))))})))})),a.xH,a.UI((e=>({stateOffset:e.stateOffset,fetchUnseenKey:e.fetchUnseenKey}))),a.D8((0,K.MW)({stateOffset:J.Eq,fetchUnseenKey:D.Eq})));return{state:m,value:{externalStateDelta:c}}})),Qt=e=>t=>(0,r.zG)(e,o.DT((e=>e.fetchUnseen||qe.ff(Me.xb)(e.delta))),pt,It((e=>{return(0,r.zG)(t,(n={event_source_id:t.eventSourceId,fetch_unseen:e.fetchUnseen,group_id:t.groupId,last_seen_offset:e.stateOffset,state:e.delta},e=>De.Y3((()=>e.permutiveApi.req({url:e.permutiveUrls.getEndpointUrl("/state",o.G("v1.0"),[["fetch_unseen",JSON.stringify(n.fetch_unseen)]]),method:"POST",payload:{group_id:n.group_id,event_source_id:n.event_source_id,state:JSON.stringify(n.state),last_seen_offset:n.last_seen_offset},contentType:"text/plain",dataType:"json",withCredentials:!1})),(e=>`Error sending state delta. Got ${B.KC(e)}`))),De.Vn((0,h.bw)((e=>t.reportError(e)))),vt,kt((e=>!!e)),wt((0,r.ls)(B.of,B.YO("response"),B.ak("stateDelta",(e=>{return t=e.response.state,(0,B.Y3)((function(){return JSON.parse(t)}),r.yR);var t})),B.Vn((0,h.bw)((e=>t.reportError(`Failed to parse State API response, got ${e}`)))),o.Uo)));var n}))),Vt=e=>(0,h.b0)(e,((e,t)=>t.state?o.G({[t.checksum]:t.state}):o.YP)),Wt=e=>t=>{const n=(0,r.zG)(t,Vt,$,B.fS((()=>E(new Map))),(t=>Ae("delta",t,e)));return{decodedState:Te(n,e),delta:(0,r.zG)(n,Z,o.ij,o.fS((()=>({}))))}},Yt=e=>t=>()=>new Promise((n=>(0,y.HJ)((()=>(0,r.zG)(t,B.it(Wt(e),(e=>`Failed to compute delta for state sync. Got ${e}`)),n)))));n(226),Me.dp;var Kt=Me.xb,Jt=function(e){return function(t){return Object.keys(t).sort(e.compare)}};D.Df;Me.dx,Me.e$;Me.Bu,Me.P5,Me.Su;var Xt=Me.UI;Me.ri;function Zt(e){return Me.vP(e)}Me._r;Me.jt;Me.yW,Me.G,Me.t9;var $t=Me.HA,en=(Me.nn,Me.kp),tn=Me.CC,nn=Me.RF,rn=(Me.I8,Me.mS,Me.RJ,Me._Y,Me.V_),an=Me.EW,on=Me.nu,sn=(Me.SW,Me.zV,Me.Ub,Me.vA,Me.qS),cn=(Me.mK,function(e){return function(t){var n=Jt(e);return function(e,r){var i=n(e);if(0===i.length)return t.of({});for(var a=t.of({}),o=function(n){a=t.ap(t.map(a,(function(e){return function(t){return e[n]=t,e}})),r(n,e[n]))},s=0,c=i;s<c.length;s++){o(c[s])}return a}}}),un=Me.hX;Me.DZ,Me.uK,Me.tV;Me.oA,Me.oh;var ln="Record";var fn=Me.Eh,mn=(Me.uZ,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,Me.nr,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,n(654)),dn=n(214),gn=function(e){return function(t){return[void 0,e(t)]}},pn=function(e){return function(t){return[e(t),t]}},yn=function(e,t){return(0,r.zG)(e,bn(t))},hn=function(e,t){return(0,r.zG)(e,wn(t))},vn=function(e,t){return(0,r.zG)(e,En(t))},bn=function(e){return function(t){return function(n){var r=t(n),i=r[0],a=r[1];return[e(i),a]}}},wn=function(e){return function(t){return function(n){var r=t(n),i=r[0],a=r[1],o=e(a),s=o[0],c=o[1];return[i(s),c]}}},_n=function(e){return function(t){return[e,t]}},En=function(e){return function(t){return function(n){var r=t(n),i=r[0],a=r[1];return e(i)(a)}}},Sn="State",In={URI:Sn,map:yn},kn={URI:Sn,map:yn,ap:hn},Cn=(0,Ie.N)(kn),Ln=(0,Ie.a1)(kn),An={URI:Sn,map:yn,ap:hn,of:_n},Gn={URI:Sn,map:yn,ap:hn,chain:vn},Pn=(0,Oe.m)(Gn),Un=(r.yR,(0,Re.YO)(In)),zn=(0,Oe.a)(Gn),xn=function(e){var t=function(e){return function(t){return function(n){for(var r=e(0,Ke.YM(t))(n),i=[r[0]],a=r[1],o=1;o<t.length;o++){var s=e(o,t[o])(a),c=s[0],u=s[1];i.push(c),a=u}return[i,a]}}}(e);return function(e){return Ke.Od(e)?t(e):_n(Ke.Xl)}},Tn=function(e){return xn((function(t,n){return e(n)}))},Mn=Tn(r.yR);const qn=e=>({aggregations:{PageviewEngagement:{engaged_time:0},SegmentEntry:new Set,SegmentExit:new Set,CohortEntry:new Set,CohortExit:new Set},customProperties:{},sessionId:e.sessionId,viewId:e.viewId}),Dn=e=>t=>{const n=new Set(t);return n.add(e),n},On=e=>t=>{const n=new Set(t);return n.delete(e),n},Rn=e=>[...e];var Fn,Nn,Bn=n(373);!function(e){e.init=function(e){return e&&"object"==typeof e&&"externalStateMap"in e&&"internalStateMap"in e?e:{externalStateMap:o.YP,internalStateMap:{},migrationVersion:vr}}}(Fn||(Fn={})),function(e){e.sequenceNonEmptyArray=e=>{if(1===e.length)return e[0];const t=(0,r.bc)([],{},[]);for(const n of e){t[0].push(...n[0]);for(const e in n[1])t[1][e]=n[1][e];t[2].push(...n[2])}return t},e.sequenceArray=t=>(0,r.zG)(t,o.DT(Bt.Od),o.UI(e.sequenceNonEmptyArray)),e.empty=[Bt.cS,Me.cS,Bt.cS],e.error=e=>[Bt.of(e),Me.cS,Bt.cS],e.ofOutputEvent=e=>[Bt.cS,Me.cS,[e]]}(Nn||(Nn={}));const jn=e=>hr((t=>(0,r.zG)(Hn((e=>({...e,getCurrentSession:()=>t.environment.sessionId,getCurrentView:()=>t.environment.viewId}))),En((()=>{return Mn([Qn(e),Kn(t.environment.thirdPartyData),(i=t.environment.lookalikeModels,(0,r.zG)((function(e){return[e,e]}),En((e=>fr.equals(e.lal,i)?_n(Bt.cS):(0,r.zG)(gn((0,h.rO)({lal:(0,r.a9)(i)})),Cn(Hn(function(e){const t=(0,r.zG)(e,o.fS((()=>({}))));return e=>({...e,getLookalikeModels:()=>t})}(i))),En((()=>(0,r.zG)(Bt.Yo(i),Tn((()=>$n("updateLAL"))),bn(Bt.xH))))))))),(0,r.zG)(t.externalStateDelta,o.UI(Zn),o.fS((()=>_n(Bt.bM())))),(n=t.cloudLiftedState,(0,r.zG)(n,Bt.tS((e=>Object.entries(e))),Tn((e=>{let[t,n]=e;return pn((e=>(0,r.bc)(t,e.queries.runtime.cloudLiftedQueries[t],n)))})),En((e=>nr(B.F2(e)))))),er(t.newEvents)]);var n,i})),bn((0,r.ls)(Bt.xH,o.DT(Bt.Od),o.tS(Nn.sequenceArray))),(e=>t=>{let[n,i]=e(t);if(o.pC(n)){let e=n.value,t=0;const a=100;let s;for(s=0;s<a&&e[2].length>t;s++){const n=e[2],[a,o]=(0,r.zG)(er(n.slice(t)),bn((t=>Nn.sequenceNonEmptyArray([e,...t]))),(0,r.nn)(i));e=a,i=o,t=n.length}s>=a&&(e=Nn.sequenceNonEmptyArray([e,Nn.error(`Exceeded ${a} iterations when producing transition events`)])),n=o.G(e)}return(0,r.bc)(n,i)}),yr(e,"query_language_process_duration")))),Hn=e=>gn((0,h.rO)({effects:e}));function Qn(e){return(0,r.zG)((function(e){return[e,e]}),En((t=>{let{bootstrapped:n,effects:i,eventsForReplay:a}=t;return n?_n(Bt.cS):(0,r.zG)(gn((e=>({...e,bootstrapped:!0,eventsForReplay:[]}))),Pn(Vn),En((()=>(0,r.zG)(a,Bt.R3(pr(i)),Tn(tr("bootstrap")),bn(Bt.xH)))),yr(e,"query_language_bootstrap_duration"))})))}const Vn=()=>gn((e=>(0,r.zG)(e.invalidatedQueries,Bt.EQ((()=>e),Wn(e))))),Wn=e=>t=>{const n=(0,r.zG)(t,Bt.UI((t=>(0,r.bc)(t,{checksum:e.queries.metadata[t]}))),(e=>Object.fromEntries(e)));return(0,r.zG)(e,(0,h.rO)({persistentState:(0,h.rO)({internalStateMap:e=>({...n,...e})})}))},Yn=(0,r.zG)(pn((e=>e.tpdQueries)),En(o.EQ((()=>(0,r.zG)(pn((e=>new Set([...e.queries.runtime.queriesByEvent["!UpdateSecondPartyData"]||[],...e.queries.runtime.queriesByEvent["!UpdateThirdPartyData"]||[]]))),Pn((e=>gn((0,h.rO)({tpdQueries:()=>o.G(e)})))))),_n)));function Kn(e){const t=(0,r.zG)(e,o.UI(s));return(0,r.zG)((function(e){return[e,e]}),En((n=>{if(o.Eh(J.Eq).equals(t,n.tpdHashInEffectsObject))return _n(Bt.cS);const i=o.FS(t);return(0,r.zG)(gn((0,h.rO)({persistentState:(0,h.rO)({tpdHash:(0,r.a9)(i)}),tpdHashInEffectsObject:(0,r.a9)(t),tpdReady:(0,r.a9)(o.pC(e))})),bn((()=>(0,r.zG)(e,o.UI(c)))),Pn((e=>Hn(function(e){const t=mr((()=>(0,r.zG)(e,o.fS((()=>({"3p":{}}))))));return e=>{const n=mr((()=>({...t(),...e.get1PSegments()})));return{...e,getSegments:n,getSegmentsArray:mr((()=>gr(n()))),get3PSegments:t}}}(e)))),En(o.fw(An)((()=>(0,r.zG)(n.tpdEventsToProcess,Bt.EQ((()=>i!==n.persistentState.tpdHash?$n("updateTPD"):_n(Bt.cS)),(0,r.ls)(Tn(tr("updateTPD")),Cn(gn((e=>({...e,tpdEventsToProcess:[]})))),bn(Bt.xH))))))),bn(o.fS((()=>Bt.bM()))))})))}const Jn=e=>Me.jt(((t,n)=>(0,r.zG)(Me.P5(t,e.metadata),o.tS((e=>Me.P5(e,n))),o.tS((n=>(0,r.zG)(Me.P5(t,e.runtime.locallyLiftedQueries),o.wp((()=>Me.P5(t,e.runtime.cloudLiftedQueries))),o.NG((e=>e.compact(n)))))),o.tS((0,r.ls)($,o.Uo))))),Xn=(e,t)=>{if(Me.xb(e))return t;if(Me.xb(t))return e;const n={...e};for(const e in t)n[e]=(0,r.zG)(o.ij(n[e]),o.EQ((()=>t[e]),(n=>(0,r.zG)(o.Y3((()=>Te(n,t[e]))),o.fS((()=>t[e]))))));return n};function Zn(e){return(0,r.zG)(pn((t=>(0,r.zG)(e,Jn(t.queries),(e=>(0,r.zG)(t.persistentState.externalStateMap,o.UI(Me.DZ((0,r.ls)($,o.Uo))),o.EQ((()=>e),(t=>Xn(t,e))))),Me.UI(Z)))),En((e=>gn((0,h.rO)({persistentState:(0,h.rO)({externalStateMap:(0,r.a9)(o.G(e))})})))),En((()=>$n("updateExternalState"))))}function $n(e){return(0,r.zG)(pn((e=>pr(e.effects))),En(tr(e)))}function er(e){return(0,r.zG)(e,Bt.EQ((()=>_n(Bt.bM())),(0,r.ls)(ar,En(Tn((e=>{let[t,n]=e;return(0,r.zG)(n,tr(t))}))),bn(Bt.xH))))}function tr(e){return(0,r.ls)(_n,Pn((e=>"Pageview"!==e.name?_n(void 0):gn((0,h.rO)({pageviewProperties:(0,r.a9)(e.properties)})))),"bootstrap"===e?r.yR:Pn((e=>{return gn((0,h.rO)({unprocessedPageviewComplete:(t=e,e=>{switch(t.name){case"Pageview":return t.view_id!==e.viewId?e:{...e,customProperties:t.properties};case"SegmentEntry":{const n=t.properties.segment_number;return(0,r.zG)(e,(0,h.rO)({aggregations:e=>e.SegmentExit.has(n)?(0,r.zG)(e,(0,h.rO)({CohortExit:On(String(n)),SegmentExit:On(n)})):(0,r.zG)(e,(0,h.rO)({CohortEntry:Dn(String(n)),SegmentEntry:Dn(n)}))}))}case"SegmentExit":{const n=t.properties.segment_number;return(0,r.zG)(e,(0,h.rO)({aggregations:e=>e.SegmentEntry.has(n)?(0,r.zG)(e,(0,h.rO)({CohortEntry:On(String(n)),SegmentEntry:On(n)})):(0,r.zG)(e,(0,h.rO)({CohortExit:Dn(String(n)),SegmentExit:Dn(n)}))}))}case"PageviewEngagement":{if(t.view_id!==e.viewId)return e;const n=t.properties;return(0,r.zG)(e,(0,h.rO)({aggregations:(0,h.rO)({PageviewEngagement:()=>({engaged_time:n.total_engaged_time,completion:n.total_completion})})}))}default:return e}})}));var t})),Pn((e=>{return cr(e)?Hn((t=e.properties.segment_number,n="SegmentEntry"===e.name,e=>{return(0,r.zG)(e,(i={"1p":{...e.get1PSegments()["1p"],[t]:n}},e=>{const t=mr((()=>({...i,...e.get3PSegments()})));return{...e,getSegments:t,getSegmentsArray:mr((()=>gr(t()))),get1PSegments:()=>i}}));var i})):_n(void 0);var t,n})),Un("event"),zn("queriesToProcess",(t=>{let{event:n}=t;return function(e,t){return(0,r.zG)((function(e){return[e,e]}),Un("state"),zn("tpdQueriesToReject",(e=>{let{state:{tpdReady:t}}=e;return t?_n(o.bM()):(0,r.zG)(Yn,bn(o.DT((e=>e.size>0))))})),En((n=>{let{state:i,tpdQueriesToReject:a}=n;const s=(0,r.zG)(a,o.UI((e=>Bt.hX((t=>!e.has(t))))),o.fS((()=>e=>e)));switch(e){case"bootstrap":return _n((0,r.zG)(i.queriesForReplay,s));case"event":const e=i.tpdReady?_n(void 0):gn((0,h.rO)({tpdEventsToProcess:Bt.R3(t)}));return(0,r.zG)(_n(i.locallyLiftedQueriesByEvent[t.name]||[]),bn(s),Cn(e));case"lookalikeTransition":return _n(i.locallyLiftedQueriesByEvent[t.name]||[]);case"transition":const n=i.locallyLiftedQueriesByEvent[t.name]||[];if(o.pC(i.lal)){const e=i.locallyLiftedQueriesByEvent["!UpdateLookalikeModels"]||[];return _n(n.concat(e))}return _n(n);case"updateExternalState":return _n((0,r.zG)(i.persistentState.externalStateMap,o.fS((()=>({}))),Me.XP));case"updateLAL":return _n(i.locallyLiftedQueriesByEvent["!UpdateLookalikeModels"]||[]);case"updateTPD":return _n([...i.locallyLiftedQueriesByEvent["!UpdateSecondPartyData"]||[],...i.locallyLiftedQueriesByEvent["!UpdateThirdPartyData"]||[]]);default:return _n([])}})))}(e,n)})),En((t=>{let{event:n,queriesToProcess:i}=t;return(0,r.zG)(i,Bt.EQ((()=>_n(Bt.bM())),(t=>(0,r.zG)(pn((t=>"bootstrap"!==e?t.effects:{...t.effects,getCurrentTime:()=>n.time,getCurrentView:()=>n.view_id,getCurrentSession:()=>n.session_id})),En((e=>(0,r.zG)(pn((e=>(0,r.zG)(t,Bt.DZ((t=>(0,r.zG)(Me.P5(t,e.queries.runtime.locallyLiftedQueries),o.wp((()=>Me.P5(t,e.cloudLiftQueriesForReplay))),o.UI((e=>(0,r.bc)(t,e))))))))),En((t=>nr(B.t$((0,r.bc)(t,n)),e))))))))))})))}const nr=(e,t)=>(0,r.zG)(e,B.EQ((e=>{let[n,i]=e;return(0,r.zG)(n,Tn((e=>{let[n,r]=e;return rr(n,B.t$([r,i]),t)})))}),Tn((e=>{let[t,n,r]=e;return rr(t,B.F2([n,r]))}))),bn(Nn.sequenceArray),Pn(o.fw(An)((e=>{let[,t]=e;return gn((0,h.rO)({persistentState:(0,h.rO)({internalStateMap:e=>({...e,...t})})}))}))),bn(Bt.Yo)),rr=(e,t,n)=>(0,r.zG)(pn(B.it((i=>{var a,c,u;const l=n??i.effects,f=(0,r.zG)(t,B.EQ(s,s)),[m,d]=(0,r.zG)(t,B.aD((e=>{let[t,n]=e;return(0,r.bc)(t.lift(n,l),lr({null:null,encode:r.yR,decode:B.of,append:t.append}))}),(e=>{let[,t]=e;return(0,r.bc)(t,lr(ur()))}))),g=(0,r.zG)(i.persistentState.externalStateMap,o.tS(Me.P5(e))),p=i.persistentState.internalStateMap[e]||{checksum:i.queries.metadata[e]},y=d(e,l,f,p,g,m),h=Boolean(null===(a=y.result)||void 0===a?void 0:a.result)!==Boolean(null===(c=i.persistentState.internalStateMap[e])||void 0===c||null===(u=c.result)||void 0===u?void 0:u.result),v=(0,r.zG)(Bt.lo(h),Bt.UI((()=>{var t;return{name:null!==(t=y.result)&&void 0!==t&&t.result?"SegmentEntry":"SegmentExit",time:l.getCurrentTime(),view_id:l.getCurrentView(),session_id:l.getCurrentSession(),properties:{...i.pageviewProperties,segment_number:Number(e)}}})));return(0,r.bc)(y,v)}),(t=>`Failed to interpret query ${e}. Got ${t}`))),En(B.EQ((e=>_n([[e],Me.cS,Bt.cS])),(t=>{let[n,i]=t;return(0,r.zG)(n.dropExternalState?ir(e):_n(void 0),bn((()=>[Bt.cS,{[e]:n},i])))})))),ir=e=>gn((0,h.rO)({persistentState:(0,h.rO)({externalStateMap:o.UI(Me.EG(e))})}));function ar(e){const t=e=>t=>(0,r.bc)(e,t);return pn((n=>(0,r.zG)(e,Bt.pO(dn.aL(((e,t)=>{const n=cr(e);return(0,r.zG)(t,Bt.zT((e=>cr(e)===n)),(e=>{let{init:t,rest:n}=e;return(0,r.bc)(t,n)}),u(((e,t)=>n=>(0,r.bc)(e,(0,r.zG)(n,Bt.Ce(t))))(n,e)))}))),Bt.tS((e=>{let[i,a]=e;if(!i)return(0,r.zG)(a,Bt.UI(t("event")));const o=(0,r.zG)(a,Bt.yW((e=>n.lookalikeTransitionSegmentNumbers.has(e.properties.segment_number))),(e=>e?"lookalikeTransition":"transition"));return(0,r.zG)(a,dn.ut(((e,n)=>(0,r.zG)(e,Bt.UI(t("event")),Bt.R3((0,r.zG)(n,t(o)))))))})))))}const or=(0,r.ls)(Me.hX((e=>{var t;return Boolean(null===(t=e.result)||void 0===t?void 0:t.result)})),Me.XP,Bt.UI(parseInt)),sr=(0,r.ls)(Xt((e=>e.activations??{})),un((0,r.zG)(Boolean,(0,qe.xD)((0,qe.ff)(Kt)))));function cr(e){var t;return("SegmentEntry"===e.name||"SegmentExit"===e.name)&&void 0!==(null===(t=e.properties)||void 0===t?void 0:t.segment_number)}const ur=()=>({null:{kind:"null",value:null},encode:Z,decode:$,append:xe}),lr=e=>(t,n,i,a,s,c)=>{const u={...a.activations},l={...n,setSegmentActivation:(e,n,r)=>{if(r!=t)throw new Error(`QL called setSegmentActivation for query ${r} while interpreting query ${t}`);e in u?u[e].includes(n)||(u[e]=[...u[e],n]):u[e]=[n]}},f=o.ij(a.state),m=o.ij(c),d=(0,r.zG)((0,Ie.gz)(o.G5)(f,m),o.UI((t=>{let[n,i]=t;const a=(0,r.zG)(e.decode(n),B.fS((()=>e.null))),o=(0,r.zG)(e.decode(i),B.fS((()=>e.null)));try{return B.F2(e.append(a,o))}catch(e){throw(0,mn.w)(`Failed to append lifted event ${JSON.stringify(i)} to internal state ${JSON.stringify(n)}. Got ${e}`)}})),o.Gk((()=>(0,r.zG)(f,o.wp((()=>m)),o.UI(B.t$))))),g=(0,r.zG)(d,o.UI(B.EQ(r.yR,e.encode)),o.tS(o.ij)),{overallState:p,dropExternalState:y}=(0,r.zG)((0,Ie.gz)(o.G5)(d,s),o.UI((t=>{let[n,i]=t;return(0,r.zG)(o.Uo(e.decode(i)),o.tS((t=>(0,r.zG)(n,B.vx(e.decode),B.fS((()=>e.null)),o.it((n=>e.append(n,t)))))),o.EQ((()=>({overallState:g,dropExternalState:!0})),(t=>({overallState:o.ij(e.encode(t)),dropExternalState:!1}))))})),o.fS((()=>(0,r.zG)(g,o.Gk((()=>s)),(e=>({overallState:e,dropExternalState:!1}))))),(0,h.rO)({overallState:o.WG})),v=i.interpret(p,l);return{checksum:a.checksum,...(0,r.zG)(g,o.aD((()=>({})),(e=>({state:e})))),...!1===v.result?{}:{result:v},...Kt(u)?{}:{activations:u},...!1===y?{}:{dropExternalState:y}}},fr=o.Eh({equals:(e,t)=>e===t});function mr(e){let t,n=!1;return()=>(n||(t=e(),n=!0),t)}function dr(e){const t=mr((()=>(0,r.zG)(e,Me.hX((e=>{var t;return Boolean(null===(t=e.result)||void 0===t?void 0:t.result)})),Me.UI((()=>!0)),(e=>({"1p":e}))))),n={"3p":{}},i=mr((()=>({...t(),...n})));return{getSegments:i,getSegmentsArray:mr((()=>gr(i()))),get1PSegments:t,get3PSegments:()=>n}}function gr(e){return Object.keys(e).reduce(((t,n)=>{const r=Object.keys(e[n]),i=[];return r.forEach((t=>{!0===e[n][t]&&i.push(t)})),t[n]=i,t}),{})}const pr=e=>({name:"",properties:{},session_id:e.getCurrentSession(),view_id:e.getCurrentView(),time:e.getCurrentTime()}),yr=(e,t)=>n=>r=>{const i=e.startSpan(t),a=n(r);return i.finish(),a},hr=e=>t=>(0,r.zG)(gn((0,h.rO)({unprocessedPageviewComplete:(0,r.ls)(o.DT((e=>e.viewId===t.environment.viewId)),o.fS((()=>qn(t.environment))))})),Ln(pn((e=>(0,r.zG)(o.ij(e.persistentState.unprocessedPVC),o.hX((e=>e.view_id!==t.environment.viewId)),o.UI(Bn.k))))),Un("flushedPvc"),zn("processingResult",(n=>{let{flushedPvc:i}=n;return e({...t,newEvents:(0,r.zG)(i,o.EQ((()=>t.newEvents),(e=>[...t.newEvents,e])))})})),Pn((()=>gn((e=>{return{...e,persistentState:{...e.persistentState,unprocessedPVC:(0,Bn.X)((t=new Date,n=e.unprocessedPageviewComplete,{name:"PageviewComplete",time:t,session_id:n.sessionId,view_id:n.viewId,properties:{...n.customProperties,aggregations:(0,r.zG)(n.aggregations,(0,h.rO)({SegmentEntry:Rn,SegmentExit:Rn,CohortEntry:Rn,CohortExit:Rn}))}}))}};var t,n})))),bn((e=>{let{flushedPvc:t,processingResult:n}=e;const i=(0,r.zG)(t,o.UI(Nn.ofOutputEvent));return(0,r.zG)((0,Ie.gz)(o.G5)(i,n),o.UI(Nn.sequenceNonEmptyArray),o.wp((()=>i)),o.wp((()=>n)))}))),vr=2,br=e=>t=>{const n=t.migrationVersion??(t.stateIsCompact?1:0);return(0,r.zG)([wr,_r],Bt.md(n),Bt.EQ((()=>t),(0,r.ls)(Bt.OV(e),Bt.u4(t,((e,t)=>t(e))),(0,h.rO)({migrationVersion:()=>vr}))))},wr=e=>(0,h.rO)({externalStateMap:o.UI(Me.jt(((t,n)=>(0,r.zG)(Me.P5(t,e.locallyLiftedQueries),o.wp((()=>Me.P5(t,e.cloudLiftedQueries))),o.NG((e=>e.compact(n))))))),internalStateMap:Me.Su(((t,n)=>{if(null==(null==n?void 0:n.state))return n;const r=e.locallyLiftedQueries[t]||e.cloudLiftedQueries[t];return{...n,state:r.compact(n.state)}}))}),_r=e=>{const t=new Set(e.queriesByEvent.PageviewEngagement??[]),n=new Set(e.queriesByEvent.PageviewComplete??[]);return(0,h.rO)({internalStateMap:Me.z7((0,qe.ff)((e=>t.has(e)&&n.has(e))))})},Er=(e,t)=>Me.xb(t)?e:(0,r.zG)(e,Me.z7((e=>!(e in t))));var Sr=s,Ir=c;var kr=function(e){return function(t){return[Sr(t),e(Ir(t))]}},Cr=n(637);const Lr=()=>e=>((0,r.zG)(e,a.UI((e=>e()))),a.a9({newResults:p.of(Bt.cS),pendingEvents:Bt.cS})),Ar=()=>()=>De.of((()=>({}))),Gr=e=>[e,dt.of(e)],Pr=s,Ur=c,zr=e=>t=>(0,r.zG)(Ur(t),(t=>()=>new Promise((n=>{const r=t();r.then(o.G).then(n);const i=(0,y.HJ)((()=>n(o.YP)),e);r.then(i)})))),xr="RefEventual",Tr=a.UI(Gr),Mr=e=>a.a9(Gr(e)),qr=e=>t=>a.vP((0,r.zG)(t,a.UI(Pr),a.UI(e)),(0,r.zG)(t,a.UI(Ur),a.UI(dt.UI(e)))),Dr=e=>t=>a.vP((0,r.zG)(a.vP((0,r.zG)(e,a.UI(Pr)),(0,r.zG)(t,a.UI(Pr))),a.UI((e=>{let[t,n]=e;return n(t)}))),(0,r.zG)(a.vP((0,r.zG)(e,a.UI(Ur)),(0,r.zG)(t,a.UI(Ur))),a.UI((e=>{let[t,n]=e;return dt.ap(t)(n)})))),Or=e=>t=>(0,r.zG)(t.current,zr(e),dt.UI(o.fS((()=>(e=>Pr(e.current))(t))))),Rr=a.UI(Pr),Fr=a.UI(Ur),Nr={URI:xr,map:(e,t)=>qr(t)(e)},Br={URI:xr,map:Nr.map,ap:(e,t)=>Dr(t)(e)},jr=e=>i.dQ((t=>{let{previousState:n}=t;const[i,u]=(0,r.zG)(e.newEvents,a.En(2,Bt.uZ()),kr(Lr(e.permutiveApi,e.permutiveUrls,(l=e.customQueries.runtime,(0,r.zG)(Object.entries(l.queriesByEvent),Bt.hX((e=>{let[,t]=e;return(0,r.zG)(t,Bt.G((e=>e in l.cloudLiftedQueries)))})),Bt.UI(s))))));var l;const f=a.vP({lookalikeModels:e.lookalikeModels,sessionId:e.sessionId,thirdPartyData:(0,r.zG)(e.thirdPartyData,a.UI(o.UI(kr(Me.UI((e=>{const t={};return e.forEach((e=>t[e]=!0)),t})))))),viewId:e.viewId}),m=(0,r.zG)(a.vP({cloudLiftedState:(0,r.zG)(u,a.UI((e=>e.newResults))),environment:f,externalStateDelta:e.externalStateDelta,newEvents:(0,r.zG)(i,(0,Cr.I)(e.metrics,"query_language_began_processing_pageview"))}),a.UI((0,h.rO)({environment:e=>p.of(e)})),a.UI((0,Ie.Yt)(p.G5))),d=Fn.init(n);const g=Ar(e.permutiveApi,e.permutiveUrls),y=(0,r.zG)(n?dt.of({processedState:d,stateMigratedThisInitialisation:!1}):(e.metrics.track({name:"sdk_query_state_migrated_workerisation_count_total",labels:{},value:1}),(0,r.zG)(e.migratedStateMaps,dt.UI((e=>{let{internal:t,external:n}=e;return{stateMigratedThisInitialisation:!0,processedState:{externalStateMap:n,internalStateMap:(0,r.zG)(t,o.fS((()=>({}))))}}})))),dt.Hr("environment",(()=>f.current)),dt.ak("process",(t=>{let{environment:n,processedState:i}=t;return(0,r.zG)((a={downloadCloudLiftQueries:g,environment:n,initialState:i,pastEvents:e.priorEvents,queries:e.customQueries},(0,r.zG)(dt.Do,dt.Hr("persistentState",(()=>(0,r.zG)(a.initialState,(0,h.rO)({internalStateMap:Me.z7(((e,t)=>t.checksum===a.queries.metadata[e]))}),br(a.queries.runtime)))),dt.Hr("invalidatedLocalQueries",(e=>{let{persistentState:{internalStateMap:t}}=e;return Er(a.queries.runtime.locallyLiftedQueries,t)})),dt.Hr("invalidatedCloudLiftQueries",(e=>{let{persistentState:{internalStateMap:t}}=e;return Er(a.queries.runtime.cloudLiftedQueries,t)})),dt.Hr("hasInvalidatedQueries",(e=>{let{invalidatedCloudLiftQueries:t,invalidatedLocalQueries:n}=e;return!(Me.xb(t)&&Me.xb(n))})),dt.ak("eventsForReplay",(e=>{let{hasInvalidatedQueries:t}=e;return t?a.pastEvents:dt.of(Bt.bM())})),dt.ak("cloudLiftQueriesForReplay",(0,r.ls)(o.DT((e=>e.eventsForReplay.length>0)),o.UI((e=>Object.keys(e.invalidatedCloudLiftQueries))),o.hX(Bt.Od),o.UI((0,r.ls)(a.downloadCloudLiftQueries,De.OV(a.queries.runtime),dt.UI(B.fS((()=>({})))))),o.fS((()=>dt.of({}))))),dt.Hr("queriesForReplay",(e=>{let{cloudLiftQueriesForReplay:t,invalidatedLocalQueries:n}=e;return[...Object.keys(n),...Object.keys(t)]})),dt.UI((e=>{let{cloudLiftQueriesForReplay:t,eventsForReplay:n,invalidatedCloudLiftQueries:i,invalidatedLocalQueries:s,queriesForReplay:c,persistentState:u}=e;return{bootstrapped:!1,cloudLiftQueriesForReplay:t,effects:{getCurrentTime:()=>new Date,getCurrentSession:()=>a.environment.sessionId,getCurrentView:()=>a.environment.viewId,getLookalikeModels:()=>({}),setSegmentActivation:(e,t,n)=>{throw new Error(`setSegmentActivation() called for segment ${n} without being overridden first.`)},...dr(u.internalStateMap)},eventsForReplay:n,invalidatedQueries:[...Object.keys(i),...Object.keys(s)],lal:o.YP,locallyLiftedQueriesByEvent:(0,r.zG)(a.queries.runtime.queriesByEvent,Me.DZ(o.KQ(Bt.hX((e=>e in a.queries.runtime.locallyLiftedQueries))))),lookalikeTransitionSegmentNumbers:(0,r.zG)(a.queries.runtime.queriesByEvent["!UpdateLookalikeModels"]||Bt.cS,Bt.UI(parseInt),(e=>new Set(e))),pageviewProperties:{},numEventsForReplay:n.length,queries:a.queries,queriesForReplay:c,persistentState:u,tpdEventsToProcess:Bt.cS,tpdHashInEffectsObject:o.YP,tpdQueries:o.YP,tpdReady:!1,unprocessedPageviewComplete:qn({sessionId:a.environment.sessionId,viewId:a.environment.viewId})}})))),e.trace.traceTask("query_language_initialisation_duration"),dt.UI((0,h.bw)((t=>{var n;e.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"query_language_ready",time_origin:"sdk_init"},performance.now()),e.metrics.trackCounter({name:"sdk_queries_to_replay_count",value:(n=t,0===n.numEventsForReplay?0:n.queriesForReplay.length),labels:{}})}))),dt.UI((t=>{let n=t;const i=(0,r.zG)(e.validationService,o.OV({downloadCloudLiftQueries:g,externalState:t.persistentState.externalStateMap}));return t=>{const[a,s]=(0,r.zG)(t,jn(e.trace))(n);return(0,r.zG)(i,o.OV((0,r.bc)(t,s))),n=s,[a,s.persistentState]}})));var a})),a.fF),v=(0,r.zG)(y,a.UI(o.UI((e=>e.process)))),b=(0,r.zG)(y,a.UI(o.EQ((()=>!1),(e=>e.stateMigratedThisInitialisation))));let w=Bt.bM();const _=(0,r.zG)(a.vP({processInput:v,inputIO:(0,r.zG)(m,a.UI(o.G))}),a.UI((0,Ie.Yt)(o.G5)),a.UI(o.UI((e=>{let{processInput:t,inputIO:n}=e;const i=n(),[a,s]=(0,r.zG)(i,(0,h.rO)({newEvents:Bt.UI(c),cloudLiftedState:Bt.UI((e=>e.state))}),(e=>t({...e}))),u=(0,r.zG)(a,o.EQ((()=>({errors:[],events:i.newEvents,internalStateDiff:o.YP})),(e=>{let[t,n,r]=e;return{errors:t,events:i.newEvents.concat(r.map((e=>[(0,h.k$)(),e]))),internalStateDiff:o.G(n)}})));return w=(0,r.zG)(w,Bt.R3(u)),{consumeDeltas:()=>{const e=w;return w=Bt.cS,e},modelState:s}})))),E=(0,r.zG)(_,a.UI(o.UI((e=>e.modelState)))),S=(0,r.zG)(_,a.UI(o.UI((e=>e.consumeDeltas))),a.UI(o.fS((()=>p.of(Bt.bM()))))),I=(0,r.zG)(a.vP(E,u),a.Rp(((e,t)=>{let[n,i]=t;const a=(0,r.zG)(e,o.UI((e=>{let[,t]=e;return(0,r.zG)(n,o.EQ((()=>t),(e=>(0,r.zG)(t,Bt.hX((t=>!t(e,i.pendingEvents)))))))})),o.fS((()=>Bt.bM())));if(o.pC(n)&&Bt.xb(i.pendingEvents))return[Gr(n.value),a];const s=(0,h.b2)(),c=(0,r.zG)(n,o.fS((()=>d)));var u;return[(0,r.zG)((()=>s.promise),(u=c,e=>[u,e])),(0,r.zG)(a,Bt.R3(((e,t)=>{const n=Bt.xb(t)||(0,r.zG)(i.pendingEvents,Bt.yW((e=>!t.includes(e))));return n&&s.resolve(e),n})))]})),a.UI(s)),k=(0,r.zG)(S,a.En(3,Bt.uZ()),(t=>{let[n,i,s]=t;return{errors:(0,r.zG)(n,a.UI(p.UI(Bt.tS((e=>e.errors))))),events:(0,r.zG)(i,a.UI(p.UI(Bt.tS((e=>e.events)))),(0,Cr.F)(e.metrics,"query_language_processed_pageview")),internalStateDiff:(0,r.zG)(s,a.UI(p.UI((0,r.ls)(Bt.DZ((e=>e.internalStateDiff)),o.DT(Bt.Od),o.UI((e=>e.reduce(((e,t)=>({...e,...t})))))))))}})),C=(0,r.zG)(I,qr((e=>e.internalStateMap))),L=Rr(C);return{state:Rr(I),value:{...k,stateMigratedThisInitialisation:b,internalStateMap:L,processing:(0,r.zG)(a.vP(_,u),a.UI((e=>{let[t,n]=e;return o.Wi(t)||Bt.Od(n.pendingEvents)}))),segments:(0,r.zG)(C,qr(Hr)),tpdUsage:(0,r.zG)(a.vP(e.thirdPartyData,L),a.UI((e=>{let[t,n]=e;return(0,r.zG)(t,o.UI((()=>sr(n))))}))),unprocessedPageviewComplete:(0,r.zG)(E,a.UI(o.NG((e=>e.unprocessedPVC))),a.UI(o.UI(Bn.k)))}}})),Hr=e=>(0,r.zG)(or(e),(e=>(0,r.zG)(e,Bt.uK((e=>e<1e7)),(t=>{let{left:n,right:r}=t;return{all:e,custom:r,standard:n}}))));var Qr=n(125);const Vr=e=>Gr(B.F2(e)),Wr="RefEventualEither",Yr=e=>a.a9(Vr(e)),Kr=Re.UI(Nr,B.dO),Jr=Ie.ap(Br,B.G5),Xr=e=>qr(B.F2)(e),Zr=e=>qr(B.fS(e)),$r={URI:Wr,map:(e,t)=>Kr(t)(e)},ei={URI:Wr,map:$r.map,ap:(e,t)=>Jr(t)(e)},ti=Ie.gM(ei),ni=e=>Rr(e.all),ri=(e,t)=>n=>({all:(0,r.zG)(n,Kr(e)),byAdServer:(0,h.mQ)((0,r.ls)(t,o.UI((e=>(0,r.zG)(n,Kr(e))))))}),ii=(e,t)=>(0,r.ls)(qr(B.F2),ri(e,t)),ai=e=>(0,r.zG)(e,qr(B.F2),ri(r.yR,(e=>o.G(e.filterCohorts)))),oi=e=>({all:(0,r.zG)(e.all,Zr((()=>Bt.bM()))),byAdServer:(0,h.mQ)((0,r.ls)(e.byAdServer,o.UI(Zr((()=>Bt.bM())))))}),si=e=>(0,r.zG)(e,oi,ni),ci={empty:{all:Yr(Bt.bM()),byAdServer:(0,h.mQ)((e=>o.YP))},concat:(e,t)=>({all:(0,r.zG)((0,Ie.gz)(ei)(e.all,t.all),Kr(Bt.xH)),byAdServer:(0,h.mQ)((n=>(0,r.zG)(Bt.oA([e.byAdServer(n),t.byAdServer(n)]),dn.c2,o.UI((e=>e.reduce(((e,t)=>(0,r.zG)((0,Ie.gz)(ei)(e,t),Kr(Bt.xH)))))))))})},ui=new Set(["AdRequest","PageviewEngagement","PrebidAuctions","Reaction","SegmentEntry","SegmentExit","SlotRendered","ThirdPartySegments","VideoEngagement"]),li=function(){return(0,r.bc)(...arguments)};var fi=n(794);const mi=e=>{let{queries:t,...n}=e;const[i,f]=a.Ue("pending");let m=o.G([]);const d=e=>{const t=Math.ceil(Math.random()*e.length);return(0,r.zG)(e,N.ke(t))};(0,r.zG)((()=>new Promise((e=>setTimeout(e,n.processingDelayMs)))),dt.UI((()=>performance.now())),dt.UI((e=>(0,r.zG)(m,o.UI(d),o.hX(N.Od),o.UI(F.ur(fi.n_({events:Bt.jG(),externalStateDeltas:Bt.jG(),lookalikeModels:fi.Z$(),modelState:fi.Z$(),thirdPartyData:fi.Z$()}))),(0,h.bw)((()=>{m=o.YP})),o.Hr("startTime",(()=>e))))),dt.UI((0,h.bw)(o.EQ((()=>f("skipped")),(()=>f("in_progress"))))),Ot("historicalEvents",(()=>ht(n.historicalEvents))),Ot("cloudLiftQueries",(()=>(0,r.zG)(Object.keys(t.runtime.cloudLiftedQueries),Bt.aD((()=>dt.of(Me.cS)),(e=>(0,r.zG)(n.downloadCloudLiftQueries(e),De.OV(t.runtime),dt.UI(B.fS((()=>Me.cS)))))),ht))),Ot("expectedSegmentMemberships",Mt((e=>yi({events:{historical:e.historicalEvents,new:e.events},externalState:{historical:n.externalState,deltas:e.externalStateDeltas},lookalikeModels:e.lookalikeModels,queries:{cloudLiftQueries:e.cloudLiftQueries,metadata:t.metadata,runtime:t.runtime},thirdPartyData:e.thirdPartyData})))),Dt("report",(e=>{let{expectedSegmentMemberships:n,modelState:i}=e;return function(e){const t=new Set(e.expectedSegmentMemberships);return(0,r.zG)(function(e){const t=function(e){const t=(0,r.zG)(Object.keys(e.runtime.queriesByEvent),Bt.Su(((e,t)=>[t,2**e]))),n={},i=Object.fromEntries(t);for(const t in e.runtime.queriesByEvent){const r=e.runtime.queriesByEvent[t];for(const e of r)n[e]?n[e]+=i[t]:n[e]=i[t]}const a={};for(const e in n){const t=n[e];a[t]?a[t].push(e):a[t]=[e]}return(0,r.zG)(Object.entries(a),Bt.UI((0,r.ls)(u((e=>Number(e))),u((e=>(0,r.zG)(t,Bt.DZ((0,r.ls)(o.DT((t=>{let[,n]=t;return(e&n)>0})),o.UI(s)))))))))}(e),n=new Set(Object.keys(e.runtime.cloudLiftedQueries));if(0===n.size)return(0,r.zG)(t,Bt.UI(u((e=>({triggers:e,cloudLifted:!1})))));return(0,r.zG)(t,Bt.tS((e=>{let[t,i]=e;const{left:a,right:o}=(0,r.zG)(i,Bt.uK((e=>n.has(e))));return[[{triggers:t,cloudLifted:!1},a],[{triggers:t,cloudLifted:!0},o]]})))}(e.queries),Bt.UI(l((n=>({actualSegments:(0,r.zG)(n,Bt.hX((t=>{var n,r;return Boolean(null===(n=e.modelState.persistentState.internalStateMap[t])||void 0===n||null===(r=n.result)||void 0===r?void 0:r.result)}))),expectedSegments:(0,r.zG)(n,Bt.hX((e=>t.has(e))))})))))}({expectedSegmentMemberships:n,modelState:i,queries:t})})),xt((e=>{let{startTime:t}=e;return()=>n.metrics.track({name:"sdk_segmentation_validation_duration_seconds",value:(performance.now()-t)/1e3,labels:{}})})),_t((e=>e.report)),_t(gi(n.metrics)),_t((()=>f("finished"))))();return[i,e=>{let[t,n]=e;(0,r.zG)((0,Ie.gz)(o.g1)(m,t.environment.lookalikeModels,(0,r.zG)(t.environment.thirdPartyData,o.UI(c))),o.UI((e=>{let[r,i,a]=e;r.push({externalStateDeltas:Bt.Yo(t.externalStateDelta),lookalikeModels:i,events:t.newEvents,modelState:n,thirdPartyData:a})})))}]};const di=new Set(["SegmentEntry","SegmentExit","PageviewEngagement","PageviewComplete","Pageview","LinkClick","SlotViewable","SlotRendered","UpdateLookalikeModels","UpdateSecondPartyData","UpdateThirdPartyData"]),gi=e=>t=>{for(const[n,{expectedSegments:i,actualSegments:a}]of t){if(0===i.length&&0===a.length)continue;const{correct:t,incorrect:o,missing:s}=pi(i,a),c=(0,r.zG)(n.triggers,Bt.UI((e=>e.startsWith("!")?e.slice(1):e)),Bt.UI((e=>di.has(e)?e:"misc")),(e=>[...new Set(e)]),Bt.UI((e=>(0,r.bc)(`trigger_${e}`,!0))),Bt.R3((0,r.bc)("is_cloud_lifted",n.cloudLifted)),(e=>Object.fromEntries(e))),u=(t,n)=>n.length>0&&e.trackCounter({name:t,value:n.length,labels:c});u("sdk_segmentation_validation_correct_count_total",t),u("sdk_segmentation_validation_incorrect_count_total",o),u("sdk_segmentation_validation_missing_count_total",s)}},pi=(e,t)=>{if(0===t.length)return{correct:[],incorrect:[],missing:e};if(0===e.length)return{correct:[],incorrect:t,missing:[]};const n=new Set(t),i=new Set(e),{right:a,left:o}=(0,r.zG)(t,Bt.uK((e=>i.has(e))));return{correct:a,incorrect:o,missing:(0,r.zG)(e,Bt.hX((e=>!n.has(e))))}};const yi=e=>bi(50,(function*(){const t={...e.queries.runtime.locallyLiftedQueries,...e.queries.cloudLiftQueries},n=(0,r.zG)(e.queries.runtime.queriesByEvent,Me.DZ((0,r.ls)(o.ij,o.UI(Bt.UI((e=>(0,r.bc)(e,t[e]))))))),i=(0,r.zG)(e.externalState.historical,o.fS((()=>({}))),Me.DZ(o.Dj($)),(t=>(0,r.zG)(e.externalState.deltas,Bt.UI(Jn(e.queries)),Bt.u4(t,Xn))),Me.UI(Z)),a={},s=new vi(e.lookalikeModels,e.thirdPartyData),c=e=>(s.processEvent(e),(0,r.zG)(n[e.name]??[],Bt.DZ((t=>{let[n,i]=t;return(0,r.zG)(o.ij(i.lift(e,s.effects)),o.fX((e=>a[n]?(0,r.zG)(e,hi(i,a[n])):B.F2(e))),o.UI((e=>(a[n]=e,n))))})))),u=e=>(0,r.zG)((e=>(0,r.zG)(a[e]??null,(n=>e in i?(0,r.zG)(i[e],hi(t[e],n),B.fS((()=>n))):n),(n=>t[e].interpret(n,s.effects)),(e=>e.result)))(e),o.DT((t=>t!==s.getSegmentResult(e))),o.UI((t=>({name:t?"SegmentEntry":"SegmentExit",properties:{segment_number:Number(e)},time:s.effects.getCurrentTime(),session_id:s.effects.getCurrentSession(),view_id:s.effects.getCurrentView()})))),l=e=>{if(0==e.length)return;const t=(0,r.zG)(e,Bt.tS((0,r.ls)(u,o.UI(c),o.fS((()=>Bt.bM())))));l(t)};for(const t of e.events.historical)yield,c(t);(0,r.zG)(Object.keys(t),l);for(const t of e.events.new)switch(yield,t.name){case"SegmentEntry":case"SegmentExit":case"PageviewComplete":break;default:c(t)}return(0,r.zG)(Object.keys(t),l),s.effects.getSegmentsArray()["1p"]})),hi=(e,t)=>n=>B.Y3((()=>e.append(t,n)),(e=>`Failed to append lifted state: ${e}`));class vi{segments;segmentsArray=void 0;lastEvent=o.YP;effects;constructor(e,t){const n=(0,r.zG)(t,Me.UI(Me.hX((e=>!0===e))));this.segments={...n,"1p":{}};const i=(0,r.zG)(this.segments,Me.UI(Object.keys));this.effects={getLookalikeModels:()=>e,getSegments:()=>this.segments,getSegmentsArray:()=>(this.segmentsArray||(this.segmentsArray={...i,"1p":Object.keys(this.segments["1p"])}),this.segmentsArray),setSegmentActivation:()=>{},getCurrentTime:()=>(0,r.zG)(this.lastEvent,o.EQ((()=>new Date),(e=>e.time))),getCurrentSession:()=>(0,r.zG)(this.lastEvent,o.EQ((()=>""),(e=>e.session_id))),getCurrentView:()=>(0,r.zG)(this.lastEvent,o.EQ((()=>""),(e=>e.view_id)))}}get1pSegments(){return this.effects.getSegmentsArray()["1p"]}getSegmentResult(e){return this.segments["1p"][e]??!1}processEvent(e){if("SegmentEntry"===e.name){const t=e.properties.segment_number;t&&this.processSegmentEntry([t])}else if("SegmentExit"===e.name){const t=e.properties.segment_number;t&&this.processSegmentExit([t])}else if("PageviewComplete"===e.name){const t=e.properties.aggregations;(null==t?void 0:t.SegmentEntry)&&this.processSegmentEntry(t.SegmentEntry),(null==t?void 0:t.SegmentExit)&&this.processSegmentExit(t.SegmentExit)}this.lastEvent=o.G(e)}processSegmentEntry(e){for(const t of e)t in this.segments["1p"]||(this.segments["1p"][t]=!0,this.segmentsArray=void 0)}processSegmentExit(e){for(const t of e)t in this.segments["1p"]&&(delete this.segments["1p"][t],this.segmentsArray=void 0)}}const bi=(e,t)=>async()=>{let n=performance.now();const r=t();for(;;){performance.now()-n>e&&(await new Promise((e=>setTimeout(e))),n=performance.now());const t=r.next();if(t.done)return t.value}},wi=e=>i.dQ((e=>{let{previousState:t}=e;return{value:o.YP,state:a.a9(t)}})),_i=e=>i.dQ((t=>{let{previousState:n}=t;const i=(0,r.zG)(n,o.DT(h.El),o.xH,o.hX(D.HD)),s=(0,r.zG)(i,o.EQ((()=>!1),(t=>t===e.sessionId)));if(!e.metrics.isEnabled()||Math.random()>.1||s)return{value:o.YP,state:a.a9(n)};const[c,u]=a.Ue(a.a9("pending"));return{value:o.G((t=>{let{downloadCloudLiftQueries:n,externalState:r}=t;const[i,a]=mi({downloadCloudLiftQueries:n,externalState:r,historicalEvents:e.priorEvents,metrics:e.metrics,processingDelayMs:6e4,queries:e.customQueries});return u(i),a})),state:(0,r.zG)(a.xH(c),a.UI((0,r.ls)(o.DT((e=>"in_progress"===e||"finished"===e)),o.UI((()=>e.sessionId)),o.wp((()=>i)))))}})),Ei=e=>(0,r.zG)(i.K4((t=>{let{stopped:n}=t;const[i,s]=a.Ue(a.a9(p.of(o.YP)));let c;const u=new Promise((e=>{c=e}));return{priorEvents:()=>u.then((e=>e())),externalStateDelta:a.xH(i),newEvents:(0,r.zG)(a.vP(e.newEvents,n),a.UI((e=>{let[t,n]=e;return n?()=>[]:t}))),setCachedPriorEvents:c,setExternalStateDelta:s}})),i.ak("segmentationValidation",(t=>{let{priorEvents:n}=t;return(0,r.zG)(e.eventsCache,B.EQ((()=>wi),(()=>_i)),(t=>t({...e,sessionId:e.sessionId.current,priorEvents:n})))})),i.ak("segmentationService",(t=>{let{newEvents:n,priorEvents:o,externalStateDelta:s,segmentationValidation:c}=t;return(0,r.zG)(jr({...e,externalStateDelta:s,newEvents:n,priorEvents:o,validationService:c}),i.bw((t=>(0,r.zG)(t.errors,a.UI((t=>(0,r.zG)(t(),Bt.UI((t=>e.reportError(`Query Language: ${t}`,{userId:e.groupId}))))))))))})),i.UI((t=>(0,r.zG)(t.segmentationService.events,a.En(4,Bt.uZ()),(n=>{let[i,s,u,l]=n;return{...t,newEvents:i,realtime:(0,r.zG)(s,a.Rp(!1,((e,t)=>{const n=t();return e||n.some((e=>{let[,t]=e;return"Pageview"===t.name}))})),(e=>a.vP(e,t.segmentationService.processing)),a.UI((e=>{let[t,n]=e;return t&&!n})),a.u4(((e,t)=>e||t))),currentPageviewSegments:(f={processedEvents:(0,r.zG)(u,a.UI(p.UI(Bt.UI(c)))),segments:t.segmentationService.segments,viewId:e.viewId},(0,r.zG)(a.vP(f.processedEvents,f.viewId,f.segments),a.Rp({pageviewProcessed:!1,resolvePageviewSegments:e=>{},segments:Gr({all:[],custom:[],standard:[]}),viewId:""},((e,t)=>{let[n,i,a]=t;const s=n();return(0,r.zG)(e,o.DT((e=>e.viewId===i)),o.EQ((()=>{if((0,r.zG)(s,Bt.G((e=>"Pageview"===e.name&&e.view_id===i))))return{pageviewProcessed:!0,resolvePageviewSegments:()=>{},segments:a,viewId:i};{const e=(0,h.b2)();return{pageviewProcessed:!1,resolvePageviewSegments:t=>e.resolve(Ur(t)()),segments:li(Pr(a),(()=>e.promise)),viewId:i}}}),(e=>e.pageviewProcessed?{...e,segments:a}:(0,r.zG)(s,Bt.G((e=>"Pageview"===e.name&&e.view_id===i)))?(e.resolvePageviewSegments(a),{pageviewProcessed:!0,resolvePageviewSegments:()=>{},segments:a,viewId:i}):{...e,segments:a})))})),a.UI((e=>e.segments)))),lastProcessedEvents:(0,r.zG)(l,a.UI(p.UI(Bt.UI(c))))};var f})))),i.Hr("cohorts",(t=>{let{segmentationService:n}=t;return(0,r.zG)(a.fF(e.nonQlCohorts),a.UI(o.UI((e=>(0,r.zG)(n.segments,qr((e=>e.all)),qr(Bt.UI(String)),ai,(t=>({query_language:t,...e})))))))})),i.ak("stateSync",(t=>{let{segmentationService:n,lastProcessedEvents:r}=t;return Ht({eventSourceId:e.eventSourceId,groupId:e.groupId,groupIdIsNewlyGenerated:e.groupIdIsNewlyGenerated,internalStateDiff:n.internalStateDiff,internalStateMap:n.internalStateMap,lastProcessedEvents:r,logger:e.logger,permutiveApi:e.permutiveApi,permutiveUrls:e.permutiveUrls,queryLanguageProcessing:n.processing,reportError:e.reportError,sessionId:e.sessionId,viewId:e.viewId})})),i.bw((e=>{let{stateSync:t,setExternalStateDelta:n}=e;return n(t.externalStateDelta)})),i.ak("segmentTransitions",(t=>{let{segmentationService:n}=t;return(e=>(0,r.zG)(i.vP({currentSegmentsSet:i.K4((()=>(0,r.zG)(e.segments,a.UI(m))))}),i.ak("transitionsSinceInit",(e=>{let{currentSegmentsSet:t}=e;return i.of(f(t))})),i.UI((e=>{let{currentSegmentsSet:t,...n}=e;return n}))))({segments:(0,r.zG)(Rr(n.segments),a.UI((e=>e.all))),viewId:e.viewId})})),i.Hr("cohortsRef",(e=>{let{cohorts:t}=e;return(0,r.zG)(t,a.VS(o.EQ((()=>a.a9(Bt.bM())),(0,r.ls)((e=>Object.values(e)),Bt.UI((0,r.ls)(oi,(e=>e.all),Rr,a.D8(Bt.Eh(D.Eq)))),Bt.vP(a.g1),a.UI(Bt.xH)))))})),i.Hr("createTrackRequest",(t=>{let{cohortsRef:n,segmentationService:i}=t;return(0,r.zG)(a.vP({cohorts:(0,r.zG)(n,a.UI(o.G)),qlSegments:(0,r.zG)(Rr(i.segments),a.UI(o.G)),webClient:e.webClient}),a.UI((0,Ie.Yt)(o.G5)),a.UI(o.UI((t=>{let{cohorts:n,qlSegments:r,webClient:i}=t;return t=>({...t,segments:r.all,user_id:e.groupId,cohorts:n,properties:{...t.properties,client:{...i,...t.properties.client??{}}}})}))))})),i.Hr("eventsToPublishOnPageUnload",(t=>e.trackPageviewComplete?(0,r.zG)(t.segmentationService.unprocessedPageviewComplete,a.UI(Bt.pc(o.UI((e=>(0,r.bc)(`PageviewComplete-${e.view_id}`,e))))),(e=>a.vP(t.createTrackRequest,e)),a.UI((e=>{let[t,n]=e;return(0,r.zG)(t,o.EQ((()=>Bt.cS),(e=>(0,r.zG)(n,Bt.UI(l(e))))))}))):a.a9(Bt.cS))),i.ak("eventCache",(t=>{let{newEvents:n,setCachedPriorEvents:o}=t;return(0,r.zG)(e.eventsCache,B.EQ((e=>(o(e),i.of({newEvents:n}))),(e=>(0,r.zG)((e=>i.K4((()=>({newEvents:(0,r.zG)(e.newEvents,a.UI(p.UI((0,h.bw)(Bt.UI((t=>{let[,n]=t;ui.has(n.name)||e.eventsCache.add(n,{persistOnDisk:!0})})))))),priorEvents:()=>e.eventsCache.all()}))))({eventsCache:e,newEvents:n}),i.UI((e=>{let{newEvents:t,priorEvents:n}=e;return o(n),{newEvents:t}}))))))})),i.UI((e=>({...e,newEvents:e.eventCache.newEvents}))),i.Hr("eventsToPublish",(t=>{let{cohorts:n,newEvents:i,segmentationService:s}=t;return(0,r.zG)(a.vP(i,e.webClient,s.segments,(0,r.zG)(n,a.UI(o.UI((0,r.ls)((e=>Object.values(e)),Bt.UI(oi),Bt.UI((e=>e.all)))))),(0,r.zG)(e.viewId,a.Rp(new Set,((e,t)=>new Set([...e,t]))))),a.UI((t=>{let[n,i,a,s,c]=t;return(0,r.zG)(o.Do,o.Qt("webClient",i),o.Qt("cohorts",s),o.ak("events",(()=>(0,r.zG)(n(),Bt.hX((e=>{let[,t]=e;return"PageviewComplete"!==t.name||c.has(t.view_id)})),o.DT(Bt.Od)))),pt,Ot("segments",(()=>(0,r.zG)(Ur(a),ht))),qt((e=>(0,r.zG)(e.cohorts,dt.uU(Or(1e3)),dt.UI(Bt.xH),dt.UI((t=>({...e,cohorts:t})))))),_t((t=>{let{cohorts:n,events:i,segments:a,webClient:o}=t;return(0,r.zG)(i,Bt.UI(l((t=>({...t,segments:a.all,user_id:e.groupId,cohorts:n,properties:{...t.properties,client:{...o,...t.properties.client??{}}}})))))})),dt.UI(o.fS((()=>Bt.bM()))))})),(e=>{const[t,n]=a.gS(Bt.uZ());return(0,r.zG)(e,a.UI((e=>e().then(n)))),t}))})));var Si=n(182);function Ii(e){return t=>(0,r.zG)(a.oQ(e),a.UI((0,h.rO)({backoffAfterErrorMs:e=>e??0,backoffAfterSuccessMs:e=>e??0})),(e=>i.dQ((n=>{let{previousState:i}=n;const[s,c]=a.Ue(function(e){if("object"!=typeof e||null===e)return{lastSuccess:0,lastError:0};return e}(i)),u=(0,r.zG)(a.vP(s,e),a.UI((e=>{let[t,n]=e;return Math.max(t.lastError+n.backoffAfterErrorMs,t.lastSuccess+n.backoffAfterSuccessMs)})));return{state:s,value:(0,r.ls)(o.DT((()=>Date.now()>=u.current)),o.UI(t),o.UI((0,h.bw)((e=>e.then((()=>c({...s.current,lastSuccess:Date.now()})),(()=>c({...s.current,lastError:Date.now()})))))))}}))))}const ki=function(e,t){return i.of(o.YP)};var Ci=n(999);const Li=function(e,t){return(0,r.zG)(Ai(e),Ii({backoffAfterErrorMs:6e5}),i.VS((e=>Ci.m((0,r.zG)(t,a.UI((0,h.rO)({tpdUsage:o.UI((0,r.ls)(Me.UI(Me.z7((e=>[].includes(e)))),Me.hX((0,qe.ff)(Me.xb))))})),a.UI((t=>{let{tpdUsage:n,userId:i}=t;return{validityKey:()=>i,freshnessKey:(0,r.ls)((()=>n),o.EQ((()=>0),(0,r.ls)(JSON.stringify,h.vp))),refresh:(0,r.zG)(n,o.hX((e=>Object.keys(e).length>0)),o.UI((t=>()=>De.Y3((()=>(0,r.zG)(e({user_id:i,time:new Date,tpd_segments:t}),o.fS((()=>Promise.reject("Blocked by backoff."))))),(e=>`Failed to report TPD usage. Got ${e}`)))))}})))))),i.UI(r.Q1))};const Ai=e=>t=>{const{config:n,metrics:r,permutiveApi:i,permutiveUrls:a}=e,s=r.startTimer("sdk_http_tpd_usage_seconds",{});return i.req({url:a.getEndpointUrl("/tpd/usage",o.G(n.apiVersion)),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1}).then((e=>(r.stopTimer("sdk_http_tpd_usage_seconds",s),e)))};var Gi=function(e){return function(t){return function(n){return e(t(n))}}},Pi=r.a9;Ke.F4,Ke.Xl;function Ui(e){return function(t){return function(){return e.of(t)}}}function zi(e){return function(t){return function(n){return function(r){return e.map(n(r),t)}}}}function xi(e){return function(t){return function(n){return function(r){return e.ap(n(r),t(r))}}}}function Ti(e){return function(t){return function(n){return function(r){return e.chain(n(r),(function(e){return t(e)(r)}))}}}}function Mi(e){return function(t){return(0,r.ls)(t,e.of)}}dt.PM;var qi=Pi,Di=(dt.tD,Gi(dt.tD),function(e,t){return(0,r.zG)(e,Oi(t))}),Oi=zi(dt.dO),Ri=(dt.Hi,Ui(dt.PM)),Fi=(dt.UA,"ReaderTask"),Ni={URI:Fi,map:Di},Bi={URI:Fi,of:Ri};Ke.F4,Ke.Xl;var ji=Pi,Hi=Qr.F2(Bi),Qi=(De.QM,De.lk,De.dk,De.Op,De.fj,Qr.UI(Ni)),Vi=Hi;Ke.F4,Ke.Xl;function Wi(e,t){const n=["amp","gigya","pxid","sailthru"],s=(0,r.zG)(t.identities,a.UI(o.UI(Me.z7((e=>!n.includes(e)))))),c=e=>(0,h.vp)(JSON.stringify(e)),u=e=>[c(e),e];return(0,r.zG)(i.vP({fetchFromNewEndpoint:(0,r.zG)(Yi(e),Ii({backoffAfterErrorMs:6e5})),fetchFromLegacyEndpoint:(0,r.zG)(Ki(e),Ii({backoffAfterErrorMs:6e5}))}),i.VS((n=>{let{fetchFromNewEndpoint:c,fetchFromLegacyEndpoint:l}=n;return(0,r.zG)(Ci.m((0,r.zG)(a.vP(t.userId,t.sessionId,s),a.UI((t=>{let[n,i,a]=t;return{validityKey:()=>n,freshnessKey:()=>`${Ji(a)},${i}`,refresh:(0,r.zG)(a,o.UI((t=>()=>Me.xb(t)?De.of({}):De.Y3((()=>(0,r.zG)((t=>(0,r.zG)(c(t),o.UI((e=>e.catch((()=>(0,r.zG)(l(t.identities),o.fS((()=>e))))))),o.wp((()=>l(t.identities))),o.UI((0,h.bw)((t=>{const n=e.metrics.startTimer("sdk_get_third_party_data_task_duration_seconds",{});t.catch(r.Q1).then((()=>{e.metrics.stopTimer("sdk_get_third_party_data_task_duration_seconds",n)}))})))))({userId:n,identities:t}),o.fS((()=>Promise.reject("Blocked by persistent backoff"))))),(e=>`Error fetching TPD. Got ${e}`)))),o.UI(Qi(u)))}})))),Ci.d((e=>o.G((e=>Array.isArray(e)?e:u(e))(e)))),i.UI(a.UI(B.fS((t=>(e.logger.warn("[TPD]",`Failed to retrieve usable value, using zero value. ${t}`),o.G(u({}))))))),i.bw((0,r.ls)(a.UI(o.pC),a.UI((t=>{t&&e.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"audience_matching_ready",time_origin:"sdk_init"})})))))})))}const Yi=e=>async t=>{const n=e.metrics.startTimer("sdk_http_audience_matching_seconds",{}),i=await e.permutiveApi.req({url:e.permutiveUrls.getAudienceMatchingEndpointUrl("/id",o.G("v1"),t.userId),payload:{identities:(0,r.zG)(t.identities,Me.Yz,Bt.UI((e=>{let[t,n]=e;return{tag:t,id:n}})))},method:"POST",withCredentials:!1,dataType:"json"});return e.metrics.stopTimer("sdk_http_audience_matching_seconds",n),i.items},Ki=e=>async t=>{const n=e.metrics.startTimer("sdk_http_tpd_seconds",{}),r=await e.permutiveApi.req({url:e.permutiveUrls.getEndpointUrl("/tpd",o.G(e.config.apiVersion)),method:"POST",payload:{user_id:t},contentType:"text/plain",dataType:"json",withCredentials:!1});return e.metrics.stopTimer("sdk_http_tpd_seconds",n),r},Ji=(0,r.ls)(JSON.stringify,h.vp);const Xi=(e,t)=>(0,r.zG)(i.vP({data:Wi(e,{identities:t.identities,sessionId:t.sessionId,userId:t.userId}),usageReporting:Li(e,a.vP({tpdUsage:t.tpdUsage,userId:t.userId}))}),i.ak("analytics",(e=>{let{data:n}=e;return function(e){return i.dQ((t=>{let{previousState:n}=t;const[i,s]=a.gS(Bt.uZ());var c;return{state:(0,r.zG)(a.vP(e.userId,e.providerSegments,e.sessionId,e.viewId),a.D8(((e,t)=>{let[n,r]=e,[i,a]=t;return n===i&&r===a})),a.Rp(null!==(c=n)&&"object"==typeof c?c:{userId:"",providerHashes:{}},((e,t)=>{let[n,i,a,c]=t;const u=(0,r.zG)(i,o.fS((()=>({})))),l=(0,r.zG)(u,Me.UI((0,h.SL)(h.vp))),f=(0,r.zG)(e,o.DT((e=>e.userId===n)),o.UI((e=>e.providerHashes)),o.fS((()=>({}))));return(0,r.zG)(u,Me.z7((e=>l[e]!==(f[e]||0))),(e=>Object.entries(e)),Bt.UI((e=>{let[t,n]=e;return(0,r.bc)((0,h.k$)(),{name:"ThirdPartySegments",properties:{data_provider:t,segments:[...n]},session_id:a,time:new Date,view_id:c})})),s),{userId:n,providerHashes:l}}))),value:i}}))}({providerSegments:(0,r.zG)(n,a.UI(o.UI(Ir))),sessionId:t.sessionId,userId:t.userId,viewId:t.viewId})})),i.UI((e=>{let{data:t,analytics:n}=e;return{data:t,analyticsEvents:n}}))),Zi=function(e){const t={include_geo:!0,include_isp:!0,include_ip_hash:!0,include_ip:!1},n=e.trace.startSpan("geoip_data_retrieval");return(0,r.zG)(Ci.m((0,r.zG)(e.sessionId,a.UI((n=>({validityKey:()=>(0,h.vp)(JSON.stringify(t)),freshnessKey:()=>n,refresh:o.G((()=>De.Y3((()=>$i(e.permutiveApi,e.metrics,e.config,t,e.permutiveUrls)),(e=>`Error fetching geoip. Got ${e}`))))}))))),i.UI(a.UI(B.fS((t=>(e.logger.warn("[geoip]",`Failed to retrieve usable value, using zero value. ${t}`),o.G({})))))),i.bw((0,r.ls)(a.UI(o.pC),a.UI((t=>{t&&(e.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"geoip_data_ready",time_origin:"sdk_init"},performance.now()),n.finish())})))))};const $i=(e,t,n,r,i)=>{const a=[];r.include_geo&&a.push(["include","geo"]),r.include_isp&&a.push(["include","isp"]),r.include_ip&&a.push(["include","ip"]),r.include_ip_hash&&a.push(["include","ip_hash"]);const s=t.startTimer("sdk_http_geoip_seconds",{});return e.req({url:i.getEndpointUrl("/geoip",o.G(n.apiVersion),a),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1}).then((e=>(t.stopTimer("sdk_http_geoip_seconds",s),e)))},ea=e=>t=>{const n=r=>{const i={...r};for(let a in r){const o=r[a];t.hasOwnProperty(o)?null!=e&&e.dropUnenriched&&void 0===t[o]?delete i[a]:i[a]=t[o]:null!==o&&"object"==typeof o&&o.constructor===Object&&(i[a]=n(o))}return i};return n};var ta=n(579),na=n(377);const ra=function(e,t,n,r,s){return i.of({cohorts:o.YP,externalData:{[ia]:a.a9(o.YP)}})};const ia="_pssps",aa=(e,t)=>(0,r.zG)(ra(e.permutiveApi,e.permutiveUrls,e.reportError,e.logger,t),i.UI((e=>{let{cohorts:t,externalData:n}=e;return{ssp:t,externalData:n}}))),oa="_pssps",sa=(e,t)=>({ssp:o.uZ(ci).concat(e.ssp,t.ssp),externalData:{[oa]:(0,r.zG)(a.vP(e.externalData._pssps,t.externalData._pssps),a.UI((e=>{let[t,n]=e;return o.uZ(ca).concat(t,n)})))}}),ca={concat:(e,t)=>({cohorts:e.cohorts.concat(t.cohorts),ssps:Array.from(new Set(e.ssps.concat(t.ssps)))})};function ua(e){return e.includes("cur")?e:["cur",...e]}const la=(e,t)=>i.K4((()=>{return e.logger.log("[curation]: running curation service",t.activationConfigs,["pubmatic","appnexus","ix","openx"]),(0,r.zG)(t.cohorts,Kr((n=e.logger,e=>t=>{const i=(0,r.zG)(t,Bt.tS((t=>(0,r.zG)(e[t],o.ij,o.fS((()=>Bt.bM()))))),ua);return n.log("[curation]: resolved curated cohorts",i),i})(t.activationConfigs)),ri((e=>e),(e=>(e.id,o.YP))),(e=>({ssp:o.G(e),externalData:{[oa]:(0,r.zG)(e,si,a.UI((e=>o.G({ssps:["pubmatic","appnexus","ix","openx"],cohorts:e}))))}})));var n})),fa=(e,t)=>la(e,t),ma=e=>{const t=(0,r.zG)((null==e?void 0:e.dfp)??[],Bt.UI(String),(e=>new Set(e)));return{id:"dfp",filterCohorts:Bt.hX((e=>t.has(e)))}};(0,na.Hn)("appnexus_adserver")("auto_init",!1);const da=e=>{if(!e.metrics.isEnabled())return()=>{};const t=(0,r.zG)(e.adServers,Bt.UI((e=>(0,r.bc)(e.id,e))),Me.sq,Me.UI((t=>{const n=(0,r.zG)(e.cohorts,Me.DZ((e=>e.byAdServer(t))),(e=>a.vP(e)),a.UI(Me.UI((i=5e3,s="Timeout",e=>(0,r.zG)(e,zr(i),dt.UI(o.pF((()=>B.t$(s)))))))),a.UI((0,Ie.Yt)(dt.Hi)),a.UI(dt.UI((0,r.ls)(Me.oh,Fe.Vn(Me.Su(((t,n)=>{e.logger.warn("[Targeting Metrics]",`[${t}]`,n)}))),Fe.F2))),(e=>()=>e.current));var i,s;return(0,r.ls)(Bt.of,Bt.UI((e=>e.cohorts)),pa,Bt.UI((e=>{let[t,n]=e;return{allCohorts:new Set(t),cohortCountByType:ga(t),requestCount:n}})),(i=>(0,r.zG)(n(),dt.UI(Me.Su(((t,n)=>(i,a)=>{(0,r.zG)(n,Bt.Hr("actualCohortCount",(e=>{let{cohortCountByType:t}=e;return(0,r.zG)(t,Me.P5(i))})),Bt.UI((n=>{const s={cohort_type:i,target:t},c=a.reduce(((e,t)=>n.allCohorts.has(t)?e+1:e),0),u=a.length-c;e.metrics.track({name:"sdk_ad_request_missed_cohorts",labels:s,value:n.requestCount*u}),e.metrics.track({name:"sdk_ad_request_successful_cohorts",labels:s,value:n.requestCount*c}),(0,r.zG)(n.actualCohortCount,o.UI((t=>{const r=t-c;e.metrics.track({name:"sdk_ad_request_superfluous_cohorts",labels:s,value:n.requestCount*r})})))})))})(t.id,i))))),(e=>e()))})));return e=>{if("AdRequest"===e.name)(n=e.properties).ad_server_id in t&&t[n.ad_server_id](n);var n}},ga=e=>({ql:(0,r.zG)(e,Bt.u4(0,((e,t)=>isNaN(parseInt(t))?e:e+1)))}),pa=e=>(0,r.zG)(e,Bt.pO((e=>{const{init:t,rest:n}=(0,r.zG)(e,Bt.zT((t=>t===e[0])));return[t,n]})),Bt.UI((e=>[e[0],e.length]))),ya=e=>o.YP;const ha=K.n_({cohorts:Bt.Eh((0,h.Or)()),ctx:(0,h.Or)()}),va=Bt.cS;Promise.resolve(B.F2(va)),K.n_({userId:(0,h.Or)(),lastSuccess:{equals:(e,t)=>e&&t&&ha.equals(e,t)||e===t}});function ba(e,t){return Object.keys(t).reduce(((n,r)=>void 0!==e[r]?{...n,[r]:t[r]+e[r]}:{...n,[r]:t[r]}),e)}function wa(e,t){return(0,r.zG)(Ia(e),((e,t)=>n=>(0,r.zG)((e=>n(e)().then((e=>B.nM(e)?Promise.reject(e.left):e.right))),Ii(e),i.UI((e=>n=>()=>(0,r.zG)(n,e,o.EQ((()=>Promise.resolve(B.t$(t))),(e=>e.then(B.F2,B.t$))))))))({backoffAfterErrorMs:6e5},"Advertiser segmentation request blocked by rate limiting."),i.VS((n=>i.dQ((i=>{let{previousState:s}=i;return e.logger.debug("[advertiser] previous state:",s),(0,r.zG)(t,a.Rp(a.a9(Ea(e)(s)),Sa(e)(n)),a.xH,a.bw((t=>e.logger.debug("[advertiser] updated state:",t))),(e=>({state:(0,r.zG)(e,a.UI((e=>{let{userId:t,lastSuccess:n}=e;return{userId:t,lastSuccess:o.FS(n)}})),a.D8(xa)),value:(0,r.zG)(e,a.UI((e=>{let{eventual:t}=e;return t})))})))})))))}const _a=e=>t=>(0,r.zG)(t,qr(function(e){return t=>(0,r.zG)(t.cohorts,N.hX((n=>(0,r.zG)(n.groups,N.yW((i=>(0,r.zG)(o.ij(t.groups[i]),B.Yo((()=>`cohort [${n.code}] is missing group [${i}]`)),B.Vn((t=>e.error(`[advertiser] ${t}`))),B.UI((e=>e>0)),B.fS((()=>!0)))))))),N.UI((e=>{let{code:t}=e;return t})))}(e)),ii((e=>e),(e=>"dfp"===e.id?o.G((e=>e)):o.YP)),o.G),Ea=e=>t=>(0,r.zG)(t,o.DT(Ta),o.fS((()=>Ma())),(e=>B.Y3((()=>({userId:e.userId,inFlight:!1,lastSuccess:o.ij(e.lastSuccess),view:Ua(),ctx:(0,r.zG)(o.ij(e.lastSuccess),o.UI((e=>{let[t]=e;return t}))),eventual:qa()})),(e=>`failed to parse existing persistent state: ${e}`))),B.fS((t=>(e.logger.error("[advertiser]",t),Pa(""))))),Sa=e=>t=>(n,i)=>(0,r.zG)(n,a.VS((0,r.ls)(o.DT((e=>{let{userId:t}=e;return t===i.userId})),o.fS((()=>Pa(i.userId))),(n=>{if(za(n)===i.viewId)return e.logger.debug("[advertiser] view id is the same as previous, returning existing state",n),a.a9(n);if(n.inFlight)return e.logger.debug("[advertiser] in flight request",n),a.a9(n);{let s;e.logger.debug("[advertiser] fetching cohorts for view",n);const c=new Promise((e=>{s=e})),u=()=>c;return(0,r.zG)((0,Ie.gz)(dt.Hi)(i.customCohorts,i.standardCohorts),dt.tS((e=>{let[r,a]=e;return t([i.userId,o.FS(n.ctx),r,a])})),De.YO("response"),De.ak("cohorts",(t=>{let{response:n}=t;return(0,r.zG)(n.c,La,(0,h.bw)(B.EQ((t=>{e.logger.error(`[advertiser] failed to decode data from response. ${t}`)}),(t=>{e.logger.debug("[advertiser] decoded data from response",t)}))),dt.of)})),De.Hr("view",(e=>{let{response:t,cohorts:n}=e;return(0,r.bc)(t.ctx,n)})),a.fF,a.UI((0,r.ls)(o.EQ((function(){return{...n,inFlight:!0,eventual:(0,r.bc)((0,r.zG)(n.lastSuccess,o.UI((e=>{let[t,n]=e;return n})),o.fS((()=>Ga()))),u)}}),B.EQ((function(t){e.logger.error(`[advertiser] ${t}`);const a=(0,r.zG)(n.lastSuccess,o.UI((e=>{let[t,n]=e;return n})),o.fS((()=>Ga())));return s(a),{userId:i.userId,lastSuccess:n.lastSuccess,ctx:n.ctx,view:(0,r.bc)(i.viewId,o.YP),inFlight:!1,eventual:[a,u]}}),(function(e){let{response:t,view:n}=e;const[,a]=n;return s(a),(0,r.zG)({userId:i.userId,lastSuccess:o.G(n),view:(0,r.bc)(i.viewId,o.G(a)),ctx:o.G(t.ctx),inFlight:!1,eventual:(0,r.bc)(a,u)})}))))))}})))),Ia=e=>De.it((t=>e.permutiveApi.req({url:e.permutiveUrls.getAdvertiserEndpointUrl("/segment",o.G("v4")),method:"POST",payload:ka(t),contentType:"text/plain",dataType:"json",withCredentials:!1})),(e=>`Failed to fetch advertiser cohorts: ${e}`)),ka=e=>JSON.stringify(e),Ca=e=>{const t=(0,r.zG)(e,N.YM,B.Yo((()=>"Expected a value, found empty array")),B.tS((e=>"string"==typeof e?B.F2(e):B.t$("Expected a cohort code, found "+typeof e)))),n=(0,r.zG)(e,N.Gb,o.fS((()=>[])),B.DT(Array.isArray,(()=>"Expected an array of groups [integer], found "+typeof e[1])));return(0,r.zG)(t,B.tS((e=>(0,r.zG)(n,B.UI((t=>({code:e,groups:t})))))))};function La(e){const[t,n]=e;return(0,r.zG)(t,N.fw(B.g1)(Ca),B.UI((e=>({cohorts:e,groups:n}))))}const Aa=K.n_({cohorts:N.Eh(K.n_({code:D.Eq,groups:N.Eh(J.Eq)})),groups:N.Eh(J.Eq)}),Ga=()=>({cohorts:[],groups:[]}),Pa=e=>({inFlight:!1,userId:e,lastSuccess:o.YP,view:Ua(),ctx:o.YP,eventual:qa()}),Ua=()=>["",o.YP],za=e=>e.view[0],xa=K.n_({userId:(0,h.Or)(),lastSuccess:{equals:(e,t)=>e===t||!!e&&!!t&&K.bc(D.Eq,Aa).equals(e,t)}}),Ta=e=>"object"==typeof e&&null!==e&&"userId"in e&&"lastSuccess"in e&&(void 0===e.lastSuccess||Array.isArray(e.lastSuccess)&&2===e.lastSuccess.length&&"string"==typeof e.lastSuccess[0]&&null!==e.lastSuccess[1]&&"object"==typeof e.lastSuccess[1]),Ma=()=>({userId:""}),qa=()=>(0,r.bc)(Ga(),(()=>Promise.resolve(Ga()))),Da=(e,t)=>{const n=(0,r.zG)(t,o.UI((e=>e.all)),o.fS((()=>Yr(Bt.cS))),Rr,a.UI(o.Uo));return{_pcrdbs:a.a9(o.YP),_pcrprs:n}},Oa=function(e,t){return(0,r.zG)(t,i.KD([[e=>!e.consent,i.K4((()=>Mr(Ga())))],wa(e,t)]),i.UI((0,r.ls)(a.xH,(n=>(0,Ie.gz)(Br)(n,Tr((0,r.zG)(t,a.UI((e=>{let{events:t}=e;return t})),(t=>{return(n=e.logger,e=>t=>(0,r.zG)(t,a.UI((t=>(0,r.zG)(B.Y3((()=>{const i=t().filter((t=>{let[,n]=t;return"SlotViewable"===n.name&&(0,r.zG)(o.ij(n.properties.line_item_id),o.UI((e=>e.toString())),o.UI((t=>e.has(t))),o.fS((()=>!1)))})).map((e=>{let[t,n]=e;return n.properties.line_item_id.toString()}));return i.forEach((e=>t=>e.debug("[advertiser] impression event for deal_id:",t))(n)),(e=>e.reduce(((e,t)=>({...e,[t]:1})),{}))(i)}),(e=>`Caught error when processing deal id impressions on events. Got ${e}`)),B.fS((e=>(n.error("[advertiser]",e),{})))))),a.Rp({},ba),a.D8(((e,t)=>Kt(t))),a.D8(fn(J.Eq)),a.bw((e=>n.debug("[advertiser] impressions:",e)))))(new Set([]))(t);var n}))))),qr((e=>{let[t,n]=e;return function(e,t,n){const i=(0,r.zG)(t.groups,N.Su(((i,a)=>{const s=(0,r.zG)((0,r.zG)(t.cohorts,N.hX((e=>{let{groups:t}=e;return t.includes(i)})),N.Lx(J.Pc)((t=>(0,r.zG)(o.ij(e[t.code]),o.fS((()=>[])),N.Lx(J.Pc)((e=>(0,r.zG)(o.ij(n[e]),o.fS((()=>0))))))))));return Math.max(0,a-s)})));return{cohorts:t.cohorts,groups:i}}({},t,n)})),_a(e.logger))),i.bw((t=>{(0,r.zG)(t,o.UI(si),o.fS((()=>a.a9([]))),(t=>(0,r.zG)(t,a.UI((t=>e.logger.debug("[advertiser] cohorts available for targeting:",t))))))})))};const Ra=(0,r.zG)(Oa,(e=>(t,n)=>(0,r.zG)(e(t,n),i.UI((e=>({cohorts:e,externalData:Da(t.logger,e)}))))));const Fa=i.K4((()=>{}));const Na=e=>t=>(0,r.zG)(e,Me.UI((e=>t.reduce(((t,n)=>t+Number(e.has(n))),0))));const Ba=function(e,t){return i.K4((()=>({signalRef:a.a9(o.YP)})))};const ja=e=>t=>i.dQ((n=>{const i=Qa(e.performance),s=(0,r.zG)(n.previousState,o.DT((e=>"string"==typeof e))),c={key:(0,r.zG)(s,o.fS((()=>e.sessionId.current))),reporting:!1},u=(0,r.zG)(e.sessionId,a.Rp(a.a9(c),((n,s)=>(0,r.zG)(n,a.VS((n=>{if(n.reporting)return a.a9(n);if(n.key===s)return a.a9(n);return(0,r.zG)(t,dt.gw(3e4),dt.tS((e=>i(50,(()=>function*(e,t){const n=Date.now(),i={},a=20;let o=0;for(const r of e){if(r.session_id===t)continue;o++,i[r.name]??={age_ms:0,count:0,eventName:r.name,size_bytes:0};const e=i[r.name].age_ms,s=n-r.time.getTime();s>e&&(i[r.name].age_ms=s),i[r.name].size_bytes+=2*JSON.stringify(r).length,i[r.name].count+=1,o%a==0&&(yield)}const s=Object.values(i);if(0===s.length)return[];const c=(0,r.zG)(s,Bt.u4({size_bytes:0,count:0,age_ms:0},((e,t)=>({size_bytes:e.size_bytes+t.size_bytes,count:e.count+t.count,age_ms:Math.max(e.age_ms,t.age_ms)}))),(e=>({...e,eventName:"*"})));return(0,r.zG)([...s,c],Bt.UI((e=>({...e,used_size_bytes:c.size_bytes}))))}(e,s))))),dt.UI((t=>(t.forEach((t=>{e.metrics.track({name:"sdk_event_cache_age_seconds",labels:{event_count:t.count,event_name:t.eventName,size_bytes:t.size_bytes,used_size_bytes:t.used_size_bytes},value:Math.ceil(t.age_ms/1e3)})})),{key:s,reporting:!1}))),a.fF,a.UI(o.fS((()=>({...n,reporting:!0})))))}))))),a.xH);return{value:void 0,state:a.UI((e=>e.key),u)}})),Ha=()=>i.dQ((e=>{let{previousState:t}=e;return{value:void 0,state:a.a9(t)}}));const Qa=e=>(t,n)=>async()=>{let r=e.now();const i=n();for(;;){e.now()-r>t&&(await new Promise((e=>setTimeout(e))),r=e.now());const n=i.next();if(n.done)return n.value}},Va=e=>t=>{const{consent:n,currentTimestampSecs:s,identities:c,sessionId:u,userId:f,viewId:m,pageviewState:d}=t;return(0,r.zG)(i.K4((()=>{let n;const r=new Promise((e=>{n=e})),[i,s]=a.Ue(a.a9(o.YP));return{...t,adServers:[ma(e.optimisedActivationsConfig.dfp)],nonQlCohortsT:()=>r,setNonQlCohorts:n,setTpdUsage:s,tpdUsage:a.xH(i)}})),i.ak("geoip",(()=>(e=>(0,r.zG)(e,Zi,i.YO("data"),i.Hr("replacementMap",(e=>{let{data:t}=e;return(0,r.zG)(t,a.UI(o.UI((e=>{var t;return{$ip_geo_info:e.geo_info,$ip_geo_info_continent:null===(t=e.geo_info)||void 0===t?void 0:t.continent,$ip_isp_info:e.isp_info,$ip_address:e.ip,$ip_address_hash:e.ip_hash}}))))})),i.Hr("permutiveContext",(e=>{let{data:t}=e;return(0,r.zG)(t,a.UI(o.EQ((()=>({})),(e=>{var t,n,r,i,a,o,s,c,u;return{isp:null===(t=e.isp_info)||void 0===t?void 0:t.isp,organization:null===(n=e.isp_info)||void 0===n?void 0:n.organization,autonomous_system_number:null===(r=e.isp_info)||void 0===r?void 0:r.autonomous_system_number,autonomous_system_organization:null===(i=e.isp_info)||void 0===i?void 0:i.autonomous_system_organization,continent:null===(a=e.geo_info)||void 0===a?void 0:a.continent,country:null===(o=e.geo_info)||void 0===o?void 0:o.country,city:null===(s=e.geo_info)||void 0===s?void 0:s.city,province:null===(c=e.geo_info)||void 0===c?void 0:c.province,postal_code:null===(u=e.geo_info)||void 0===u?void 0:u.postal_code}}))))}))))({...e,sessionId:u}))),i.Hr("watson",(t=>{let{webClient:n}=t;return(0,r.zG)(e.watson,o.fS((()=>(0,r.zG)(n,a.UI(o.UI((e=>e.url))),a.D8(o.Eh(D.Eq)),(t=>(0,ta.watson)({...e,pageUrl:t,watsonEnabled:(0,r.zG)(d,a.UI((e=>e.watsonEnabled)))}))))))})),i.ak("audienceMatching",(t=>{let{tpdUsage:n}=t;return Xi(e,{identities:c,sessionId:u,tpdUsage:n,userId:f,viewId:m})})),i.UI((e=>{let{audienceMatching:{analyticsEvents:t,...n},newEvents:i,...o}=e;return{...o,audienceMatching:n,newEvents:(0,r.zG)(a.vP(i,t),a.UI(p.RD),a.UI(p.UI(Bt.xH)))}})),i.UI((e=>{const[t,n,i]=a.Ue(o.bM()),[s,c]=(0,r.zG)(e.newEvents,a.En(2,Bt.uZ())),u=(0,r.zG)(a.vP(s,t),a.UI((e=>{let[t,n]=e;return(0,r.zG)(n,o.UI((e=>(0,r.zG)(t,p.UI(Bt.UI((0,h.bw)((t=>{let[,n]=t;return e(n)}))))))),o.fS((()=>p.of(Bt.bM()))))})));return{...e,newEvents:u,newEventsForAdvertiserSegmentation:c,collectTargetingSuccessMetrics:e=>{n(o.G(e)),i()}}})),i.ak("enrichedEvents",(t=>{let{enrichmentReplacementMap:n,geoip:s,newEvents:c,watson:u}=t;return(0,r.zG)(a.vP({misc:n,geoip:s.replacementMap,watson:u.replacementMap}),a.UI((0,Ie.Yt)(o.G5)),a.UI(o.UI((e=>{let{misc:t,geoip:n,watson:r}=e;return{...t,...n,...r}}))),(t=>i.K4((()=>((e,t,n,i)=>((0,r.zG)(t,a.UI(o.pC),a.YP((t=>{t&&e.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"event_enrichment_ready",time_origin:"sdk_init"})}))),(0,r.zG)(n,a.VS((()=>(0,r.zG)(a.vP((0,r.zG)(t,a.UI(o.UI(ea({dropUnenriched:!0})))),i),a.UI((0,r.ls)((e=>{let[t,n]=e;return()=>(0,r.zG)(t,o.EQ((()=>[]),(e=>(0,r.zG)(n(),Bt.UI(l((0,h.rO)({properties:e})))))))})))))))))(e.metrics,t,f,c)))))})),i.UI((0,h.rO)({enrichedEvents:(0,Cr.F)(e.metrics,"pageview_enriched")})),i.ak("lookalikeModels",(()=>(0,r.zG)(e.lookalikeModels,o.EQ((()=>(0,Si.lookalikeModelsService)({...e,consent:n,currentTimestampSecs:s})),i.of)))),i.ak("queryLanguage",(n=>{let{audienceMatching:o,nonQlCohortsT:s,enrichedEvents:c,lookalikeModels:u,setTpdUsage:l,userIdIsNewlyGenerated:m}=n;return(0,r.zG)((d={...e,...t,newEvents:c,thirdPartyData:o.data,groupId:f,groupIdIsNewlyGenerated:m,nonQlCohorts:s,lookalikeModels:u,migratedStateMaps:e.migratedStateMaps},(0,r.zG)(a.vP(d.eventSourceId,d.groupId,d.groupIdIsNewlyGenerated),a.D8((0,r.zG)(D.Eq,K.Uz((e=>{let[t]=e;return t})))),i.kR((e=>{let[t,n,a]=e;return(0,r.zG)(Ei({...d,eventSourceId:t,groupId:n,groupIdIsNewlyGenerated:a,migratedStateMaps:d.migratedStateMaps}),i.yi(t))})),i.UI((e=>({stateMigratedThisInitialisation:(0,r.zG)(e,a.VS((e=>e.segmentationService.stateMigratedThisInitialisation))),cohorts:(0,r.zG)(e,a.VS((e=>e.cohortsRef))),currentPageviewSegments:{all:(0,r.zG)(e,a.VS((e=>e.currentPageviewSegments)),qr((e=>e.all))),custom:(0,r.zG)(e,a.VS((e=>e.currentPageviewSegments)),qr((e=>e.custom))),standard:(0,r.zG)(e,a.VS((e=>e.currentPageviewSegments)),qr((e=>e.standard)))},eventsToPublish:(0,r.zG)(e,a.VS((e=>e.eventsToPublish))),eventsToPublishOnPageUnload:(0,r.zG)(e,a.VS((e=>e.eventsToPublishOnPageUnload))),realtime:(0,r.zG)(e,a.VS((e=>e.realtime)),a.Rp(!1,((e,t)=>e||t)),a.bw((e=>{e&&d.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"worker_realtime",time_origin:"sdk_init"},performance.now())}))),segments:{all:(0,r.zG)(e,a.VS((e=>Rr(e.segmentationService.segments))),a.UI((e=>e.all))),custom:(0,r.zG)(e,a.VS((e=>Rr(e.segmentationService.segments))),a.UI((e=>e.custom))),standard:(0,r.zG)(e,a.VS((e=>Rr(e.segmentationService.segments))),a.UI((e=>e.standard)))},thirdPartyDataUsage:(0,r.zG)(e,a.VS((e=>e.segmentationService.tpdUsage))),transitionsSinceInit:(0,r.zG)(e,a.VS((e=>e.segmentTransitions.transitionsSinceInit)))}))))),i.bw((e=>{let{thirdPartyDataUsage:t}=e;return l(t)})));var d})),i.ak("classificationModels",(t=>{let{queryLanguage:r}=t;return ki(e,a.vP({consent:n,currentTimestampSecs:s,queryLanguageCohorts:Fr(r.currentPageviewSegments.all),realtime:r.realtime,userId:f}))})),i.ak("advertiserSegmentation",(t=>{let{queryLanguage:r,newEventsForAdvertiserSegmentation:i}=t;return Ra(e,a.vP({consent:n,customCohorts:Fr(r.currentPageviewSegments.custom),realtime:r.realtime,sessionId:u,standardCohorts:Fr(r.currentPageviewSegments.standard),userId:f,viewId:m,events:i}))})),i.ak("demandPartnersAndCuration",(n=>{let{queryLanguage:s,advertiserSegmentation:c}=n;const u=ti(Bt.jG()),l=(0,r.zG)(c.cohorts,o.UI((e=>e.all)),o.fS((()=>Yr(Bt.cS)))),f=(0,r.zG)(s.currentPageviewSegments.all,Xr);return(0,r.zG)(i.vP({demandPartners:aa(e,{cohorts:f,consent:t.consent,url:(0,r.zG)(t.webClient,a.UI(o.UI((e=>e.url))))}),curation:fa(e,{activationConfigs:e.optimisedActivationsConfig.curation_platforms,cohorts:u.concat(l,f)})}),i.UI((e=>{let{demandPartners:t,curation:n}=e;return sa(t,n)})))})),i.ak("ipIdentifier",(e=>{let{userId:t,geoip:n}=e;return(0,r.zG)(n.data,a.UI(o.tS(o.KQ((e=>e.ip))))),Fa})),i.ak("secureSignal",(t=>{let{advertiserSegmentation:n,demandPartnersAndCuration:o}=t;return(0,r.zG)(Ba(e,(0,r.zG)(f,a.UI((e=>({userId:e,advertiserCohorts:n.cohorts,stdAudienceCohorts:o.ssp}))))),i.UI((e=>{let{signalRef:t}=e;return t})))})),i.Hr("nonQlCohorts",(e=>{let{advertiserSegmentation:t,classificationModels:n,contextualCohorts:i,setNonQlCohorts:a,demandPartnersAndCuration:o,viewId:s}=e;return(0,r.zG)(Me.oA({advertiser:t.cohorts,classificationModel:n,contextual:ya({contextualCohorts:i,viewId:s}),ssp:o.ssp}),(0,h.bw)(a))})),i.Hr("qlCohorts",(e=>{let{queryLanguage:t}=e;return(0,r.zG)(t.segments.all,a.UI(Bt.UI(String)))})),i.bw((t=>{return t.collectTargetingSuccessMetrics(da({adServers:t.adServers,cohorts:{...t.nonQlCohorts,query_language:(n=t.qlCohorts,(0,r.zG)(n,Tr,ai))},logger:e.logger,metrics:e.metrics}));var n})),i.Hr("eventsToPublish",(t=>{let{qlCohorts:n,queryLanguage:i,nonQlCohorts:o}=t;const s=(e=>{if(!e.metrics.isEnabled())return e=>{};const t=(0,r.zG)(e.cohortsByType,Me.UI(a.Rp(new Set,((e,t)=>new Set([...e,...t])))),(e=>a.vP(e)));return n=>{"Pageview"===n.name&&(0,y.HJ)((()=>(0,r.zG)(n.cohorts,Na(t.current),Me.Su(((t,n)=>e.metrics.track({name:"sdk_pageview_cohort_count",labels:{cohort_type:t},value:n}))))))}})({cohortsByType:(0,r.zG)(o,Me.UI(si),Me.dx("query_language",n)),metrics:e.metrics});return(0,r.zG)(i.eventsToPublish,a.UI(p.UI(Bt.UI((0,h.bw)((e=>{let[,t]=e;return s(t)}))))))})),(0,r.ls)(i.ak("eventsCacheReports",(()=>(0,r.zG)(e.eventsCache,B.EQ((()=>dt.of(Bt.cS)),(e=>()=>e.all())),(e=>{if(e.metrics.isEnabled()&&o.pC(e.performance)){const t=e.performance.value;return ja({...e,performance:t})}return Ha})({metrics:e.metrics,sessionId:t.sessionId,performance:e.performance})))),i.UI((e=>{let{adServers:t,advertiserSegmentation:n,demandPartnersAndCuration:i,eventsToPublish:o,geoip:s,queryLanguage:c,nonQlCohorts:u,watson:l,secureSignal:f}=e;return{activations:(0,r.zG)(t,Bt.UI((e=>(0,r.zG)(Object.values(u),Bt.UI(oi),Bt.DZ((t=>t.byAdServer(e))),Bt.UI(Rr),Bt.UI(a.D8(Bt.Eh(D.Eq))),(e=>a.vP(...e)),a.UI(Bt.xH),a.UI((t=>(0,r.bc)(e.id,t)))))),(e=>a.vP(...e)),a.UI(Me.sq)),cohorts:{all:c.cohorts,ql:c.segments.all,qlCustom:c.segments.custom,qlStandard:c.segments.standard},context:(0,r.zG)(a.vP(l.permutiveContext,s.permutiveContext),a.UI((e=>{let[t,n]=e;return{...t,...n}}))),eventsToPublish:o,eventsToPublishOnPageUnload:c.eventsToPublishOnPageUnload,externalData:a.vP({...n.externalData,...i.externalData}),geoIP:s.data,realtime:c.realtime,stateMigratedThisInitialisation:c.stateMigratedThisInitialisation,transitionsSinceInit:c.transitionsSinceInit,secureSignal:f}}))))}},338:(e,t,n)=>{n.d(t,{BJ:()=>f,El:()=>P,G6:()=>w,HD:()=>l,HP:()=>I,Kn:()=>u,Or:()=>E,PQ:()=>_,SL:()=>d,aT:()=>y,b0:()=>v,b2:()=>g,bw:()=>L,k$:()=>h,lo:()=>A,mQ:()=>k,rO:()=>C,vg:()=>S,vp:()=>m});var r=n(340),i=n(169),a=n(507),o=n(327),s=n(229),c=n(371);const u=e=>"object"==typeof e&&!Array.isArray(e)&&null!==e,l=e=>"string"==typeof e,f=e=>"number"==typeof e&&!Number.isNaN(e);function m(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}function d(e){return t=>{let n=0;for(let r of t){n=n+e(r)|0}return n}}o.ff(s.xb);function g(){let e,t;return{promise:new Promise(((n,r)=>{e=n,t=r})),reject:t,resolve:e}}let p=[];function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:navigator.userAgent;if(p.unshift(e),p.length>1)return;const n=["beforeunload","pagehide"],r=n.concat(["visibilitychange"]),i=e=>{if(!a&&e){a=!0;const e=p;p=[],e.forEach((e=>{try{e()}catch{}}))}};let a=!1;r.forEach((e=>{window.addEventListener(e,(()=>{const n=("visibilitychange"!==e||document.hidden)&&b(t);i(n)}))})),n.forEach((e=>{window.addEventListener(e,(()=>i(!0)))}))}function h(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^(self.crypto||self.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function v(e,t){const n=Object.keys(e),r=n.length,i={};for(let o=0;o<r;o++){const r=n[o],s=t(r,e[r]);(0,a.pC)(s)&&(i[r]=s.value)}return i}function b(e){return/Mobi|Android/i.test(e)}function w(e){return/^((?!chrome|android).)*safari/i.test(e)}function _(e,t){return new Promise((n=>{(0,c.HJ)((()=>{Promise.resolve(e()).then(n)}),(null==t?void 0:t.timeout)??0)}))}const E=()=>({equals:(e,t)=>Object.is(e,t)});function S(e){return t=>null!=t&&e in t?t[e]:void 0}function I(e){let t=a.YP;const n=(0,a.fS)((()=>{const n=e();return t=(0,a.G)(n),n}));return()=>n(t)}const k=e=>{const t=new Map;return n=>(t.has(n)||t.set(n,e(n)),t.get(n))},C=e=>t=>{const n={...t};for(const i in e){var r;n[i]=null===(r=e[i])||void 0===r?void 0:r.call(e,t[i])}return n};function L(e){return t=>(e(t),t)}const A=e=>t=>{const n=e.slice(0,-1),o=e.slice(-1)[0];return(0,i.zG)(n,r.f2((e=>{let[n,r]=e;return(0,i.zG)(t,a.DT(n),a.UI(r))})),a.fS((()=>o(t))))},G=e=>t=>{if("number"==typeof t)return t;if("string"==typeof t){const n=e(t);return Number.isNaN(n)?void 0:n}};G(parseInt),G(parseFloat);function P(e){return"object"==typeof e&&null!==e&&"_tag"in e&&["None","Some"].includes(e._tag)}},182:(e,t,n)=>{n.r(t),n.d(t,{lookalikeModelsService:()=>w,realService:()=>E,stubService:()=>_});var r=n(169),i=n(507);const a=(e,t,n,r)=>t+(n-t)*r/(Math.pow(2,e)-1),o=(e,t)=>{const n=(e,t)=>{const n=e.toString(16);return("0".repeat(t)+n).slice(Math.min(-t,-n.length))};return`${n(e.getUint32(t),8)}-${n(e.getUint16(t+4),4)}-${n(e.getUint16(t+6),4)}-${n(e.getUint16(t+8),4)}-${n(e.getUint32(t+10),8)}${n(e.getUint16(t+14),4)}`},s=e=>{const t=[1,2],n=e.getInt8(0);if(1===n)return c(e);if(2===n)return u(e);{const r=(0,i.Y3)((()=>o(e,1))),a=(0,i.g_)((()=>"Couldn\'t decode model id"),(e=>`Model id was ${e}`))(r);throw new Error(`Decoding only supported for version(s): ${t}; Supplied version was ${n}; ${a}`)}},c=e=>l(e,1),u=e=>l(e,2),l=(e,t)=>{const n=o(e,1),r=((e,t)=>{switch(String.fromCharCode(e.getInt8(t))){case"1":return"1p";case"3":return"3p"}})(e,17),i=e.getInt8(18),a=e.getFloat32(19),s=e.getFloat32(23),[c,u]=((e,t,n,r,i,a)=>{const o={};let s=0;do{let n;1===a?(s=e.getUint16(t),n=e.getUint16(t+2),t+=4):(s=e.getUint32(t),n=e.getUint16(t+4),t+=6),o[0===s?"const":s]=n.toString(36)}while(0!==s);return[o,t]})(e,27,0,0,0,t);return[{version:t,id:n,data_preference:r,weights:c,precision:i,min:a,max:s},u]};var f=n(6),m=n(46),d=n(371),g=n(506),p=n(792),y=n(144),h=n(999),v=n(338);const b=()=>i.G({}),w=_;function _(e){return g.K4((()=>p.a9(b())))}function E(e){e.logger.warn("add cleanup of legacy LAL cache");const t=e.trace.startSpan("lookalike_models_data_retrieval_duration");return(0,r.zG)(h.m((0,r.zG)(p.vP(e.consent,e.currentTimestampSecs),p.UI((t=>{let[n,o]=t;return{currentTimestampSecs:o,validity:{maxAge:604800,key:()=>"_"},freshness:{maxAge:86400,key:()=>"_"},refresh:(0,r.zG)(n,i.DT(Boolean),i.UI((()=>()=>f.fF(function(e){const t="Failed fetching binary models, reverting to JSON.\\nError: ",n="Failed fetching json models.\\nError: ";return(0,r.zG)(f.Y3((()=>I(e)),(e=>e.message)),d.N1,f.oU((e=>()=>function(e){const t=[];let n=0;for(;n<e.byteLength;){const[r,i]=s(new DataView(e,n));t.push(r),n+=i}return t}(e))),d.N1,f.UI(S((e=>{let{precision:t,max:n,min:r}=e;return{"1p":{},precision:t,min:r,max:n}}))),f.Vn((n=>(e.logger.log(t+n),e.metrics.track({name:"sdk_binary_models_missing_count",value:1,labels:{}}),n))),f.wp((()=>(0,r.zG)(f.Y3((()=>k(e)),(e=>e.message)),f.UI((e=>e.models)),f.UI(S((()=>({"1p":{}}))))))),f.UI((e=>(e=>{const t=Object.keys(e);return t.length>0&&e[t[0]].hasOwnProperty("precision")})(e)?(e=>{const t={},n=Object.keys(e),r=e=>{const t={"1p":{}},{precision:n,min:r,max:i}=e,o=e["1p"],s=Object.keys(o);for(let e=0;e<s.length;e++){const c=s[e],u=parseInt(o[c],36);t["1p"][c]=a(n,r,i,u)}return t};for(let i=0;i<n.length;i++){const a=n[i],o=e[a];t[a]=r(o)}return t})(e):e)),f.fS((t=>(e.reportError(n+t),m.of({})))))}(e)))))}})))),g.UI(p.UI((0,r.ls)(y.fS((t=>(e.logger.warn("[LAL]",`Failed to refresh, using zero value. ${t}`),b()))),(0,v.bw)(i.UI((()=>{t.finish(),e.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"lookalike_models_ready",time_origin:"sdk_init"})})))))))}function S(e){return t=>{const n={};for(let r=0;r<t.length;r++){const i=t[r],{id:a,weights:o}=i;if(void 0===a||void 0===o)continue;const s=e(i);Object.keys(o).forEach((e=>{s["1p"][e]=o[e]})),n[a]=s}return n}}const I=e=>{const{permutiveApi:t,config:n,metrics:r}=e,i=r.startTimer("sdk_http_models_seconds",{});return t.req({url:C(n.cdnProtocol,n.cdnBaseUrl,"binary"),method:"GET",contentType:"text/plain",dataType:"binary",withCredentials:!1}).then((e=>(r.stopTimer("sdk_http_models_seconds",i),e)))},k=e=>{const{permutiveApi:t,config:n,metrics:r}=e,i=r.startTimer("sdk_http_models_seconds",{});return t.req({url:C(n.cdnProtocol,n.cdnBaseUrl,"json"),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1}).then((e=>(r.stopTimer("sdk_http_models_seconds",i),e)))};function C(e,t,n){const r=`${e}://${t}`;switch(n){case"binary":return`${r}/models/v2/e1c3fd73-dd41-4abd-b80b-4278d52bf7aa-models.bin`;case"json":return`${r}/models/e1c3fd73-dd41-4abd-b80b-4278d52bf7aa-models.json`}}},2:(e,t,n)=>{n.d(t,{K:()=>A,O:()=>C});let r,i;const a=new WeakMap,o=new WeakMap,s=new WeakMap,c=new WeakMap,u=new WeakMap;let l={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return o.get(e);if("objectStoreNames"===t)return e.objectStoreNames||s.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return d(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function f(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(g(this),n),d(a.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(e.apply(g(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const a=e.call(g(this),t,...r);return s.set(a,t.sort?t.sort():[t]),d(a)}}function m(e){return"function"==typeof e?f(e):(e instanceof IDBTransaction&&function(e){if(o.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));o.set(e,t)}(e),t=e,(r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,l):e);var t}function d(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(d(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&a.set(t,e)})).catch((()=>{})),u.set(t,e),t}(e);if(c.has(e))return c.get(e);const t=m(e);return t!==e&&(c.set(e,t),u.set(t,e)),t}const g=e=>u.get(e);const p=["get","getKey","getAll","getAllKeys","count"],y=["put","add","delete","clear"],h=new Map;function v(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(h.get(t))return h.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=y.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!p.includes(n))return;const a=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let a=t.store;for(var o=arguments.length,s=new Array(o>1?o-1:0),c=1;c<o;c++)s[c-1]=arguments[c];return r&&(a=a.index(s.shift())),(await Promise.all([a[n](...s),i&&t.done]))[0]};return h.set(t,a),a}l=(e=>({...e,get:(t,n,r)=>v(t,n)||e.get(t,n,r),has:(t,n)=>!!v(t,n)||e.has(t,n)}))(l);var b=n(654),w=n(144),_=n(169),E=n(46),S=n(6),I=n(338),k=n(371);const C="[IDB]",L=(e,t,n,r,i,a)=>(0,_.zG)((0,E.of)(e.getNamespacedStorageKey(i)),(0,E.tS)((e=>(0,S.Y3)((async()=>n.put(r,a,e)),b.w))),(0,E.UI)((0,w.g_)((e=>{throw t.error(C,`Failed to store crypto key to ${r} due to unexpected error,\\n`,e),e}),(()=>a))),(e=>e()));class A{namespace;logger;cryptoAlg;idb;mainObjectStore;keyObjectStore;keyObjectKey;cryptoKey;MAX_CONSECUTIVE_PUTS=30;puts=1;hasForcedCompaction=!1;constructor(e,t,n,r,i,a,o,s){this.namespace=e,this.logger=t,this.cryptoAlg=n,this.idb=r,this.mainObjectStore=i,this.keyObjectStore=a,this.keyObjectKey=o,this.cryptoKey=s,this.logDebug("Created",this.idb)}static initialise(e,t,n,r,i,a,o,s,c,u){const l=(0,I.G6)(navigator.userAgent)&&!1,f=[u,r.isAvailable(),!l].every((e=>!0===e)),m=async(t,i,a)=>(0,_.zG)(await t.get(a,e.getNamespacedStorageKey(i)),(async e=>e??r.generateKey(!1)),(async r=>L(e,n,t,o,s,await r))).catch((e=>{const t=(0,b.w)(e);throw n.error(C,"Get crypto key failed. Got\\n",t),t})),d=(e,t,n)=>t.includes(n)?(0,_.Q1)():e.createObjectStore(n),g=()=>G(i,c,{upgrade:e=>{const t=[...e.objectStoreNames];d(e,t,a),d(e,t,o)}}).then((e=>{const t=[...e.objectStoreNames];return t.includes(a)&&t.includes(o)?e:Promise.reject(new Error("Object store(s) missing."))})),p=f?(0,w.Y3)((()=>function(e){if(!(0,I.G6)(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let t=()=>{},n=0;return new Promise((e=>{const r=()=>(n++,indexedDB.databases().finally((0,k.GL)(e)));t=(0,k.UM)(r,100),r()})).finally((()=>{t(),e.track({name:"sdk_idb_conn_attempt_safari_count",value:n,labels:{}})}))}(t).then((()=>g())).catch((e=>(n.error(`Re-creating IDB database ${i} due to error`,e),P(i).then((()=>g())))))),String):(0,w.t$)("Connection not attempted. Default to localStorage");return(0,w.g_)((e=>(0,S.t$)(e)),(t=>(0,_.zG)((0,S.Y3)((()=>t.then((async e=>({db:e,cryptoKey:await m(e,s,o)})))),String),(0,S.UI)((t=>{let{db:i,cryptoKey:c}=t;return new A(e,n,r,i,a,o,s,c)})))))(p)}async put(e,t){return(0,_.zG)((async()=>(0,_.bc)(JSON.stringify(e),this.cryptoKey)),(0,E.tS)((e=>{let[t,n]=e;return(0,E.of)(this.cryptoAlg.encrypt(n,t))})),(0,E.tS)((e=>async()=>(await this.recreateIfNecessary(this.puts++),e))),(0,E.tS)((e=>(0,S.Y3)((()=>this.idb.put(this.mainObjectStore,e,this.namespace.getNamespacedStorageKey(String(t)))),b.w))),(0,E.UI)((0,w.g_)((n=>{throw this.logError(`Failed to put "${t.toString()}" value`,e,". Got \\n",n),"QuotaExceededError"===n.name&&this.forceCompaction(),n}),(()=>t))),(e=>e()))}get(e){return(0,_.zG)(this.namespace.getNamespacedStorageKey(String(e)),(t=>this.idb.get(this.mainObjectStore,t).then((async e=>e?JSON.parse(await this.cryptoAlg.decrypt(this.cryptoKey,e)):null)).catch((t=>{const n=(0,b.w)(t);throw this.logError(`Get ${e.toString()} failed. Got`,n),n}))))}delete(e){return(0,_.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>this.idb.delete(this.mainObjectStore,e)))}deleteStore(){return this.logDebug("Deleting",this.idb),this.idb.close(),P(this.idb.name)}forceCompaction(){if(this.hasForcedCompaction)return null;this.hasForcedCompaction=!0,this.logDebug("Attempting to force compaction");const e=`__${this.mainObjectStore}`;return G(e).then((t=>(t.close(),P(e))))}recreateIfNecessary(e){return(0,I.G6)(navigator.userAgent)&&e%this.MAX_CONSECUTIVE_PUTS==0?this.recreate():Promise.resolve()}async recreate(){const e=this.idb.name,t=this.idb.version,n=await this.idb.getAllKeys(this.mainObjectStore),r=[];for(const e of n)r.push([e,await this.idb.get(this.mainObjectStore,e)]);await this.deleteStore(),this.idb=await G(e,t,{upgrade:e=>{e.createObjectStore(this.mainObjectStore),e.createObjectStore(this.keyObjectStore)}}),await Promise.all(r.map((e=>{let[t,n]=e;return this.idb.put(this.mainObjectStore,n,t)}))),await L(this.namespace,this.logger,this.idb,this.keyObjectStore,this.keyObjectKey,this.cryptoKey),this.logDebug("Reset to",this.idb)}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(C,...t)}logError(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(C,...t)}}const G=(0,_.ls)((function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),s=d(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(d(o.result),e.oldVersion,e.newVersion,d(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),s.then((e=>{a&&e.addEventListener("close",(()=>a())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),s}),k.t_,(e=>e.then((e=>({close:e.close.bind(e),createObjectStore:(0,_.ls)(e.createObjectStore.bind(e),_.Q1),delete:(0,_.ls)(e.delete.bind(e),k.t_),get:(0,_.ls)(e.get.bind(e),k.t_),getAllKeys:(0,_.ls)(e.getAllKeys.bind(e),k.t_),get name(){return e.name},get objectStoreNames(){return e.objectStoreNames},put:(0,_.ls)(e.put.bind(e),k.t_),get version(){return e.version}}))))),P=(0,_.ls)((function(e){let{blocked:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(()=>t())),d(n).then((()=>{}))}),k.t_)},910:(e,t,n)=>{n.r(t),n.d(t,{make:()=>o});var r=n(169),i=n(2);const a=e=>{const{logger:t,consent:n,prefix:r}=e,i=(e,n)=>(t.debug(`${r} Failed to write ${String(n)} as consent is revoked`),Promise.resolve(n));return e=>class extends e{put=((e,t,n)=>function(){return(n()?t:e)(...arguments)})(super.put.bind(this),i,(()=>!n.current))}},o=(e,t,n,o,s,c,u,l,f,m,d)=>(0,r.zG)(i.K,a({logger:f,consent:m,prefix:i.O})).initialise(e,t,f,n,o,s,c,u,l,d)},579:(e,t,n)=>{n.r(t),n.d(t,{watson:()=>c});var r=n(792),i=n(169),a=n(507),o=n(812),s=n(229);const c=e=>(0,i.zG)(l(e),r.YO("data"),r.Hr("replacementMap",(e=>{let{data:t}=e;return(0,i.zG)(t,a.YO("data"),a.Hr("taxonomyLabels",(e=>{let{data:t}=e;return function(e){const t=e=>{const t=e.split("/").filter((e=>e));return t.map(((e,n)=>"/"+t.slice(0,n+1).join("/")))},n=o.xH(e.filter(Boolean).map((e=>t(e.label))));return o.jj(s.Eq)(n)}(t.taxonomy??[])})),a.UI((e=>{var t,n,r;let{data:a,taxonomyLabels:s}=e;return{$alchemy_concepts:a.concepts??[],$alchemy_document_emotion:(null===(t=a.emotion)||void 0===t||null===(n=t.document)||void 0===n?void 0:n.emotion)??null,$alchemy_document_sentiment:(null===(r=a.sentiment)||void 0===r?void 0:r.document)??null,$alchemy_entities:a.entities??[],$alchemy_entity_names:(0,i.zG)(a.entities??[],o.UI((e=>e.text))),$alchemy_keywords:a.keywords??[],$alchemy_taxonomy:a.taxonomy??[],$alchemy_taxonomy_labels:s,$taxonomy_labels:s}})))})),r.Hr("permutiveContext",(e=>{let{data:t}=e;return(0,i.zG)(t,a.EQ((()=>({})),(e=>({watson:e}))))})),(e=>({permutiveContext:(0,i.zG)(e,r.UI((e=>e.permutiveContext))),replacementMap:(0,i.zG)(e,r.UI((e=>e.replacementMap)))}))),u=()=>r.a9(a.G({})),l=u}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=n(371),t=n(792),r=n(169),i=n(506),a=n(507),o=n(812),s=n(338),c=n(6);function u(e,n){return(0,r.zG)(c.Y3((()=>e.get(n)),(e=>`Failed to read previous state from IndexedDB: ${e}.`)),c.UI((e=>e??void 0)),c.UI((i=>a=>(0,r.ls)((0,s.rO)({previousState:()=>i}),a,(a=>{let{value:o,state:c}=a;const[u,l]=t.Ue(!1),f=(0,r.zG)(c,t.Rp(-1,(e=>e+1)));return{value:(0,r.bc)(u,o),state:(0,r.zG)(t.vP(c,f),(0,s.bw)(t.YP((t=>{let[r,a]=t;if(0!==a||r!==i)switch(l(!1),typeof r){case"undefined":e.delete(n).then((()=>l(!0)));break;case"object":null===r?e.delete(n).then((()=>l(!0))):e.put(r,n).then((()=>l(!0)));break;default:e.put(r,n).then((()=>l(!0)))}}))))}})))))}function l(e){return n=>(0,r.ls)((0,s.rO)({previousState:t=>e.current?t:void 0}),n,(0,s.rO)({state:(0,r.ls)((n=>t.vP(e,n)),t.UI((e=>{let[t,n]=e;return t?n:void 0})))}))}var f=n(144);class m extends Error{static errorName="NetworkRequestFailedError";name=m.errorName;constructor(){super(m.defaultMessage)}static get defaultMessage(){return"Network request failed"}}class d extends Error{static errorName="NetworkRequestTimeoutError";name=d.errorName;constructor(){super(d.defaultMessage)}static get defaultMessage(){return"Network request timed out"}}var g=n(614),p=function(e){return"Left"===e._tag},y=function(e){return"Right"===e._tag};function h(e){return{_tag:"Left",left:e}}function v(e){return{_tag:"Right",right:e}}function b(e,t){return{_tag:"Both",left:e,right:t}}var w=function(e,t,n){return function(r){switch(r._tag){case"Left":return e(r.left);case"Right":return t(r.right);case"Both":return n(r.left,r.right)}}},_=w;_(v,h,(function(e,t){return b(t,e)}));var E=v,S="These";r.yR,r.yR,g.Xl;class I{metrics;constructor(e){this.metrics=e}req(e){return this.reqImpl(e).then((e=>(0,r.MZ)(e)))}reqWithBeacon(e){var t,n;let{url:r,payload:i}=e;const a=JSON.stringify(i),o=(null===(t=navigator)||void 0===t||null===(n=t.sendBeacon)||void 0===n?void 0:n.call(t,r,JSON.stringify(i)))??!1;return this.trackRequestMetrics({is_beacon:!0,is_error:!o,request:{method:"POST",url:r,content_length:a.length}}),o}reqImpl(t){const n="arraybuffer",{url:i,dataType:o,contentType:c,method:u,withCredentials:l,timeout:p}=t;return new Promise(((y,h)=>{const w=new XMLHttpRequest,_="POST"===t.method?"string"==typeof(E=t.payload)?E:JSON.stringify(E):null;var E;const S=e=>this.trackRequestMetrics({is_beacon:!1,request:{method:u,url:i,content_length:(null==_?void 0:_.length)??0},response:e});w.onload=(0,e.GL)((()=>{var e,t;return(0,r.zG)(w.status,f.DT((e=>e<400),(()=>{const e="text"===w.responseType||""===w.responseType?w.responseText:"Couldn\'t access response text";return`Failed ajax request. Status code was ${w.status}. ${e}`})),f.tS((()=>"json"===o?w.responseText?f.Y3((()=>JSON.parse(w.responseText)),(e=>`Failed to parse response as JSON. Response was ${JSON.stringify(w.responseText)}. Got ${e}`)):f.F2(null):"text"===o?f.F2(w.responseText):f.F2(w.response))),(0,s.bw)((0,r.ls)(a.IS,(t={content_length:"text"===w.responseType||""===w.responseType?(null===(e=w.responseText)||void 0===e?void 0:e.length)??0:w.responseType===n?w.response.byteLength:0,response_time_ms:self.performance.now()-I,status_code:w.status},function(e){return g.Wi(e)?v(t):b(e.value,t)}),S)),f.EQ(h,y))})),w.onerror=(0,e.GL)((()=>{S(f.t$("network error")),h(new m)})),w.ontimeout=(0,e.GL)((()=>{S(f.t$("timeout")),h(new d)})),w.open(u,i,!0),c&&w.setRequestHeader("content-type",c),w.timeout=p||w.timeout,w.withCredentials=l||w.withCredentials,w.responseType="binary"===o?n:w.responseType;const I=self.performance.now();w.send(_)}))}trackRequestMetrics(e){var t;if(null===(t=this.metrics)||void 0===t||!t.isEnabled())return;const n=new URL(e.request.url).pathname;if(n.includes("metrics"))return;const i=t=>this.metrics.track({name:"sdk_http_request_count_total",value:1,labels:{request_method:e.request.method,request_path:n,request_content_length:e.request.content_length,...t}});var o;!0===e.is_beacon?i({is_beacon:!0,is_error:e.is_error}):(0,r.zG)((o=e.response,p(o)?g.YP:(y(o),g.G(o.right))),a.aD((()=>({})),(e=>({response_content_length:e.content_length,response_status:e.status_code,response_time_ms:e.response_time_ms}))),(t=>({is_beacon:!1,is_error:!y(e.response),...t})),i)}}class k{config;PATH_JOINER_Q="?";PATH_JOINER_A="&";constructor(e){this.config=e}getBaseUrl(){return`${this.config.apiProtocol}://${this.config.apiHost}`}getEndpointUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("base",e,t,n)}getSdkErrorsUrl(e,t){return this.getUrl("sdk-errors",e,t,[])}getAdvertiserEndpointUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("adv",e,t,n)}getClassificationModelsEndpointUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("clm",e,t,n)}getAudienceMatchingEndpointUrl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const i=`${e}/${n}/audiences`;return this.getUrl("audience-matching",i,t,r)}getCCSCohortMembershipEndpointUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("ccs",e,t,n)}makeAuthenticatedUrl(e){return this.makeUrlWithQueryParams(e,[["k",this.config.apiKey]])}getUrlPrefix(e){switch(e){case"base":return"";case"adv":return"/adv";case"sdk-errors":return"/sdk-errors";case"clm":return"/clm";case"audience-matching":return"/audience-matching";case"ccs":return"/ccs"}}getUrl(e,t,n,r){const i=this.getUrlPrefix(e),o=(0,a.g_)((()=>""),(e=>`/${e}`))(n),s=`${this.getBaseUrl()}${i}${o}${t}`;return this.makeUrlWithQueryParams(s,r.concat([["k",this.config.apiKey]]))}makeUrlWithQueryParams(e,t){const n=t.map((e=>{let[t,n]=e;return`${t}=${n}`})).join(this.PATH_JOINER_A),r=e.includes(this.PATH_JOINER_Q)?this.PATH_JOINER_A:this.PATH_JOINER_Q;return`${e}${r}${n}`}}var C=n(2),L=n(945);class A{sdkInitTimestamp;timeOriginSdkInit;logger;prefix="[Metrics]";timeOriginForContext=U();pendingMetrics=[];pendingCounters={};pendingTimers={};noMetricsTracked=0;constructor(e,t,n){this.sdkInitTimestamp=e,this.timeOriginSdkInit=t,this.logger=n}isEnabled(){return!0}getNoMetricsTracked(){return this.noMetricsTracked}consume(){const e=this.pendingMetrics.concat(Object.values(this.pendingCounters).flat());return this.pendingMetrics=[],this.pendingCounters={},e}track(e){this.noMetricsTracked++,this.logDebug(`Tracking ${e.name}`,{metric:e}),this.pendingMetrics.push(e)}trackCounter(e){if(this.noMetricsTracked++,this.logDebug(`Tracking ${e.name}`,{metric:e}),e.name in this.pendingCounters){const t=Object.keys(e.labels),n=this.pendingCounters[e.name].findIndex((n=>Object.keys(n.labels).length===t.length&&t.every((t=>n.labels[t]===e.labels[t]))));-1===n?this.pendingCounters[e.name].push(e):this.pendingCounters[e.name][n]=P(this.pendingCounters[e.name][n],e.value)}else this.pendingCounters[e.name]=[e]}synchroniseTimeBetweenContexts(e){return(0,r.zG)(L.gz(a.G5)(this.timeOriginForContext,this.timeOriginSdkInit),a.UI((t=>{let[n,r]=t;return e+n-r})))}trackTimeSinceInit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:performance.now();(0,r.zG)(this.synchroniseTimeBetweenContexts(n),a.UI((e=>(e-this.sdkInitTimestamp)/1e3)),a.UI((n=>this.track({name:e,value:n,labels:t}))))}startTimer(e,t){const n=performance.now(),r=this.generateRandomKey(e);return this.pendingTimers[r]={startTime:n,labels:t},r}stopTimer(e,t){const n=this.pendingTimers[t];if(n){const r=(performance.now()-n.startTime)/1e3;this.logDebug("timer stopped",e,r),this.track({name:e,value:r,labels:n.labels}),delete this.pendingTimers[t]}}generateRandomKey(e){return`${e}-${[...Array(24)].map((()=>Math.random().toString(36)[2])).join("")}`}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(this.prefix,...t)}}class G{isEnabled(){return!1}getNoMetricsTracked(){return 0}consume(){return[]}track(e){}trackCounter(e){}trackTimeSinceInit(e,t){}startTimer(e,t){return""}stopTimer(e,t){}}const P=(e,t)=>({...e,value:e.value+t}),U=()=>(0,r.zG)(a.Y3((()=>performance.timeOrigin)),a.hX((e=>"number"==typeof e&&!Number.isNaN(e))));class z{sdkInitTimestamp;prefix="[Permutive]"+(self.document?"[Main]":"[Worker]");debugStyle=["color: blue"].join(";");constructor(e){this.sdkInitTimestamp=e}get timeDeltaFromInit(){return`[${(new Date).getTime()-this.sdkInitTimestamp}ms]`}log(){return console.log.bind(self.console,this.timeDeltaFromInit,this.prefix)(...arguments)}debug(){return console.debug.bind(self.console,"%s%c%s",this.timeDeltaFromInit,this.debugStyle,this.prefix)(...arguments)}warn(){return console.warn.bind(self.console,this.timeDeltaFromInit,this.prefix)(...arguments)}error(){return console.error.bind(self.console,this.timeDeltaFromInit,this.prefix)(...arguments)}}class x{log(){}debug(){}warn(){}error(){}}class T{crypto=self.crypto||self.msCrypto;ALG_NAME="AES-GCM";isAvailable(){var e;return!(null===(e=this.crypto)||void 0===e||!e.subtle)}generateKey(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,e.t_)(this.crypto.subtle.generateKey({name:this.ALG_NAME,length:256},t,["encrypt","decrypt"]))}encrypt(e,t){const[n,r]=this._encrypt(e,this.str2bytes(t));return n.then((e=>{const t=new Uint8Array(16+e.byteLength);return t.set(r,0),t.set(new Uint8Array(Uint32Array.of(e.byteLength).buffer),12),t.set(new Uint8Array(e),16),t.buffer}))}decrypt(e,t){const n=new Uint8Array(t,0,12),r=new Uint32Array(t,12,1)[0],i=t.slice(16,16+r);return this._decrypt(e,n,i).then(this.bytes2str)}_encrypt(t,n){const r=this.crypto.getRandomValues(new Uint8Array(12));return[(0,e.t_)(this.crypto.subtle.encrypt({name:this.ALG_NAME,iv:r},t,n)),r]}_decrypt(t,n,r){return(0,e.t_)(this.crypto.subtle.decrypt({name:this.ALG_NAME,iv:n},t,r))}str2bytes(e){return(new TextEncoder).encode(e).buffer}bytes2str(e){return(new TextDecoder).decode(e)}}class M{config;constructor(e){this.config=e}getNamespacedStorageKey(e){return`${this.config.stateNamespace}${e}`}}var q=n(46),D=n(694),O=n(450),R=n(327),F=n(214);var N=n(654),B=n(373);class j{timeoutDurationInMilliseconds;maxTimeOutDurationInMilliseconds;constructor(e,t){this.timeoutDurationInMilliseconds=e,this.maxTimeOutDurationInMilliseconds=t}schedule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeoutDurationInMilliseconds,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,t,n)}scheduleAccumulated(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeoutDurationInMilliseconds,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,n,r,t)}scheduleForPageUnload(e){return(0,s.aT)(e)}debounce(t,n,r,i){let a,o,c,u=[];return l=>{i&&(c=i.concat(c??i.empty,l));const f=(0,s.b2)();u.push(f);var m;return null===(m=a)||void 0===m||m(),a=(0,e.HJ)((()=>{var e;null===(e=o)||void 0===e||e(),o=void 0;const n=t(c||l);u.forEach((e=>e.resolve(n))),c=null==i?void 0:i.empty,u=[]}),n),o||(o=(0,e.HJ)((()=>{var e;null===(e=a)||void 0===e||e(),o=void 0;const n=t(c||l);u.forEach((e=>e.resolve(n))),c=null==i?void 0:i.empty,u=[]}),r)),f.promise}}}class H extends Error{constructor(e){super(e),this.name="StoreClosingError"}}const Q="permutive-events-cache",V="permutive-events-for-page",W="[EVENTSCACHE]",Y=e=>"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name;class K{config;logger;reportError;trace;metrics;userId;makeEventsStore;eventStore;eventsCache=this.makeEventsRepository(Q);eventsForPage=this.makeEventsRepository(V);eventsTTLInMilliseconds;readiness;debouncedReportError=(()=>new j(5e3,5e3).schedule((e=>this.reportError(e.errorMessage,{userId:e.userId}))))();static initialise(e,t,n,i,a,o,s){return(0,r.zG)(s(),c.UI((r=>new K(e,t,n,i,a,o,s,r))))}constructor(e,t,n,i,o,c,u,l){this.config=e,this.logger=t,this.reportError=n,this.trace=i,this.metrics=o,this.userId=c,this.makeEventsStore=u,this.eventStore=l,this.eventsTTLInMilliseconds=(0,r.zG)((0,a.ij)(this.config.eventsTTLInDays),(0,a.tS)((e=>"number"==typeof e&&e>0?(0,a.G)(24*e*3600):a.YP))),this.eventsCache.events=(0,s.HP)((()=>(0,s.PQ)((0,r.zG)(q.tD((()=>this.trace.startSpan("load_event_cache"))),q.tS((e=>(0,r.zG)(this.loadFromDisk(),q.At((t=>()=>{e.finish(),this.logDebug(`Event cache loaded, #e ${t.length}`)}))))))))),this.readiness=this.eventsCache.events().then((()=>this.migratePreviousPagesEvents())),c.onChange((()=>this.reset()))}async migratePreviousPagesEvents(){const e=this.trace.startSpan("migrate_previous_for_page_events"),t=(0,q.pE)((e=>(0,c.Y3)((()=>e.flush()),N.w)));return(0,r.zG)([this.eventsForPage,this.eventsCache],t,(0,q.UI)((t=>{const n=o.bj(t);return n.length>0&&this.reportError(`Migrate previous events failed. Got:\\n${n.join("\\n ")}`,{userId:this.userId.current}),e.finish()})),(e=>e()))}all(){return Promise.all([this.eventsCache.events(),this.eventsForPage.events()]).then(o.xH)}async add(e,t){let{persistOnDisk:n}=t;return this.logDebug("Adding to cache",e),this.eventsForPage.events=(0,r.zG)(this.eventsForPage.events,q.UI((t=>[...t,e])),s.HP),n&&this.readiness.then((()=>this.eventsForPage.flush())),e}filterEventsByWorkspace(e){return e}pruneEventsToSizeLimit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config.eventsCacheLimitBytes;if(n<=0||t<=n)return this.logDebug(`Event size of ${t} less than limit of ${n}`),{events:e,sizeInBytes:t};this.logDebug("Events before pruning",{count:e.length,sizeInBytes:t,byteLimit:n});let r=1,i=[...e];for(;t>n;)i.splice(0,r),r*=2,t=2*JSON.stringify(i).length;return this.logDebug("Events after pruning",{count:i.length,sizeInBytes:t}),{events:i,sizeInBytes:t}}loadFromDisk(){const e=()=>[],t=(0,r.zG)(this.eventsTTLInMilliseconds,a.EQ((()=>r.yR),(e=>o.hX((t=>e>Date.now()-t.time.getTime())))));return(0,r.zG)(q.tD((()=>(this.logLog("Loading event cache..."),this.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{})))),q.YO("loadEventsCacheTask"),q.ak("eventsFromDisk",(()=>(0,r.zG)(o.nI([this.eventStore.get(Q),this.eventStore.get(V)]),o.UI(c.LV((0,s.lo)([[e=>e instanceof H,(0,r.ls)(e,q.of)],t=>(0,r.zG)(q.tD((()=>this.reportError(`Error fetching data from store. Got ${t}`,{userId:this.userId.current}))),q.tS((()=>()=>this.reset("historical"))),q.UI(e))]),(0,r.ls)(a.fS(e),q.of))),o.vP(q.qA)))),q.At((e=>{let{eventsFromDisk:t,loadEventsCacheTask:n}=e;return()=>{this.logDebug("Read events from store:",t),this.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",n)}})),q.UI((0,r.ls)((0,s.vg)("eventsFromDisk"),o.xH,this.filterEventsByWorkspace,(e=>this.pruneEventsToSizeLimit(e,2*JSON.stringify(e).length)),(e=>(this.eventsCache.sizeInBytes=e.sizeInBytes,this.eventsCache.sizeInBytesLastSuccessfulWrite=e.sizeInBytes,e.events.length>0&&(this.metrics.track({name:"sdk_events_cache_byte_total",value:e.sizeInBytes,labels:{}}),this.metrics.track({name:"sdk_events_cache_size_total",value:e.events.length,labels:{}})),e.events)),o.UI(B.k),t)))}async reset(e){return(0,r.zG)(q.tD((()=>this.logDebug("Resetting Events Cache"))),q.tS((()=>this.eventStore.deleteStore())),c.tS((()=>this.makeEventsStore())),c.Zl((t=>(this.eventStore=t,"historical"===e?L.gz(c.Ij)(this.eventsCache.reset,this.eventsForPage.flush):L.gz(c.Ij)(this.eventsCache.reset,this.eventsForPage.reset)))),c.wE((()=>()=>this.all())),c.fS((()=>q.of(J()))),(e=>e()))}getStateSizeInBytes(){return this.eventsForPage.sizeInBytes+this.eventsCache.sizeInBytes}makeEventsRepository(e){const t=(()=>{let e=Promise.resolve(f.F2((0,r.Q1)()));return t=>e=e.then(t)})(),n=e=>(0,r.zG)(q.tD((()=>this.logDebug(`Writing ${e.length} events to ${g.key}`))),q.tS((()=>this.eventStore.put(e.map(B.X),g.key))),c.UI(r.Q1)),i=(0,r.zG)(q.tD((()=>this.logDebug(`Deleting events for ${g.key}`))),q.tS((()=>this.eventStore.delete(g.key))),c.Vn(N.w)),a=(0,r.ls)(q.of,q.At((e=>()=>this.logError(`Events cache failed to put ${g.key}. Got ${e}`))),q.tS((0,s.lo)([[e=>Y(e)&&g.retryAttempts<9,()=>(0,r.zG)(q.tD((()=>{g.retryAttempts+=1,this.logDebug(`Attempt #${g.retryAttempts} to write ${g.key} to EventsStore`)})),q.tS((()=>d)),q.tS((()=>u)))],[e=>Y(e),e=>(0,r.zG)(q.tD((()=>this.logDebug(`Attempted ${g.retryAttempts} rewrite attempts and reached limit of 9 max writes.`,"Reporting QuotaExceededError to API"))),q.tS((()=>()=>this.debouncedReportError({errorMessage:`Events cache failed to put ${g.key}. Got ${e}`,userId:this.userId.current}))),q.tS((()=>c.t$(e))))],c.t$]))),o=e=>c.tD((()=>{this.logDebug(`Successfully wrote events for ${g.key} after ${g.retryAttempts} attempts`),g.retryAttempts=0,g.sizeInBytes=2*JSON.stringify(e).length,g.sizeInBytesLastSuccessfulWrite=g.sizeInBytes})),u=(0,r.zG)((()=>g.events()),q.tS((e=>(0,r.zG)(n(e),q.mU(f.EQ(a,(()=>o(e)))))))),l=(e,t)=>(0,r.zG)(e.events,q.UI((n=>{const r=2*JSON.stringify(n).length,i=this.pruneEventsToSizeLimit(n,r,t);return e.events=q.of(i.events),e.sizeInBytes=i.sizeInBytes,t-e.sizeInBytes}))),m=(e,t)=>{let[n,...i]=e;return n&&0!==t?(0,r.zG)(l(n,t),q.tS((e=>(this.logDebug(`${e} left after pruning ${n.key}`),m(i,e))))):q.of((0,r.Q1)())},d=(0,r.zG)(c.tD((()=>this.eventsForPage.sizeInBytes-this.eventsForPage.sizeInBytesLastSuccessfulWrite)),c.fX(f.DT((e=>e>0),(e=>new Error(`${this.eventsForPage.key} failed to write the same or smaller events cache of size ${e}`)))),c.tS((e=>{const t=1.2*e,n=[this.eventsCache,this.eventsForPage];return this.logDebug(`Pruning ${t} bytes from`,n),(0,r.zG)(m(n,t),c.fF)}))),g={key:e,events:q.of([]),sizeInBytes:0,sizeInBytesLastSuccessfulWrite:0,retryAttempts:0,flush:()=>(0,r.zG)(q.tD((()=>this.trace.startSpan(`write_${g.key}`))),q.tS((e=>(0,r.zG)(u,q.At((()=>()=>e.finish()))))),t),reset:()=>(0,r.zG)(q.tD((()=>{g.events=q.of([]),g.sizeInBytes=0,g.sizeInBytesLastSuccessfulWrite=0})),q.tS((()=>i)),t)};return g}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(W,...t)}logWarn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.warn(W,...t)}logError(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(W,...t)}logLog(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.log(W,...t)}}const J=()=>[],X=`permutive.${self.document?"main":"worker"}.`;class Z{config;shouldUsePerformanceMark=!1;constructor(e){var t;this.config=e,this.shouldUsePerformanceMark=((null===(t=self.performance)||void 0===t?void 0:t.mark)&&this.config.tracingEnabled)??!1}startSpan(e){const t=this.generateSpan(e);return t.start(),{spanId:t.spanId,finish:t.finish}}measureSinceInit(t){const n=this.generateSpan(`${t}_since_init`);return n.start({startTime:e.NC}),{spanId:n.spanId,finish:n.finish}}traceTask(e){return t=>async()=>{const n=this.startSpan(e),r=await t();return n.finish(),r}}measureBetween(e,t,n){const r=this.generateSpan(e);r.start({startTime:t}),r.finish({startTime:n})}generateSpan(e){if(!this.shouldUsePerformanceMark)return{spanId:null,start:()=>{},finish:()=>{}};const{spanName:t,startMarkerName:n,endMarkerName:r}=Z.generateUniqueMarkerNames(e);return{spanId:n,start:e=>{var t;return null===(t=self.performance)||void 0===t?void 0:t.mark(n,e)},finish:e=>{var i,a,o;null===(i=self.performance)||void 0===i||i.mark(r,{startTime:(null==e?void 0:e.startTime)??performance.now()}),null===(a=self.performance)||void 0===a||null===(o=a.measure)||void 0===o||o.call(a,t,n,r)}}}static generateUniqueMarkerNames(e){const t=`${X}${e}`,n=`${t}${Z.generateId()}`;return{spanName:t,startMarkerName:`${n}_start`,endMarkerName:`${n}_end`}}static generateId(){return"_"+Math.random().toString(36).substr(2,9)}}class ${db;static version=3;static connect(t,i,a,o,s,u,l,f,m,d){return(0,r.zG)(c.Y3((()=>Promise.resolve().then(n.bind(n,910))),String),e.N1,c.tS((e=>e.make(t,i,a,o,s,u,l,$.version,f,m,d))),c.UI((e=>new $(Promise.resolve(e)))))}constructor(e){this.db=e}shouldThrowStoreClosingError(e){return"NotFoundError"===e.name||"InvalidStateError"===e.name}makeStoreClosingDuringOpertationError(e){return new H(`Attempted ${e} when the current store is closing.`)}put(e,t){return(0,c.Y3)((()=>this.db.then((n=>n.put(e,t)))),(e=>{const t=(0,N.w)(e);return this.shouldThrowStoreClosingError(t)?this.makeStoreClosingDuringOpertationError("put"):t}))}get(e){return(0,c.Y3)((()=>this.db.then((t=>t.get(e))).then(a.ij)),(e=>{const t=(0,N.w)(e);return this.shouldThrowStoreClosingError(t)?this.makeStoreClosingDuringOpertationError("get"):t}))}delete(e){return(0,c.Y3)((()=>this.db.then((t=>t.delete(e)))),(e=>String(e)))}deleteStore(){return(0,c.Y3)((()=>this.db.then((e=>e.deleteStore()))),(e=>String(e)))}}const ee=e=>{if(!e)return"";return(0,r.zG)(e,(e=>{const t=e.length-1;return"/"===e[t]?e.slice(0,t):e}))};class te{urls;config;network;metricsCollector;logger;webClient;prefix="[API]";constructor(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:()=>a.YP;this.urls=e,this.config=t,this.network=n,this.metricsCollector=r,this.logger=i,this.webClient=o}async reportError(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;const i=(0,N.w)(e);if(this.logError("Reporting error:\\n",i),!this.config.sendClientErrors)return void this.logDebug("Send errors not enabled. Skipping");const s=(0,r.zG)(this.webClient,D.UI(a.fS((()=>{var e,t,n,r;return{domain:(null===(e=self.location)||void 0===e?void 0:e.hostname)??"",referrer:"document"in self?null===(t=self.document)||void 0===t?void 0:t.referrer:"",url:(null===(n=self.location)||void 0===n?void 0:n.href)??"",user_agent:(null===(r=navigator)||void 0===r?void 0:r.userAgent)??""}}))),D.UI((e=>{var r,a;const o={error_message:(null==i||null===(r=i.message)||void 0===r?void 0:r.toString())??"",stack_trace:null==i||null===(a=i.stack)||void 0===a?void 0:a.split("\\n")},s=t?{user_id:t}:{};return{platform:"web",sdk_version:"v20.41.1",ql_runtime_version:"v14.1.0",timestamp:n,domain:e.domain,url:ee(e.url),referrer:ee(e.referrer),user_agent:e.user_agent,error_message:o.error_message??String(i),stack_trace:o.stack_trace,...s}}))),c=e=>this.network.req({url:this.urls.getSdkErrorsUrl("/errors",a.G(this.config.sdkErrorsApiVersion)),method:"POST",payload:[e],contentType:"text/plain",dataType:"text",withCredentials:!1}),u=e=>{this.metricsCollector.trackCounter({name:"sdk_http_generic_network_request_fail_count_total",value:1,labels:{network_error_type:e}})};await(0,r.zG)([m,d],o.Ew((e=>i.name===e.errorName||i.message.indexOf(e.errorName)>=0||i.message.indexOf(e.defaultMessage)>=0)),a.g_((()=>{const e=s();return c(e).catch((0,r.ls)(N.w,(e=>this.logError(e))))}),(async e=>u(e.errorName))))}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(this.prefix,...t)}logError(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(this.prefix,...t)}}const ne=e=>{const{provideEnvironment:t,...n}=function(e){let t,n=!1,r=[];return{onReady:e=>{n?e(t):r.push(e)},provideEnvironment:i=>{t={events:e.eventsLookup(i),literals:e.literalsLookup(i),properties:e.propertiesLookup(i),ahoCorasick:e.ahoCorasickLookup(i),subexpressions:e.subexpressionsLookup(i),rootCompression:e.rootCompressionLookup(i)},r.forEach((e=>e(t))),r=[],n=!0}}}(e.runtimeInput),r=function(e){const t=e=>()=>{throw new Error(`${e} lookup has not been provided`)};let n=t("events"),r=t("literals"),i=t("properties"),a=t("ahoCorasick"),o=t("subexpressions"),s=t("rootCompression");function c(e){return u(e)&&!l(e)}function u(e){return Boolean(e&&"object"==typeof e&&!Array.isArray(e))}function l(e){for(const t in e)return!1;return!0}function f(e){return(t,n)=>{const r=null!=t&&null!=n?e(t,n):t||n;return null==r||u(r)&&l(r)?null:r}}function m(e){const t=(t,n)=>({result:e.r(t,n)});return{lift:(t,n)=>e.d.l(t,n),append:f(e.d.a),interpret:(n,r)=>t(r,e.d.i(n,r)),compact:e.d.c,migrate:h,m:e.a.m,z:e.a.z,r:e.r,i:e.d.i}}function d(e){return{interpret:(t,n)=>({result:e.d.i(t,n)}),compact:e.d.c}}function g(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;function r(e,t){return e&&null!=e[t]?e[t]:null}const a=i(t).reduce(r,e);return null===a?null:n(a)}function p(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;return e.properties?g(e.properties,t,n):null}function y(e){const t=Object.keys(e);let n=t.length,r=new Array(n);for(;n--;)r[n]=[t[n],e[t[n]]];return r}e.lookups.onReady((e=>{const{ahoCorasick:t,events:c,literals:u,properties:l,subexpressions:f,rootCompression:m}=e;n=e=>"number"==typeof e?c[e]:e,r=e=>"number"==typeof e?u[e]:e,i=e=>"number"==typeof e?l[e]:e,a=e=>t[e],o=e=>f[e],s=e=>m[e]}));let h=e=>e,v=e=>!0;function b(e,t){function n(n){for(let r=0;r<e.length;r++){if((e[r](n)||!1)===t)return t}return!t}return n}function w(e){return b(e,!0)}function _(e){return b(e,!1)}let E=e=>t=>!e(t),S=e=>t=>t===e,I=e=>t=>t!==e,k=e=>t=>t>e,C=e=>t=>t>=e,L=e=>t=>t<e,A=e=>t=>t<=e,G=(e,t)=>n=>n>=e&&n<=t,P=e=>t=>t===r(e),U=e=>t=>t!==r(e),z=e=>new Date(e).getTime(),x=(e,t,n)=>r=>{const i=p(r,t),a=n.length;let o=!0;for(let t=0;t<a;t++){const r=n[t];if(o=e(r)(i),!o)break}return o},T=(e,t,n)=>r=>{const i=p(r,t),a=n.length;let o=!1;for(let t=0;t<a;t++){const r=n[t];if(o=e(r)(i),o)break}return o},M=(e,t)=>n=>g(n,e)===t,q=(e,t)=>n=>g(n,e)!==t,D=(e,t)=>n=>g(n,e)>t,O=(e,t)=>n=>g(n,e)>=t,R=(e,t)=>n=>{const r=g(n,e);return null!==r&&r<t},F=(e,t)=>n=>{const r=g(n,e);return null!==r&&r<=t},N=(e,t)=>n=>At(t,g(n,e)),B=(e,t)=>n=>Ge(t)(g(n,e)),j=(e,t)=>n=>g(n,e)===r(t),H=(e,t)=>n=>g(n,e)!==r(t),Q=(e,t)=>n=>p(n,e)===t,V=(e,t)=>n=>p(n,e)!==t,W=(e,t)=>n=>p(n,e)>t,Y=(e,t)=>n=>p(n,e)>=t,K=(e,t)=>n=>{let r=p(n,e);return null!==r&&r<t},J=(e,t)=>n=>{let r=p(n,e);return null!==r&&r<=t},X=(e,t,n)=>r=>G(t,n)(p(r,e)),Z=(e,t)=>n=>Ge(t)(p(n,e)),$=(e,t)=>n=>At(t,p(n,e)),ee=(e,t)=>n=>p(n,e)===r(t),te=(e,t)=>n=>p(n,e)!==r(t),ne=(e,t)=>n=>{const r=p(n,e);return null!=r&&Array.isArray(r)&&r.indexOf(t)>=0},re=(e,t)=>n=>{const i=p(n,e),a=r(t);return null!=i&&Array.isArray(i)&&i.indexOf(a)>=0},ie=e=>g(e,["time"],z),ae=(e,t)=>g(t,e,z),oe=e=>t=>ie(t)===e,se=e=>t=>ie(t)!==e,ce=e=>t=>ie(t)>e,ue=e=>t=>ie(t)>=e,le=e=>t=>ie(t)<e,fe=e=>t=>ie(t)<e,me=(e,t)=>n=>G(e,t)(ie(n)),de=(e,t)=>n=>ae(e,n)===t,ge=(e,t)=>n=>ae(e,n)!==t,pe=(e,t)=>n=>ae(e,n)>t,ye=(e,t)=>n=>ae(e,n)>=t,he=(e,t)=>n=>ae(e,n)<t,ve=(e,t)=>n=>ae(e,n)<t,be=(e,t,n,r,i,a)=>o=>{const s=g(o,e,(e=>e.filter(r).map((e=>g(e,t))).reduce(i,a)));return n(null===s?a:s)},we=function(e,t,n){return be(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:v,((e,t)=>e+t),0)},_e=function(e,t,n){return be(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:v,((e,t)=>e*t),1)},Ee=function(e,t,n){return be(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:v,((e,t)=>Math.min(e,t)),Number.POSITIVE_INFINITY)},Se=function(e,t,n){return be(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:v,((e,t)=>Math.max(e,t)),Number.NEGATIVE_INFINITY)},Ie=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:v;return i=>{const a=g(i,e,(e=>e.filter(r)));return null===a||0===a.length?n(0):n(a.map((e=>g(e,t))).reduce(((e,t)=>e+t),0)/a.length)}};function ke(e,t,n,r){for(const i of e)if(n(i)&&t(i)===r)return r;return!r}let Ce=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return r=>g(r,e,(e=>ke(e,t,n,!0)))||!1},Le=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return r=>g(r,e,(e=>ke(e,t,n,!1)))&&!0},Ae=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return r=>{const i=g(r,e,(e=>e.filter(n).length));return t(null===i?0:i)}},Ge=e=>t=>("string"==typeof e||"number"==typeof e)&&"string"==typeof t&&t.toLowerCase().indexOf(r(e).toLowerCase())>-1,Pe=e=>t=>null!=t&&Array.isArray(t)&&t.indexOf(e)>=0,Ue=(e,t)=>n=>Pe(t)(g(n,e)),ze=(e,t)=>n=>Pe(r(t))(g(n,e)),xe=e=>t=>Pe(r(e))(t);const Te=(e,t)=>({l:r=>g(r,["name"])===n(e)&&t(r)?["p",1]:null,a:(e,t)=>["p",e[1]+t[1]],i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:0,c:e=>Array.isArray(e)&&e[1]?e:null});function Me(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;return{a:{m:(e,t)=>e+t,z:0},r:(e,t)=>n(t),d:Te(e,t)}}function qe(e,t,r,i){return{a:{m:(e,t)=>Math.min(e+t,i),z:0},r:(e,t)=>r(t),d:{l:r=>g(r,["name"])===n(e)&&t(r)?[`b${i}p`,1]:null,a:(e,t)=>[`b${i}p`,Math.min(e[1]+t[1],i)],i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:0,c:e=>Array.isArray(e)&&e[1]?e:null}}}function De(e){return{d:{i:t=>{let n=t?Array.isArray(t)?t.slice(-1)[0]:t:0;return e(n)},c:e=>Array.isArray(e)&&e[1]?e:null}}}function Oe(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h;const a=Number.NEGATIVE_INFINITY;return{a:{m:(e,t)=>e>t?e:t,z:a},r:(e,t)=>i(t),d:{l:i=>g(i,["name"])===n(e)&&t(i)?["v",g(i,r)]:null,a:(e,t)=>e[1]>t[1]?e:t,i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:a,c:e=>Array.isArray(e)&&e[1]!==a?e:null}}}function Re(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h;const a=Number.POSITIVE_INFINITY;return{a:{m:(e,t)=>e<t?e:t,z:a},r:(e,t)=>i(t),d:{a:(e,t)=>e[1]<t[1]?e:t,l:i=>g(i,["name"])===n(e)&&t(i)?["n",g(i,r)]:null,i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:a,c:e=>Array.isArray(e)&&e[1]!==a?e:null}}}function Fe(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h;const a=0;let o=e=>e<0?["p2",null,-e]:["p2",e],s=e=>(e[0]||0)-(e[1]||0),c=r=>g(r,["name"])===n(e)&&t(r);return{a:{m:(e,t)=>e+t,z:a},r:(e,t)=>i(t),d:{a:(e,t)=>{const n=new Array(Math.max(e.length,t.length));n[0]="p2";for(let r=1;r<n.length;r++)n[r]=(e[r]??0)+(t[r]??0);return n},l:e=>c(e)?o(g(e,r)):null,i:e=>e?Array.isArray(e)?s("p2"===e[0]?e.slice(1):e):e:a,c:e=>Array.isArray(e)&&(e[1]||e[2])?e:null}}}function Ne(e,t,n,r,i){const a=g(e.getSegments(),[t,n])||!1;return i&&(r||a)&&e.setSegmentActivation(t,n,i),a}function Be(e,t,n){return g(e.getSegments(),[t,n])||!1}const je=()=>null,He=e=>({a:{m:je,z:null},r:t=>e(t),d:{a:je,l:je,i:je,c:je}}),Qe=(e,t,n,r)=>He((i=>Ne(i,e,t,n,r))),Ve=Qe,We=e=>He((t=>Be(t,"1p",e)));function Ye(e,t,n){if(void 0===t[n])return NaN;const r=e||{};if(0==(r["1p"]||[]).length)return NaN;const i=e=>1/(1+Math.pow(Math.E,-e)),a=t[n]||{};let o=(a["1p"]||{}).const||0;return Object.keys(r).forEach((e=>{r[e].forEach((t=>{const n=(a[e]||{})[t]||0;o+=n}))})),i(o)}const Ke=(e,t)=>{let n=t=>Ye(t.getSegmentsArray(),t.getLookalikeModels(),e);return He((e=>t(n(e))))};function Je(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:18e5;return r=>{function i(e,t,n){if(c(t)){if(c(n)){const r={...t,...n};for(const i in n)if(t[i]){const o=a(e,t[i],n[i]);null!=o&&(r[i]=o)}return r}return t}return n}function a(e,t,n){if(c(t)){if(c(n)){const i={...t,...n};for(const a in n)if(t[a]){const o=Array.isArray(t[a])?[e,...t[a]]:[e,t[a]],s=Array.isArray(n[a])?[e,...n[a]]:[e,n[a]],c=r.d.a(o,s);if(null!=c){const[e,...t]=c;i[a]=t}}return i}return t}return n}const o=e=>Array.isArray(e)&&"object"==typeof e[3];return{a:{m:(e,t)=>[t[0],r.a.m(null!=e[0]&&e[0][0]===t[0][0]?e[1]:r.a.z,t[1])],z:[[],r.a.z]},r:(t,n)=>r.r(t,0!==n[0].length&&n[0][0]===e(t)?n[1]:r.a.z),d:r.d.sq||{a:(e,t)=>{if(!o(e))return o(t)?t:null;if(!o(t))return o(e)?e:null;const[n,,,r]=e;return[n,"u",null,i(n,r,t[3])]},l:(i,a)=>{let o=g(i,t),s=e(a);if(o!==s)return null;let c=r.d.l(i,a);if(!(Array.isArray(c)&&c.length>1))return null;let[u,...l]=c,f=+(ie(i)||a.getCurrentTime()),m=Math.floor(f/n),d={};return d[m]={},d[m][s]=1===l.length?l[0]:l,[u,"u",null,d]},i:(t,n)=>{if(!o(t))return[[],r.a.z];let i=e(n),a=t[3];return[[i],Object.keys(a).map((e=>{var t;return null===(t=a[e])||void 0===t?void 0:t[i]})).filter($e).map((e=>r.d.i([t[0]].concat(e),n))).reduce(r.a.m,r.a.z)]},c:h}}}}let Xe=Je((e=>e.getCurrentSession()),["session_id"],18e5),Ze=Je((e=>e.getCurrentView()),["view_id"],3e5);const $e=e=>!!e;function et(e){return function(t){return{d:{i:(n,r)=>{const i=e(r),a=(Array.isArray(n)?n:[])[3]||{},o=Object.keys(a).map((e=>{var t;const n=null===(t=a[e])||void 0===t?void 0:t[i];return Array.isArray(n)?n[0]:n})).filter($e).reduce(((e,t)=>e+t),0);return t.d.i(["p",o],r)},c:h}}}}let tt=et((e=>e.getCurrentSession())),nt=et((e=>e.getCurrentView()));function rt(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return{a:{m:(e,t)=>e.concat(t).slice(-n),z:[]},r:(t,n)=>e.r(t,n.reduce(((t,n)=>e.a.m(t,n)),e.a.z)),d:e.d.ftn||{a:(e,t)=>{const r=Object.entries({...e[3],...t[3]}).sort(((e,t)=>{let[n]=e,[r]=t;return Number(n)-Number(r)})).slice(-n);return[e[0],e[1],null,Object.fromEntries(r)]},l:(t,i)=>{const a=e.d.l(t,i),o=g(t,["time"],z)*r;return a&&[a[0],"x"+n,null,{[o]:2==a.length?a[1]:a.slice(1)}]},i:(t,n)=>t?Object.keys(t[3]||{}).sort().reverse().map((e=>Array.isArray(e)?[t[0],...t[3][e]]:[t[0],t[3][e]])).map((t=>e.d.i(t,n))):[],c:h}}}function it(e,t){return{d:{i:(t,n)=>{const r=Array.isArray(t)?t:[],i=Object.keys(r[3]||{}).reduce(((e,t)=>r[3][t]+e),0);return e.d.i(["p",i],n)},c:h}}}const at=it,ot=it;function st(e,t,n){return{a:{m:(e,t)=>e.concat(t.slice(0,n-e.length)),z:[]},r:(t,n)=>e.r(t,n.reduce(((t,n)=>e.a.m(t,n)),e.a.z)),d:rt(e,t,n,-1).d}}function ct(e,t,n){const r=n||100,i=Math.ceil(t/r),a=e=>Math.floor(e/i),o=(e,n,r)=>[a(e.getTime()-t),{[a(n)]:r}],s=(t,n)=>{const r=Math.max(t[0],n[0]),i=Object.keys(t[1]).filter((e=>e>=r)).concat(Object.keys(n[1]).filter((e=>e>=r))).filter(((e,t,n)=>n.indexOf(e)===t)).reduce(((r,i)=>{const a=e.a.m(t[1][i]||e.a.z,n[1][i]||e.a.z);return a!==e.a.z&&(r[i]=a),r}),{});return[r,i]},c=[Number.NEGATIVE_INFINITY,{}],u=e=>{const t=t=>t.map((t=>{let[n,r,i]=t;return o(e.t,i,n)})).reduce(s,c);return s(t(e.in),t(e.out))};return{a:{m:(e,t)=>{const n=e.w?u(e):e;return s(n,t)},z:c},r:(t,n)=>{const r=(n.w?u(n):n)[1];return e.r(t,Object.keys(r).reduce(((t,n)=>e.a.m(t,r[n])),e.a.z))},d:e.d.tw||{a:(e,t)=>{let[n,,...r]=e,[,,...i]=t;return[n,"w",...s(r,i)]},l:(t,n)=>{const r=e.d.l(t,n),i=e.d.i(r,n);return r&&[r[0],"w",...o(n.getCurrentTime(),g(t,["time"],z),i)]},i:(e,n)=>{const r=Array.isArray(e)?e:[],i=n.getCurrentTime(),o=a(i.getTime()-t);return[r[2]||null,Object.keys(r[3]||{}).map((e=>({[e]:r[3][e]}))).reduce(((e,t)=>(Object.keys(t).filter((e=>parseInt(e)>=o)).forEach((n=>e[n]=t[n])),e)),{})]},c:h}}}function ut(e,t,n){const r=n||100,i=Math.ceil(t/r),a=e=>Math.floor(e/i);return{d:{i:(n,r)=>{const i=Array.isArray(n)?n:[],o=r.getCurrentTime(),s=a(o.getTime()-t),c=Object.keys(i[3]||{}).reduce(((e,t)=>parseInt(t)>=s?i[3][t]+e:e),0);return e.d.i(["p",c],r)},c:h}}}function lt(e,t){return{r:(n,r)=>e(t.r(n,r)),a:t.a,d:t.d}}let ft=(e,t)=>null==e?null==t?null:{b:t}:null==t?{a:e}:{a:e,b:t};function mt(e,t){return n=>{if(!n||null==n.a&&null==n.b)return null;const r=null==n.a?void 0:e.d.c(n.a)??void 0,i=null==n.b?void 0:t.d.c(n.b)??void 0;return r===n.a&&i===n.b?n:ft(r,i)}}function dt(e,t){return{a:(n,r)=>{const i=null!=n.a&&null!=r.a?e.d.a(n.a,r.a):n.a||r.a,a=null!=n.b&&null!=r.b?t.d.a(n.b,r.b):n.b||r.b;return ft(i,a)},l:(n,r)=>ft(e.d.l(n,r),t.d.l(n,r)),i:(n,r)=>n?[e.d.i(n.a||null,r),t.d.i(n.b||null,r)]:[e.a.z,t.a.z],c:mt(e,t)}}function gt(e,t){return{r:(n,r)=>e.r(n,r[0])&&t.r(n,r[1]),a:{z:[e.a.z,t.a.z],m:(n,r)=>[e.a.m(n[0],r[0]),t.a.m(n[1],r[1])]},d:dt(e,t)}}function pt(e,t){return{r:(n,r)=>e.r(n,r[0])||t.r(n,r[1]),a:{z:[e.a.z,t.a.z],m:(n,r)=>[e.a.m(n[0],r[0]),t.a.m(n[1],r[1])]},d:dt(e,t)}}function yt(e,t,n,r){let i=e,a=t.map(n),o=(e,n)=>r(t[e])(n);for(let e=t.length-1;e>0&&i;e--)i.b&&(a[e]=o(e,i.b)),i.a&&1===e&&(a[0]=o(0,i.a)),i=i.a;return a}const ht=e=>function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length-1;if(!t||null==t.a&&null==t.b)return null;const r=e[n];if(!r)return null;if(1===n)return mt(e[0],r)(t);const i=null==t.a?void 0:ht(e)(t.a,n-1)??void 0,a=null==t.b?void 0:r.d.c(t.b)??void 0;return i===t.a&&a===t.b?t:ft(i,a)};let vt=e=>t=>{function n(e){let t=e[0];for(let n=1;n<e.length;n++)t=[t,e[n]];return t}function r(e){let n=e,r=Array(t.length);for(let e=t.length-1;e>0;e--)r[e]=n[1],n=n[0];return r[0]=n,r}let i=(e,r)=>n(yt(e,t,(e=>e.a.z),(e=>t=>e.d.i(t,r))));function a(e){let t=e[0];for(let n=1;n<e.length;n++)t=ft(t,e[n]);return t}function o(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1;if(0==r)throw new Error("subquery index out of bounds.");const i=(1==r?f(t[0].d.a)(null==e?void 0:e.a,null==n?void 0:n.a):o(null==e?void 0:e.a,null==n?void 0:n.a,r-1))||void 0,a=f(t[r].d.a)(null==e?void 0:e.b,null==n?void 0:n.b)||void 0;return ft(i,a)}return{r:(n,i)=>{const a=r(i);return e(t.map(((e,t)=>()=>e.r(n,a[t]))))({})},a:{z:n(t.map((e=>e.a.z))),m:(e,i)=>{const a=r(e),o=r(i);function s(e,t,n){return null===t?n:null===n?t:e.a.m(t,n)}return n(t.map(((e,t)=>s(e,a[t],o[t]))))}},d:{a:(e,n)=>1==t.length?f(t[0].d.a)(e,n):o(e,n),l:(e,n)=>a(t.map((t=>t.d.l(e,n)))),i:(e,t)=>i(e,t),c:ht(t)}}},bt=vt(w),wt=vt(_);function _t(e){let t=0;for(let n=0;n<e.length;n++){let r=e[n];"number"==typeof r?(t+=r,n+=1):t+=1}let n=Array(t),r=0;for(let t=0;t<e.length;t++){let i=e[t];"number"==typeof i?(n.fill(e[t+1],r,r+i),t+=1,r+=i):(n[r]=i,r++)}return n}let Et=e=>t=>({d:{i:(n,r)=>e(yt(n,t,(e=>e.d.i(null,r)),(e=>t=>e.d.i(t,r))).map((e=>t=>e)))({}),c:ht(t)}}),St=Et(_),It=Et(w);function kt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;return{r:(r,i)=>n(e.r(r,i[0])+t.r(r,i[1])),a:{z:[e.a.z,t.a.z],m:(n,r)=>[e.a.m(n[0],r[0]),t.a.m(n[1],r[1])]},d:dt(e,t)}}function Ct(e,t,r,i){const a="p",o=`x${i}`,s="",c=e=>e?2===e.length?[a,o,s,e[1]]:e:null,u=e=>g(e,["session_id"]),l=r=>{const i=u(r);return i&&g(r,["name"])===n(e)&&t(r)?[a,o,s,{[i]:1}]:null},m=(e,t)=>{const n=c(e),r=c(t);return n?r?[a,o,s,{...n[3],...r[3]}]:n:r};return{a:{m,z:null},r:(e,t)=>{const n=t&&t[3]&&"object"==typeof t[3]?Object.keys(t[3]).length:0;return r(n)},d:{a:f(m),l:(e,t)=>l(e),i:(e,t)=>c(e),c:h}}}let Lt=e=>{let t=[];for(let n=0;n<e.length;++n){let r=e.charCodeAt(n);if(r>=55296&&r<=56319){let r=e.charCodeAt(n+1);if(r>=56320&&r<=57343){t.push(e.slice(n,n+2)),++n;continue}}t.push(e.charAt(n))}return t};function At(e,t){let n=a(e);if(!t||!n)return!1;if(!n.length)return!0;let r=0,i=!1,o=Lt(t.toLowerCase());for(let e=0;e<o.length;e++){let t=o[e];for(;r>0&&!n[r][t];)r=n[r].su?n[r].su:0;if(n[r][t]&&(r=n[r][t],i=!!n[r].te,i))break}return i}let Gt=(t,n)=>{let r,i,a=e.hash(t);if(0===n.length)return!1;if(n[0]===a)return!0;let o=0,s=n.length,c=!1;for(;(c=(r=n[i=o+(s-o>>1)])!==a)&&(r<a?o=i:s=i,!(o>=s-1)););return!c},Pt=(e,t)=>n=>Gt(g(n,e),t),Ut=(e,t)=>n=>Gt(p(n,e),t),zt=(e,t)=>E(Pt(e,t)),xt=(e,t)=>E(Ut(e,t));function Tt(e){return t=>o(e)(t)}function Mt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s(e)(...n)}function qt(e){const t=e.split("\\t");if(0===t.length)return[];var n=t[0],r=new Array(Math.ceil(t.length/2));r[0]=t[0];for(var i=1;i<t.length/2;i+=1){const e=t[2*i-1],a=t[2*i];if(""===e)n=a;else{const t=parseInt(e);n=n.slice(0,t)+a}r[i]=n}return r}return{q:m,i_q:d,a:_,acq:gt,acqs:wt,acs:At,acs_:N,af_i:Le,af_l:Ae,af_m:Ie,af_n:Ee,af_p:_e,af_s:we,af_u:Ce,af_x:Se,as:x,c:Pe,c_:Ue,cl_:ze,cx:xe,cw:Me,cb:qe,e:S,e_:M,fm:lt,frontDecode:qt,ftn:st,g:k,g_:D,ge:C,ge_:O,bse:(t,n)=>r=>{let i=g(r,t);return e.hash(i)===n},bsne:(t,n)=>r=>{let i=g(r,t);return e.hash(i)!==n},bsc:Pt,bsnc:zt,bsc_:Ut,bsnc_:xt,i_:h,ifp:We,isp:Ve,itp:Qe,i_cw:De,i_acqs:St,i_ocqs:It,i_tw:ut,i_ltn:at,i_ftn:ot,i_sq:tt,i_vq:nt,k:g,l:L,l_:R,le:A,le_:F,lm:Ke,ltn:rt,mnw:Re,mxw:Oe,n0:E(h),n:I,nt:E,n_:q,o:w,ocq:pt,ocqs:bt,oe:y,os:T,pacs:$,pb:X,pc:ne,pc_:re,pe:Q,pg:W,pge:Y,pl:K,ple:J,pn:V,ps:Z,r:Mt,ref:Tt,rle:_t,s:Ge,s_:B,scq:kt,sq:Xe,dscq:Ct,sw:Fe,t:v,tb:me,te:oe,te_:de,tg:ce,tg_:pe,tge:ue,tge_:ye,ti:z,tl:le,tl_:he,tle:fe,tle_:ve,tn:se,tn_:ge,tw:ct,vq:Ze,w:P,x:U,y:ee,y_:j,z:te,z_:H}}({lookups:n,hash:e.hash});return t(r),{env:r,locallyLiftedQueries:e.runtimeInput.queries(r)||{},cloudLiftedQueries:"function"==typeof e.runtimeInput.interpretOnlyQueries?e.runtimeInput.interpretOnlyQueries(r):{},queriesByEvent:e.runtimeInput.eventSegments(r)||{},createCloudLiftQueries:e=>(null===eval||void 0===eval?void 0:(0,eval)(`"use strict";${e}`))(r)}};const re=e=>{const t=ie(e.javaScriptInput),{env:n,...r}=ne({hash:e.hash,runtimeInput:t});return r},ie=e=>{if(e&&"object"==typeof e)return e;throw new Error("Invalid runtime input specified.")};var ae,oe,se,ce,ue,le;const fe=(null===(ae="undefined"!=typeof globalThis?globalThis:void 0)||void 0===ae?void 0:ae.crypto)||(null===(oe="undefined"!=typeof global?global:void 0)||void 0===oe?void 0:oe.crypto)||(null===(se="undefined"!=typeof window?window:void 0)||void 0===se?void 0:se.crypto)||(null===(ce="undefined"!=typeof self?self:void 0)||void 0===ce?void 0:ce.crypto)||(null===(ue="undefined"!=typeof frames?frames:void 0)||void 0===ue||null===(le=ue[0])||void 0===le?void 0:le.crypto);let me;me=fe?e=>{const t=[];for(let n=0;n<e;n+=4)t.push(fe.getRandomValues(new Uint32Array(1))[0]);return new ge(t,e)}:e=>{const t=[],n=e=>{let t=e,n=987654321;const r=4294967295;return()=>{n=36969*(65535&n)+(n>>16)&r,t=18e3*(65535&t)+(t>>16)&r;let e=(n<<16)+t&r;return e/=4294967296,e+=.5,e*(Math.random()>.5?1:-1)}};for(let r,i=0;i<e;i+=4){const e=n(4294967296*(r||Math.random()));r=987654071*e(),t.push(4294967296*e()|0)}return new ge(t,e)};class de{static create(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new this(...t)}mixIn(e){return Object.assign(this,e)}clone(){const e=new this.constructor;return Object.assign(e,this),e}}class ge extends de{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4*e.length;super();let n=e;if(n instanceof ArrayBuffer&&(n=new Uint8Array(n)),(n instanceof Int8Array||n instanceof Uint8ClampedArray||n instanceof Int16Array||n instanceof Uint16Array||n instanceof Int32Array||n instanceof Uint32Array||n instanceof Float32Array||n instanceof Float64Array)&&(n=new Uint8Array(n.buffer,n.byteOffset,n.byteLength)),n instanceof Uint8Array){const e=n.byteLength,t=[];for(let r=0;r<e;r+=1)t[r>>>2]|=n[r]<<24-r%4*8;this.words=t,this.sigBytes=e}else this.words=e,this.sigBytes=t}static random=me;toString(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe).stringify(this)}concat(e){const t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(let e=0;e<i;e+=1){const i=n[e>>>2]>>>24-e%4*8&255;t[r+e>>>2]|=i<<24-(r+e)%4*8}else for(let e=0;e<i;e+=4)t[r+e>>>2]=n[e>>>2];return this.sigBytes+=i,this}clamp(){const{words:e,sigBytes:t}=this;e[t>>>2]&=4294967295<<32-t%4*8,e.length=Math.ceil(t/4)}clone(){const e=super.clone.call(this);return e.words=this.words.slice(0),e}}const pe={stringify(e){const{words:t,sigBytes:n}=e,r=[];for(let e=0;e<n;e+=1){const n=t[e>>>2]>>>24-e%4*8&255;r.push((n>>>4).toString(16)),r.push((15&n).toString(16))}return r.join("")},parse(e){const t=e.length,n=[];for(let r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new ge(n,t/2)}},ye={stringify(e){const{words:t,sigBytes:n}=e,r=[];for(let e=0;e<n;e+=1){const n=t[e>>>2]>>>24-e%4*8&255;r.push(String.fromCharCode(n))}return r.join("")},parse(e){const t=e.length,n=[];for(let r=0;r<t;r+=1)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new ge(n,t)}},he={stringify(e){try{return decodeURIComponent(escape(ye.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:e=>ye.parse(unescape(encodeURIComponent(e)))};class ve extends de{constructor(){super(),this._minBufferSize=0}reset(){this._data=new ge,this._nDataBytes=0}_append(e){let t=e;"string"==typeof t&&(t=he.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_process(e){let t;const{_data:n,blockSize:r}=this,i=n.words,a=n.sigBytes;let o=a/(4*r);o=e?Math.ceil(o):Math.max((0|o)-this._minBufferSize,0);const s=o*r,c=Math.min(4*s,a);if(s){for(let e=0;e<s;e+=r)this._doProcessBlock(i,e);t=i.splice(0,s),n.sigBytes-=c}return new ge(t,c)}clone(){const e=super.clone.call(this);return e._data=this._data.clone(),e}}class be extends ve{constructor(e){super(),this.blockSize=16,this.cfg=Object.assign(new de,e),this.reset()}static _createHelper(e){return(t,n)=>new e(n).finalize(t)}static _createHmacHelper(e){return(t,n)=>new we(e,n).finalize(t)}reset(){super.reset.call(this),this._doReset()}update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e);return this._doFinalize()}}class we extends de{constructor(e,t){super();const n=new e;this._hasher=n;let r=t;"string"==typeof r&&(r=he.parse(r));const i=n.blockSize,a=4*i;r.sigBytes>a&&(r=n.finalize(t)),r.clamp();const o=r.clone();this._oKey=o;const s=r.clone();this._iKey=s;const c=o.words,u=s.words;for(let e=0;e<i;e+=1)c[e]^=1549556828,u[e]^=909522486;o.sigBytes=a,s.sigBytes=a,this.reset()}reset(){const e=this._hasher;e.reset(),e.update(this._iKey)}update(e){return this._hasher.update(e),this}finalize(e){const t=this._hasher,n=t.finalize(e);t.reset();return t.finalize(this._oKey.clone().concat(n))}}const _e=[];class Ee extends be{_doReset(){this._hash=new ge([1732584193,4023233417,2562383102,271733878,3285377520])}_doProcessBlock(e,t){const n=this._hash.words;let r=n[0],i=n[1],a=n[2],o=n[3],s=n[4];for(let n=0;n<80;n+=1){if(n<16)_e[n]=0|e[t+n];else{const e=_e[n-3]^_e[n-8]^_e[n-14]^_e[n-16];_e[n]=e<<1|e>>>31}let c=(r<<5|r>>>27)+s+_e[n];c+=n<20?1518500249+(i&a|~i&o):n<40?1859775393+(i^a^o):n<60?(i&a|i&o|a&o)-1894007588:(i^a^o)-899497514,s=o,o=a,a=i<<30|i>>>2,i=r,r=c}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+a|0,n[3]=n[3]+o|0,n[4]=n[4]+s|0}_doFinalize(){const e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash}clone(){const e=super.clone.call(this);return e._hash=this._hash.clone(),e}}const Se=be._createHelper(Ee),Ie=(be._createHmacHelper(Ee),{stringify(e){const{words:t,sigBytes:n}=e,r=this._map;e.clamp();const i=[];for(let e=0;e<n;e+=3){const a=(t[e>>>2]>>>24-e%4*8&255)<<16|(t[e+1>>>2]>>>24-(e+1)%4*8&255)<<8|t[e+2>>>2]>>>24-(e+2)%4*8&255;for(let t=0;t<4&&e+.75*t<n;t+=1)i.push(r.charAt(a>>>6*(3-t)&63))}const a=r.charAt(64);if(a)for(;i.length%4;)i.push(a);return i.join("")},parse(e){let t=e.length;const n=this._map;let r=this._reverseMap;if(!r){this._reverseMap=[],r=this._reverseMap;for(let e=0;e<n.length;e+=1)r[n.charCodeAt(e)]=e}const i=n.charAt(64);if(i){const n=e.indexOf(i);-1!==n&&(t=n)}return((e,t,n)=>{const r=[];let i=0;for(let a=0;a<t;a+=1)if(a%4){const t=n[e.charCodeAt(a-1)]<<a%4*2|n[e.charCodeAt(a)]>>>6-a%4*2;r[i>>>2]|=t<<24-i%4*8,i+=1}return ge.create(r,i)})(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="});const ke=function(e){let t=a.YP;const n=a.fS((()=>{const n=e();return t=a.G(n),n}));return()=>n(t)}((()=>({metadata:{16780:"0c8b70cdb7",16781:"22911a2329",16782:"c784c76f7e",16842:"8c5f9ad456",16843:"6a77d6a986",16982:"4997c744c8",16987:"42c90f4f7b",17068:"3274db0e64",17075:"b432912a91",17117:"77cf8f3bec",17124:"db4c251d29",17125:"16ee0b72c9",17127:"58d2b6d13a",17128:"2771fac6be",17135:"b912960866",17138:"6cf5e871a4",17173:"5fc8d8edfc",17174:"28e0d3e756",17180:"b9adfe73fe",17182:"8bf4369139",17183:"1b594032c7",17185:"d0415019d9",17186:"ad77f97398",17187:"5d8be7ab24",17427:"b902fb0e38",18212:"915a52ec20",18238:"eaf0e5ecc0",18239:"b08b1a8105",18240:"e25f3ddb4e",18245:"726840066d",18246:"eed9fb99e4",18247:"885c0d608a",18248:"746e7f657d",18250:"eb4aa5ad0b",18253:"10388b04b2",18254:"89151e5ff0",18260:"b5cda771c8",18262:"567574d7ad",18263:"d6625fca46",18264:"56159ed0cc",18268:"1a38db02dd",18269:"9333b1b098",18270:"22be240e1e",18271:"be27098eb6",18294:"844c8987dd",18295:"71629f428c",18297:"752905df37",18298:"2c0d1b84d3",18300:"b640e0d431",18310:"83b16388c6",18312:"52f354dc6e",18314:"354d396747",18315:"b2720ffc50",18317:"999ef2c079",18318:"b1ab0400c7",18320:"5ab3789283",18321:"9727f2c9ae",18323:"ad8f076ad8",18356:"ccd83c3fbc",18437:"d6208e961e",18439:"c1124faccd",18440:"5468ccf211",18445:"a00a8ed49a",18731:"a16bcf0978",18732:"93f3806b98",18733:"741ce2218f",18734:"75e88b58a7",18735:"a76df9c2bc",18782:"d2f664deef",18790:"c4c2711f62",18791:"f5426320ab",18797:"9e98d08744",18803:"e8dde19f3d",18805:"e3e172cd5b",18806:"774e69043e",18807:"c588a207a7",19597:"00a3168789",19669:"cedc16d7a7",19902:"3c8e03af84",20008:"5e81d28c7b",20283:"5c87035621",20431:"71b7bf78c8",20469:"6a89bb1d86",20494:"0f97917850",20531:"4508e9caa7",20534:"8a22e4f80b",20645:"ee9b882cc2",20646:"67bd3902df",20714:"1e28df5f8d",20715:"5fffb0bdab",20833:"2070c0308c",21070:"e8d5c0c975",21267:"942c916850",21535:"25117f9959",21538:"daba3aa96c",21540:"deb5d7724d",21541:"1fd7e9fb9e",21548:"7a0ae8cfb1",21615:"566eeac680",21670:"c6dd7e394c",22407:"075ee85c82",22408:"a27c22e0e9",22409:"7551239f76",22410:"e65e70bbbd",22411:"9ed22f5b9e",22412:"3d1eccf21b",22514:"dd445a0dcf",22515:"72691b4595",22529:"2e5841f9b6",22567:"9399930345",22581:"91d23fdf23",22598:"febb8b919f",22600:"a9bc1b0bc0",22710:"879349a6e0",22892:"9027c51963",23027:"b0809b007f",23832:"9e939dc176",23833:"1412d1fa4c",23835:"c3553c27f8",23852:"d802216c3b",23853:"c2b7ea37ba",23937:"dc18d86282",24101:"546c35fdb4",24102:"d54808796e",24103:"405602724a",24104:"2061069b4c",24105:"ba3c6f6585",24106:"0d0ca46630",24244:"c5cef6667a",24245:"f41851ede0",24324:"742a280da9",24978:"34b28a1556",26090:"48a922a3f2",26091:"163c7a4ad8",26380:"bbb6bda7ec",26440:"d0816c8e5d",26442:"7d0551b3f7",26443:"8d91935d6e",27111:"e3e172cd5b",27314:"c0c889a12b",27315:"d31a1112ba",27316:"b5d24d19c5",27317:"7484332f65",27318:"efa6a38d20",27320:"a5a5f40224",27321:"27fc760883",27323:"0947124537",27324:"89ea470937",27326:"6e9e7ec5ef",27327:"cf9d44e170",27330:"3a98372066",27331:"92e97e9e37",27332:"0e1dd9b1d2",27333:"54a5202334",27334:"9926bea7dd",27335:"cc5c08ed53",27336:"37df25393d",27338:"42916fe042",27339:"f21c75a8a5",27340:"58400ab701",27342:"63708f4f54",27343:"55d8a00c2b",27344:"2c1d9271cd",27345:"1863d76d26",27346:"8965fb1fa2",27347:"65cf7b0cb1",27348:"0e2eaa6162",27349:"8fd8a92a0c",27350:"61469cdfb8",27351:"835c7dcd97",27352:"d348241e7b",27353:"122d2e0f04",27354:"2e35f672d1",27355:"49195d11cc",27356:"e0d6824b3b",27357:"48ec033db3",27358:"1f5b5aaba1",27359:"fb1629957e",27360:"f72ada8d4e",27361:"0f44e19eef",27362:"a561f0a743",27363:"f3f09b5e59",27364:"310d71c820",27365:"f17b2eced3",27366:"3496547b5a",27367:"1af9f74af8",27368:"04641050d0",27369:"110d4e03fb",27370:"c24b48b1b6",27371:"35aed7f9a4",27372:"c16f1eac5a",27373:"8ebbaf4b67",27374:"ef8f801206",27375:"a3d1cbab09",27376:"2a558f7f10",27377:"853fffedd9",27378:"0735d87b44",27379:"5d151e7c9e",27380:"59ab88c252",27382:"7689410886",27384:"20f8d72c14",27385:"0221d1b037",27386:"45d7fec7be",27387:"50b1051267",27388:"7ae5814bd9",27389:"655d0d57a9",27390:"0b061b825c",27391:"d869d227df",27392:"36832bc24f",27393:"11fff6f956",27394:"8c8ffe5940",27395:"6a611f321d",27396:"7dbc452a1b",27397:"b97b810210",27398:"348603af58",27399:"ebe10622f0",27400:"1be6d0a31c",27706:"677472ee81",27708:"607c3e221c",27710:"5e025c8cb0",27711:"f4e9e137c0",27714:"4731589f7b",28394:"9d443310ac",28714:"9e39ee9aad",30222:"39f57b2bff",30363:"c4f1391bcc",30365:"aea916952d",30366:"cb81e73a7b",30367:"b83c4796d1",30368:"aea0de8dcc",30369:"e04893c9f3",31187:"e386cca67f",32094:"54687d0c18",32095:"03629580de",32729:"650435e227",33786:"eb3c3082ae",34989:"9675b7eee4",38340:"9b6f91deac",38341:"5e07ca631e",38342:"df62d0912b",38343:"1850642364",38344:"80de688dc6",38352:"fe708944e3",38353:"48c4e6c4bb",38354:"d737f860bb",38355:"3930d1c8d4",38356:"8d214479ca",38357:"38d74e7af3",38358:"1f5ebcee93",38359:"955e23fcb4",38360:"05d9e9a749",38361:"cea7654c8f",38362:"09999dfa42",38470:"4ccf70d6c0",38472:"2245976a76",38473:"ffc59b576a",38474:"af53a49d92",38475:"870f4dc569",38476:"3ce08603be",38478:"58e2b9e708",38479:"7d1cc69be7",38497:"cc40c977df",38819:"60db6efb84",38827:"63707f4af6",46761:"82ce53de40",46762:"1be7fb9d7e",46763:"322e897fd5",47581:"d000893588",47583:"ab77d217bf",47584:"3847c4a068",47585:"078a51bb5e",47586:"f536ee7a65",51098:"63e4075d10",51099:"4f6ebc6c0a",51100:"fec8b612e1",51101:"ae2a26b253",55914:"6e1cb39fec",55934:"4b6b7e0d5d",56089:"6887bcd1af",56090:"1fe9d096d2",58181:"fe1f0cea1f",58310:"6fcab06785",66495:"a1ef284267",66564:"29f0eabf25",71282:"8821e43b95",71287:"7ceb838ba0",73285:"5ff39d098f",73287:"7ef1315dd9",73288:"3c14ca83af",73289:"8d539644a5",73290:"d22f5cffd5",73291:"da7ed4b553",73292:"5065150063",73402:"129ba01234",73748:"e54ae403dd",74145:"8d50b08a84",74452:"20b7d8a2ea",74657:"be77e24aff",74659:"b067b4eb1b",74660:"a88838f1a3",74661:"3fc5afea9d",74662:"c70a26740e",74664:"d7be35102a",74665:"0c80a956f8",75636:"874d27a2a4",75640:"8a5a2399d2",75854:"7dcc21b25f",75874:"9f1b69b969",75963:"ebd56efe0e",76402:"bca30d157b",76414:"09a3d5b238",76507:"d62b784392",76510:"3aa996925e",76799:"5aa4e41d45",76800:"87fc16e1a3",77423:"9c0fde99c5",77520:"4166988bbb",77841:"3bfabedd76",77848:"ff80ec3664",77849:"8544a70021",78924:"2014c1331e",79157:"e033712087",79176:"ef741762a2",79183:"81e8276104",79184:"f5c361e4e1",79187:"81da6f9ef1",79188:"4921427380",79190:"8fac4c0890",79436:"649c7d2491",81707:"b97ebf64e4",81780:"4d5b0c15f6",81781:"466f23ea95",81782:"5fa5739063",81783:"e7d59eba2e",81784:"1de17ab818",81785:"9fa89e6164",81786:"7d0294e6e4",81787:"2fa2adf3b8",81788:"c2b52fd341",81789:"ca72e169a5",81790:"07861da5d8",81791:"286022afe6",81792:"86b8862764",81793:"61475117d4",81794:"cfac49464c",81795:"ad52e71da6",85612:"21434272b9",85622:"a09b6bee4d",85906:"d34bbb2baa",85907:"39d5c25073",85908:"4dd7a2f880",86173:"e954897689",86956:"e61b93ded0",87678:"97040433c6",87696:"c1c6c69d84",87738:"4a8b130b15",87739:"1e8d3cbaf4",87740:"05dbf2bfba",87741:"35bca428dc",87742:"ae09618e51",87744:"8ca50644e7",88113:"4fe6ba9010",88865:"7958fae959",91003:"c21206f4fb",92621:"aa28b683cd",92622:"54c2d6e883",94606:"aa6c03ef30",98074:"b197f78916",99503:"69f52a9a61",99536:"38e75847d0",99689:"508feae9e8",101060:"d3c1be9023",101171:"12a109163d",102103:"250f4961cd",102153:"5d1abeb768",102212:"08b9a043c2",102213:"1abefebc5b",102214:"93b7d3de3c",103258:"dab6307615",104406:"9da4d21ffa",106717:"6ccc03b254",113877:"8715546977",113878:"b9953a617c",113879:"e917dd8843",117084:"1d574bdc78",117171:"0b8196b0f1",117680:"67d40bf130",122044:"97d6f5a187",122045:"a20d562795",122046:"c6fdcc9c64",122047:"1bce5fc490",122049:"38c3266067",122051:"4450e68ea7",122054:"dcb24449fb",122721:"00951deb02",125008:"f682a8f1dd",128830:"bb0e29eb3f",129643:"7a14b5c7d7",135704:"6b88c03f0d",135705:"f8b6660e94",135706:"41e302126f",139666:"24b1d21573",143049:"dd5c196b70",147839:"a02df7b16c",148849:"2765f8f920",149016:"46c62ae078",150943:"dac921da5e",150951:"91c344a6cb",151211:"0c477a7c75",153433:"e86cc97d4a",153825:"85c7cf06a7",156961:"9c48010158",158432:"60d1dbea5b",158434:"fb07b0f73b",158465:"fa383ef6ce",158466:"37aaa8ce2c",158581:"1d823b9aa5",158583:"253011cb71",158585:"0169edc6b3",158589:"8360e99c7e",158591:"21977adfb8",164501:"0b731ed088",171478:"ee64ad102c",173728:"61b3fa0ad8",175294:"cab9293d28",175295:"7a413f6f1d",176218:"bcc2b5694c",178280:"8fd2d21889",179639:"0a2766b7f3",180410:"adf651e570",180411:"6c1be00dd5",180412:"2ad3991cec",183957:"3238107ba6",184306:"8be83461c4",186124:"f0f171311d",186125:"d21c1a2722",187959:"deed07a66e",188019:"041ff86512",188465:"b8a49d98a3",190331:"c57bbf6a80",192761:"823c5dfb58",192764:"3366be9cae",193156:"9cfe83771f",193428:"9ece1c4a32",193476:"8a1e319001",194701:"5763d2bb45",194723:"0d9debe85a",195323:"d2582aacc4",195324:"5b5e9400ab",195325:"4831bcda25",195959:"6847a42d68",195960:"d4a6a3185e",196268:"89467b63ea",196269:"a14631ffe0",196826:"b1bf953eca",197176:"2499f22db0",197394:"9e9dfee670",197395:"6dcfecabcd",197397:"e45bc2b542",199533:"a72bf249e9",199535:"fc86358138",199538:"1cd22b7807",199539:"64131e91a0",199540:"c19215adc5",200508:"ce489a0153",200511:"80159bf8e9",201371:"1e60fb7e93",202584:"cf3e61be93",203239:"96914286ec",205164:"3b87dcd13d",205165:"851e24c296",206452:"57dddd2b69",206485:"fcb19ae7ac",207153:"a3de8c8119",207904:"023a7dbba3",207935:"bec897d6a9",208372:"0c2e9c8670",209192:"b2bbfd839e",209455:"b925b8448a",210673:"862502a9fc",213839:"adcb27f971",214156:"caccf3f7b5",214858:"2fd143189c",215422:"6d9c23dd5a",217623:"5921af760f",217630:"172dfc3787",217968:"d0d8019187",218182:"47b9b5f160",218272:"3bdf235e9b",218494:"004e748221",218888:"05d366eaff",218894:"df377c77b0",218936:"ffb2653f28",218937:"684c511f38",218941:"f22a4fb1e1",218942:"c4c2cb4c16",218943:"ad5dbf483d",218944:"bfa9a77e1f",219014:"c221bee86a",219015:"62fd95b009",219733:"d29a8b8c5e",219736:"88b643ae9a",219737:"4e3b87bd00",219738:"3fd384a6b8",219772:"3780c4ca18",220220:"7d09a7a91b",220580:"48e3fd60ba",220658:"7efd92745e",220814:"865f14ae8c",220935:"8284641d20",220949:"ed09df3951",220992:"6962a9f13c",221084:"116a2ed58b",221508:"2757041bc2",223362:"017b79440a",225198:"e00fe11348",226257:"f02a4bc4e1",226814:"4a4c4a2b1e",229836:"b42ef0bb92",230821:"d470eb9840",232149:"838f711872",232671:"3c8c0245f0",232996:"6858f8de1e",233373:"a8aedfaace",233384:"bddc3f9cef",233819:"5313b59907",233820:"6c3ac00bad",235111:"be5a0cb74f",237358:"f4e19e4bbe",237536:"886e1d1094",238058:"dba93043c7",238129:"4cef2e078f",238168:"59ccdb3be9",238461:"ede836003f",239678:"830bc18551"},runtime:re({hash:function(e){return Se(e).toString(Ie).slice(0,8)},javaScriptInput:{ahoCorasickLookup:e=>[],eventSegments:e=>({"!UpdateSecondPartyData":["101171","102103","102153","102213","106717","117084","148849","151211","153825","17075","17117","17135","17138","17185","173728","175294","175295","178280","180410","180411","180412","18250","18314","186124","186125","18731","18732","18733","18734","187959","18797","18803","18805","18806","18807","190331","194701","194723","197176","20008","201371","20531","20534","20714","20715","209192","209455","21070","21538","218182","220658","221084","223362","22514","22515","226814","229836","230821","232149","233373","235111","238058","238168","24101","24102","24103","24104","24105","24106","24245","26440","26442","26443","27111","30222","32094","32095","51098","51099","51100","51101","58181","58310","75854","75874","85622"],GamLogSlotClicked:["205164"],LinkClick:["17183","194723"],Pageview:["101060","101171","102103","102153","102212","102213","102214","103258","104406","106717","113877","113878","113879","117171","117680","122044","122045","122046","122047","122049","122051","122054","122721","125008","128830","129643","135704","135705","135706","139666","143049","147839","149016","150943","150951","151211","153433","156961","158432","158434","158465","158466","158581","158583","158585","158589","158591","164501","16780","16781","16782","16842","16843","16982","16987","17068","17075","17124","17125","17127","17128","17138","171478","17173","17174","17180","17182","17183","17186","17187","17427","179639","18212","18238","18239","18240","18245","18246","18247","18248","18250","18253","18254","18260","18262","18263","18264","18268","18269","18270","18271","18294","18295","18297","18298","18300","18310","18312","18314","18315","18317","18318","18320","18321","18323","18356","183957","184306","18437","18439","18440","18445","18735","18790","18791","188019","193156","193428","194723","195323","195324","195325","19597","196268","196269","19669","197394","197395","197397","19902","199533","199535","199538","199539","199540","20008","20283","20431","20469","20494","20645","20646","208372","209455","21070","21267","21535","21538","21540","21541","215422","21548","21615","21670","218182","218494","218888","218894","218936","218937","218941","218942","218943","218944","219014","219015","219733","219736","219737","219738","220814","22407","22408","22409","22410","22411","22412","22529","22567","22581","22598","22600","22710","22892","23027","233373","233384","237358","237536","23832","23833","23835","23852","23853","23937","24244","24245","24324","24978","27314","27315","27316","27317","27318","27320","27321","27323","27324","27326","27327","27330","27331","27332","27333","27334","27335","27336","27338","27339","27340","27342","27343","27344","27345","27346","27347","27348","27349","27350","27351","27352","27353","27354","27355","27356","27357","27358","27359","27360","27361","27362","27363","27364","27365","27366","27367","27368","27369","27370","27371","27372","27373","27374","27375","27376","27377","27378","27379","27380","27382","27384","27385","27386","27387","27388","27389","27390","27391","27392","27393","27394","27395","27396","27397","27398","27399","27400","27706","27708","27710","27711","27714","28394","28714","30363","30365","30366","30367","30368","30369","31187","32729","33786","34989","38340","38341","38342","38343","38344","38352","38353","38354","38355","38356","38357","38358","38359","38360","38361","38362","38470","38472","38473","38474","38475","38476","38478","38479","38497","38819","38827","46761","46762","46763","55914","55934","56089","56090","66495","66564","71282","71287","73285","73287","73288","73289","73290","73291","73292","73402","73748","74145","74452","74657","74659","74660","74661","74662","74664","74665","75854","75874","75963","76402","76414","76507","76510","76799","76800","77423","77520","77841","77848","77849","78924","79157","79176","79183","79184","79187","79188","79190","79436","81707","81780","81781","81782","81783","81784","81785","81786","81787","81788","81789","81790","81791","81792","81793","81794","81795","85612","85622","85906","85907","85908","86173","86956","87678","87696","87738","87739","87740","87741","87742","87744","88113","88865","91003","92621","92622","94606","98074","99503","99689"],PageviewComplete:["151211","171478","17183","197394","197395","197397","20008","20833","21070","26090","26091","26380","55914","55934","75640"],PageviewEngagement:["26090","26091","26380","75640"],SegmentEntry:["151211","171478","17183","197394","197395","197397","20008","20833","21070","55914","55934"],SlotClicked:["151211","18782","195960","20008","205165","215422","218272","220580","55914","75636","75640","99536"],SlotViewable:["149016","153433","176218","179639","18212","18310","188465","192761","192764","193476","195959","196826","200508","200511","202584","203239","206452","206485","207153","207904","207935","210673","213839","214156","214858","217623","217630","217968","218272","219733","219772","220220","220935","220949","220992","221508","225198","22529","226257","232671","232996","233819","233820","237358","238129","238461","239678","26090","26091","75640"],VideoEngagement:["47581","47583","47584","47585","47586"]}),eventsLookup:e=>["Pageview","SlotViewable","PageviewComplete","SegmentEntry","SlotClicked","VideoEngagement","PageviewEngagement","LinkClick"],interpretOnlyQueries:e=>({}),literalsLookup:e=>e.frontDecode("?utm_source=chatgpt.com\\t\\tAI and jobs\\t3\\tethics\\t1\\tdventure holidays\\t1\\tfrican prime property\\t1\\tgricultural commodities\\t1\\tir France SA\\t3\\tlines\\t1\\tmericas regulation\\t1\\tnnuities\\t2\\tti-ESG investing\\t1\\trchitecture\\t2\\ttificial intelligence\\t3\\ts\\t4\\t books\\t1\\tsia-Pacific equities\\t4\\tn prime property\\t1\\tt Home with the FT\\t1\\tustralasian prime property\\t2\\ttomobiles\\t9\\ti Lamborghini Holding SpA\\t\\tBeach holidays\\t3\\tuty\\t2\\tntley Motors Ltd\\t1\\tig Tech\\t2\\totech\\t1\\tlockchain\\t1\\tonds\\t2\\toks\\t1\\tritish Airways Executive Club\\t16\\tPLC\\t1\\tusiness travel\\t\\tCEO/president/Chairman\\t1\\tOP26\\t4\\t7\\t4\\t8\\t1\\talifornia Public Employees\' Retirement System\\t11\\tState Teachers\' Retirement System\\t2\\tnada Pension Plan Investment Board\\t2\\tpital gains tax\\t8\\tmarkets\\t2\\trbon Trading\\t7\\ttrading\\t1\\tboe Global Markets\\t1\\tentral banks\\t1\\tity breaks\\t1\\tlaer Barrett\\t2\\timate Capital\\t1\\tocktails & Drinks\\t2\\tmmercial property\\t4\\todities\\t2\\tnnected Car\\t3\\tsumer trends\\t2\\trporate bonds\\t8\\tion tax\\t1\\tredit default swaps\\t2\\tuises and sailing\\t2\\typtocurrencies\\t1\\tyber Security\\t6\\twarfare\\t2\\tcling holidays\\t\\tDavos\\t1\\tecentralised finance\\t2\\tepmind Technologies Ltd\\t2\\tpartment for Work and Pensions UK\\t2\\trivative exchanges\\t10\\ts\\t2\\tsign\\t1\\tiamonds and gemstones\\t2\\tgital economy\\t1\\triverless vehicles\\t2\\tugs research\\t1\\tue Diligence\\t\\tESG investing\\t1\\tU business regulation\\t3\\tfinancial regulation\\t3\\ttech regulation\\t1\\tlectric vehicles\\t1\\tmerging Technologies\\t9\\tmarket investing\\t15\\ts\\t1\\tnvironment\\t1\\tquities\\t5\\ty earnings\\t7\\tvaluation\\t1\\ttihad Airways\\t1\\turope\\t6\\tan equities\\t9\\tprime property\\t1\\txchange traded funds\\t2\\tec Mgmt (EVP/SVP/MD)\\t\\tFT Alphaville\\t3\\tGlobetrotter\\t3\\tMagazine\\t3\\tSeries\\t3\\tTrading Room\\t3\\tWealth\\t1\\tamily holidays\\t2\\tshion\\t7\\t accessories\\t8\\tdesigner profiles\\t8\\tshows\\t1\\tinancial & markets regulation\\t10\\tAdvisor, Broker, Planner\\t3\\ttech\\t2\\ttness in Frankfurt\\t11\\tHong Kong\\t11\\tLondon\\t11\\tNew York City\\t11\\tParis\\t11\\tRome\\t11\\tSingapore\\t11\\tTokyo\\t1\\tlora Macdonald Johnston\\t2\\tying cars\\t1\\tood & Beverage\\t7\\tDrink\\t5\\tdiet\\t2\\trd Motor Co\\t3\\teign exchange\\t1\\trankfurt travel\\t1\\tund management\\t5\\tregulation\\t4\\ting your business\\t2\\ttures contracts\\t\\tGames industry\\t3\\ting\\t2\\trdens\\t1\\teneral Motors Co\\t4\\tva Motor Show\\t3\\tomics\\t1\\tlobal Economy\\t7\\tproperty\\t1\\told\\t2\\tvernment Pension Investment Fund Japan\\t1\\trace Cook\\t2\\towth investing\\t\\tHTSI\\t1\\tealth\\t6\\t Care\\t7\\tsector\\t2\\tdge funds\\t1\\tigh frequency trading\\t5\\tyield bonds\\t1\\tonda Motor Co Ltd\\t3\\tg Kong travel\\t2\\tuse & Home\\t2\\tw To Spend It\\t1\\tydrogen vehicles\\t2\\tundai Motor Co\\t\\tIT/Tech/Telecoms\\t3\\tcomputing\\t1\\tmpact investing\\t1\\tnformation technology\\t3\\trastructure investment\\t2\\tnovation\\t2\\tsider trading\\t3\\turance\\t2\\tteriors\\t5\\tnational tax\\t6\\tet privacy\\t2\\tvesting\\t9\\t in funds\\t10\\tunder Trump\\t6\\tment Banking\\t11\\tresearch\\t10\\ts\\t6\\tor activism\\t1\\tsabelle Kountoure\\t\\tJewellery\\t1\\to Ellison\\t\\tLegal & General Investment Management Ltd\\t1\\tife & Arts\\t1\\tondon travel\\t1\\tuxury Living\\t7\\tgoods\\t7\\tholidays\\t\\tM\\t1\\tanaging yourself\\t2\\trkets\\t7\\t Insight\\t8\\tvolatility\\t1\\tenswear\\t3\\ttal health\\t2\\trcedes-Benz AG\\t3\\tgers & Acquisitions\\t1\\tiddle Eastern prime property\\t2\\tlitary AI\\t2\\ttsubishi Motors Corp\\t1\\tonetary policy\\t4\\ty Clinic with Claer Barrett\\t2\\trtgages\\t2\\ttor sports\\t1\\tusic\\t\\tNational Cyber Security Centre\\t1\\tew York City travel\\t3\\t-build property\\t1\\tissan Motor Co Ltd\\t1\\torth American prime property\\t\\tOil\\t3\\t futures\\t1\\tlympic Games\\t1\\tntario Teachers\' Pension Plan\\t1\\tpenAI\\t1\\trganic food\\t1\\tther C Level (CFO/COO/CIO/CMO)\\t1\\twner/Partner/Proprietor\\t\\tParis Motor Show\\t6\\ttravel\\t2\\tssive Investing\\t1\\tension Insurance Corp Ltd\\t8\\tProtection Fund\\t8\\tautomatic enrolment\\t8\\tdrawdown\\t7\\ts\\t8\\t Regulator UK\\t9\\tcrisis\\t9\\tindustry\\t2\\trsonal pensions\\t2\\tugeot Automobiles\\t1\\tharmaceuticals sector\\t1\\trime property\\t3\\tvate equity\\t8\\tinvesting\\t8\\twealth\\t2\\toperty\\t8\\t funds\\t9\\tlaw\\t9\\tsector\\t9\\ttechnology\\t1\\tublic sector pensions\\t\\tQatar Airways\\t5\\ti Diar Real Estate Investment Co\\t1\\tuant investing\\t\\tRecipe\\t2\\tnewable energy\\t2\\tsidential\\t11\\t property\\t2\\ttirement\\t2\\tview\\t1\\tolls-Royce Motor Cars Ltd\\t2\\tme travel\\t\\tSafari/\\t2\\tn Francisco travel\\t1\\tcottish Mortgage Investment Trust PLC\\t1\\teamonkey/\\t2\\trious Money\\t1\\tingapore travel\\t1\\tkoda Auto AS\\t1\\touth American prime property\\t2\\tvereign bonds\\t10\\twealth funds\\t1\\tpa holidays\\t2\\tecial Report\\t8\\tpurpose acquisition companies\\t2\\tort\\t1\\ttate pension\\t13\\t triple lock\\t2\\tocks to Watch\\t2\\tructured Investment Products\\t2\\tyle\\t1\\tustainability\\t1\\twiss International Air Lines Ltd\\t\\tTata Motors Ltd\\t1\\tech start-ups\\t4\\tnical/Business Specialist\\t5\\tology\\t10\\t regulation\\t11\\tsector\\t2\\tlecommunications\\t1\\the Aesthete\\t3\\tatre\\t1\\tokyo travel\\t2\\tyota Motor Corp\\t1\\tracker mortgages\\t3\\tding technology\\t3\\tvel\\t6\\t & Leisure\\t9\\tleisure industry\\t7\\tbooks\\t7\\tinsurance\\t\\tUBS Investment Bank\\t1\\tK airports\\t3\\tequities\\t3\\tfinancial regulation\\t3\\tmortgage rates\\t3\\tprime property\\t5\\toperty\\t11\\t taxation\\t1\\tS Treasury bonds\\t3\\tequities\\t3\\tfinancial regulation\\t1\\tnhedged\\t2\\tited Kingdom\\t1\\ttilities\\t\\tVP/Director\\t1\\tenture capital investment\\t1\\tirgin Atlantic Airways Ltd\\t1\\tolkswagen UK\\t3\\tvo Car AB\\t\\tW\\t1\\tatches\\t7\\t & Jewellery\\t1\\tealth management\\t2\\tllbeing\\t9\\t and fitness\\t1\\tine\\t3\\tter sports\\t1\\tomen in business\\t5\\tswear\\t2\\trking It\\t4\\tplace pensions\\t\\tYachts & Marinas\\t1\\tield curve\\t\\tacc\\t1\\tn\\t2\\ton\\t1\\tpp.ft.com\\t10\\t/content/f69487cd-377c-4367-9a39-8350f29830e1\\t11\\tindex_page/htsi\\t1\\ts\\t2\\tset management\\t\\tbkg\\t1\\tonds\\t2\\toks and literature\\t1\\tr\\t1\\tse\\t1\\tu\\t2\\ty\\t\\tcar\\t1\\throme/\\t5\\tium/\\t1\\tocktails/beer\\t2\\tn\\t2\\tr\\t1\\tp\\t2\\tl\\t1\\ts\\t\\tdh\\t1\\tt\\t\\tedu\\t1\\tnu\\t1\\tquities\\t1\\ttf\\t3\\t.ft.com\\t1\\txecutive-education\\t\\tfacebook.com\\t2\\tm\\t1\\tin\\t3\\te art\\t2\\txed income\\t1\\too\\t3\\td and drink\\t5\\tindustry\\t1\\tse\\t1\\tt.com/books\\t7\\tcommodities\\t7\\tfood-drink\\t8\\tt-trading-room\\t8\\tund-management\\t7\\tlex\\t8\\tife-arts\\t7\\tmagazine\\t9\\trkets\\t7\\tpersonal-finance\\t7\\treports/wealth\\t7\\tstyle\\t7\\ttravel\\t2\\talphaville.ft.com\\t\\tgi\\t1\\tpv\\t\\thea\\t1\\tttps://chatgpt.com\\t8\\tsifted.eu\\t8\\twww.ft.com/moral-money\\t\\tiberdrola.ft.com\\t1\\tfa\\t1\\tns\\t3\\ttagram.com\\t2\\tt\\t2\\tvestment\\t10\\ts\\t1\\tsa\\t1\\tt\\t2\\tc\\t2\\tt\\t\\tkno\\t\\tlaw\\t1\\tinkedin.com\\t1\\tv1\\t\\tma\\t2\\tn\\t1\\tb\\t1\\td\\t1\\tixed-asset\\t1\\tkt\\t1\\ton\\t1\\tulti asset\\t5\\t-asset\\t6\\tmanager\\t2\\ttual funds\\t\\toe\\t1\\tgm\\t1\\tp\\t2\\ts\\t1\\tt\\t2\\th\\t\\tpat\\t1\\tension\\t1\\thc\\t1\\tm\\t1\\to\\t1\\tr\\t2\\ti\\t2\\to\\t3\\ttection\\t\\tr01b\\t3\\td\\t2\\t6f\\t3\\tl\\t2\\t7a\\t3\\tw\\t1\\tad\\t2\\tnkings.ft.com\\t15\\t/business-education/executive-education\\t1\\teal estate\\t2\\tg\\t2\\ts\\t2\\tt\\t3\\tire\\t6\\tment income\\t1\\tsk\\t\\tsal\\t1\\te\\t1\\tipp\\t1\\tm\\t1\\ttu\\t\\ttax\\t1\\tec\\t2\\tl\\t1\\tie\\t1\\travel\\t2\\ti\\t2\\tl\\t1\\ts\\t\\tvideo and computer games\\t\\twealth management\\t1\\tww.agendaweek.com\\t4\\tboardiq.com\\t4\\tft.com\\t10\\t/htsi\\t11\\treports/sustainable-food-agriculture\\t19\\twomen-in-business\\t6\\tadviser.com\\t5\\tundfire.com\\t4\\tignites.com\\t5\\tnvestorschronicle.co.uk\\t4\\tlifeannuityspecialist.com\\t4\\tpandcspecialist.com\\t4\\tthebanker.com"),propertiesLookup:e=>[["client","domain"],["client","url"],["user","responsibility"],["user","position"],["user","industry"],["article","topics"],["user","subscriptionLevel"],["article","brand"],["campaign_id"],["line_item_id"],["client","referrer"],["article","title"],["geo_info","continent"],["segment_number"],["geo_info","country"],["article","categories"],["article","organisations"],["client","user_agent"],["article","admants"],["articleST","title"],["user","gender"],["article","authors"],["article","type"],["advertiser_id"],["progress"],["aggregations","PageviewEngagement","engaged_time"],["userMM","role"],["article","id"],["dest_url"],["client","title"],["slot","ad_unit_path"],["type"],["userMM","member"],["userST","type"]],queries:e=>({101060:e.r(34,1,e.os(e.s,11,["digital lawyers","innovative lawyers"]),1,1,1,["digital-lawyers","innovative-lawyers"],1,1,11,["airlines navigate meeting climate change pledges","amazon’s legal team: ‘we wanted to help’","australian law firms address lack of aboriginal recruits","blockchain-powered breakthrough on mutual fund","calls to action on esg boost demand for legal expertise","collective legal actions spread in europe","covid response fosters top legal teams’ creativity","creative practitioners crack tough legal challenges","cross-border deals need broad skills in time of trade war and pandemic","digital delivery from the daily grind for younger lawyers","digital scheme pays venezuela health workers from frozen funds","digital thinking spreads across asia’s law firms","diversity efforts for lawyers switch from hiring to keeping","eight smaller law firms that outpace larger rivals in europe","fintech pioneers navigate the law’s grey areas","five views of law firm leadership","fix law firm culture to keep people of colour","forward-looking legal practitioners","gun rights and climate change","high pay in law jobs fails to compensate for toxic culture","how airlines survived to fly another day","in-house legal teams develop new attitude to risk","japan inc braced for fresh hostile bids","law firm leaders ready for radical change","law firm professionals driving radical change","law firms chase a piece of the crypto action","law firms embrace ‘change makers’","law firms focus on digital skills to ease legal pressures","law firms start to take the long view","lawyers help tesla unlock rooftop solar power","lawyers write the future for $200tn of post-libor deals","legal eye for detail will help battle sustainable finance ‘greenwash’","people-focused law firm leaders","seven individual takes on rethinking legal practice","the lawyers battling to redress systemic racial inequalities","the pay rates for lawyers are unsustainable","wanted: role models for solving legal problems together","why digital demands deep thinkers","young lawyers feel most at risk from burnout"],1),101171:e.r(45,e.isp("financial_times_redshift","UPL080",!1,"101171"),2592e6,e.pc_(7,"Energy Source"),1,1,0,e.bsc_(1,["RdFUbmb7"])),102103:e.r(65,e.isp("financial_times_redshift","UPL008",!1,"102103"),"UPL006","102103",72),102153:e.r(33,e.isp("financial_times_redshift","UPL009",!1,"102153"),e.tw(e.cb(0,e.pc_(7,"Moral Money"),e.ge(1),1),2592e6),0,e.af_u(["properties","user","followedConcepts"],e.e_(["name"],"Moral Money")),e.ge(1),1),102212:e.r(64,47,"Climate Capital"),102213:e.r(65,e.cb(0,e.af_u(["properties","user","followedConcepts"],e.e_(["name"],"Scoreboard")),e.ge(1),1),"UPL069","102213","Scoreboard"),102214:e.r(64,292,"Unhedged"),103258:e.q(e.ocqs([e.cb(0,e.ps(1,"cop26"),e.ge(1),1),e.cb(0,e.os(e.cx,5,[35,34,33]),e.ge(1),1),e.cb(0,e.af_u(["properties","user","followedConcepts"],e.o([e.y_(["name"],35),e.y_(["name"],34),e.y_(["name"],33)])),e.ge(1),1)])),104406:e.r(64,270,"The Aesthete"),106717:e.r(48,e.isp("financial_times_redshift","UPL036",!1,"106717"),e.tw(e.cb(0,e.af_u(["properties","user","followedConcepts"],e.o([e.e_(["name"],"Business school"),e.e_(["name"],"Future of work"),e.e_(["name"],"Entrepreneurship")])),e.ge(1),1),7776e6),2592e6,2592e6,2592e6,2592e6,"UPL034","106717",e.pc_(7,"FT Podcast"),1,e.pc_(5,"Work & Careers"),3,2,e.y(0,423),2,1,3,2,2,["+G7qofp/","FecnR8lS","JZ9WNRUS","U7qWYvzv","uqQemyC7"]),113877:e.r(51,["defined benefit","defined contribution","drawdown",408,430,434],["5I9RKQXD","6Sqqg2+S","7DRnpzve","8NnVijMp","CmwiZtyH","M1mrHKo+","PTgyjefz","eAfuzblO","jKvYWCUP","kEz7jfKZ","omVPVJEk","ve06mRwx"],408),113878:e.r(51,["assurance","insurance","insurer",415],["3/utbWGD","7LSka97h","D4zE801/","P2FbQWIJ","rqYT7uhE"],415),113879:e.r(50,["iht","national insurance","non-dom",437],["7iA3bbgL","8YXU6ZYu","9C6PoWq2","ksn/zVJa","m+cPZvjd","rCXDQJW5","s2ASgduE","vgQt3pZr"],[437]),117084:e.r(68,"UPL102","117084"),117171:e.q(e.cb(0,e.os(e.w,3,[444,435,433,410,412,411,405,390,392,369,339,337,327,325,320,315]),e.ge(1),1)),117680:e.r(5,72576e5,e.os(e.w,4,[347,354,322,314,377]),1,72576e5,72576e5,1,e.os(e.w,3,[390,435,410,338,403,401,335,393]),e.os(e.w,2,[348,404,427,413,328,396,431,376,377])),122044:e.r(100,[314,377,347,354,322],325,[431,396,377,348,427]),122045:e.r(100,[383,385],444,[439,384]),122046:e.r(104,376),122047:e.r(104,413),122049:e.r(96,e.y(4,370),3,[411,369,339]),122051:e.r(96,e.os(e.w,3,[433,410,320,315,390,337,412,435]),2,[333,386]),122054:e.q(e.tw(e.cb(0,e.os(e.w,3,[338,401,393,335,403]),e.ge(1),1),290304e5)),122721:e.r(11,1,1,e.os(e.w,3,[401,403,338,393]),e.os(e.w,2,[438,439,384])),125008:e.r(102,7,92),128830:e.r(7,e.ocqs([e.tw(e.cb(0,e.os(e.s,1,["www.ft.com/prime-property","www.ft.com/property"]),e.ge(2),2),6048e5),e.tw(e.cb(0,e.af_u(["properties","article","topics"],e.bsc([],["L4k9wc43","OY2iZHXt","WbA1NnIR","o1kRfd1e","sEC0F5uL"])),e.ge(2),2),2592e6)]),e.cb(0,e.af_u(["properties","article","topics"],e.bsc([],["+/xq9jXv","0wEfRIRt","8gfIJOma","ANT5QRp5","CyBgdcw5","GN5gOruX","TR5X4xxc","YH7S72S7","bOeAMaKP","bQqSsdx7","eSdy1l53","kYegVigL","sim6HWX1"])),e.ge(2),2),12096e5),129643:e.q(e.acqs([e.cb(0,e.os(e.w,3,[401,338,403,335,393]),e.ge(1),1),e.cb(0,e.os(e.w,4,[370,440,387,326,371,427,391,409,341,402,439,383,385]),e.ge(1),1)])),135704:e.r(16,300),135705:e.r(16,177),135706:e.r(11,1,1,e.pe(20,"U"),e.tg(16734816e5)),139666:e.r(55,0,e.bsc_(27,["23vlyIVD","5UHc7ueZ","MX3cmV04","d7flPAwn","lvRLODPF","yTR78+eN"]),["https://www.ft.com/ft1000-2022","https://www.ft.com/reports/europes-fastest-growing-companies"]),143049:e.r(91,e.e_(["name"],"UK defence industry"),e.e_(["name"],"Aircraft manufacturing"),"Aerospace & Defence"),147839:e.r(83,0,["www.pictet.ft.com"]),148849:e.r(68,"UPL106","148849"),149016:e.r(67,"www.ft.com/partnercontent/guernsey-finance",9,[612288184,6709764447,6709764459,6712946345,6709764468,6711808045,6711808063,6711808069,6709764462,6610183806,6610184145,6610183899,6612287911,6612993974,6612993995,6612288130,6612288184,6612288220]),150943:e.r(4,e.os(e.w,14,["Vietnam","Vanuatu","Tonga","Timor-Leste","Thailand","Sri Lanka","Solomon Islands","Singapore","Samoa","Philippines","Papua New Guinea","Palau","Pakistan","New Zealand","Nepal","Nauru","Myanmar","Mongolia","Maldives","Malaysia","Laos","Kiribati","Japan","Indonesia","India","Fiji","South Korea","Cook Islands","Macao","Hong Kong","China","Cambodia","Brunei","Bhutan","Bangladesh","Australia","Afghanistan"]),e.ref(10),["Xe5Z6iHK","jKrVjNYP","yDTJBNYa"]),150951:e.r(4,e.y(12,86),e.os(e.s,3,["ceo/president/chairman",335,338,393,401,403,"other c level (cfo/coo/cio/cmo)","vp/director"]),["OUQjONGk","fNjthZmI"]),151211:e.q(e.acqs([e.ocqs([e.tw(e.cb(0,e.a([e.ref(38),e.af_u(["properties","article","topics"],e.bsc([],["1OvFSi+H","8I4mrWhV","9dT2jV1x","DQczFymy","FjDuYWVl","Ivt25G9k","LLV1K7n3","Mo4UCZQ4","Q2DMBg5n","RwZkCtZ2","WA2lAumo","dB5ghnUH","dMHvXxQk","gO0Uksdp","hEmn6/VD","l9pto/aI","nJK0Hj6P","o1kRfd1e","p2k2LStm","qGN4MvFt","qXBKKtmv","sSN5x0Zt","vW2QxDLj","zAdV1ySA","ztctt8rF"]))]),e.ge(6),6),145152e5),e.tw(e.cb(0,e.a([e.ref(38),e.af_u(["properties","article","brand"],e.bsc([],["/CQ0kE6v","pYgFAX//"]))]),e.ge(6),6),145152e5),e.tw(e.cb(0,e.a([e.ref(38),e.af_u(["properties","article","topics"],e.bsc([],["0Biwguij","HEJpt3fX","blwvy1GK","cMB+wY74","k2AQLODn","nbp618W9","w8SdPoOM"]))]),e.ge(40),40),145152e5),e.tw(e.cb(0,e.a([e.os(e.w,2,[428,396,413]),e.af_u(["properties","article","topics"],e.bsc([],["8I4mrWhV","8LKDsnBx","DQczFymy","FjDuYWVl","JG2FWgMF","LLV1K7n3","Q2DMBg5n","RwZkCtZ2","dB5ghnUH","gO0Uksdp","l9pto/aI","nJK0Hj6P","vW2QxDLj","ztctt8rF"]))]),e.ge(6),6),290304e5),e.isp("financial_times_redshift","UPL065",!1,"151211"),e.isp("financial_times_redshift","UPL064",!1,"151211"),e.isp("financial_times_redshift","UPL063",!1,"151211"),e.tw(e.cb(4,e.os(e.e,23,[5104571993,4821286752,16383649,4787756624,4824899484,5267294879,5244556225,16506769,4761211409,5366909954,17291809,16678369,5285998927,4793117494,5274103362,4853829738,139158049,5303486579,5261092544,4782270367,4509060898,5073289616,5361120913,47499049,4833099352,16606609,4858349171,4729402017,190695889,4865351256,4834652375,5324709833,5349105325,4645357157,5229148217,4768716171,151397809,5338785969,5326167499,5230805254,4916804777,5311707044,4805099239,5228306762,5341784585,4731334718,5298993742,4744239359,4836769175,5333608732,5339297262,5306334708,5085508025,5266108e3,4940469115,5130573501,5125875119,4976591234,5070882871,5366422547,5046930611,5224433025,5087532651,5331522120,5330043741,4633795193,4930771836,5196120411,5339774607,5321512296,5351871491,4777501381,4787920047,5275067032,4808655326,5366140441,5341300499,5342826601,5030279994,208772329,21148129,4769068934,4743267505,4772240387,4797037407,5276188704,47695249,5297489191,5336442368,16348969,16185409,5341344916,5340199397,4823770701,5040952033]),e.ge(1),1),145152e5),e.isp("financial_times_redshift","UPL107",!1,"151211"),e.cb(0,e.af_u(["properties","user","followedConcepts"],e.o([e.y_(["name"],169),e.y_(["name"],301),e.y_(["name"],302)])),e.ge(1),1)]),e.scq(e.cw(2,e.pc(["aggregations","SegmentEntry"],171478)),e.cw(3,e.pe(13,171478)),e.e(0))])),153433:e.r(45,e.tw(e.cb(0,e.bsc_(1,["1hYrBNCf","5LCaS4Qs","5WrC/QYA","8GJ8TsSv","JcMzeIL4","caQ45GLu"]),e.ge(2),2),7776e6),290304e5,e.ref(37),2,2,1,e.os(e.e,8,[3107730153,2929245762])),153825:e.r(68,"UPL107","153825"),156961:e.r(106,1,"www.ft.com/podcasts"),158432:e.r(52,["alpha-investment-portfolios","inv_trust","investment-trust","investment_fund","investment_trust","investor_fund","investor_trust"],["investment fund","investment trust","investor fund","investor trust"],["97V/wEB3","BzZIPNB9","M/43Gb9O","Z7kAgkE+","cxTkFNJo","dY4UQydb"],["97V/wEB3","M6V5/8Dc","XeZK/wli","bXGcWjkL","klKALBRT","okDFlcQQ","xhoQ7S/M","yL8nmZcX"]),158434:e.r(52,[408,429,434],[408,429,434],["5I9RKQXD","5ip4SrJV","8oKxEqMW","CmwiZtyH","K3+C/hAg","Nj40ojas","PaLCA5Pk","YPz6mdGc","f62VmzW8","jKvYWCUP","kEz7jfKZ","qONlPrPO","syQ8QQQW","vHloR/D+","ve06mRwx"],["/ZrIDQnX","/qlQcdSA","5I9RKQXD","BFrvyKLh","CmwiZtyH","LUzuNeF2","LsLW6Y89","TqSgSDIM","YPz6mdGc","f62VmzW8","jKvYWCUP","kEz7jfKZ","omVPVJEk","slSvDWkI","ve06mRwx"]),158465:e.q(e.ocqs([e.tw(e.cb(0,e.a([e.y(0,456),e.os(e.s,19,["et fund",343,"exchange-traded","traded fund"])]),e.ge(3),3),7776e6),e.tw(e.cb(0,e.a([e.y(0,456),e.os(e.s,1,[343,"exchangetradedfund"])]),e.ge(3),3),7776e6),e.tw(e.cb(0,e.a([e.y(0,456),e.af_u(["properties","articleST","secondaryTags"],e.bsc([],["9jfe+Kro","RwsBwcBz","Yt9A4/kg","bJ/ItZbk","dwWOvMCu"]))]),e.ge(3),3),7776e6)])),158466:e.r(52,["individual-savings-accounts","individual_savings_account",382],["individual savings account",382],["/ofz9gIJ","C7unXvyt","oEbHMZZD"],["AysfPCH7","oEbHMZZD","woA91Wda"]),158581:e.r(84,["CFUV6IVG","DuLhM6v0","GTMIURsp","KS+Bkk+v","ZwpFgBAE","nfz9spe3","sOCV0Xo1","wvE2G1Wo"]),158583:e.r(84,["+R186Td7","ZwpFgBAE","r6Wh/maO","scRlo0mY"]),158585:e.r(84,["/ZVGd8CL","qBs2SnlI"]),158589:e.r(84,["3nAvVv/3","9thGNHl0","NgirtPLL","S4EFQl88","hZNgyEli","qBs2SnlI","sOCV0Xo1","sd0bVccZ","tatr8MU3"]),158591:e.r(84,["feZiW57E","sd0bVccZ","wvE2G1Wo"]),164501:e.r(50,[381,"mixed asset",394,397,398,399,"pension freedom",430],["6QwlztvL","Ivn7fyCN","XeZK/wli","jKvYWCUP","omVPVJEk"],[380,394,398,399,"pension-freedom","retirement-income"]),16780:e.r(10,e.t,1,1),16781:e.r(20,19),16782:e.r(21,14,["doaFylgq"]),16842:e.r(106,1,"ft.com"),16843:e.q(e.ocqs([e.tw(e.cb(0,e.os(e.s,1,["www.fdiintelligence.com",453,"www.pwmnet.com",459]),e.ge(3),3),7776e6),e.tw(e.cb(0,e.a([e.os(e.cx,5,[75,122,284,291,102,185,66,"Investment Strategy","European Equities",87,290,82,80,"Emerging Markets",40,"Capital Markets","Asia-Pacific Equities",15,"People in Fund Management","UK Equities",283,"Asset management",141,121,162,"Fund Management",27,"Bond",303,296,289,"Stock exchange consolidation",251,"Sovereign debt","Sovereign Bonds",250,222,167,156,143,142,"Greece debt crisis","Investing in Foreign Exchange",119,89,"Equity Valuation",84,"Equity Exchanges","Equity exchanges",83,79,65,"Derivative Exchanges",53,"Bank bonuses",5,"Private Equity",164,166,"Wealth Management","Venture Capital","US Treasury Bonds","Stock Exchange","Sovereign",209,"Investor Activism","Insider Trading","High Yield Bonds","High Frequency Trading","Hedge Funds","Greece Debt Crisis","Foreign Exchange","Exchange Traded Funds","Equity","Equity Earnings",161,"Derivative","Clearing & Settlement","Asset Management","Agricultural Commodities"]),e.ref(8)]),e.ge(3),3),2592e6)])),16982:e.r(103,1,374),16987:e.r(103,10,374),17068:e.q(e.ocqs([e.tw(e.cb(0,e.af_u(["properties","article","topics"],e.bsc([],["+8aE6LJR","+LO9clOY","0jEHXDVv","3SUgo69S","EOO96WAm","IuyB/I4S","JBpaQyC/","KKRvoSc8","LSapwH45","N7YqCyiP","NgSSsrzE","OwNOoNUk","SzkcUani","VykoEnl+","XVYWCn+R","aVsWan2P","bwLGxI1G","c7D+VVE5","gN3ZO+6t","jL46asAZ","l+1JF1od","n6F7RvKR","ocswFy6e","pNLanrfl","pZwRf3OM","qovOjVeb","r829jaSe","wb3jByDR","zl+mfZeQ"])),e.ge(3),3),5184e6),e.tw(e.cb(0,e.os(e.s,11,["alibaba","asia","beijing","china","chinese","hong kong","india","japan","korea"]),e.ge(3),3),7776e6),e.tw(e.cb(0,e.os(e.s,1,["www.ft.com/asia-pacific","www.ft.com/china"]),e.ge(1),1),7776e6)])),17075:e.r(47,5184e6,5184e6,"UPL036","17075",e.af_u(["properties","article","topics"],e.bsc([],["B/oEFJWI","ClBxWMLA","Dgj/WL84","FUaPvVne","FecnR8lS","GBy9b82P","JsQ9aKV5","OCw62zMZ","XnYBl4Fw","YdQ5InCm","ZDJbjLif","bgOQUllW","dfeZo8LF","fLawoiiu","kIKcOt3M","nsBufJJI","oRqx40a/","qvh/5Xrm","rI+/EHaA","rqSlk6V4","u9v7rJ0P","uBt/Tt8t"])),2,e.os(e.s,1,[423,"www.ft.com/business-education"]),e.bsc_(1,["+zmRd7Nd","0FLNf0Hk","0xzonm13","2XPC4GZO","4CywTw1y","5C4lXJ7j","6sHOBk5W","7gx7beVh","BOI5PLtV","Bxbo3qKi","C2IG8jHj","DYq8hVFi","GhWmSj4g","GvsgL0ai","I3eP5pG+","IhWpngZX","L7wbSRx1","N1f3DMHA","OprUIyn5","Pf8JRhUM","Pm3bx5jY","Q7Ajo1os","RxAEBZKT","S91N++3N","SiqCm5XS","UHfMDcZo","VYflQ2kQ","VnZ6o0KP","ZHB9RZXg","ZILM/hwT","ZYBefjTT","ar1L5S/z","b6F2mWzf","bQA0Swu2","c6PRmfae","cV6v4zV7","dS4JT+u/","duMzEK66","gdCtflcY","gmCTsUWc","im+UbqKH","m2C2xFBn","mBHjTrH+","nKVa6bWQ","pojdACde","qH0DP1wS","qpb9fpIN","r29gDlnb","r69xmaTB","sr57ENLz","x5K4VIXQ","xXnPZw20","ytEI4GyD"]),1,0,e.af_u(["properties","user","followedConcepts"],e.e_(["name"],"Business education")),2,1),17117:e.r(68,"UPL001","17117"),17124:e.r(44,2592e6,e.os(e.s,11,["commercial lettings","commercial property","commerical property","income property","investing in commercial real estate","private rental","property deals","property development","property fund management","property investment","property market","real estate investment trust","student accommodation"]),2,2,2592e6,5184e6,e.af_u(["properties","article","topics"],e.bsc([],["+/xq9jXv","0wEfRIRt","1qxpxOT9","4f/MEenr","91KolCJ0","ANT5QRp5","CyBgdcw5","GN5gOruX","Kn0goQSo","OPAPai04","TR5X4xxc","YH7S72S7","bOeAMaKP","bQqSsdx7","cGWNcIaU","kYegVigL","muM6fQ7L","sim6HWX1"])),2,e.os(e.s,1,["www.ft.com/reports/arab-world-property","www.ft.com/reports/ft-property-europe","www.ft.com/reports/ft-property-global","www.ft.com/reports/ft-property-london"]),2,2,2,e.cb(0,e.ps(1,"www.ft.com/property-sector"),e.ge(2),2),2592e6),17125:e.r(106,1,"https://www.ftadviser.com/"),17127:e.r(25,20,300),17128:e.r(25,20,177),17135:e.r(68,"UPL015","17135"),17138:e.r(42,e.ref(7),"UPL017","17138",["properties","article","authors"],["2NfUXCxn","8I4mrWhV","DQczFymy","HiPdheAJ","Ivt25G9k","Kn0goQSo","Ly8HQot9","RwZkCtZ2","Sn/djBdC","dB5ghnUH","l9pto/aI","maDvxs/Y","muM6fQ7L","o1kRfd1e","p2k2LStm","tArKuUTf","vW2QxDLj","znfWId4O","ztctt8rF","zyFabc2D"],["LT9pJQ7N","tZ2FCC2N","uXBogqjZ"]),171478:e.q(e.acqs([e.scq(e.cw(2,e.pc(["aggregations","SegmentEntry"],151211)),e.cw(3,e.pe(13,151211)),e.e(0)),e.ocqs([e.tw(e.cb(0,e.af_u(["properties","article","topics"],e.bsc([],["1OvFSi+H","8I4mrWhV","8LKDsnBx","9dT2jV1x","DQczFymy","FjDuYWVl","Ivt25G9k","JG2FWgMF","LLV1K7n3","Mo4UCZQ4","Q2DMBg5n","RwZkCtZ2","WA2lAumo","dB5ghnUH","dMHvXxQk","gO0Uksdp","hEmn6/VD","l9pto/aI","nJK0Hj6P","o1kRfd1e","p2k2LStm","qGN4MvFt","qXBKKtmv","sSN5x0Zt","vW2QxDLj","zAdV1ySA","ztctt8rF"])),e.ge(3),3),2592e6),e.tw(e.cb(0,e.af_u(["properties","article","brand"],e.bsc([],["/CQ0kE6v","lemr7sDi","pYgFAX//"])),e.ge(3),3),2592e6),e.tw(e.cb(0,e.os(e.s,10,["/t.co",346,378,388]),e.ge(2),2),2592e6)]),e.tw(e.cb(0,e.y(6,316),e.ge(1),1),2592e6)])),17173:e.r(60,1,1,e.pc_(7,147),1,1,7),17174:e.r(21,2,["5hbuHWhQ","X8yruhjb"]),17180:e.r(70,0,e.bsc_(0,["2SSIgOen","2bcXmReh","8LK5tT1k","9B1e5ujN","NIMeeJN0","W5+hsorX","YnVE/jTL","p0Gmp3fI","rrl34NCB"]),1,1),17182:e.r(38,e.af_u(["properties","article","topics"],e.bsc([],["+pv51tI2","+rCU8bqy","/xxlWyGr","18SKwEmC","1KvXmXwQ","1uToGQqY","2mg6AP+R","3RyjvfLr","3sykcaEl","3vRF9bJX","44wb69J0","4f/MEenr","4xScibA+","6Y1DxjGk","73podZTe","7D3B8eIF","7HAA+ckN","85nlCIDW","8BW2jCMo","91KolCJ0","AIhaSGW3","B4/T2sYc","BLvHY3uy","BhpqUr8z","C60NsdDP","CmwiZtyH","DV4NZSDR","F7FCLoZg","HFxFIvGQ","IYnQEDFk","KZld/1cK","Kn0goQSo","L4qf0AnI","NQJb33OG","NfriW9qL","OpvTMxoF","PhA5LDhC","RCCLUyiW","RoAr1b2q","SIw/GHPu","TV0j3czf","UgyaFFm5","W5mflFz3","XeZK/wli","XrAYpoDl","YjKhxwMV","a4YBgkHz","aBbi/P3/","aa74M+KZ","arsbQcTH","bOeAMaKP","bXGcWjkL","bXt7K70W","dkyNDLYW","fDYZPYVR","is07BccS","kKj6O10h","kL50XrPp","m+cPZvjd","mMpSM+4V","muM6fQ7L","pZwRf3OM","pye/HD5o","qQqEWx+e","rSjP5ndv","rpAPHkPL","sim6HWX1","srFul6Fm","vM+ZGnwk","wJpreANF","xRYVuDS3","y0A+7f16","yJL+xVos","zyFabc2D"])),4,4,7776e6,e.os(e.s,1,["app.ft.com/stream/alphaville","app.ft.com/stream/personal_finance","ft.com/alphaville",358,363,364]),3,3),17183:e.q(e.ocqs([e.tw(e.cb(0,e.af_u(["properties","article","topics"],e.bsc([],["+/xq9jXv","0wEfRIRt","4f/MEenr","8gfIJOma","91KolCJ0","ANT5QRp5","CyBgdcw5","GN5gOruX","Kn0goQSo","L4k9wc43","OY2iZHXt","TV0j3czf","TfjQZ36K","YH7S72S7","bOeAMaKP","bQqSsdx7","dkyNDLYW","fDc/AXJt","kYegVigL","muM6fQ7L","o1kRfd1e","rfyWGsSX","rrCsI0mp","sim6HWX1"])),e.ge(3),3),5184e6),e.scq(e.cw(2,e.pc(["aggregations","SegmentEntry"],20283)),e.cw(3,e.pe(13,20283)),e.ge(1)),e.tw(e.cb(7,e.ps(28,"https://propertylistings.ft.com"),e.ge(1),1),5184e6),e.tw(e.cb(0,e.ps(1,"www.ft.com/house-home"),e.ge(3),3),5184e6)])),17185:e.r(68,"UPL020","17185"),17186:e.r(56,6,6,e.af_u(["properties","article","authors"],e.bsc([],["9kIWMSQf","DuLhM6v0","L7U2m4my"])),6,6,["/Pz6lkio","0Biwguij","0FgCXbxC","2h0Q1Tlz","67unc6K4","8CU2fpx3","APSIn6Wb","Duz0F0d1","MvDKipMo","OPrEm3P1","PYb6D85J","RNZN6kXP","TALjhKi+","ZsBsEdF5","ZzJOnvof","dKDPqkPr","eAZRHV41","ecKGFycg","hCsIxbDq","mFxsJJ58","njcRxRB0","rkwjZ6oV","x/7KHcre"]),17187:e.r(106,1,459),173728:e.r(68,"UPL111","173728"),17427:e.r(11,1,1,e.tg(1567296e6),e.ps(10,"europa.eu")),175294:e.r(68,"UPL112","175294"),175295:e.r(68,"UPL113","175295"),176218:e.r(72,1,8,3547384733),178280:e.r(68,"UPL126","178280"),179639:e.q(e.ocqs([e.tw(e.cb(0,e.ps(1,"https://www.ft.com/ft-wealth-management"),e.ge(1),1),145152e5),e.tw(e.cb(1,e.pe(8,3266953334),e.ge(1),1),145152e5)])),180410:e.r(68,"UPL116","180410"),180411:e.r(68,"UPL117","180411"),180412:e.r(68,"UPL118","180412"),18212:e.r(67,"transact.ft.com",8,[2538855037,2232204205]),18238:e.q(e.tw(e.cb(0,e.o([e.pc_(18,"r07o"),e.pc_(21,"Steve Johnson"),e.pc_(7,"ETF Hub"),e.pc_(5,89),e.os(e.s,11,[343,"exchange traded fund"]),e.os(e.s,0,[344,"ft.com/content/d68565b5-e962-4f64-aaa4-982d2ecafc64","ft.com/stream/df274e2a-c554-4cb6-ab93-deeff9928e91"])]),e.ge(2),2),7776e6)),18239:e.q(e.cb(0,e.o([e.os(e.w,4,[347,354,314,322,377,157,"Fund/asset management","Financial Services","Banking","Accountancy & tax advisor"]),e.os(e.w,3,[325,"Broker/Trader/Advisor"]),e.os(e.w,2,[427,377,348,396,431,157,"Risk management/compliance","Money/portfolio mgmt","Broker/trader","Accounting/finance"])]),e.ge(1),1)),18240:e.r(78,e.os(e.s,1,["www.ft.com/ftfm","www.ft.com/fund-management"]),3,3),18245:e.r(53,4,4,e.os(e.s,1,[357,361,362]),e.cx,18,["r06",418,419]),18246:e.r(85,["18SKwEmC","1TzbBhUO","3sykcaEl","DHwl42ed","HFxFIvGQ","Jk8XzRmv","NQJb33OG","NfriW9qL","iX8ASnCZ","qQqEWx+e","rO1E4rPo"]),18247:e.r(95,e.pc_(5,"FT wealth"),e.s,1,["ft.com/ft-wealth",365]),18248:e.q(e.ocqs([e.tw(e.cb(0,e.o([e.os(e.cx,18,[419,418]),e.pc_(7,92),e.os(e.cx,5,["Sporting holidays",60,"Walking holidays","Latin America holidays",21,31,"UK holidays",252,"North America holidays",176,"Europe holidays","Asia and Australia holidays","Africa holidays",3,45,279,278,276])]),e.ge(2),2),7776e6),e.tw(e.cb(0,e.os(e.s,1,["app.ft.com/index_page/travel","app.ft.com/stream/globetrotter","ft.com/globetrotter",367]),e.ge(2),2),7776e6)])),18250:e.r(42,e.os(e.s,1,["ft.com/next-act","ft.com/pensions-industry","https://www.ft.com/pensions"]),"UPL128","18250",["properties","article","organisations"],["0Iue7IUl","1+sYJnun","1m7EAaTU","5lqWTVOn","5xivPiBg","7D3B8eIF","AJ1J+OrH","CmwiZtyH","ID0Z/ehV","NFsknlwR","WTcE9qkV","YLicYOW/","Zzwmv+Bh","iIuIeBc/","kKj6O10h","l5bMj5Jw","srFul6Fm","u+YCknUL","y7r+bF9s"],["/7VxabJF","9WK3Bk+i","Hm5RT2Ir","KJGOjW/g","N+44ny8t","cD0+MJBt","ffjK9neP","o6WFaRXL","qPe4SDdk","zuR7KmQo"]),18253:e.r(33,e.tw(e.cb(0,e.os(e.s,1,[359,360,363,368]),e.ge(1),1),5184e6),e.tw(e.cb(0,e.ps(0,368),e.ge(1),1),5184e6),0,e.os(e.s,2,["ifa/financial advisor","ifas","money/portfolio mgmt"]),e.ge(1),1),18254:e.r(69,0,e.os(e.s,1,["ft.com/architecture",355,"ft.com/dance","ft.com/design","ft.com/film",357,"ft.com/house-home",361,362,"ft.com/music",366,"ft.com/television","ft.com/theatre",367,"ft.com/visual-arts"]),3,3),18260:e.r(32,e.tw(e.cb(0,e.bsc_(2,["/Pcm5KR3","rc1urJAS"]),e.ge(1),1),7776e6),0,e.af_u(["properties","article","topics"],e.bsc([],["arsbQcTH","kzF2WMyT"])),e.ge(3),3,0,e.os(e.s,11,["commodities","risk management","risk mitigation"]),e.ge(3),3),18262:e.r(41,e.ps(1,"ft.com/companies/energy"),3,3,e.os(e.cx,5,[294,81,"Energy sector",199,"Gas","Energy"]),3,5,0,3,3,e.cx,16,["Shell","BP","BP PLC"],5,["energy"],3),18263:e.q(e.ocqs([e.tw(e.cb(0,e.ps(1,"ft.com/personal-finance/property"),e.ge(1),1),7776e6),e.tw(e.cb(0,e.af_u(["properties","article","topics"],e.bsc([],["/qD/xNqF","FgNEWnbn","Kn0goQSo","dkptyw0N","dkyNDLYW","h0SRwdJJ","kzfKCF27","muM6fQ7L"])),e.ge(3),3),7776e6)])),18264:e.r(70,0,e.os(e.s,1,["ft.com/ftfm",359]),1,1),18268:e.q(e.ocqs([e.tw(e.cb(0,e.o([e.pc_(16,194),e.os(e.cx,5,["Data protection",160,"Ransomware",59,58])]),e.ge(2),2),7776e6),e.tw(e.cb(0,e.os(e.s,1,["ft.com/cyber-security","ft.com/reports/cyber-security"]),e.ge(2),2),7776e6)])),18269:e.r(58,3,3,3,3,3,3,[363,364,"markets.ft.com/data"],29,["binary options","cfd\'s","cfds","contracts for difference","currency pairs","forex","futures","fx","spread betting","trading"],["2oqlUHOF","e3F3WS/N"]),18270:e.r(40,e.af_u(["properties","article","topics"],e.bsc([],["kkhYVq48","xLZOgQFO","zqhbtMlg"])),3,3,7776e6,0,e.os(e.s,1,[358]),1,1),18271:e.r(44,7776e6,e.os(e.s,1,[318,452]),1,1,7776e6,7776e6,e.a([e.pc_(7,253),e.pc_(5,308),e.ref(8)]),1,e.bsc_(27,["GqMWqDUI","ho1WNuJ+","iuA3cQ0Y","qaLgR3Ye","sfiBOl3r","xJyPmOoE"]),1,1,1,e.cb(0,e.a([e.pc_(5,308),e.os(e.s,10,[318,452])]),e.ge(1),1),7776e6),18294:e.r(22,1,1,e.w,3,[410,"Associate","Analyst",337,435,412,390,315,320,"Senior Manager/Dept Head","Programme/Project Manager","Professional","Manager/Supervisor","Consultant"],e.w,2,[333,386,"Knowledge management","General Management"]),18295:e.r(62,e.os(e.cx,5,["World Economic Forum in Davos",61]),e.ps(11,61),"ft.com/davos-2019"),18297:e.q(e.ocqs([e.tw(e.cb(0,e.a([e.y(26,103),e.bsc_(0,["2SSIgOen","2bcXmReh","8LK5tT1k","9B1e5ujN","NIMeeJN0","W5+hsorX","p0Gmp3fI","rrl34NCB"])]),e.ge(1),1),7776e6),e.tw(e.cb(0,e.a([e.os(e.w,0,[458,457,"www.healthpayerspecialist.com",455,454,"financialadvisoriq.com",448,447]),e.bsc_(["userMM","industrySubType"],["/yT+trFc","TpAasfCl","kv2/YNb1"])]),e.ge(1),1),7776e6)])),18298:e.r(95,e.os(e.w,4,[370,"Govt/public service/NGO"]),e.w,3,[411,369,339,"Politician/Government Minister","Gov\'t/Int\'l org official","Diplomat/Sen Govt Officer"]),18300:e.r(106,0,"investorschronicle.co.uk"),18310:e.r(41,e.o([e.os(e.cx,5,["Alphaville","Invest",166,"Investment",161]),e.os(e.s,1,["ft.com/content/1d5c7cb2-35d9-11e7-bce4-9023f8c0fd2e","ft.com/content/53fa458e-6fa7-11e8-852d-d8b934ff5ffa","ft.com/content/eced4c88-2975-11e7-bc4b-5528796fe35c","ft.com/ftfm/responsible-investing","ft.com/reports/300-top-investment-advisers","ft.com/reports/impact-investing","ft.com/reports/invest-mozambique","ft.com/reports/investing-arab-world","ft.com/reports/investing-central-eastern-europe","ft.com/reports/investing-greece","ft.com/reports/investing-human-capital","ft.com/reports/investing-in-bahrain","ft.com/reports/investing-in-innovation","ft.com/reports/investing-in-liberia","ft.com/reports/investing-in-mauritania","ft.com/reports/investing-in-nigeria","ft.com/reports/investing-in-refugees","ft.com/reports/investing-in-romania","ft.com/reports/investing-in-tanzania","ft.com/reports/investing-in-turkey","ft.com/reports/investing-kenya","ft.com/reports/investing-kuwait","ft.com/reports/investing-mauritius","ft.com/reports/investing-mendoza","ft.com/reports/investing-new-ghana","ft.com/reports/investing-paraguay","ft.com/reports/investing-senegal","ft.com/reports/investing-ukraine","ft.com/reports/unlocking-yield","ft.com/uk-equities"])]),1,1,e.af_u(["properties","article","topics"],e.bsc([],["2kCL75bK","2mePzpfc","9wfYeSRz","BNCgKoRj","BVj0DRtK","Ej1JZEzk","F7DxyFNh","FdXT44j3","H4lDgYuq","IIXILnud","JL6zmPF6","QOtbGQgY","SiaWtIjC","TksNNM4g","XVJe608F","arJhFBkX","c2/zPu6U","kq+WptON","mR++N8ll","rdS/Nx13","tTiOn3iE","uKPETzkW","uR+DJpfs","zBe+lX5y"])),2,2,1,2,2,e.s,11,[380],2,["ftalphaville",381],2),18312:e.r(34,4,e.af_u(["properties","article","topics"],e.bsc([],["9UJ+j28l","FARrPrLv","FecnR8lS","H2eN3W1i","HVWg9VWN","LAsrVCHu","Vpn26+k/"])),4,6,11,["business leadership","enterprise","entrepreneur","innovation","leadership course","leadership training","management","thought leader"],4,4,1,["ft.com/reports/peoples-technology","ft.com/reports/uk-entrepreneurs","ft.com/reports/understanding-entrepreneurs","ft.com/reports/wealth-entrepreneurs"],6),18314:e.r(46,e.isp("financial_times_redshift","UPL001",!1,"18314"),2592e6,e.o([e.os(e.s,11,["boutique hotel","city break","city guide","luxury flight","spa",441,"vacation","weekend break"]),e.os(e.s,1,["ft.com/adventure-holidays","ft.com/city-breaks","ft.com/cycling-holidays",367,"ft.com/winter-sports"])]),1,1,e.cb(0,e.af_u(["properties","article","topics"],e.bsc([],["1OvFSi+H","4TwNZHI5","6nqr9oOn","9dT2jV1x","BO2HubCC","I4PFqnZZ","Ivt25G9k","JPItQaxe","WA2lAumo","efvN5oxQ","fjkfC+YQ","fxJATUa9","hEmn6/VD","iuN7tkpT","oxl6d+Qn","p2k2LStm","sSN5x0Zt","vW2QxDLj","xUQh8+sl","zAdV1ySA"])),e.ge(2),2),2592e6),18315:e.r(54,7776e6,e.af_u(["properties","article","topics"],e.bsc([],["18SKwEmC","3sykcaEl","HFxFIvGQ","L4qf0AnI","NQJb33OG","SlvE+hGm","qQqEWx+e"])),11,[323,"convertible bond","depressed bond prices"]),18317:e.r(18,2,[436]),18318:e.r(20,46),18320:e.r(103,2,376),18321:e.r(69,0,e.o([e.os(e.cx,15,["petrochemistry","mining industry","copper","gold","oil"]),e.os(e.cx,5,["Commodity",50]),e.ps(11,50),e.os(e.s,1,[356,"ft.com/copper","ft.com/gold","ft.com/oil"])]),3,3),18323:e.r(20,10),18356:e.r(46,e.cb(0,e.pc_(15,400),e.ge(1),1),2592e6,e.ps(0,"markets.ft.com"),5,5,e.cb(0,e.o([e.os(e.cx,5,[73,141,"ESG",89,121,446,"sustainable investment",425,"portfolio management",400,"low volatility","funds sector","fund managers","fund asset management",350,343,342,321]),e.os(e.s,11,["asset allocation",321,323,342,"esg",343,350,"fund",380,398,"oeics","portfolio managers","portfolio strategy","private bank","private client management","private clients",425,"socially responsible investing","sustainable investing","ucits","volatility",446,"wealth manager"])]),e.ge(5),5),2592e6),183957:e.q(e.ocqs([e.tw(e.cb(0,e.bsc_(1,["8frosWcs","I4F1yift","pa9oQi8x"]),e.ge(3),3),7776e6),e.tw(e.cb(0,e.pc_(5,192),e.ge(3),3),7776e6),e.tw(e.cb(0,e.pc_(5,207),e.ge(3),3),7776e6)])),184306:e.r(63,e.pc_(5,"Mobile payments"),18,"S_16091"),18437:e.r(58,4,4,5,5,5,5,["ft.com/pcwm2019",365],11,["fund selectors","stock broker","stock exchange","stockbroker","wealth"],["+pv51tI2","6Qevu5R4","Ax7lqAvw","CgHw0ANR","Ev8yJ5mk","is07BccS","kgX0Xo+h","md8KUnL+","tA9SmOGT","zyFabc2D"]),18439:e.r(103,0,423),18440:e.r(62,e.pc_(5,"Multi"),e.os(e.s,11,[397,398,"multiasset"]),"ftadviser.com/multi-asset/"),18445:e.q(e.ocqs([e.tw(e.cb(0,e.o([e.os(e.cx,16,["Moet Hennessy SNC","Moet Hennessy Diageo","LVMH Moet-Hennessy Louis Vuitton BV","LVMH Moet Hennessy Louis Vuitton SA","Champagne Louis Roederer SA","Justerini & Brooks Ltd","Justerini & Brooks Ltd.","Laurent Perrier SA",306]),e.os(e.s,1,[357,"ft.com/reports/destination-cape-town-winelands","ft.com/reports/wine-buying-investing","ft.com/wine"])]),e.ge(2),2),5184e6),e.tw(e.cb(0,e.af_u(["properties","article","topics"],e.bsc([],["0EPHOYv1","12lMF1f8","2b0YoDVA","DvAjrMTi","Hc2oBMlt","Mo4UCZQ4","NDnVdnyp","NbJZKQ7D","S5a9wSmq","TZA0heEn","WNt1PK3Y","ZNQ01gb1","aO2Kl4sZ","b7n2PILq","gO0Uksdp","lKOHXbMc","qXBKKtmv","sLg8e2b5","zT/lV1xu"])),e.ge(2),2),5184e6),e.cb(0,e.af_u(["properties","article","authors"],e.bsc([],["Em2GN5Ue","XSazqEyH","kbuemTUH"])),e.ge(3),3),e.tw(e.cb(0,e.af_u(["properties","article","people"],e.bsc([],["0acyP/7X","3q0l/Dry","Em2GN5Ue","I7yaevbB","KfqvO0s3","Pq1DC0M8","fRu8znrc","kbuemTUH"])),e.ge(1),1),7776e6)])),186124:e.r(68,"UPL122","186124"),186125:e.r(68,"UPL123","186125"),18731:e.r(68,"UPL005","18731"),18732:e.r(68,"UPL002","18732"),18733:e.r(68,"UPL003","18733"),18734:e.r(68,"UPL004","18734"),18735:e.r(31,0,e.y(2,413),e.os(e.s,1,["portfolio"])),18782:e.r(29,e.t),18790:e.r(93,"Business education"),18791:e.r(93,"Due Diligence"),187959:e.r(68,"UPL128","187959"),18797:e.r(68,"UPL008","18797"),188019:e.q(e.ocqs([e.tw(e.cb(0,e.os(e.s,1,["www.ft.com/shopping-gifts","www.ft.com/shopping-in-london","www.ft.com/shopping-in-paris","www.ft.com/the-interiors-edit"]),e.ge(3),3),7776e6),e.tw(e.cb(0,e.a([e.ref(2),e.af_u(["properties","article","topics"],e.bsc([],["Yg1R1VqQ","gzP+uSsi"]))]),e.ge(3),3),7776e6),e.tw(e.cb(0,e.a([e.ref(2),e.os(e.cx,7,["The Art of Fashion",137]),e.af_u(["properties","article","topics"],e.bsc([],["0Biwguij","FjDuYWVl","G7Tb5Yjb","gzP+uSsi"]))]),e.ge(3),3),7776e6),e.tw(e.cb(0,e.a([e.ref(2),e.af_u(["properties","article","authors"],e.bsc([],["//k7BDiV","FhmLeEQm","P75/Ep3b","TRkNROIp","VbC2mxHM","XSK4XYce","kdkAksTz","qRizIwk1","zvXs08ky"]))]),e.ge(3),3),7776e6),e.tw(e.cb(0,e.os(e.s,29,["gift guide","packing guide"]),e.ge(1),1),7776e6)])),18803:e.r(68,"UPL009","18803"),18805:e.r(35,"UPL011","18805","UPL012","18805","UPL013","18805"),18806:e.r(68,"UPL013","18806"),18807:e.r(30,e.isp("financial_times_redshift","UPL012",!1,"18807"),e.isp("financial_times_redshift","UPL013",!1,"18807")),188465:e.r(72,1,8,3267737209),190331:e.r(68,"UPL129","190331"),192761:e.r(28,[4733172425,4862888538,4862877003,4862661985]),192764:e.q(e.cb(1,e.pe(9,4769775117),e.ge(1),1)),193156:e.r(74,0,"https://channels.ft.com/en/rethink/"),193428:e.r(21,0,["0sCyZvIO"]),193476:e.r(72,1,8,3560235742),194701:e.r(68,"UPL131","194701"),194723:e.r(47,7776e6,7776e6,"UPL131","194723",e.o([e.os(e.s,1,["app.ft.com/stream/11379aab-8b8e-44c8-9153-10be6eaf3f50","www.ft.com/working-it"]),e.af_u(["properties","user","followedConcepts"],e.e_(["name"],"Working It"))]),1,e.a([e.pc_(7,310),e.ref(8)]),e.a([e.pe(22,"Newsletter"),e.pc_(7,310),e.ref(8)]),3,7,e.pe(28,"https://ep.ft.com/newsletters/subscribe?newsletterIds=62039b7ea31d6577a31f70df"),1,3),195323:e.r(89,[e.e_(["name"],"World Intellectual Property Organization"),e.e_(["name"],"Working from home"),e.e_(["name"],"US Department of Housing and Urban Development"),e.e_(["name"],"US Department of Homeland Security"),e.e_(["name"],"UK social housing"),e.y_(["name"],288),e.y_(["name"],287),e.y_(["name"],286),e.y_(["name"],285),e.e_(["name"],"UK care homes"),e.y_(["name"],244),e.e_(["name"],"Rosenberg Real Estate Equity Funds"),e.y_(["name"],237),e.e_(["name"],"Renting property"),e.e_(["name"],"Real Estate Opportunities Ltd"),e.y_(["name"],232),e.y_(["name"],229),e.y_(["name"],228),e.y_(["name"],227),e.y_(["name"],226),e.y_(["name"],225),e.y_(["name"],221),e.e_(["name"],"Poly Real Estate Group Co Ltd"),e.y_(["name"],198),e.y_(["name"],196),e.y_(["name"],191),e.y_(["name"],186),e.e_(["name"],"Invista Real Estate Investment Management Holdings PLC"),e.e_(["name"],"International Real Estate PLC"),e.e_(["name"],"Intellectual property"),e.e_(["name"],"ING Real Estate"),e.e_(["name"],"Hypo Real Estate Holding AG"),e.e_(["name"],"House and Home Unlocked"),e.y_(["name"],146),e.e_(["name"],"Home Office"),e.e_(["name"],"Home Depot Inc"),e.y_(["name"],132),e.e_(["name"],"Federal National Mortgage Association"),e.e_(["name"],"Federal Housing Finance Agency"),e.e_(["name"],"Federal Home Loan Mortgage Corp"),e.e_(["name"],"Federal Home Loan Banks"),e.e_(["name"],"Evergrande Real Estate Group"),e.y_(["name"],88),e.y_(["name"],49),e.e_(["name"],"Brookfield Property Partners LP"),e.e_(["name"],"Blackstone Real Estate Income Trust"),e.e_(["name"],"Blackstone Real Estate Advisors LP"),e.e_(["name"],"AXA Real Estate Ltd"),e.y_(["name"],18),e.y_(["name"],17),e.y_(["name"],16)]),195324:e.r(71,0,e.ref(40)),195325:e.r(89,[e.e_(["name"],"Water Services Regulation Authority UK"),e.y_(["name"],291),e.e_(["name"],"US Department of Justice"),e.e_(["name"],"UK press regulation"),e.y_(["name"],284),e.e_(["name"],"The University Of Law"),e.y_(["name"],267),e.e_(["name"],"Supreme Court US"),e.e_(["name"],"Supreme Court UK"),e.e_(["name"],"Solicitors Regulation Authority"),e.e_(["name"],"Prudential Regulation Authority"),e.y_(["name"],227),e.e_(["name"],"Permanent Court of Arbitration (PCA)"),e.e_(["name"],"Panel of Experts in International Law"),e.e_(["name"],"Office of Legal Counsel"),e.e_(["name"],"LLM - Master of Laws"),e.e_(["name"],"Legal Services Inc."),e.e_(["name"],"Legal services"),e.y_(["name"],171),e.e_(["name"],"Legal & General Group PLC"),e.e_(["name"],"Law Society of England & Wales"),e.e_(["name"],"Law Commission UK"),e.e_(["name"],"Law and Justice Party"),e.e_(["name"],"Law"),e.e_(["name"],"International Criminal Court"),e.e_(["name"],"International Court of Justice"),e.e_(["name"],"High Court of England & Wales"),e.y_(["name"],122),e.y_(["name"],102),e.e_(["name"],"European Court of Justice"),e.e_(["name"],"European Court of Human Rights"),e.e_(["name"],"European Court of Auditors"),e.y_(["name"],76),e.e_(["name"],"EU rule of law"),e.y_(["name"],75),e.y_(["name"],74),e.e_(["name"],"Antitrust Division of the US Department of Justice"),e.y_(["name"],8)]),195959:e.r(73,1),195960:e.r(73,4),19597:e.r(18,["isp_info","organization"],["college","school","university"]),196268:e.r(76,e.ref(40),1,1),196269:e.r(75,864e5,0,e.ref(40),1,1),19669:e.r(90,1,1,[e.e_(["name"],"World Health Organization"),e.e_(["name"],"Sarah Neville"),e.e_(["name"],"Sanofi SA"),e.e_(["name"],"Roche Holding AG"),e.e_(["name"],"Puma Biotechnology Inc"),e.e_(["name"],"Pharmaceuticals"),e.e_(["name"],"Pharmaceutical Research & Manufacturers of America"),e.e_(["name"],"Pharmaceutical NV"),e.e_(["name"],"Pfizer Inc"),e.e_(["name"],"Novartis AG"),e.e_(["name"],"National Health Service"),e.e_(["name"],"Merck & Co Inc"),e.e_(["name"],"Medical Technologies"),e.e_(["name"],"Medical Products"),e.e_(["name"],"Johnson & Johnson Co Inc"),e.e_(["name"],"Healthcare Support Services"),e.e_(["name"],"Health Tech"),e.e_(["name"],"Health Foundation"),e.y_(["name"],139),e.e_(["name"],"Global Pharmaceuticals"),e.e_(["name"],"Global Health"),e.e_(["name"],"GlaxoSmithKline PLC"),e.e_(["name"],"European Medicines Agency"),e.y_(["name"],71),e.e_(["name"],"Department of Health UK"),e.y_(["name"],25),e.e_(["name"],"Biopharma"),e.e_(["name"],"AstraZeneca PLC")]),196826:e.r(75,435456e5,1,e.os(e.e,8,[3186040478,3536402617]),1,1),197176:e.r(68,"UPL133","197176"),197394:e.q(e.ocqs([e.tw(e.cb(0,e.o([e.y(4,347),e.y(3,325),e.os(e.w,2,[396,427])]),e.ge(1),1),145152e5),e.scq(e.tw(e.cw(2,e.pc(["aggregations","SegmentEntry"],16843)),7776e6),e.tw(e.cw(3,e.pe(13,16843)),7776e6),e.ge(1))])),197395:e.r(66,2,376,18437,18437,18735,18735),197397:e.r(66,4,347,18264,18264,18238,18238),19902:e.r(43,5184e6,e.ps(1,"ft.com/companies/automobiles"),2,2,5184e6,5184e6,e.af_u(["properties","article","topics"],e.bsc([],["6mcSJNbE","OBebF+uK","artj/DiZ","hIk8KcQT","jToAt0jU","jl6oq6sw","kxZi3i97","lDjJl67d","q4SI8WB9","zZfoH4HI"])),2,e.af_u(["properties","article","organisations"],e.bsc([],["0+46vcQD","1T0QufWO","36Nol9DX","3zP6ub/J","55ZNuTdL","5KoU4LWM","6D58PVFg","86qiWVlb","9mlzJ1iI","AjHnf/JY","Aw7mpPP8","CQ7I5aLr","CTui7g0/","ClKaQR7S","DhsQDvoN","DmvUcB6q","E8fYGGEe","FYcGxKu1","GkR34jQS","Gx0F1vQZ","IHwLh4Gn","JBw5IHTb","LEL7gMLG","MYYpjjh2","O/AUOF+e","Ofo7GYkr","RONZPxl9","ReHL+fTR","Rns7phCI","TNHnsi3X","VLpMd7Cs","XQKAmL1/","ZG8b1Vlp","bHlJCx3T","cBi2yJye","d+lto0rL","d99jXZbL","dBWYnZWX","dLalMnkU","duut00yl","eVListJH","gaWoFusZ","h2CUQbiJ","hRwG6pXO","jKk/RdCj","jq9TiZdu","k3bNzaHV","k5D4a+pS","kKglqwpb","kXmAl7KG","ke7Y8pTo","kxE/L39Z","lYT7X6bY","ltgAVvMG","mPOXDXJp","nQT2f18F","nolswDVd","q4WSAhZ7","qCYs8HmF","rYLjzd55","rsSO9klX","swN90dms","uUvDak0m","wpyOAabR","xmpli56h","y8jHhOTk"])),2,2,2),199533:e.r(88,[e.e_(["name"],"Swatch Group SA"),e.e_(["name"],"Watches of Switzerland"),e.y_(["name"],302),e.y_(["name"],169),e.y_(["name"],301)]),199535:e.r(88,[e.e_(["name"],"Cars, bikes, planes and boats"),e.e_(["name"],"Rivian Automotive, Inc."),e.y_(["name"],188),e.y_(["name"],192),e.y_(["name"],240),e.y_(["name"],23),e.e_(["name"],"Lucid Motors"),e.y_(["name"],207),e.y_(["name"],129),e.y_(["name"],149),e.y_(["name"],144),e.y_(["name"],263),e.y_(["name"],114),e.y_(["name"],299),e.y_(["name"],51),e.y_(["name"],128),e.y_(["name"],197),e.y_(["name"],118),e.y_(["name"],273),e.y_(["name"],148),e.y_(["name"],70),e.y_(["name"],77)]),199538:e.r(88,[e.e_(["name"],"World economy"),e.e_(["name"],"Woodford Investment Management"),e.e_(["name"],"Wm Morrison Supermarkets PLC"),e.y_(["name"],303),e.e_(["name"],"Visual investigation"),e.y_(["name"],296),e.e_(["name"],"US Economy"),e.e_(["name"],"US economy"),e.e_(["name"],"Unexplained wealth orders"),e.e_(["name"],"UK public finances"),e.e_(["name"],"UK local government finance"),e.e_(["name"],"UK inward investment"),e.e_(["name"],"UK Finance"),e.e_(["name"],"UK Export Finance"),e.e_(["name"],"UK economy"),e.y_(["name"],281),e.e_(["name"],"Turkish economy"),e.y_(["name"],275),e.e_(["name"],"The Wealth Man"),e.e_(["name"],"Tesco Personal Finance PLC"),e.y_(["name"],259),e.y_(["name"],258),e.e_(["name"],"Spanish economy"),e.y_(["name"],251),e.e_(["name"],"South Korean business & finance"),e.e_(["name"],"South Korea Economy"),e.e_(["name"],"South African economy"),e.e_(["name"],"Social and environmental impact investment"),e.e_(["name"],"Slovakian business and finance"),e.e_(["name"],"Sharing economy"),e.y_(["name"],244),e.e_(["name"],"Scottish economy"),e.e_(["name"],"Schroder Investment Management Ltd"),e.e_(["name"],"Russian economy"),e.e_(["name"],"Russian business & finance"),e.e_(["name"],"Ruffer Investment Co Ltd"),e.e_(["name"],"Romanian business and finance"),e.y_(["name"],238),e.e_(["name"],"Retail trading"),e.e_(["name"],"RBC Capital Markets"),e.y_(["name"],233),e.y_(["name"],232),e.e_(["name"],"Qatar Investment Authority"),e.e_(["name"],"Public Investment Fund of Saudi Arabia"),e.y_(["name"],224),e.y_(["name"],223),e.e_(["name"],"Political risk and investment"),e.e_(["name"],"Personal Finance"),e.y_(["name"],209),e.e_(["name"],"Pakistan\'s economy"),e.e_(["name"],"OTC markets"),e.e_(["name"],"Nutmeg Saving & Investment Ltd"),e.e_(["name"],"Nordic Investment Bank"),e.e_(["name"],"NatWest Markets Ltd"),e.e_(["name"],"My Portfolio"),e.e_(["name"],"Morgan Stanley Investment Management Inc"),e.e_(["name"],"Middle Eastern finance"),e.e_(["name"],"Middle Eastern economy"),e.e_(["name"],"Mexican economy"),e.e_(["name"],"Masters in Finance"),e.y_(["name"],181),e.y_(["name"],180),e.e_(["name"],"Markets Briefing"),e.y_(["name"],179),e.e_(["name"],"Lindsell Train Investment Trust PLC"),e.y_(["name"],171),e.e_(["name"],"Kuwait Investment Authority"),e.e_(["name"],"Japanese economy"),e.e_(["name"],"Japanese business & finance"),e.e_(["name"],"Italian economy"),e.e_(["name"],"Islamic finance"),e.e_(["name"],"Irish economy"),e.e_(["name"],"Investors Chronicle"),e.y_(["name"],167),e.y_(["name"],166),e.e_(["name"],"Investment trusts"),e.y_(["name"],165),e.y_(["name"],164),e.e_(["name"],"Investment Association"),e.y_(["name"],163),e.e_(["name"],"Investing in Turkey"),e.e_(["name"],"Investing in Spain"),e.e_(["name"],"Investing in Nigeria"),e.y_(["name"],162),e.e_(["name"],"Investing in Central & Eastern Europe"),e.e_(["name"],"Investec PLC"),e.e_(["name"],"Investec Asset Management Ltd"),e.e_(["name"],"International Finance Corp"),e.e_(["name"],"International Commodity Trading"),e.e_(["name"],"Interactive Investor Services Ltd."),e.y_(["name"],156),e.y_(["name"],154),e.e_(["name"],"Indian economy"),e.e_(["name"],"Indian business & finance"),e.y_(["name"],152),e.e_(["name"],"HSBC Finance Corp."),e.e_(["name"],"HPS Investment Partners LLC"),e.e_(["name"],"Hong Kong economy"),e.y_(["name"],142),e.y_(["name"],136),e.e_(["name"],"Green Finance"),e.e_(["name"],"Greek economy"),e.y_(["name"],134),e.e_(["name"],"Global Markets"),e.e_(["name"],"Global Impact Investing Network"),e.y_(["name"],131),e.e_(["name"],"Gig economy"),e.e_(["name"],"German economy"),e.e_(["name"],"FTX Trading Ltd"),e.e_(["name"],"FT Wealth Management"),e.y_(["name"],96),e.y_(["name"],95),e.e_(["name"],"FT Markets video"),e.e_(["name"],"FT Investigations podcast"),e.e_(["name"],"FT Investigations"),e.e_(["name"],"French economy"),e.e_(["name"],"Franklin Templeton Investments"),e.e_(["name"],"Fortress Investment Group LLC"),e.e_(["name"],"Forex trading probes"),e.e_(["name"],"First Sentier Investors"),e.y_(["name"],102),e.e_(["name"],"Fidelity Investment Management Ltd"),e.e_(["name"],"Eurozone economy"),e.e_(["name"],"European Securities & Markets Authority"),e.e_(["name"],"European Investment Fund"),e.e_(["name"],"European Investment Bank"),e.e_(["name"],"European economy"),e.e_(["name"],"Euromoney Institutional Investor PLC"),e.e_(["name"],"EU economy"),e.y_(["name"],73),e.e_(["name"],"Enterprise Investment Scheme"),e.e_(["name"],"Emerging Portfolio Fund Research Inc"),e.e_(["name"],"Emerging Markets Investment"),e.y_(["name"],80),e.y_(["name"],79),e.e_(["name"],"Economy"),e.y_(["name"],69),e.y_(["name"],62),e.e_(["name"],"Czech Republic business & finance"),e.e_(["name"],"Cryptofinance"),e.e_(["name"],"Competition & Markets Authority"),e.e_(["name"],"Commonwealth Bank of Australia"),e.e_(["name"],"Columbia Threadneedle Investments"),e.e_(["name"],"CMC Markets PLC"),e.e_(["name"],"Chinese economy"),e.e_(["name"],"Chinese business & finance"),e.y_(["name"],43),e.y_(["name"],41),e.y_(["name"],42),e.y_(["name"],40),e.y_(["name"],38),e.y_(["name"],37),e.y_(["name"],36),e.e_(["name"],"Business investment"),e.e_(["name"],"Brazilian economy"),e.e_(["name"],"Barclays Global Investors Ltd"),e.e_(["name"],"AXA Investment Managers SA"),e.e_(["name"],"Aviva Investors"),e.e_(["name"],"Association for Financial Markets in Europe"),e.e_(["name"],"Asia-Pacific economy"),e.e_(["name"],"ARK Investment Management LLC"),e.e_(["name"],"Argentine economy"),e.e_(["name"],"Arab banking & finance"),e.y_(["name"],10),e.e_(["name"],"Americas finance"),e.e_(["name"],"Americas economy"),e.e_(["name"],"American Century Investments"),e.e_(["name"],"Ambitious Wealth"),e.e_(["name"],"Allianz Global Investors AG"),e.e_(["name"],"African economy"),e.e_(["name"],"Adventurous Investor")]),199539:e.r(88,[e.e_(["name"],"What is fintech"),e.e_(["name"],"Wearable technology"),e.e_(["name"],"Virtual and Augmented Reality"),e.e_(["name"],"United Technologies Corp"),e.e_(["name"],"Uber Technologies Inc"),e.e_(["name"],"Trump Media & Technology Group"),e.y_(["name"],275),e.e_(["name"],"Telecom Italia SpA"),e.y_(["name"],268),e.y_(["name"],267),e.y_(["name"],266),e.e_(["name"],"Tech Tonic"),e.y_(["name"],264),e.e_(["name"],"Tech Mahindra Ltd"),e.e_(["name"],"Tech blog"),e.e_(["name"],"Take-Two Interactive Software Inc"),e.e_(["name"],"Taiwan Semiconductor Manufacturing Co Ltd"),e.e_(["name"],"Spotify Technology SA"),e.e_(["name"],"Slack Technologies Inc"),e.e_(["name"],"Satellites"),e.e_(["name"],"Renaissance Technologies"),e.e_(["name"],"Raytheon Technologies"),e.e_(["name"],"Quantum technologies"),e.y_(["name"],229),e.e_(["name"],"Personal Technology"),e.e_(["name"],"Oxford Nanopore Technologies"),e.y_(["name"],203),e.e_(["name"],"NSO Group Technologies"),e.y_(["name"],194),e.e_(["name"],"Military technology"),e.y_(["name"],187),e.y_(["name"],155),e.e_(["name"],"Information Technologies"),e.e_(["name"],"Infineon Technologies AG"),e.e_(["name"],"Imagination Technologies Group PLC"),e.e_(["name"],"Huawei Technologies"),e.e_(["name"],"FT Tech Hub"),e.e_(["name"],"Foxconn Technology Group"),e.e_(["name"],"Fitbit Inc"),e.e_(["name"],"Fintech Limited"),e.y_(["name"],104),e.y_(["name"],76),e.y_(["name"],78),e.e_(["name"],"Digital politics"),e.e_(["name"],"Digital Media"),e.e_(["name"],"Digital Luxury Group"),e.e_(["name"],"Digital health"),e.y_(["name"],69),e.e_(["name"],"Digital currencies"),e.e_(["name"],"Dell Technologies Inc"),e.y_(["name"],63),e.e_(["name"],"Cyberspace Administration of China"),e.e_(["name"],"Cybersecurity and Infrastructure Security Agency"),e.y_(["name"],59),e.y_(["name"],58),e.e_(["name"],"Cyber Intelligence"),e.y_(["name"],26),e.e_(["name"],"Bitcoin"),e.y_(["name"],24),e.e_(["name"],"BCG Digital Ventures"),e.y_(["name"],12),e.e_(["name"],"Arm Technology China"),e.y_(["name"],2),e.y_(["name"],1),e.e_(["name"],"#techFT"),e.e_(["name"],"#techAsia")]),199540:e.r(88,[e.y_(["name"],267),e.y_(["name"],266),e.y_(["name"],203),e.y_(["name"],187),e.y_(["name"],155),e.y_(["name"],76),e.y_(["name"],78),e.y_(["name"],63),e.y_(["name"],24),e.y_(["name"],12),e.y_(["name"],2),e.y_(["name"],1)]),20008:e.q(e.ocqs([e.scq(e.tw(e.cw(2,e.pc(["aggregations","SegmentEntry"],17173)),7776e6),e.tw(e.cw(3,e.pe(13,17173)),7776e6),e.ge(1)),e.tw(e.cb(0,e.os(e.s,0,[319,450]),e.ge(1),1),7776e6),e.tw(e.cb(0,e.o([e.os(e.cx,5,[312,276,260,174,176,175,"Watches and Jewellery",302,"FT Weekend",101,98,"Art Basel",13]),e.os(e.s,11,["art basel","fashion week","ft weekend","global travel"])]),e.ge(3),3),7776e6),e.tw(e.cb(0,e.os(e.s,1,["ft.com/art-of-fashion","ft.com/arts",355,"ft.com/fashion-shows",357,361,366,367]),e.ge(3),3),7776e6),e.tw(e.cb(4,e.os(e.e,23,[5366909954,5508873966,4858349171,5342826601,4930771836,5297489191,5620627603,4823770701,5123133816,4509060898,4865351256,5475214538,4916804777,5622576658,5104571993,4853829738,4821286752,4743267505,4824899484,5046930611,17291809,4834652375,21148129,208772329,16383649,4772240387,4731334718,4787756624]),e.ge(1),1),145152e5),e.cb(0,e.af_u(["properties","user","followedConcepts"],e.o([e.e_(["name"],"Lvmh Couture International"),e.e_(["name"],"LVMH"),e.y_(["name"],276),e.y_(["name"],176),e.y_(["name"],174),e.y_(["name"],175),e.y_(["name"],172),e.y_(["name"],169),e.y_(["name"],301),e.y_(["name"],302)])),e.ge(1),1),e.isp("financial_times_redshift","UPL065",!1,"20008"),e.isp("financial_times_redshift","UPL107",!1,"20008"),e.isp("financial_times_redshift","UPL063",!1,"20008")])),200508:e.r(27,6778279596),200511:e.r(27,6778280304),201371:e.r(68,"UPL134","201371"),202584:e.r(107,[6795101237,6791680212,6795101246,6791680077,6795101234,6791680203]),20283:e.r(56,2,2,e.ps(1,"https://www.ft.com/house-home"),1,1,["25ZCCAXx","L4k9wc43","TcQIZm6R","WbA1NnIR","l9pto/aI","sEC0F5uL","t0oEQROr"]),203239:e.r(107,[6768716396,6767521654]),20431:e.r(26,1),20469:e.r(25,1,"https://app.ft.com/"),20494:e.r(25,1,"https://iberdrola.ft.com"),205164:e.q(e.cb("GamLogSlotClicked",e.a([e.pe(9,6439705427),e.tg(17289936e5)]),e.ge(1),1)),205165:e.r(29,e.a([e.pe(9,6439705427),e.tg(17289936e5)])),20531:e.r(68,"UPL016","20531"),20534:e.r(68,"UPL019","20534"),20645:e.r(21,31,["YUvmEAbC","cztNj/Y6","nFmv80Di"]),206452:e.r(28,[6713350219,6713349565,6713350051,6713350027,6711332832,6714558926,6714558914,6711332817,6713349340,6713349325,6713349295,6713349274,6711333084,6713349109,6713349097,6711333078,6713349001,6713348833,6713348818,6713348800,6713347579,6713348536,6713345737,6713348398,6711332283,6713345683,6711332103,6713347141,6713347117,6711332058,6711331917,6711331908,6711331893,6711331887,6714557957,6713348146,6713348113,6713348074,6713347912,6713347867,6713347852,6713347834,6713347678,6713347663,6711331596,6714557894,6711331401,6711331344,6711331191,6711331137,6713346940,6713346928,6713346907,6714557723,6686017606,6685986391,6685986886,6686964908,6686965370,6683951463,6685985488,6686964413,6685984963,6685983535,6683960388,6613353002,6613353248,6612639748,6613352804,6610544799]),20646:e.r(21,31,["9AEkRlJ3","QextCoRY","dCBpfw6k","ps6aaSAl","xBpBQsev"]),206485:e.r(28,[6715426231,6713461912,6713439345,6713439315,6713439309,6713439303,6713439285,6713439012,6713438877,6711456708]),20714:e.r(35,"UPL037","20714","UPL038","20714","UPL039","20714"),20715:e.r(35,"UPL040","20715","UPL041","20715","UPL042","20715"),207153:e.r(72,1,8,3592256795),207904:e.r(28,[6788421512,6788418617]),207935:e.r(72,1,8,3555843354),20833:e.r(30,e.scq(e.cw(2,e.pc(["aggregations","SegmentEntry"],17124)),e.cw(3,e.pe(13,17124)),e.ge(1)),e.scq(e.cw(2,e.pc(["aggregations","SegmentEntry"],17183)),e.cw(3,e.pe(13,17183)),e.ge(1))),208372:e.q(e.tw(e.cb(0,e.af_u(["properties","user","followedConcepts"],e.o([e.e_(["name"],"Yen"),e.y_(["name"],303),e.y_(["name"],289),e.e_(["name"],"US interest rates"),e.y_(["name"],290),e.e_(["name"],"UK tax"),e.y_(["name"],287),e.y_(["name"],285),e.e_(["name"],"UK interest rates"),e.y_(["name"],283),e.y_(["name"],280),e.y_(["name"],274),e.e_(["name"],"Tax returns"),e.e_(["name"],"Tax Inversion"),e.e_(["name"],"Tax evasion and avoidance"),e.e_(["name"],"Tax"),e.y_(["name"],259),e.y_(["name"],258),e.e_(["name"],"Spread betting"),e.y_(["name"],250),e.e_(["name"],"Savings accounts"),e.e_(["name"],"Banking & Savings"),e.y_(["name"],238),e.y_(["name"],236),e.e_(["name"],"Remortgaging"),e.e_(["name"],"Renminbi"),e.y_(["name"],228),e.y_(["name"],225),e.y_(["name"],224),e.y_(["name"],222),e.y_(["name"],221),e.e_(["name"],"Pound Sterling"),e.y_(["name"],218),e.y_(["name"],214),e.y_(["name"],196),e.e_(["name"],"Negative interest rates"),e.y_(["name"],191),e.e_(["name"],"Money laundering"),e.y_(["name"],178),e.e_(["name"],"Lenders"),e.e_(["name"],"Japanese government bonds"),e.y_(["name"],166),e.y_(["name"],164),e.y_(["name"],159),e.y_(["name"],157),e.e_(["name"],"Income tax"),e.y_(["name"],143),e.e_(["name"],"Help to buy"),e.e_(["name"],"Green bonds"),e.y_(["name"],122),e.y_(["name"],121),e.y_(["name"],119),e.e_(["name"],"Fixed-rate loans"),e.e_(["name"],"First-time buyers"),e.e_(["name"],"Financial transaction tax"),e.e_(["name"],"Final salary schemes"),e.y_(["name"],89),e.y_(["name"],87),e.e_(["name"],"Euro"),e.y_(["name"],83),e.y_(["name"],82),e.e_(["name"],"US dollar"),e.e_(["name"],"Current accounts"),e.e_(["name"],"Currency havens"),e.y_(["name"],53),e.e_(["name"],"Commodities Trading"),e.y_(["name"],50),e.y_(["name"],39),e.y_(["name"],27),e.e_(["name"],"Bank of England"),e.e_(["name"],"Autumn Statement"),e.y_(["name"],15),e.y_(["name"],9),e.e_(["name"],"Age of the ETF")])),e.ge(4),4),2592e6)),209192:e.r(68,"UPL137","209192"),209455:e.q(e.acqs([e.cb(0,e.ref(8),e.ge(1),1),e.ocqs([e.isp("financial_times_redshift","UPL117",!1,"209455"),e.isp("financial_times_redshift","UPL008",!1,"209455"),e.isp("financial_times_redshift","UPL137",!1,"209455"),e.isp("financial_times_redshift","UPL118",!1,"209455"),e.tw(e.cb(0,e.af_u(["properties","user","followedConcepts"],e.o([e.y_(["name"],214),e.y_(["name"],284),e.y_(["name"],267),e.y_(["name"],209),e.y_(["name"],200),e.y_(["name"],189),e.y_(["name"],159),e.y_(["name"],122),e.y_(["name"],76),e.y_(["name"],75),e.y_(["name"],74),e.y_(["name"],54),e.y_(["name"],50),e.y_(["name"],44),e.y_(["name"],39),e.y_(["name"],8),e.y_(["name"],313),e.y_(["name"],296),e.y_(["name"],291),e.y_(["name"],254),e.y_(["name"],233),e.y_(["name"],222),e.y_(["name"],185),e.y_(["name"],181),e.y_(["name"],180),e.y_(["name"],179),e.y_(["name"],165),e.y_(["name"],141),e.y_(["name"],131),e.y_(["name"],124),e.y_(["name"],95),e.y_(["name"],91),e.y_(["name"],102),e.y_(["name"],82),e.y_(["name"],80),e.y_(["name"],79),e.y_(["name"],66),e.y_(["name"],65),e.y_(["name"],62),e.y_(["name"],57),e.y_(["name"],55),e.y_(["name"],26),e.y_(["name"],25)])),e.ge(1),1),6048e5),e.tw(e.cb(0,e.o([e.os(e.cx,7,[95,91,180]),e.os(e.cx,16,["British Private Equity & Venture Capital Association","Aim UK",43,"BATS Global Markets Inc"]),e.os(e.cx,5,[214,284,267,209,200,189,159,122,76,75,74,54,50,44,39,8,313,296,291,254,233,222,185,181,180,179,165,141,131,124,95,91,102,82,80,79,66,65,62,57,55,26,25])]),e.ge(4),4),24192e5)])])),210673:e.r(72,1,8,3574646853),21070:e.r(2,[e.tw(e.cb(0,e.os(e.w,2,[439,431,396,384,377,438,427,348]),e.ge(1),1),7776e6),e.tw(e.cb(0,e.os(e.w,3,[338,444,403,393,401,335,325]),e.ge(1),1),7776e6),e.tw(e.cb(0,e.os(e.w,4,[377,391,383,385,347,354,322,314]),e.ge(1),1),7776e6),e.tw(e.cb(0,e.a([e.y(2,413),e.af_u(["properties","article","topics"],e.bsc([],["57mobZlL","9qiyKjXM","B4/T2sYc","is07BccS","zyFabc2D"]))]),e.ge(1),1),7776e6)],e.isp("financial_times_redshift","UPL015",!1,"21070"),e.scq(e.tw(e.cw(2,e.pc(["aggregations","SegmentEntry"],17138)),7776e6),e.tw(e.cw(3,e.pe(13,17138)),7776e6),e.ge(1))),21267:e.r(25,1,"https://ftalphaville.ft.com"),213839:e.r(72,1,8,3543322472),214156:e.r(72,1,8,3668751582),214858:e.r(72,1,8,3566843669),21535:e.r(37,e.af_u(["properties","article","categories"],e.bsc([],["JLB3aR+Z","REwe/pde","XJS53UbR","YAhXY/sP"])),4,4,e.a([e.os(e.cx,5,[104,268,266]),e.af_u(["properties","article","topics"],e.bsc([],["hBM82LWr","oCV5ZYMw","tArKuUTf"]))]),4,e.af_u(["properties","article","topics"],e.bsc([],["+4Sjhj+z","PYSovclG","Y1McLAJp","Yg1R1VqQ","ecKGFycg","jYjmjn+i","l/IULLtx","oHyeLR4/","qrBJgJQJ","w5d54Dsd"])),4,4,4),21538:e.r(48,e.tw(e.cb(0,e.os(e.s,1,["www.ft.com/ftfm/responsible-investing","www.ft.com/moral-money"]),e.ge(4),4),24192e5),e.cb(0,e.a([e.os(e.cx,5,["Sustainable capitalism",261]),e.af_u(["properties","article","topics"],e.bsc([],["/tiFUCY7","7p/w2hqf","OQdFW+HM","XeZK/wli","aJYlJ65k","bXGcWjkL","chBLUqCH","mSluE1dZ","yWjX7jTx"]))]),e.ge(4),4),24192e5,24192e5,24192e5,24192e5,"UPL009","21538",e.a([e.ref(33),e.os(e.cx,18,["r07s","S_6875","r07b",421,420])]),4,e.a([e.os(e.cx,15,["investing","bank","finance","industry financing"]),e.ref(33)]),4,4,e.a([e.os(e.cx,5,[102,296,166,162]),e.ref(33)]),4,4,4,4,4,["3sykcaEl","9jZEMJAj","Gm3fFzAc","T7dVJXJo","ThN2XCap"]),21540:e.q(e.tw(e.cb(0,e.o([e.os(e.cx,16,["Pacific Coast Energy Co. LP","Harbour Energy","Mariner Energy LLC","Endeavor Energy Corp.","High Velocity Alternative Energy Corp.","Shell WindEnergy","Synenco Energy","Irvine Energy","Athlon Energy Inc","Bois d\'Arc Energy","Oando Energy Resources","Bosch Solar Energy AG","Evolve Energy Ltd.","Defense Logistics Agency Energy","New Energy & Industrial Technology Development Organization","BlueCreek Energy","Atomic Energy Society of Japan","Shanxi Energy Industries Group Ltd.","Naked Energy Ltd.","Transeuro Energy Corp.","PetroLatina Energy PLC","NextEnergy Corp.","Stirling Energy Systems","FG Energy SRL","Energy Research Centre of the Netherlands","NextEra Energy Resources LLC","Archimede Solar Energy SRL","Sanyo Energy USA Corp.","First Energy Oman","DC Energy LLC","Deep Gulf Energy LP","Ontelaunee Energy Center","RWE Energy AG","Institute for Energy Research","Laricina Energy Ltd.","Nippon Renewable Energy KK","Eurus Energy Holdings Corp.","Martin Energy Trading LLC","PowerShares Global Nuclear Energy Portfolio","ITI Energy Ltd.","Albian Sands Energy","Pakistan Atomic Energy Commission","World Council for Renewable Energy","The Energy Saving Trust Ltd.","Bear Energy LP","Industrial Energy Ltd.","Gazprom Global Energy Solutions Ltd.","Grove Energy","Korea Energy Economics Institute Foundation","Western Energy Alliance","Atlas Energy Resources LLC","Platinum Energy LLC","Fisterra Energy SL","Caiman Energy LLC","Cobalt Energy Ltd.","Gateway Energy Services Corp.","New Energy Fund","AGR Energy Ltd. No. 1","International Association for Energy Economics","The Energy Institute (United Kingdom)","Direct Energy Source LLC","Apache Energy Limited","BA Energy","Eurogas Corp (Old name of Dundee Energy Ltd)","Pacific Energy Resources","Elko Energy","Prime Energy Development Ltd.","BDI - BioEnergy International AG","Express Energy Services Operating LP","Australian Institute of Energy","Business Energy Solutions Ltd.","Northern Tier Energy LP","Sound Energy","Environmental Energy Technologies","GDF Suez Energy Europe & International","Enhance Energy","Bridge Energy ASA","Connected Energy Corp.","Miller Energy Resources Inc","Ardenham Energy Ltd.","Mytrah Energy Ltd","Endeavour Energy Netherlands BV","Talisman Energy Resources Ltd.","International Solar Energy Society","Advanced BioEnergy GP LLC","SUEZ Energy North America","Supporters of Nuclear Energy","Honiton Energy Ltd.","Chosun Energy Pte Ltd.","Tamar Energy Ltd.","Better Energy Systems","Energy Matters Pty Ltd.","Miller Energy LLC","Ukrainian Energy Register OJSC","Energy Saving Trust Foundation","Red Cap Energy Pty Ltd.","Texas Energy Future Holdings LP","Cairn Energy USA LLC","Starcrest Nigeria Energy Ltd.","NEC Energy Solutions","Directed Energy Professional Society","Shandong Energy Group Co.","Spartan Energy Corp.","Atomic Energy Research Establishment","Lime Energy Co.","Asia Pacific Energy","ACF Renewable Energy Ltd.","Palladian Energy Ltd.","Energybuild Group Ltd.","Relentless Energy Corp.","Global Natural Energy PLC","NiSource Energy Partners LP","China Energy Research Society","Cutuco Energy Central America","Neconde Energy Ltd","Liwa Energy Ltd.","Texas Retail Energy LLC","Premier Renewable Energy Fund Ltd.","Pentagon Energy LLC","Avatar Energy Pty Ltd.","Japan Energy Corp.","Talen Energy Corp.","Enbridge Energy Management LLC","FirstEnergy Solutions Corp.","National Modern Energy Holdings Ltd.","Lithium Energy Japan KK","Citizens for Affordable Energy","Korean Peninsula Energy Development Organization","Energy Regulatory Commission","Chinese Wind Energy Association","Aurora Energy Ltd. (New Zealand)","Koch Energy Trading","Harbour Energy LP","Alberta Energy Regulator","Atomic Energy Power Corp.","Polish Wind Energy Association","Ice Energy Holdings","PLDT Communications & Energy Ventures Inc","Reenergy Group Plc","Rex Energy Corp.","Challenger Energy Corporation","Arawak Energy Corporation","Energy Star","China Energy Ltd.","SHV Energy Limited","Triana Energy LLC","China New Energy Chamber of Commerce","Ocean Energy Inc.","Coastal Energy Corp.","GE-Hitachi Nuclear Energy Holdings LLC","Chevron Energy Solutions Co.","Magma Energy Corp.","Constellation Energy Nuclear Group LLC","OptimumNano Energy Co.","Nuclear Energy Agency (NEA)","Growth Energy","Marlin Energy LLC","Consumer Energy Alliance","Amber Energy Inc.","Mariner Energy","Fourth Partner Energy Pvt Ltd.","Emirates Nuclear Energy Corp.","Mercuria Energy America","China Pingmei Shenma Energy & Chemical Group Co.","Asia Energy","ARC Energy Pty Ltd.","Proven Energy Ltd.","STE (Clean Recycling & Energy) Plc","Summit Energy Co. LLC","Concord Energy Inc.","Covanta Energy Inc.","Alberta Energy Co. Ltd.","BioTherm Energy (Pty) Ltd.","Wave Energy Scotland Ltd.","Redbank Energy Ltd","Direct Energy LP","Chemoil Energy Ltd.","Front Range Energy LLC","Ross Smith Energy Group Ltd.","Braemar Energy Ventures","Navetas Energy Management Ltd.","Panoche Energy Center LLC","LG&E Energy Corp.","China Guangdong Nuclear Energy Development Co.","American Energy Group Inc.","CQ Energy Canada Partnership","MAN Energy Solutions Schweiz AG","PrimeWest Energy Trust","Wells Fargo Energy Group","RPM Energy LLC","Hanwha Energy Corp.","Hess Energy Trading Co LLC","SHV Energy NV","Mesa Energy Investment Partners LLC","Energy Ventures Inc.","Japan Renewable Energy Foundation","Energy Performance","Evergreen Energy","Ranhill Energy Sdn Bhd","The Consilience Energy Advisory Group Ltd.","CPS Energy Resources Plc","ONGC Mittal Energy Ltd.","Adira Energy Corp.","Richmond Energy Partners Ltd.","Shell Energy Australia Pty Ltd.","Eagle Rock Energy Partners L.P.","Energy America LLC","EDF Energy Renewables Ltd.","Bolivar Energy Corp.","Honiton Energy (Baotou) Co. Ltd.","Himin Solar Energy","Energy Watch Pty Ltd.","Moorland Energy Ltd.","BP Energy Co.","Energy Policy Research Foundation","Lambert Energy Advisory Ltd","Peoples Energy Inc.","Riverstone Energy","redT Energy","Black Gold Energy LLC","Barrick Energy","Cordillera Energy Partners LLC","NGS Energy LP","Global Energy Decisions LLC","Energy Intelligence Group","Energy Management Inc.","Shoreline Energy International Ltd.","Energy Northwest","Empire Energy Inc.","EDF Energy Nuclear Generation Ltd.","Oliver Wyman Energy Group Ltd.","Caelus Energy Alaska LLC","Fulcrum BioEnergy","Dominion Energy Virginia","IC Green Energy Ltd.","Emerging Energy Research LLC","88 Energy Ltd","WEMS Energy Centre Ltd.","Bow Energy Pty Ltd.","Infinity Bio-Energy Ltd","Jordan Atomic Energy Commission","Ice Energy Technologies Ltd.","Energy XXI Gulf Coast","MarkWest Energy GP LLC","Geothermal Energy Association","Global Energy Solutions Corp. Ltd.","Bidtimes PLC (Old name of PowerHouse Energy Group PLC)","UMC Energy PLC","Addax Bioenergy Sierra Leone Ltd.","Patterson-UTI Energy Inc.","Moncada Energy Group SRL","OMV Maurice Energy Ltd.","India Energy Forum","Energy Market Authority","Energy Technology","British Institute of Energy Economics","Platinum Energy Solutions","Spectra Energy Partners","American Energy Innovation Council","John Deere Wind Energy","Energy Transportation LLC","Westcoast Energy","Integrated Energy Systems Ltd.","Bioenergy","Pioneer Southwest Energy Partners USA LLC","Amec Wind Energy Ltd.","Fission Energy Corporation","Atomic Energy Corp.","Irish Wind Energy Association","Tricon Energy Ltd.","First Energy Bank BSC","TAG Energy Solutions Ltd.","BreitBurn Energy Corp.","Stone Energy Corp","Clean Energy Capital LLC","PT Paiton Energy Company","Duncan Energy Partners LP","Solid Energy","Consumers Energy Co.","AmerGen Energy Inc.","Warwick Energy Ltd","Vivo Energy Investments BV","Toro Energy Inc.","EURATOM - European Atomic Energy Community","Energy Studies Institute","Nantenergy","Energy Research Partnership","Canamens Energy Ltd.","China Energy Conservation & Environmental Protection Group Co.","CH Energy Group","Essential Energy Ltd.","RAO Energy System of East PJSC","TAC Energy","RPS Energy Ltd.","Energy Exchange Corp.","Innovative Energy Solutions","GWM Renewable Energy SpA","Country Energy","UniSource Energy Corp","Energy Resources Institute","Energy Cranes LLC","Dubai Energy","National Energy Regulator of South Africa","Rockyview Energy","Penn West Energy Trust","Babcock & Brown Wind Energy SRL","KSK Emerging India Energy Fund Ltd.","Columbia Energy & Environmental Services","GE-Hitachi Nuclear Energy International LLC","National Renewable Energy Laboratory","BreitBurn Energy Partners LP","Leyshon Energy Ltd","Southcross Energy LLC","AWS Ocean Energy Ltd.","GCL Poly Energy Holdings Ltd","Urban Green Energy","Opus Energy Group Ltd.","Clean Energy Council","Zayed Future Energy Prize","RusEnergy Agency","Octopus Energy","Rio Tinto Energy","Shallow Water Energy Security Coalition","Newco Energy Acquisition Holdings LLC","Utilita Energy Ltd","Energy Biosciences Institute","AGR Energy AS","Energy Research Inc.","Renewable Energy Corp.","Baker Energy","Greenergy BVBA","Energy Fuels Inc.","Flint Energy Services Ltd.","United Energy Systems of Ukraine","China Renewable Energy Society","Chinese Renewable Energy Industries Association","Bow Valley Energy","Badlands Energy","FACTS Global Energy","Online Energy","Global Marine Energy Plc","Global Bioenergy Partnership","Shenzhen Energy Environmental Protection Co. Ltd.","Energyaustralia","China Wind Energy Association","Pacific Energy Partners LP","Puget Energy Inc.","Shanghai Chaori Solar Energy Science & Technology Co Ltd","CIC Energy Corp","Ur-Energy","Energy Partners LLC (Indiana)","Aquion Energy","Alon USA Energy Inc","Mirant Energy Trading","Pavilion Energy Corp","The Energy Security Leadership Council","GE Energy Rentals","Energy Services Group LLC","Oriental Energy Resources Ltd","SDX Energy","Mitchell Energy & Development Corporation","Copano Energy LLC","Pearl Energy Ltd","Strategic Energy LLC","Peabody Energy Australia Pty Ltd.","Principle Energy Ltd.","Provident Energy Ltd","National Renewable Energy Centre Ltd.","Green Mountain Energy Company","STX Energy Co.","Reykjavik Energy Invest","Crosstex Energy Inc.","New Energy Company","Energy Infrastructure Merger Corp.","World Wind Energy Association","Sinotech Energy Ltd","Energy Technologies (Ukraine)","Atomic Energy Organization of Iran","Alternative Energy Ltd","The Energy & Minerals Group LP","Fieldwood Energy LLC","Spirit Energy Corporation","Wham Energy","Japan Atomic Energy Agency","Prometheus Energy Co","SouthWest Energy","Baoding Tianwei Yingli New Energy References Co. Ltd.","Energy Technique PLC","Black Elk Energy LLC","Independent Energy Holdings PLC","Sunnova Energy Corp.","Future Energy Pty Ltd.","BizzEnergy Ltd.","Siemens Energy","Standard Renewable Energy Group LLC","Greenergy International Ltd.","Encore Energy Partners LP","Panasonic EV Energy Co. Ltd.","Hess Energy Trading Co. (Singapore) Pte Ltd.","FT Energy","National Energy Technology Laboratory","Energy Bank Sao Tome & Principe","Flint Energy Services","Industry & Energy","South Korea Ministry of Commerce","Energy Partners Inc.","NOF Energy Ltd","Atlantic Energy Inc.","Anzon Energy","GeoSouthern Energy Corp.","China Power New Energy Development Co.","Hunting Energy Services (Canada) Ltd.","Cambridge Energy Research","Athlon Energy LP","ICAP Energy LLC","Phoenix Energy Holdings Ltd.","Energy Financing Team Ltd.","Recurrent Energy","VTTI Energy Partners LP","Forum Energy PLC","Nexus Energy Ltd","Solace Renewable Energy GmbH","Ingenious Clean Energy Income Ltd.","Our Energy Policy Foundation","SSP Energy Ltd.","MD America Energy LLC","Resolute Energy Corp","California Energy Commission","Sempra Energy Trading Corp.","Alinta Energy Group (old name of Redbank Energy Ltd)","Beijing Energy Investment Holding Co.","Centurion Energy","Climate Energy Ltd.","Cornwall Energy Associates Ltd","Drillsearch Energy Ltd.","Schuepbach Energy International LLC","Inspirit Energy Ltd.","Darley Energy Plc","The Texas Clean Energy Project LLC","Abaco Energy Technologies LLC","South Korea Ministry of Trade","Rice Energy","IOT Infrastructure & Energy Services Ltd.","Renovalia Energy SA","Quantum Energy Partners LLC","Energy Developments Limited","Minimise Energy Ltd.","Global Energy Management Institute","Duke Energy Renewables","Airvolution Energy Ltd.","Atlas Energy","Composite Energy Ltd.","Eco Energy Co.","Greenergy AB","Energy Companies","Hilcorp Energy Co","Emerging Energy & Environment LLC","Seventy Seven Energy","Spirit Energy LLC","Energy East Corp.","Houston Energy Partners","Dolphin Energy Ltd.","Germany Ministry of Economic Affairs & Energy","Energy Intelligence","Sunverge Energy","Pure Energy Resources Pty Ltd.","Kazenergy","WSP Future Energy Ltd.","Hudson Capital Energy LLC","Arcadia Energy Suisse SA","Longford Energy","Tidal Energy Marketing (U.S.) LLC","Green Energy Corp.","Energy Power Resources Ltd.","Lincoln Clean Energy LLC","Kuwait Energy Plc","All Energy Corp.","American Energy Capital Partners LP","Sarawak Energy Bhd.","Clean Energy Partners LLP","RAAM Global Energy Co.","Caspian Energy Group JSC","Pavilion Energy Pte Ltd.","Independent Energy Inc.","Google Energy Pvt Ltd.","Blue Energy Co","Forte Energy NL","London Energy Brokers\' Association","Canadian Energy Research Institute","Korea Atomic Energy Research Institute","German Renewable Energy Federation eV","National Energy Commission","EnergySource LLC","Murray Energy Corp","Continuum Wind Energy Pte Ltd.","M&C Energy Group Ltd.","Flow Energy Ltd.","Accenture Global Energy","Bandanna Energy Ltd.","Spark Energy LLC","Energy Retail Association","Pure Energy Corp.","Viva Energy Australia Group Pty Ltd.","Dominion Energy Inc.","United States Energy Association","Argent Energy Ltd.","Ncondezi Energy Ltd","Bluebird Energy PLC","Texas Alliance of Energy Producers","Greenpark Energy Ltd.","Tokamak Energy Ltd.","Positive Energy","MarkWest Energy Partners LP","Energy Advantage","Dune Energy","Integrys Energy Group Inc","Rio Tinto Energy America","American Eagle Energy Corp.","Maple Energy PLC","Murray Energy Corp.","Stratic Energy Corp.","MIT Energy Initiative","National Energy Group Inc","Rice Energy LP","Enbridge Energy Partners LP","Essar Energy Investment Ltd.","European Federation of Energy Traders","Riverstone Energy LP","DCC Energy Ltd. (Ireland)","Excelerate Energy LP","Green Energy (UK) Plc","Clarke Energy Ltd","Van Dyke Energy Co.","BrightSource Energy Inc","Austin Energy","Institute for 21st Century Energy","Argent Energy Trust","Renova Energy PLC","Jubilant Energy NV","Invenergy LLC","Zenergy Power PLC","RRI Energy Inc","Atomic Energy Regulatory Board","Scottish & Southern Energy Power Distribution Ltd.","Gintech Energy Corp.","Celtic Energy Ltd.","Pure Energy Resources Inc.","APR Energy LLC","Offshore Renewable Energy Catapult","Welspun Energy Ltd","UTS Energy","Wisconsin Energy Corp","MMC Energy Inc.","Energy Economics","Global Energy","Renewable Energy Systems Limited","LGO Energy PLC","BP Alternative Energy Ltd.","National Commission on Energy Policy","TECO Energy Inc","Caparo Energy Ltd (old name of Mytrah Energy Ltd)","Dominion Energy South Carolina","Gibson Energy ULC","Integral Energy Management LLC","Asia Coal Energy Ventures Ltd.","Parnon Energy Inc","Pira Energy Group","NextEnergy Capital Ltd.","Blueknight Energy Partners GP LLC","FirstEnergy Capital LLP","EEW Energy from Waste GmbH","GE Nuclear Energy","United Energy AS","Oxis Energy Ltd.","BlackRock New Energy Investment Trust PLC","Samruk-Energy JSC","Solartech Energy Corp","Third Energy Offshore Ltd.","Kuwait Energy Co. KSCC","Star Energy Group PLC","Shanghai International Energy Exchange Corp","Element Energy","Buccaneer Energy Ltd.","Matrix Energy Solutions Ltd","Energy Conversion Devices Inc","Auhua Clean Energy PLC","Viva Energy Australia Pty Ltd.","Geneva Energy Markets LLC","NGP Energy Capital Management LLC","Atlas Energy Inc","Maguire Energy Institute","PetroBakken Energy Ltd","Spring Energy Norway AS","Harvest Energy Trust","C&J Energy Services Ltd.","Energy Efficiency & Renewable Energy","Antrim Energy Inc","Neptune Energy","Energy Policy Institute of Canada","Star Energy Corp.","Atomic Energy of Canada Limited","Centrica Energy Ltd.","Urasia Energy Ltd","Sterlite Energy Ltd","Black Sea Energy Limited","Daylight Energy Ltd.","Abu Dhabi Future Energy Co PJSC","Resolute Energy Corp.","Iraq Energy Institute","Leyshon Energy Ltd.","Bayfield Energy Holdings PLC","China Integrated Energy Inc","Energy Management Institute","Novera Energy","Philadelphia Energy Solutions LLC","Delek Energy Systems Ltd","United Kingdom Atomic Energy Authority","Talos Energy LLC","Voller Energy","Inc. (Delaware)","Clayton Williams Energy","WSP Environment & Energy LLC","Energy Africa Limited","Great Plains Energy Inc","Energy East Inc.","Industrial Energy Consumers of America","Green Energy","Westar Energy Inc","Indian Energy Ltd","Energy Transfer Co. Ltd.","Allegheny Energy Inc","SK Energy Co Ltd","CEFC China Energy","VeraSun Energy Corporation","Energy Research Institute","Infinis Energy Holdings Ltd","GMP FirstEnergy","Hurricane Energy PLC","Energy Capital Partners LLC","Topaz Energy & Marine Ltd","Bulgarian Energy Holding EAD","PBF Energy Co LLC","Clayton Williams Energy Inc.","Energy Assets Group PLC","Parsley Energy LP","Coastal Energy Co","Shoreline Energy Corp.","Atomic Energy Commission","Third Energy UK Gas Ltd","Direct Energy Marketing Ltd","Lambert Energy Advisory Ltd.","Renewable Energy Holdings PLC","Energy Group PLC","Solar Energy Limited","Panther Energy Trading LLC","Helius Energy PLC","SeaEnergy PLC","Old Firm Energy Corp.","Monster Energy Co","Energy Development Corp","Energy Brands Inc","Seven Energy International Ltd","Environment & Water","Council on Energy","Geneva Energy Markets Europe Ltd.","Nuclear Energy Institute","Horizon Acquisition Co PLC (old name of APR Energy PLC)","Genel Energy International Ltd","European Marine Energy Centre Ltd","Alkane Energy PLC","Regency Energy Partners LP","Co-operative Energy Ltd","Rystad Energy AS","Tooley Energy Ltd.","Blue Water Energy LLP","Association for the Conservation of Energy","Nighthawk Energy PLC","Energy Solutions Inc","Intelligent Energy Holdings PLC","Puma Energy International BV","World Energy Council","Renewable Energy Generation Ltd","Energy Source LLC","Progress Energy Resources Corp","Siccar Point Energy Ltd.","NV Energy Inc","GenOn Energy Inc","Harbour Energy Ltd.","Caracal Energy Inc","World Energy Congress","Energy & Resources Institute","Energy XXI Bermuda Ltd","Global Wind Energy Council","European Wind Energy Association","UK Energy Research Centre","Dart Energy Ltd","American Wind Energy Association","International Renewable Energy Agency","Spectra Energy Corp","MidAmerican Energy Holdings","Energy Aspects Ltd","Solar Energy Industries Association","Cornwall Energy Partnership Ltd.","Emerald Energy PLC","Linn Energy LLC","Berau Coal Energy Tbk PT","EIG Global Energy Partners LLC","European Energy Exchange AG","Fairfield Energy Ltd","Pan American Energy LLC","Petrohawk Energy Corp","Sibir Energy","UK Atomic Energy Authority","Renewable Energy Association","Walter Energy Inc","Ovo Energy Ltd","Arrow Energy Ltd","MidAmerican Energy Co","Cobalt International Energy Inc","Kinder Morgan Energy Partners LP","Massey Energy Co","Xcite Energy Ltd","APR Energy PLC","Burren Energy PLC","Imperial Energy","Energy Transfer Partners LP","Cambridge Energy Research Associates","Energy UK","Talisman Energy Inc","Ithaca Energy Inc","XTO Energy Inc","Salamander Energy PLC","Constellation Energy Group Inc","Energy Aspects Ltd.","Energy & Industrial Strategy UK","Department for Business","State Atomic Energy Corp","Cove Energy PLC","PFC Energy Inc","Oxford Institute for Energy Studies","Ophir Energy PLC","New Energy Finance Ltd","Mercuria Energy Group Ltd","Essar Energy PLC","Energy Future Holdings Corp","EDF Energy PLC","British Energy Group","Energy Department","International Atomic Energy Agency","Energy Information Administration US","International Energy Agency","Scottish Power Ltd","Iberdrola Renovables SA","Shell Chemicals Company","Shell Petrochemicals Co. Ltd.","Shell Oil Company","Npower Energies","NPower","EDF Electric Company","BP Group Plc","ExxonMobil Chemical Co.","Exxon Corp."]),e.os(e.cx,5,["Biofuels","Electric power",294,235,"Natural Gas",199,"Energy Sector","Nuclear energy","UK energy","EU energy","Oil & Gas industry","Natural resources"]),e.ps(1,"www.ft.com/energy")]),e.ge(8),8),24192e5)),21541:e.r(98,6,6,e.pc_(15,"hedge fund"),e.cx,16,["AIG Trading Corp.","HSBC Global Asset Management Ltd.","HSBC Global Asset Management UK Ltd","JPMorgan Chase Co. (Investment Management)","Morgan Stanley Investment Management",281,"AXA Investment Managers","Morgan Stanley Private Wealth Management Ltd.","Deutsche Bank Wealth Management","BNP Paribas Wealth Management (Singapore)","UBS Private Wealth Management","Barclays Wealth International","Barclays Wealth & Investment Management","Investec Wealth & Investment Ltd","Citigroup Inc","Credit Suisse Group AG","BNP Paribas SA","Bank of America Corp","Goldman Sachs Group","JPMorgan Chase & Co","UBS Group AG"],e.cx,5,[164,162,123,141,121,303]),215422:e.r(55,4,e.os(e.e,9,[6713943560,6713943071,6713943068,6713943059,6757624947,6713943545,6713941580,6713476769,6712317340,6645271374,6645271833]),["https://www.ft.com/partnercontent/sap-concur/business-takes-flight-the-new-era-of-corporate-travel.html","https://www.ft.com/partnercontent/sap-concur/corporate-travel-managers-declare-a-new-era-business-unusual.html","https://www.ft.com/partnercontent/sap-concur/hearts-minds-and-the-bottom-line.html","https://www.ft.com/partnercontent/sap-concur/how-can-sustainability-be-made-integral-to-business-software.html","https://www.ft.com/partnercontent/sap-concur/human-centred-innovation-is-redefining-business-software.html","https://www.ft.com/partnercontent/sap-concur/managing-business-travel-in-the-age-of-the-climate-imperative.html","https://www.ft.com/partnercontent/sap-concur/permacrisis-or-just-tricky-transition.html","https://www.ft.com/partnercontent/sap-concur/robot-revolution-how-purposeful-ai-use-is-building-better-businesses.html","https://www.ft.com/partnercontent/sap-concur/the-fast-track-to-cfo.html","https://www.ft.com/partnercontent/sap-concur/transformative-insights-the-art-of-financial-storytelling.html"]),21548:e.r(97,6,6,e.pc_(21,"Jancis Robinson"),e.os(e.cx,15,[353,352,332]),e.os(e.cx,16,["New York Wine & Culinary Center","Jiugui Wine Co. Ltd.","Brandywine Bookmaking LLC","Bordeaux Wine Investments Ltd.","Ascot Wine Management SA","Wine Invest","Hong Kong Wine Vault","Brandywine Fund Inc.","South African Wine Industry Trust","International Wine Cellars","Wine Business Institute","The Wine Treasury Ltd.","The Wine Reserve Ltd.","New York Wine and Grape Foundation","The Chalone Wine Group Inc.","Premier Cru Fine Wine Investments Ltd.","Denbies Wine Estate Ltd.","Leith\'s School of Food & Wine Ltd","International Exhibition Co-Operative Wine Society Ltd","Victoria Wine Company Limited","Wine Investment Fund Limited","Italian Wine Merchants","Total Wine & More","Lunzer Wine Investments Ltd.","Berkmann Wine Cellars Ltd.","Wine Source","Wine Cellar Ltd.","London International Wine Fair","Brandywine Global Investment Management LLC","Wine Australia Corp.","Brandywine Global Investment Management (Europe) Ltd.","Wine Asset Managers LLP","Bibendum Wine Ltd","The Wine & Spirit Trade Association","English Wine Producers","Wine & Spirit Education Trust","The Wine Society Ltd.","Allied Domecq Spirits & Wine Limited","Wine Rack Ltd.","Inc.","International Wine Accessories","The Wine Group Inc.","The Wine Group Inc. International Wine Accessories"]),[117,204,116,115,48,306]),21615:e.r(99,6,6,e.os(e.cx,15,[441,349,324,"air travel","accessories",353,352,332]),[306,255,193,14,252,21,97,99,98,101,279,31,276,277,204,116,115,278,28,13,7]),21670:e.r(22,5,5,e.cx,16,["","Wizz Air Hungary Ltd","Air Jordan","Air Malta","Air Macau","Ryanair UK Ltd.","Air Serbia","Air Seychelles Ltd","Spanair SA","Icelandair HF",262,"Wizz Air Ltd.",6,"TNT Airways SA","Fiji Airways","Titan Airways Ltd.",29,"Atlantic Airways Ltd.","TransAsia Airways Corp","Inc. (Florida)","Pet Airways","British Airways City Flyer Ltd.","Sudan Airways","Connect Airways","British European Airways Corp.","Condor Airways VA","Scotairways","Myanmar Airways International Co. Ltd.","World Airways Inc.","Cayman Airways Ltd.","Monarch Airways","Asian Wings Airways Ltd.","First Choice Airways Ltd.","Nigeria Airways Limited","Laker Airways (Bahamas) Ltd.","Afriqiyah Airways","AirTran Airways Inc","Laker Airways","Iraqi Airways","Eastern Airways","Adria Airways dd","Pan American Airways Inc.","Britannia Airways","Hong Kong Express Airways Ltd","Cyprus Airways Public Ltd","Republic Airways Holdings Inc","TransAsia Airways Corp.","Olympic Airways SA","GB Airways","British Mediterranean Airways","Kuwait Airways","Tiger Airways Holdings Ltd","South African Airways Pty Ltd","Jetstar Airways Pty Ltd","British Midland Airways Ltd",297,231,"US Airways Group Inc",85,30,"Chautauqua Airlines Inc.","WestJet Airlines Ltd","Africa World Airlines Ltd.","Biman Bangladesh Airlines Ltd.","SAS Airline","Compass Airlines","Sunstate Airlines (Qld) Pty Ltd.","The Federation of Indian Airlines","My Way Airlines SRL","Kunpeng Airlines","Ansett Airlines","Singapore Airlines Cargo Pte Ltd.","Southwest Airlines Pilots Association","SkyWest Airlines Ltd","JAL airline","Air Wisconsin Airlines Inc.","Kendell Airlines","Uganda Airlines Inc.","China Southwest Airlines","Airline Aoc Support Ltd.","Airline Investments Ltd. (United Kingdom)","Sabena Belgian World Airlines SA","Aeromar Airlines","Nordic Regional Airlines AB","Jetstar Pacific Airlines Pty Ltd.","Tradewinds Airlines","Canadian Airlines International Inc.","Virgin Blue Airlines Pty Ltd.","Tassili Airlines","Ltd.","Sichuan Airlines Co.","Avianca Airlines SA (Use Avianca Holdings SA)","Hebei Airlines Co. Ltd.","Trans States Airlines Inc","Dutch Antilles Express Airlines","Mesaba Airlines","North American Airlines","SriLankan Airlines Ltd.","East Star Airlines","Cargo Airline Association","LOT Polish Airlines SA","Airline Services Holdings Ltd.","PT Mandala Airlines","Ariana Afghan Airlines","SAS Scandinavian Airlines Norge AS","PSA Airlines","Key Airlines","Star Airlines SA","United Airlines Foundation","Mandarin Airlines","SkyEurope Airlines AS","Nepal Airlines Corp.","African Airlines Association","Australian Airlines Ltd.","Canadian Airlines Inc.","Iran Aseman Airlines","TATA SIA Airlines Ltd","Atlantic Southeast Airlines Inc.","VLM Airlines","Atlantic Coast Airlines Inc.","Mesa Airlines Inc.","PT Adam Skyconnection Airlines","Association of Asia Pacific Airlines","TAM Airlines","Pinnacle Airlines Corporation","Finnish Commuter Airlines Oy","Trans States Airlines","China United Airlines Co. Ltd.","KLM Airlines","Caribbean Airlines Ltd.","European Regions Airline Association Ltd.","Olympic Airlines SA","Libyan Arab Airlines","Darwin Airline SA","Ukraine International Airlines","British Airline Pilots\' Association","Porter Airlines","CSA Czech Airlines","Sterling Airlines","Pacific Airlines","European Low Fares Airline Association","Trans World Airlines Inc","Eos Airlines","America West Airlines Inc.","Thomas Cook Airlines Ltd.","International Airline Support Group","Zoom Airlines","Alaska Airlines Inc","Xiamen Airlines Co.","Aloha Airlines","Go Airlines India Ltd","Middle East Airlines","Copa Airlines","Shanghai Airlines Co.","Shenzhen Airlines Co.","Varig Brazil Airlines","Airline Group Ltd","Philippine Airlines Inc","Frontier Airlines Holdings Inc","Airline Partners Australia","Saudi Arabian Airlines Corp","SAS Scandinavian Airlines Danmark A/S","Oasis Hong Kong Airlines Ltd","LAN Airlines SA","Fairline","Hawaiian Airlines Inc","Transavia Airlines CV","Indian Airlines Limited","Hong Kong Airlines Ltd","Cargolux Airlines International SA","Skymark Airlines Inc","British Airline Pilots Association","Turkish Airlines Inc","Association of European Airlines","Brussels Airlines NV","Hainan Airlines Co Ltd","SkyTeam Airline Alliance Management Cooperatie UA","Lion Mentari Airlines PT","Ethiopian Airlines","Vueling Airlines SA","KLM Royal Dutch Airlines","Austrian Airlines AG","Monarch Airlines Ltd","United Airlines","Kingfisher Airlines Ltd","Northwest Airlines Corp","Continental Airlines Inc","American Airlines Inc"],e.cx,5,[252,21,97,176,3,7,280,279,31,276,277]),217623:e.r(107,[6910229962,6932902055,6878336584,6878337742,6879487130]),217630:e.r(72,1,8,3624585761),217968:e.r(107,[6776732577,6776732562]),218182:e.q(e.ocqs([e.tw(e.cb(0,e.o([e.pc_(21,46),e.os(e.cx,7,[246,190])]),e.ge(3),3),7776e6),e.isp("financial_times_redshift","UPL138",!1,"218182"),e.tw(e.cb(0,e.af_u(["properties","user","followedConcepts"],e.o([e.y_(["name"],246),e.y_(["name"],190),e.y_(["name"],46)])),e.ge(1),1),7776e6)])),218272:e.q(e.ocqs([e.cb(1,e.pe(8,3397056614),e.ge(1),1),e.tw(e.cb(4,e.pe(8,3698625281),e.ge(1),1),145152e5)])),218494:e.r(5,145152e5,e.ref(8),3,7776e6,7776e6,3,e.ref(7),e.pc_(7,147)),218888:e.r(78,e.af_u(["properties","user","followedConcepts"],e.o([e.e_(["name"],"Yamaha Motor Co Ltd"),e.e_(["name"],"Volvo Cars"),e.e_(["name"],"Volkswagen of America Inc."),e.e_(["name"],"Volkswagen Leasing GmbH"),e.e_(["name"],"Volkswagen Slovakia"),e.e_(["name"],"Volkswagen AG"),e.y_(["name"],298),e.e_(["name"],"Vertu Motors PLC"),e.e_(["name"],"Verband der Automobilindustrie eV"),e.e_(["name"],"Vauxhall Motors Ltd"),e.y_(["name"],273),e.e_(["name"],"TI Automotive Ltd"),e.e_(["name"],"Tesla Inc"),e.y_(["name"],263),e.e_(["name"],"Tata Group"),e.e_(["name"],"Society of Motor Manufacturers & Traders Ltd"),e.y_(["name"],248),e.e_(["name"],"SAIC Motor Corp Ltd"),e.e_(["name"],"PROTON Holdings Bhd"),e.e_(["name"],"Porsche Automobil Holding SE"),e.y_(["name"],219),e.e_(["name"],"Nissan Shatai Co Ltd"),e.y_(["name"],197),e.e_(["name"],"Morgan Motor Co Ltd"),e.y_(["name"],188),e.y_(["name"],184),e.e_(["name"],"McLaren Group Ltd"),e.e_(["name"],"Mazda Motor Corp"),e.e_(["name"],"Maserati SpA"),e.e_(["name"],"Marshall Motor Holdings PLC"),e.e_(["name"],"Kia Motors"),e.e_(["name"],"Jardine Motors PLC"),e.e_(["name"],"Jaguar Land Rover Ltd"),e.y_(["name"],149),e.e_(["name"],"Hyundai Corp"),e.e_(["name"],"Hybrid Air Vehicles Ltd"),e.y_(["name"],144),e.e_(["name"],"Guangzhou Automobile Group Co Ltd"),e.e_(["name"],"Group Lotus PLC"),e.e_(["name"],"Great Wall Motor Co Ltd"),e.y_(["name"],128),e.e_(["name"],"Geely Automobile Holdings Co Ltd"),e.e_(["name"],"Ford UK"),e.e_(["name"],"Ford Motor Credit Co LLC"),e.y_(["name"],118),e.e_(["name"],"Fiat Chrysler Automobiles"),e.e_(["name"],"Federation Internationale de l\'Automobile"),e.e_(["name"],"European Automobile Manufacturers Association"),e.e_(["name"],"Eicher Motors Ltd"),e.e_(["name"],"Ducati Motor Holding SpA"),e.e_(["name"],"Dollar Thrifty Automotive Group Inc"),e.e_(["name"],"BYD Auto Co Ltd"),e.e_(["name"],"Brilliance China Automotive Holdings Ltd"),e.e_(["name"],"BMW"),e.e_(["name"],"Rolls-Royce & Bentley Motor Cars Limited"),e.y_(["name"],23),e.e_(["name"],"Beijing Automotive Industry Holding Co"),e.e_(["name"],"Automakers Limited"),e.e_(["name"],"Autotrader"),e.y_(["name"],20),e.e_(["name"],"Audi AG"),e.e_(["name"],"Aston Martin Lagonda Ltd."),e.e_(["name"],"American Automotive Policy Council Inc"),e.e_(["name"],"Alliance of Automobile Manufacturers"),e.e_(["name"],"Advance Auto Parts Inc"),e.e_(["name"],"A.O. Smith Automotive Products Company"),e.y_(["name"],19),e.y_(["name"],207),e.e_(["name"],"Midlands Engine"),e.y_(["name"],148),e.y_(["name"],129),e.y_(["name"],114),e.y_(["name"],77),e.y_(["name"],70),e.e_(["name"],"Diesel engines"),e.y_(["name"],51)])),2,2),218894:e.q(e.ocqs([e.tw(e.cb(0,e.ref(3),e.ge(2),2),2592e6),e.tw(e.cb(0,e.af_u(["properties","user","followedConcepts"],e.o([e.e_(["name"],"Rachel Garrahan"),e.e_(["name"],"Ming Liu"),e.e_(["name"],"Vivienne Becker"),e.e_(["name"],"Nick Foulkes"),e.e_(["name"],"Tim Auld")])),e.ge(1),1),7776e6),e.tw(e.cb(0,e.a([e.af_u(["properties","user","followedConcepts"],e.e_(["name"],"Special Report")),e.ref(3)]),e.ge(1),1),7776e6),e.tw(e.cb(0,e.a([e.af_u(["properties","user","followedConcepts"],e.o([e.y_(["name"],270),e.y_(["name"],147),e.y_(["name"],93),e.y_(["name"],94)])),e.ref(3)]),e.ge(1),1),7776e6)])),218936:e.q(e.ocqs([e.tw(e.cb(0,e.af_u(["properties","user","followedConcepts"],e.o([e.y_(["name"],147),e.y_(["name"],101),e.y_(["name"],99),e.y_(["name"],182),e.y_(["name"],98),e.y_(["name"],309),e.y_(["name"],100),e.y_(["name"],260)])),e.ge(1),1),2592e6),e.tw(e.cb(0,e.a([e.af_u(["properties","user","followedConcepts"],e.o([e.y_(["name"],253),e.y_(["name"],147)])),e.af_u(["properties","user","followedConcepts"],e.o([e.y_(["name"],101),e.y_(["name"],99),e.y_(["name"],182),e.y_(["name"],98),e.y_(["name"],309),e.y_(["name"],100),e.y_(["name"],260)]))]),e.ge(1),1),2592e6),e.tw(e.cb(0,e.af_u(["properties","user","followedConcepts"],e.o([e.e_(["name"],"Baya Simons"),e.e_(["name"],"Alice Cavanagh"),e.e_(["name"],"Carolyn Asome"),e.y_(["name"],135),e.e_(["name"],"Aylin Bayhan"),e.e_(["name"],"Jessica Beresford"),e.y_(["name"],168),e.e_(["name"],"Beatrice Hodgkin"),e.e_(["name"],"Carola Long"),e.e_(["name"],"Lauren Indvik"),e.e_(["name"],"Scarlett Conlon"),e.y_(["name"],170),e.e_(["name"],"Ellie Pithers"),e.y_(["name"],113)])),e.ge(1),1),7776e6)])),218937:e.r(59,2,2,e.af_u(["properties","user","followedConcepts"],e.o([e.e_(["name"],"Lindsey Tramuta"),e.e_(["name"],"Joji Sakurai"),e.e_(["name"],"Niki Blasina"),e.e_(["name"],"Rebecca Rose"),e.e_(["name"],"Maria Shollenbarger"),e.e_(["name"],"Tom Robbins"),e.e_(["name"],"Horatia Harrod"),e.e_(["name"],"Christina Ohly Evans"),e.y_(["name"],92)])),e.a([e.af_u(["properties","user","followedConcepts"],e.o([e.y_(["name"],94),e.y_(["name"],253),e.y_(["name"],147),e.y_(["name"],93)])),e.ref(17)]),17),218941:e.q(e.ocqs([e.tw(e.cb(0,e.af_u(["properties","user","followedConcepts"],e.o([e.y_(["name"],287),e.y_(["name"],286),e.y_(["name"],285),e.e_(["name"],"UK house prices"),e.y_(["name"],274),e.y_(["name"],249),e.y_(["name"],237),e.y_(["name"],228),e.e_(["name"],"Property downsizing"),e.y_(["name"],225),e.y_(["name"],221),e.y_(["name"],198),e.y_(["name"],196),e.y_(["name"],191),e.y_(["name"],186),e.y_(["name"],158),e.y_(["name"],146),e.y_(["name"],127),e.e_(["name"],"Expats"),e.y_(["name"],88),e.e_(["name"],"European house prices"),e.y_(["name"],18),e.y_(["name"],16),e.y_(["name"],4)])),e.ge(3),3),5184e6),e.tw(e.cb(0,e.af_u(["properties","user","followedConcepts"],e.o([e.y_(["name"],158),e.y_(["name"],100),e.e_(["name"],"Design & Architecture"),e.y_(["name"],67),e.e_(["name"],"Artisans"),e.e_(["name"],"Green Architecture"),e.y_(["name"],11)])),e.ge(2),2),7776e6),e.tw(e.cb(0,e.af_u(["properties","user","followedConcepts"],e.o([e.y_(["name"],186),e.y_(["name"],249),e.y_(["name"],18),e.y_(["name"],288),e.y_(["name"],287),e.y_(["name"],286),e.y_(["name"],274),e.y_(["name"],228),e.y_(["name"],226),e.y_(["name"],225),e.y_(["name"],221),e.y_(["name"],198),e.y_(["name"],196),e.y_(["name"],132),e.y_(["name"],88),e.y_(["name"],49),e.y_(["name"],16),e.y_(["name"],4)])),e.ge(2),2),2592e6)])),218942:e.q(e.ocqs([e.tw(e.cb(0,e.ref(16),e.ge(2),2),2592e6),e.tw(e.cb(0,e.af_u(["properties","user","followedConcepts"],e.e_(["name"],"Isabelle Kountoure")),e.ge(1),1),2592e6),e.tw(e.cb(0,e.a([e.af_u(["properties","user","followedConcepts"],e.o([e.y_(["name"],270),e.y_(["name"],94),e.y_(["name"],147),e.y_(["name"],93)])),e.ref(16)]),e.ge(1),1),2592e6)])),218943:e.r(90,3,3,[e.e_(["name"],"New York City Retirement System"),e.y_(["name"],37),e.y_(["name"],36),e.y_(["name"],64),e.y_(["name"],202),e.y_(["name"],134),e.y_(["name"],38),e.y_(["name"],215),e.y_(["name"],211),e.y_(["name"],210),e.e_(["name"],"Organisations:"),e.e_(["name"],"Financial Advice"),e.y_(["name"],9),e.y_(["name"],230),e.y_(["name"],257),e.y_(["name"],256),e.y_(["name"],218),e.y_(["name"],311),e.y_(["name"],212),e.e_(["name"],"Pension investment"),e.y_(["name"],217),e.y_(["name"],213),e.y_(["name"],216),e.e_(["name"],"UK Care Homes"),e.e_(["name"],"Pension"),e.e_(["name"],"Final Salary"),e.e_(["name"],"Ageing Populations"),e.e_(["name"],"Next Act"),e.y_(["name"],238),e.y_(["name"],214)]),218944:e.r(10,e.af_u(["properties","user","followedConcepts"],e.o([e.e_(["name"],"Why digital demands deep thinkers"),e.e_(["name"],"Covid response fosters top legal teams’ creativity"),e.e_(["name"],"Wanted: role models for solving legal problems together"),e.e_(["name"],"Australian law firms address lack of Aboriginal recruits"),e.e_(["name"],"Cross-border deals need broad skills in time of trade war and pandemic"),e.e_(["name"],"Seven individual takes on rethinking legal practice"),e.e_(["name"],"Law firm leaders ready for radical change"),e.e_(["name"],"Lawyers help Tesla unlock rooftop solar power"),e.e_(["name"],"Japan Inc braced for fresh hostile bids"),e.e_(["name"],"Law firms chase a piece of the crypto action"),e.e_(["name"],"Digital thinking spreads across Asia’s law firms"),e.e_(["name"],"High pay in law jobs fails to compensate for toxic culture"),e.e_(["name"],"Legal eye for detail will help battle sustainable finance ‘greenwash’"),e.e_(["name"],"Calls to action on ESG boost demand for legal expertise"),e.e_(["name"],"Amazon’s legal team: ‘We wanted to help’"),e.e_(["name"],"Eight smaller law firms that outpace larger rivals in Europe"),e.e_(["name"],"Law firms embrace ‘change makers’"),e.e_(["name"],"Forward-looking legal practitioners"),e.e_(["name"],"Fix law firm culture to keep people of colour"),e.e_(["name"],"Diversity efforts for lawyers switch from hiring to keeping"),e.e_(["name"],"Five views of law firm leadership"),e.e_(["name"],"Collective legal actions spread in Europe"),e.e_(["name"],"Young lawyers feel most at risk from burnout"),e.e_(["name"],"Fintech pioneers navigate the law’s grey areas"),e.e_(["name"],"How airlines survived to fly another day"),e.e_(["name"],"Law firms start to take the long view"),e.e_(["name"],"In-house legal teams develop new attitude to risk"),e.e_(["name"],"Law firm professionals driving radical change"),e.e_(["name"],"People-focused law firm leaders"),e.e_(["name"],"Lawyers write the future for $200tn of post-Libor deals"),e.e_(["name"],"Blockchain-powered breakthrough on mutual funds"),e.e_(["name"],"The lawyers battling to redress systemic racial inequalities"),e.e_(["name"],"Creative practitioners crack tough legal challenges"),e.e_(["name"],"Airlines navigate meeting climate change pledges"),e.e_(["name"],"Digital scheme pays Venezuela health workers from frozen funds"),e.e_(["name"],"Law firms focus on digital skills to ease legal pressures"),e.e_(["name"],"Gun rights and climate change"),e.e_(["name"],"The pay rates for lawyers are unsustainable"),e.e_(["name"],"Digital delivery from the daily grind for younger lawyers"),e.e_(["name"],"Digital Lawyers"),e.e_(["name"],"North America Innovative Lawyers"),e.e_(["name"],"Asia-Pacific Innovative Lawyers"),e.e_(["name"],"FT Innovative Lawyers Europe award winners 2021"),e.e_(["name"],"Innovative Lawyers: Europe"),e.e_(["name"],"Innovative Lawyers")])),1,1),219014:e.r(88,[e.e_(["name"],"The Monday Interview"),e.y_(["name"],96),e.y_(["name"],180),e.e_(["name"],"Directors\' Deals"),e.e_(["name"],"Travelista"),e.e_(["name"],"On Wall Street"),e.y_(["name"],91),e.e_(["name"],"Outlook"),e.y_(["name"],292),e.e_(["name"],"Charts that matter"),e.e_(["name"],"Your Questions"),e.e_(["name"],"Rich people\'s problems"),e.e_(["name"],"Worth it?"),e.y_(["name"],17),e.e_(["name"],"How to Host it"),e.y_(["name"],246),e.e_(["name"],"The Long View"),e.e_(["name"],"Skin in the Game"),e.e_(["name"],"Financial Thinking"),e.y_(["name"],236)]),219015:e.r(88,[e.e_(["name"],"Lex"),e.y_(["name"],91),e.y_(["name"],292),e.y_(["name"],180)]),219733:e.r(36,0,e.bsc_(1,["AIZPZqDc","P0/GxOnl","TQnIjzbC","fJcqwcgf","q3LM3Wfn"]),1,e.os(e.e,8,[461095,495876])),219736:e.r(81,e.y(10,372)),219737:e.r(81,e.ps(1,0)),219738:e.r(36,0,e.a([e.y(10,372),e.ref(8)]),0,e.a([e.ps(1,0),e.ref(8)])),219772:e.r(72,1,8,3560885698),220220:e.r(72,1,8,3668447707),220580:e.r(72,4,8,3702016487),220658:e.r(68,"UPL139","220658"),220814:e.r(17,10,373,8),220935:e.r(72,1,8,3720340954),220949:e.r(72,1,8,3573955814),220992:e.r(74,1,"https://www.ft.com/content/cb3e317e-e3cc-4e4a-a506-b755b2f94bb1"),221084:e.r(68,"UPL140","221084"),221508:e.r(107,[6940147352,6938990128,6936356145,6931779590,6931779581,6931779572,6931743026,6930673192,6930673186,6928564447,6927996174,6938989435]),223362:e.r(68,"UPL141","223362"),22407:e.r(25,10,346),22408:e.r(19,["https://lnkd.in",388]),22409:e.r(19,["https://mobile.twitter.com","https://mobile.x.com","https://t.co","https://twitter.com","https://x.com"]),22410:e.r(25,10,378),22411:e.r(26,10),22412:e.r(25,10,317),22514:e.r(68,"UPL036","22514"),22515:e.r(68,"UPL035","22515"),225198:e.r(72,1,9,6945459245),22529:e.r(31,1,e.os(e.e,9,[5202434762,5202052228,5172127401]),e.bsc_(1,["U2NGJ1sN"])),22567:e.r(98,6,6,e.os(e.cx,15,[349,324,352,332]),e.cx,16,["Saint Laurent Group","Yves Saint Laurent SAS","Balenciaga SA","Prada Holding BV","Net-A-Porter Group Ltd","Gucci Group NV","Gucci Group SpA","Chanel SA","Patek Philippe SA","Rolex Watch","Rolex SA","LVMH Group","Burberry Group PLC","NetJets Inc","Lufthansa Cargo AG","Emirates",262,6,29,297,231,85,30],e.cx,5,[271,115,176,175,100,28,13]),22581:e.r(61,e.a([e.pc_(5,261),e.af_u(["properties","article","topics"],e.bsc([],["0O/ey7Tq","6ss6l2qb","9Dl4vSTY","Duz0F0d1","HEJpt3fX","OBebF+uK","YmXQQXRz","gJ5We04G"]))]),3,3,[e.os(e.cx,15,["solar energy","pollution"]),e.os(e.cx,5,[148,77,"Climate change",81,235])]),22598:e.r(97,3,3,e.pe(1,"https://www.ft.com/sport"),e.pc_(21,"Murad Ahmed"),e.pc_(15,445),[126,125,201,"Football",307,255]),22600:e.r(101,[299,248,"Skoda AS","Alfa Romeo Automobiles SpA","Alfa Romeo","Hyundai Group","Ford Europe","Fiat SpA",219,"Honda Europe","Honda Motor Europe Ltd.",20,"Ferrari SpA","Mitsubishi Motors Europe BV","Audi UK",298,"Volksbank International AG","Reanult Nissan","Nissan Diesel","AMG Mercedes",184,"BMW (UK) Holdings Ltd.","Toyota Lexus",240],[148,70,77,207,129,19],"https://www.ft.com/companies/automobiles"),226257:e.r(72,1,8,3636463095),226814:e.r(68,"UPL142","226814"),22710:e.r(39,e.af_u(["properties","article","topics"],e.bsc([],["+hndfurA","GMNFIFk9","MbwbF/mA","fshp6lam"])),5,5,7776e6,1,1,["properties","user","followedConcepts"],e.e_(["name"],"Sustainability")),22892:e.r(61,e.bsc_(1,["/7mKLucX","mIOFhlE2"]),4,4,[e.os(e.cx,15,["shopping","luxury goods","clothing"]),e.os(e.cx,["article","people"],[170,113,135]),e.os(e.cx,5,[52,"Retail","Retail & Consumer industry",100,99,98,101])]),229836:e.r(68,"UPL143","229836"),23027:e.r(86,6,6,["/mefF6VZ","57mobZlL","8likx9y3","APSIn6Wb","EVvFW9dS","Gpigfp+3","S2cXO9bC","ZzJOnvof","dKDPqkPr","kpVAeMkw","lsNuLZFr","njcRxRB0","rkwjZ6oV"]),230821:e.r(68,"UPL144","230821"),232149:e.q(e.acqs([e.isp("financial_times_redshift","UPL145",!1,"232149"),e.fm(e.n0,e.isp("financial_times_redshift","UPL149",!0,"232149"))])),232671:e.r(72,1,8,3684421563),232996:e.r(72,1,8,3715148395),233373:e.r(0,e.ocqs([e.tw(e.cb(0,e.af_u(["properties","user","followedConcepts"],e.o([e.e_(["name"],"Silicon Valley"),e.e_(["name"],"Divestment"),e.e_(["name"],"Market bubbles"),e.y_(["name"],223),e.y_(["name"],164),e.y_(["name"],264),e.y_(["name"],296),e.y_(["name"],40),e.y_(["name"],84),e.y_(["name"],104),e.y_(["name"],254),e.y_(["name"],141),e.e_(["name"],"IPOs"),e.y_(["name"],222),e.y_(["name"],185)])),e.ge(1),1),7776e6),e.tw(e.cb(0,e.af_u(["properties","article","topics"],e.bsc([],["81EhEdMq","8gLc8fQ1","FyJ6CkwP","Mid00DBo","MjUrJyf8","O5yQZNAH","OPrEm3P1","aJYlJ65k","bXGcWjkL","dKDPqkPr","gI5U+3TU","kL50XrPp","mSluE1dZ","omMel6HA","splrj7LJ"])),e.ge(3),3),7776e6),e.tw(e.cb(0,e.pc_(7,72),e.ge(3),3),7776e6),e.tw(e.cb(0,e.af_u(["properties","article","authors"],e.bsc([],["15EJyjxi","b90PtiO5","sOCV0Xo1","vDo2OyzW"])),e.ge(3),3),7776e6),e.tw(e.cb(0,e.a([e.ps(10,373),e.ref(8)]),e.ge(1),1),7776e6),e.isp("financial_times_redshift","UPL008",!1,"233373")]),e.as(e.x,4,[340,377,347,354,322,314]),e.os(e.w,3,[435,410,412,390,337,338,403,393,401,335])),233384:e.q(e.ocqs([e.tw(e.cb(0,e.af_u(["properties","user","followedConcepts"],e.o([e.e_(["name"],"Stablecoins"),e.y_(["name"],303),e.y_(["name"],296),e.y_(["name"],290),e.y_(["name"],283),e.y_(["name"],251),e.y_(["name"],233),e.y_(["name"],226),e.y_(["name"],223),e.y_(["name"],222),e.y_(["name"],209),e.y_(["name"],163),e.y_(["name"],162),e.y_(["name"],154),e.y_(["name"],152),e.y_(["name"],141),e.y_(["name"],136),e.e_(["name"],"FT Commodities Global Summit"),e.y_(["name"],89),e.y_(["name"],87),e.y_(["name"],82),e.y_(["name"],79),e.e_(["name"],"EU capital markets union"),e.e_(["name"],"EU Structural Funds"),e.y_(["name"],73),e.y_(["name"],66),e.y_(["name"],57),e.y_(["name"],50),e.e_(["name"],"Chinese equities"),e.y_(["name"],40),e.y_(["name"],26),e.y_(["name"],15),e.y_(["name"],10),e.y_(["name"],5)])),e.ge(1),1),7776e6),e.tw(e.cb(0,e.af_u(["properties","article","topics"],e.bsc([],["/O5RKoM+","1KvXmXwQ","4St8bxfN","7+P7qm2z","7HAA+ckN","7p/w2hqf","8gLc8fQ1","CgHw0ANR","DAnsNNLc","OQdFW+HM","RRQiGagI","T7dVJXJo","TR5X4xxc","V70VV0iV","WznYs1H7","XrAYpoDl","Xz6zohh9","aBbi/P3/","aJYlJ65k","arsbQcTH","is07BccS","kL50XrPp","m1dv8aKh","mSluE1dZ","omMel6HA","oqoid+Ln","pY8t79Zq","pZwRf3OM","sAmWFq87","t8atZDTK","vzFzraYC","wJpreANF","xpuM/uIP","yWjX7jTx"])),e.ge(12),12),7776e6),e.tw(e.cb(0,e.os(e.s,1,[356,"ft.com/crypto","ft.com/equities"]),e.ge(12),12),7776e6)])),233819:e.r(107,[6927453593,6926358643]),233820:e.r(107,[6927453728,6927453593,6926358643]),235111:e.r(68,"UPL146","235111"),237358:e.r(36,1,e.pe(8,3667698943),0,e.bsc_(1,["P8fwm0JD","bc1D5pIV"])),237536:e.r(71,0,e.o([e.pe(0,"thenextfive.ft.com"),e.ps(1,"https://thenextfive.ft.com/")])),238058:e.r(68,"UPL147","238058"),238129:e.r(72,1,8,3774139160),238168:e.r(68,"UPL148","238168"),23832:e.r(17,17,242,18),23833:e.r(17,17,"Firefox/",28),23835:e.q(e.cb(0,e.a([e.ref(28),e.os(e.s,17,["firefox/","fxios/"])]),e.ge(1),1)),238461:e.r(72,1,8,3794725916),23852:e.r(75,12096e5,0,e.a([e.ps(17,242),e.ref(18)]),1,1),23853:e.r(76,e.a([e.ps(17,242),e.ref(18)]),1,1),23937:e.r(101,["Food & Agriculture Organization of the United Nations","Agriculture Department","Cargill Meat Solutions Corp.","Cargill Nutricao Animal Ltda.","Cargill Australia Ltd.","Cargill Fertilizantes SA","Cargill Ventures","Cargill Cotton Ltd.","Cargill Risk Management","Cargill AgHorizons US","Cargill Petroleum","Cargill Inc","John Deere-Lanz Verwaltungs AG","John Deere Renewables LLC","DowDuPont","Agrium Inc","Monsanto Growth Ventures","Mahyco Monsanto Biotech (India) Ltd.","Monsanto Co","Syngenta AG","Bayer Pharma AG","Bayer Pharmaceuticals Pvt Ltd.","Bayer Pharms","Bayer CropScience Ltd. (United Kingdom)","Bayer CropScience NV","CNH Partners LLC","CNH Industrial Capital LLC","CNH Global NV","BASF UK Ltd.","BASF Corp."],[81,"EU fishing","UK fishing","Fishing industry",204,"Food security","Food Safety","Food Prices","Chinese agriculture","Agritech","EU agriculture","UK agriculture","Agriculture","Agricultural trade","Agricultural production",5],"https://www.ft.com/reports/future-food-agriculture"),239678:e.r(72,1,8,3738250932),24101:e.r(68,"UPL037","24101"),24102:e.r(68,"UPL038","24102"),24103:e.r(68,"UPL039","24103"),24104:e.r(68,"UPL040","24104"),24105:e.r(68,"UPL041","24105"),24106:e.r(68,"UPL042","24106"),24244:e.r(99,3,3,e.pc_(15,445),[126,125]),24245:e.r(3,[e.isp("financial_times_redshift","UPL011",!1,"24245"),e.isp("financial_times_redshift","UPL012",!1,"24245"),e.isp("financial_times_redshift","UPL013",!1,"24245")],e.cb(0,e.af_u(["properties","article","topics"],e.bsc([],["/mefF6VZ","0Biwguij","2h0Q1Tlz","57mobZlL","8likx9y3","EVvFW9dS","ZzJOnvof","dKDPqkPr","rkwjZ6oV"])),e.ge(4),4),24192e5),24324:e.q(e.tw(e.cb(0,e.o([e.pe(1,"https://www.ft.com/uk-small-companies"),e.pc_(21,"Andy Bounds"),e.os(e.cx,5,["UK small companies","Starting a business",123,"Scaling-up your business"])]),e.ge(4),4),24192e5)),24978:e.r(10,e.as(e.x,6,["anons",316]),1,1),26090:e.r(6,30,30),26091:e.r(6,60,60),26380:e.q(e.scq(e.cw(2,e.a([e.pge(25,30),e.ref(25)])),e.vq(e.sw(6,e.ref(25),["properties","engaged_time"],e.ge(30))),e.ge(5))),26440:e.r(68,"UPL047","26440"),26442:e.r(68,"UPL048","26442"),26443:e.r(68,"UPL049","26443"),27111:e.r(35,"UPL011","27111","UPL012","27111","UPL013","27111"),27314:e.r(23,4,314),27315:e.r(24,4,"def"),27316:e.r(23,4,329),27317:e.r(23,4,322),27318:e.r(23,4,427),27320:e.r(23,4,409),27321:e.r(24,4,"map"),27323:e.r(23,4,326),27324:e.r(23,4,340),27326:e.r(23,4,341),27327:e.r(24,4,"enc"),27330:e.r(23,4,354),27331:e.r(23,4,351),27332:e.r(23,4,347),27333:e.r(23,4,370),27334:e.r(23,4,371),27335:e.r(23,4,385),27336:e.r(23,4,383),27338:e.r(23,4,391),27339:e.r(23,4,377),27340:e.r(23,4,387),27342:e.r(23,4,406),27343:e.r(23,4,402),27344:e.r(23,4,428),27345:e.r(24,4,"rea"),27346:e.r(24,4,"rtl"),27347:e.r(23,4,439),27348:e.r(23,4,440),27349:e.r(23,4,443),27350:e.r(24,4,"trv"),27351:e.r(23,2,348),27352:e.r(24,2,"adl"),27353:e.r(23,2,427),27354:e.r(23,2,328),27355:e.r(24,2,"exp"),27356:e.r(23,2,333),27357:e.r(23,2,407),27358:e.r(23,2,376),27359:e.r(23,2,384),27360:e.r(23,2,438),27361:e.r(23,2,377),27362:e.r(23,2,386),27363:e.r(24,2,"leg"),27364:e.r(23,2,395),27365:e.r(23,2,396),27366:e.r(23,2,406),27367:e.r(24,2,"not"),27368:e.r(23,2,404),27369:e.r(23,2,413),27370:e.r(23,2,414),27371:e.r(23,2,422),27372:e.r(23,2,428),27373:e.r(23,2,431),27374:e.r(23,2,432),27375:e.r(23,2,336),27376:e.r(23,2,436),27377:e.r(23,2,439),27378:e.r(23,3,315),27379:e.r(23,3,320),27380:e.r(23,3,325),27382:e.r(23,3,327),27384:e.r(23,3,335),27385:e.r(23,3,337),27386:e.r(23,3,339),27387:e.r(23,3,401),27388:e.r(23,3,369),27389:e.r(23,3,392),27390:e.r(23,3,390),27391:e.r(23,3,405),27392:e.r(23,3,393),27393:e.r(23,3,403),27394:e.r(23,3,411),27395:e.r(23,3,412),27396:e.r(23,3,410),27397:e.r(23,3,433),27398:e.r(23,3,435),27399:e.r(23,3,444),27400:e.r(23,3,338),27706:e.r(85,["1IS6miSK","qH/onqdW","rkwjZ6oV"]),27708:e.r(85,["/mefF6VZ","0Biwguij","2h0Q1Tlz","ecKGFycg","friXsBNS","lsNuLZFr"]),27710:e.r(70,0,e.pc_(5,308),3,3),27711:e.r(94,3,3,37),27714:e.r(85,["OCw62zMZ","YdQ5InCm","dfeZo8LF"]),28394:e.r(34,1,e.a([e.ps(10,451),e.ps(1,"www.ft.com/content/")]),1,1,1,["https://www.ft.com/content/a06505ee-3c47-11ea-b232-000f4477fbca","https://www.ft.com/content/cee5f3a8-21ab-11ea-b8a1-584213ee7b2b","https://www.ft.com/content/ea6e02d6-32e1-11ea-a329-0bcf87a328f2","https://www.ft.com/content/f6c3732c-21ac-11ea-b8a1-584213ee7b2b","https://www.ft.com/content/f80ea9d0-21a8-11ea-b8a1-584213ee7b2b","https://www.ft.com/content/f83ff838-21ac-11ea-b8a1-584213ee7b2b",451],1,1,1,["www.ft.com/content/03c53264-b943-4a42-b8eb-ee2265643cb9","www.ft.com/content/0c10c85e-d165-11e8-9a3c-5d5eac8f1ab4","www.ft.com/content/12b978aa-0544-11e9-bf0f-53b8511afd73","www.ft.com/content/24b2a4c4-f7bf-11e8-8b7c-6fa24bd5409c","www.ft.com/content/2eda777e-db68-11e8-b173-ebef6ab1374a","www.ft.com/content/3316885c-b07d-11e8-87e0-d84e0d934341","www.ft.com/content/3a8c7746-d886-11e8-aa22-36538487e3d0","www.ft.com/content/4577f938-2632-11e9-b20d-5376ca5216eb","www.ft.com/content/48e3f86e-f26c-11e8-938a-543765795f99","www.ft.com/content/4dd47e72-d163-11e8-9a3c-5d5eac8f1ab4","www.ft.com/content/4ec70ae8-d154-11e8-9a3c-5d5eac8f1ab4","www.ft.com/content/5dbaee74-1f02-11e9-a46f-08f9738d6b2b","www.ft.com/content/6674f2b6-d165-11e8-9a3c-5d5eac8f1ab4","www.ft.com/content/75699cfe-3506-11e9-bb0c-42459962a812","www.ft.com/content/778c9f5e-294e-11e9-9222-7024d72222bc","www.ft.com/content/83247fda-e0f1-11e8-a8a0-99b2e340ffeb","www.ft.com/content/8b2070da-d152-11e8-9a3c-5d5eac8f1ab4","www.ft.com/content/957b32c2-e737-11e8-8827-ff56e7163c11","www.ft.com/content/a66913c8-d888-11e8-aa22-36538487e3d0","www.ft.com/content/a6a7c790-d06c-11e8-a9f2-7574db66bcd5","www.ft.com/content/a8dee408-a470-11e8-a1b6-f368d365bf0e","www.ft.com/content/b7e766c4-ad5c-11e8-8253-48106866cd8a","www.ft.com/content/c23403c0-ad30-11e8-8253-48106866cd8a","www.ft.com/content/c54abafe-ad30-11e8-8253-48106866cd8a","www.ft.com/content/cdd62792-0e85-11e9-acdc-4d9976f1533b","www.ft.com/content/cf2fb2fc-db7c-11e8-b173-ebef6ab1374a","www.ft.com/content/d481cf02-1e47-11e9-a46f-08f9738d6b2b","www.ft.com/content/e568cf06-f718-11e8-af46-2022a0b02a6c","www.ft.com/content/ed7785ce-d162-11e8-9a3c-5d5eac8f1ab4","www.ft.com/content/f2399c18-e455-11e8-a8a0-99b2e340ffeb","www.ft.com/content/f3e49c7e-ad2e-11e8-8253-48106866cd8a","www.ft.com/content/fc0934a8-e394-11e9-9743-db5a370481bc","www.ft.com/content/fdb9161e-248c-11e9-b20d-5376ca5216eb"],1),28714:e.r(86,3,3,["1arDIMtv","DU90AdEp","H6QLN4my","LsEs8Pp7","P/jGKBjM","PrT4A3hz","glys9pkY","krXVdEBf","t+jA8zXV","uiVznRQz","yOB3hq9J"]),30222:e.r(68,"UPL053","30222"),30363:e.r(105,"Africa"),30365:e.r(105,"Asia"),30366:e.r(103,12,86),30367:e.r(105,"North America"),30368:e.r(105,"Oceania"),30369:e.r(105,"South America"),31187:e.q(e.ocqs([e.tw(e.cb(0,e.af_u(["properties","article","organisations"],e.bsc([],["3HKku5Ra","M0cR8OwT","eDHYz2D2"])),e.ge(3),3),24192e5),e.tw(e.cb(0,e.pc_(5,201),e.ge(3),3),24192e5)])),32094:e.r(68,"UPL054","32094"),32095:e.r(68,"UPL055","32095"),32729:e.r(43,145152e5,e.os(e.s,1,[375]),1,1,145152e5,145152e5,e.a([e.ps(0,375),e.os(e.s,10,[375])]),1,e.os(e.s,1,["iberdrola.ft.com/are-our-roads-ready-for-the-electric-vehicle-revolution","iberdrola.ft.com/breaking-batteries-why-solving-storage-is-the-key-to-global-energy-transition","iberdrola.ft.com/change-management","iberdrola.ft.com/glasgows-blueprint-for-a-net-zero-city","iberdrola.ft.com/nike-s-race-to-protect-the-future-of-sport","iberdrola.ft.com/one-of-europes-biggest-batteries","iberdrola.ft.com/repowering-gives-wind-farms-a-new-lease-of-life","iberdrola.ft.com/smart-meters-will-help-electric-vehicles-move-into-the-mainstream","iberdrola.ft.com/the-day-in-the-life-of-our-carbon-footprint","iberdrola.ft.com/the-uks-new-wind-economy","iberdrola.ft.com/when-will-europe-have-its-time-in-the-sun","iberdrola.ft.com/will-vehicle-to-grid-drive-ev-adoption"]),1,1,1),33786:e.r(86,4,4,["6KQCgdlz","ClBxWMLA","JZ9WNRUS","PrT4A3hz","mfN9uWnF","xp3rIWvm"]),34989:e.r(77,e.pc_(5,"Coronavirus"),12,12),38340:e.r(20,8),38341:e.r(21,0,["q5Tvig7W"]),38342:e.r(14,1,1,0,453,19),38343:e.r(21,0,["X2rJ6bZt"]),38344:e.r(14,1,1,0,456,19),38352:e.r(14,1,1,6,426,8),38353:e.r(14,1,1,6,389,8),38354:e.r(12,0),38355:e.r(15,0),38356:e.r(14,1,1,6,316,8),38357:e.r(14,1,1,6,334,8),38358:e.r(14,1,1,6,442,8),38359:e.r(14,1,1,6,379,8),38360:e.r(12,13),38361:e.r(15,13),38362:e.r(31,0,e.a([e.y(2,396),e.ref(8)]),e.a([e.y(4,354),e.ref(8)])),38470:e.r(20,32),38472:e.r(21,0,["p0Gmp3fI"]),38473:e.r(21,0,["2bcXmReh"]),38474:e.r(21,0,["9WouXzTe"]),38475:e.r(21,0,["9B1e5ujN"]),38476:e.r(21,0,["NIMeeJN0"]),38478:e.r(21,0,["W5+hsorX"]),38479:e.r(21,0,["8LK5tT1k"]),38497:e.q(e.cb(0,e.a([e.y(26,103),e.bsc_(0,["2SSIgOen","2bcXmReh","8LK5tT1k","9B1e5ujN","9WouXzTe","NIMeeJN0","W5+hsorX","p0Gmp3fI"])]),e.ge(1),1)),38819:e.r(86,3,3,["9UJ+j28l","DU90AdEp","PrT4A3hz"]),38827:e.r(63,e.a([e.pc_(5,"Leadership"),e.af_u(["properties","article","topics"],e.bsc([],["0sh29j8A","3pGNmEGF","Cut8g4Ty","PuWJSqTs","oqz7L80f"]))]),5,"Corporate governance"),46761:e.r(80,e.pe(32,"Yes"),e.ref(32)),46762:e.r(80,e.os(e.w,0,[458,457,"www.ignitesasia.com",455,454,"www.financialadvisoriq.com",448,447]),e.bsc_(["userMM","licenceType"],["BXDPYNt/","CITsZJK5"])),46763:e.r(80,e.y(0,453),e.pe(33,"registered")),47581:e.r(108,0),47583:e.r(108,25),47584:e.r(108,50),47585:e.r(108,75),47586:e.r(108,100),51098:e.r(68,"UPL063","51098"),51099:e.r(68,"UPL064","51099"),51100:e.r(68,"UPL065","51100"),51101:e.r(68,"UPL066","51101"),55914:e.q(e.ocqs([e.cb(4,e.os(e.e,8,[2750301246,2746938138,2746669867,2743290941,2742689033,2738649978,2736253150,2734939368,2731153422,2730981093,2730907574,2730900145,2728157953,2727548150,2727123302,2724473678,2717206472,2714219401,2714144097,2709278100,2708825199,2705732341,2705259519,2705209334,2703672604,2700313374,2697601330,2695343739,2694052314,2693625293,2690955299,2690344061,2689709998,2689467968,2687831414,2682534934,2680591562,2680043483,2680023580,2680005020,2676676697,2675244871,2675235811,2673809912,2672074216,2670891736,2669266539,2668724134,2667084367,2663831028,2661818133,2661805647,2660761876,2658151668,2657522815,2657500018,2657353350,2656173569,2655796448,2654589757,2654358624,2653882997,2651661059,2648267468,2644149558,2644074936,2643741040,2643605233,2642188747,2641112541,2640675495,2638443326,2638263555,2636820425,2635150799,2631912954,2631073902,2628010002,2627406871,2627401903,2627297489,2624167337,2622688790,2622667811,2621918359,2621548798,2620229014,2619610983,2619500098,2618611386,2616297505,2616248363,2615378378,2614016157,2613914042,2612570144,2610530634,2610285984,2610062561,2609265819,2609061772,2609039743,2609019025,2608872884,2608797976,2607960928,2607193167,2605924293,2605136320,2604943850,2603776482,2602123420,2601346703,2599662639,2598865394,2598429053,2598163876,2597723982,2596900766,2596513414,2595945032,2594083108,2594019250,2591661834,2591254551,2589616475,2588236223,2587102011,2586612662,2586163662,2584601194,2582372604,2581188657,2580480402,2580376295,2580278357,2579447991,2578494188,2578327886,2578317722,2577508012,2576436463,2575981565,2575323497,2570198613,2562813348,2561801987,2561218936,2556418765,2555299386,2549619065,2541198927,2540381225,2533358597,2525026231,2523479231,2518025938,2512150542,2503301931,2490079628,2483723404,2480632730,2451010768,2420397572]),e.ge(1),1),e.tw(e.cb(0,e.af_u(["properties","article","organisations"],e.bsc([],["+ignR+xS","38uycT9i","3uVS0cXH","5i/zu1J4","8AAy0uuI","9hE4v5nK","Ax8pCUfJ","DZAN8Zng","ENcHlIOn","H6pwoGnr","I+oT34bG","KH8tkiep","KksJIPlo","L1WCp6LB","LM1rG4Pe","MJZMYazX","P4StmRtH","PdmAAiFN","RcjUlTe4","UcMpuDUH","VRPjW/Vw","VgrPH4M2","WNMq63Oq","XTwIgtBo","YlqGBUIt","Zis855Qw","aAA6k3M/","adD9DlFz","bcORfyCq","cbdF+npG","cotLwsNh","eowoouU/","iKKQEWh6","iQ7W+Bg+","lCxwIvuW","nNSsPw2J","oELC3qi4","pSj8hq29","s/aJ13vU","wF76v4E+","ylWcBbEh"])),e.ge(3),3),2592e6),e.tw(e.cb(0,e.af_u(["properties","article","topics"],e.bsc([],["9jZEMJAj","ClBxWMLA","G581nOSA","L4k9wc43","T7dVJXJo","WbA1NnIR","dOVuhxdu","f27+g3DV","maDvxs/Y","qfwj/JMi"])),e.ge(8),8),2592e6),e.scq(e.tw(e.cw(2,e.pc(["aggregations","SegmentEntry"],21070)),7776e6),e.tw(e.cw(3,e.pe(13,21070)),7776e6),e.ge(1))])),55934:e.r(7,e.scq(e.tw(e.cw(2,e.pc(["aggregations","SegmentEntry"],17138)),7776e6),e.tw(e.cw(3,e.pe(13,17138)),7776e6),e.ge(1)),e.cb(0,e.o([e.os(e.cx,18,["r03g","r07c","r07e","r07d","r07l",421,420]),e.os(e.cx,7,[147,302]),e.os(e.cx,5,[172,175,169,301]),e.os(e.s,1,[319,450,"www.ft.com/life-arts"])]),e.ge(3),3),2592e6),56089:e.r(87,3,3,["6s1S0inH","8+Mi534f","GFXC41cC","YBJmIbTw","fjkfC+YQ","hcEtf5vA","i+34ndeA","mleO5RnQ","xKa2ieN4"]),56090:e.r(87,3,3,["FyJ6CkwP","MjUrJyf8"]),58181:e.r(68,"UPL068","58181"),58310:e.r(68,"UPL069","58310"),66495:e.r(85,["6KQCgdlz","ClBxWMLA","mfN9uWnF","qfwj/JMi","xp3rIWvm"]),66564:e.r(14,2,2,6,316,8),71282:e.r(90,1,1,[e.e_(["name"],"Gillian Tett"),e.y_(["name"],73),e.y_(["name"],235),e.y_(["name"],166),e.e_(["name"],"Financials")]),71287:e.r(38,e.ref(41),3,3,2592e6,e.a([e.ref(9),e.ref(29)]),3,3),73285:e.r(13,2,[439,438,384]),73287:e.r(13,2,[413,427,376,348,396]),73288:e.r(14,1,1,2,407,46),73289:e.r(13,2,[404,414,336,328]),73290:e.r(14,1,1,2,432,46),73291:e.r(14,1,1,2,422,46),73292:e.r(14,1,1,2,395,46),73402:e.r(44,2592e6,e.ref(15),3,3,2592e6,2592e6,e.af_u(["properties","article","brand"],e.bsc([],["7bquA+LO","AfrFA3FN","AjID0s4Y","ZjdjcCBy","lTparofD","pYgFAX//","rQRhqjz3","tmnRBuR0","x1FNfK0T"])),1,e.af_u(["properties","article","authors"],e.bsc([],["+zMSA3P3","/BxrEJT4","/g9Cw33g","0Vs62ELk","1v5MKVsk","3LlTtAEL","3SJaq2VW","3WybEjGG","4b5T4hUg","4mv5ouvu","4qhN2isI","5H6uiexD","6J9SLUud","6NI77DHv","7LIGQG/p","7NPJ4GEv","7cxKapMC","89x5o62s","Ai5Otxre","AyK3HMo9","BL5ptSfx","Car9RhWc","CrzP4Bg2","CsXQb42T","DS/6sfTh","DjR7DziS","FXvB4nY4","GAaNcTtd","Gi8zj399","GmVwl6bd","HYGcJl4/","HkRA4crh","IKt3LCOI","KWBICA/b","LT9pJQ7N","NgytlwvK","PJJFvtzx","PNay7Y+9","PXXai2yP","Qf81IeJ/","R/z1gAR/","RB4URrxl","SVDIobUt","Sk3jgGo3","T2d2ZCIO","TgAPIwgI","Uhtu2/iz","V3qQfIfN","Wyj6ZN/M","XSK4XYce","XSazqEyH","Y/+AX0bp","ZGUhjQ/q","c15itL4Y","c9YLNiSU","epEh0u39","feZiW57E","flImZhI+","fwLzms6b","g7lfKk2L","gN+/K5LB","gYETSZI5","gtXXp8xT","gyfIYuTR","h8gqv7i/","hfr4ywLn","hzl+wHLI","jpSIeuvf","jyykRPb5","kbuemTUH","kdkAksTz","keWijmEr","kooSbocz","kx0KQ6VR","mLICLh1F","nKyykLeL","o+Vz/169","piTLueeN","prnjvgm3","pzQe2zNx","qXLFpWU1","qZpJ/sDA","qbre//k1","rVmcl5km","rfapHw7N","sGPmrZ2V","t/bGApFz","uVHfZo0a","v0FH5/jv","yv5eCBjT"])),1,1,1,e.cb(0,e.a([e.os(e.cx,5,["Poetry",133,101,"History books","Photography","Chelsea Flower Show","Television",193,158,"Champagne","Lifestyle",99,68,"Book awards","Science fiction books",182,207,271,13,127,306,146,98,"planes and boats","bikes","Cars",301,"Audio books",48,"Fiction",21,45,14,129,"Venice Film Festival",309,"Film",126,11,"Restaurants",172,22,175,312,60,"Cannes Film Festival",252,176,"The Art Market",67,100,56,305,116,277,276,169,260]),e.os(e.w,22,["Opinion",234,239])]),e.ge(1),1),2592e6),73748:e.r(87,4,4,["7+P7qm2z","Qr1rnusd","lT48xz0T","vzFzraYC"]),74145:e.r(86,4,4,["0d8bE5Ch","jYjmjn+i"]),74452:e.r(75,3888e6,0,e.ps(1,360),3,3),74657:e.r(57,2,2,1,e.a([e.ref(39),e.af_u(["properties","article","topics"],e.bsc([],["Mz2fNGmO","O6t9GPTY","dMHvXxQk","mMYqb1z9","uYfj8VWi","ztctt8rF"]))]),1,["properties","article","authors"],["Mz2fNGmO","O6t9GPTY","WbA1NnIR","dMHvXxQk","l9pto/aI","mMYqb1z9","uYfj8VWi","ztctt8rF"],["3SJaq2VW","3WybEjGG","4b5T4hUg","4qhN2isI","6NI77DHv","7NPJ4GEv","DjR7DziS","HkRA4crh","T2d2ZCIO","gN+/K5LB","gYETSZI5","h8gqv7i/","jyykRPb5","qbre//k1","rVmcl5km","yv5eCBjT"]),74659:e.q(e.ocqs([e.tw(e.cb(0,e.ref(22),e.ge(2),2),2592e6),e.tw(e.cb(0,e.pc_(7,92),e.ge(1),1),2592e6),e.tw(e.cb(0,e.a([e.ref(39),e.ref(22)]),e.ge(1),1),7776e6),e.tw(e.cb(0,e.af_u(["properties","article","authors"],e.bsc([],["3WybEjGG","BkJ4Q/DX","HYGcJl4/","PXXai2yP","Wyj6ZN/M","ZGUhjQ/q","jynuweYf","t/bGApFz"])),e.ge(1),1),2592e6)])),74660:e.q(e.ocqs([e.tw(e.cb(0,e.ref(11),e.ge(2),2),2592e6),e.tw(e.cb(0,e.af_u(["properties","article","authors"],e.bsc([],["1v5MKVsk","Ai5Otxre","hfr4ywLn","k2BG+sow","rfapHw7N"])),e.ge(1),1),7776e6),e.tw(e.cb(0,e.a([e.y(22,253),e.ref(11)]),e.ge(1),1),7776e6),e.tw(e.cb(0,e.a([e.os(e.cx,7,[270,147,93,94]),e.ref(11)]),e.ge(1),1),7776e6)])),74661:e.r(44,2592e6,e.ref(31),2,2,7776e6,2592e6,e.bsc_(27,["/Pd1bgQ8","1jKg0PlQ","FHeZil0g","SxlQ++ss","tViAqBxm"]),1,e.pc_(21,168),1,1,1,e.cb(0,e.a([e.os(e.cx,7,[270,94,147,93]),e.ref(31)]),e.ge(1),1),2592e6),74662:e.r(57,3,3,3,e.af_u(["properties","article","authors"],e.bsc([],["9thGNHl0","D2LMBkoY","VbC2mxHM","qRizIwk1","sd0bVccZ"])),3,["properties","article","brand"],["49UXPtm6","Gm3fFzAc"],["8wJiY0wd","n6xGxMHN","tmnRBuR0"]),74664:e.r(59,1,1,e.a([e.os(e.cx,7,[253,147]),e.ref(1)]),e.af_u(["properties","article","authors"],e.bsc([],["BL5ptSfx","IKt3LCOI","LT9pJQ7N","Qd4WnxS8","c9YLNiSU","flImZhI+","kdkAksTz","keWijmEr","o6JaRcrE","qXLFpWU1","sGPmrZ2V","v0FH5/jv","v7OK3DAZ","w5GSCZLk"])),1),74665:e.r(2,[e.tw(e.cb(0,e.ref(26),e.ge(2),2),2592e6),e.tw(e.cb(0,e.af_u(["properties","article","brand"],e.bsc([],["7bquA+LO","AfrFA3FN","AjID0s4Y","pYgFAX//","tmnRBuR0","x1FNfK0T"])),e.ge(1),1),7776e6),e.tw(e.cb(0,e.af_u(["properties","article","authors"],e.bsc([],["/BxrEJT4","06C0oE9T","3LlTtAEL","4mv5ouvu","BkJ4Q/DX","CrzP4Bg2","FXvB4nY4","Gi8zj399","XSK4XYce","Y/+AX0bp","gtXXp8xT","hzl+wHLI","jynuweYf","kbuemTUH","kooSbocz","mLICLh1F","nKyykLeL","o+Vz/169","uVHfZo0a"])),e.ge(1),1),2592e6),e.tw(e.cb(0,e.os(e.w,22,[234,239]),e.ge(1),1),7776e6),e.tw(e.cb(0,e.os(e.s,1,["app.ft.com/stream/food-drink","www.ft.com/food-drink","www.ft.com/recipes","www.ft.com/restaurants"]),e.ge(3),3),7776e6)],e.cb(0,e.ref(26),e.ge(1),1),e.tw(e.cb(0,e.a([e.os(e.cx,7,[92,"How To Spend It In...","How To Host It",137,94,253,147,93]),e.af_u(["properties","article","topics"],e.bsc([],["1QzXYsvv","2NfUXCxn","4QCmrVnV","4tdBDAvw","55VH1CJX","Esb4IpM2","GOJNQHhT","Hm8G/ORc","IdpwIWvn","J9j2BJLS","LLV1K7n3","Lw8p+uFl","Mo4UCZQ4","NDnVdnyp","O6t9GPTY","Q2DMBg5n","Qd/is9K5","StnEyGJV","SyidSdCA","TWA5jdiB","UCkKiShJ","VVN/61Xl","WMbqASkn","aHfQqb8V","bbpxVTzE","bjFTmmpl","cbssUFrb","dB5ghnUH","dOVuhxdu","gO0Uksdp","ic51eEZ+","lKOHXbMc","oxl6d+Qn","qGN4MvFt","qXBKKtmv","rPRstb2a","ua7BESgQ","x/5Ttbhq","x6AIn7wO","x9KnX/j+","z5xLc7yb","znfWId4O","zri4eg1m"]))]),e.ge(1),1),2592e6)),75636:e.r(29,e.ref(14)),75640:e.r(32,e.scq(e.cw(2,e.a([e.pg(25,40),e.ref(6)])),e.vq(e.sw(6,e.ref(6),["properties","engaged_time"],e.g(40))),e.ge(1)),1,e.ref(14),e.ge(3),3,4,e.ref(14),e.ge(1),1),75854:e.r(3,[e.isp("financial_times_redshift","UPL040",!1,"75854"),e.isp("financial_times_redshift","UPL041",!1,"75854"),e.isp("financial_times_redshift","UPL042",!1,"75854"),e.isp("financial_times_redshift","UPL027",!1,"75854"),e.isp("financial_times_redshift","UPL033",!1,"75854")],e.cb(0,e.ref(46),e.ge(1),1),72576e5),75874:e.r(3,[e.isp("financial_times_redshift","UPL037",!1,"75874"),e.isp("financial_times_redshift","UPL026",!1,"75874"),e.isp("financial_times_redshift","UPL038",!1,"75874"),e.isp("financial_times_redshift","UPL039",!1,"75874")],e.cb(0,e.ref(46),e.ge(1),1),72576e5),75963:e.r(102,5,255),76402:e.r(63,e.as(e.cx,5,[266,52]),5,104),76414:e.r(86,3,3,["8gfIJOma","D7FJwatA","TfjQZ36K","bOeAMaKP","sim6HWX1"]),76507:e.r(82,[347,354,322,314]),76510:e.r(79,e.o([e.os(e.w,3,[435,410,390]),e.os(e.w,2,[386,333])]),1,1),76799:e.r(39,e.ref(27),1,1,2592e6,3,3,["properties","article","brand"],e.ref(45)),76800:e.r(38,e.ref(27),1,1,2592e6,e.ref(15),1,1),77423:e.r(75,48384e5,0,e.o([e.os(e.s,11,["adair turner: ‘i still think we have a chance of limiting global warming to well below 2c’","adam posen: ‘russia and north korea worked hard to be self-sufficient","agustín carstens: ‘it’s very important central banks let people know what is happening’","alan manning: ‘achieving growth by just having more people is not what we should aim for’","andrew scott: ‘we have to invest much more in our future selves’","andy haldane: ‘all crises open up opportunities to think afresh’","arthur laffer: ‘i made a vow that i would never","bart van ark: ‘productivity is done by the private sector’","brad delong: ‘the us is now an anti-globalisation outlier’","branko milanovic: ‘the forces of self-interest and technology cannot be undone’","charles goodhart: ‘we’re in for a fiscal crisis down the road and we don’t know how to solve it’","christopher pissarides: ‘debt and inflation could see us lose control’","claudia goldin: ‘greedy work has been made less greedy’","claudia sahm: ‘we do not need a recession","dani rodrik: ‘we are in a chronic state of shortage of good jobs’","david autor: ‘we have a real design choice about how we deploy ai’","economists exchange","erik brynjolfsson: ‘this could be the best decade in history — or the worst’","esther duflo and abhijit banerjee: ‘ours is a social science’","flavio toxvaerd: ‘we can’t tackle covid unless economists and epidemiologists talk to each other’","gita gopinath: ‘fiscal policy plays an essential role in recovery’","glenn hubbard: ‘the economy needs more than neoliberal medicine’","heather boushey: ‘the guardrails have come off the us economy’","huw pill: ‘we are making our judgments. the markets are making their judgments’","isabel schnabel: ‘the last mile of disinflation may be the most difficult one’","jean pisani-ferry: ‘it’s a war between two strands of capitalism — green and brown’","jeffrey sachs: ‘i see no financial obstacles to getting to net zero by 2050’","jennifer harris: ‘everything costs something in foreign policy terms. there are no free lunches here either","john williams: ‘i don’t have a recession in my forecast. i have pretty slow growth’","john williams: ‘i don’t want to see the economy weaken’","kristalina georgieva: ‘we are in a resilient place but cannot take stability for granted’","larry summers: ‘i’m concerned that what is being done is substantially excessive’","larry summers: ‘the destabilisation wrought by british errors will not be confined to britain’","loretta mester: the costs of stopping tightening too early are high","nick bloom: ‘it is becoming pretty clear now that hybrid working is here to stay’","olivier blanchard: ‘there’s a tendency for markets to focus on the present and extrapolate it forever’","partha dasgupta: ‘it’s not a giant step to introduce nature into economics’","paul collier: ‘in a healthy system","philip lane: ‘we have a unique initiative in europe now — it is really quite something’","raghuram rajan: ‘society has to find a new equilibrium’","ricardo reis: ‘central banks must balance bringing inflation down without breaking things’","stephanie kelton: ‘inflation has come down in spite of the fed","tim wu: ‘the white house was exhilarating"]),e.ps(1,"https://www.ft.com/content/7c06f107-d026-425f-92ff-4c9a89249662")]),1,1),77520:e.r(37,e.os(e.s,1,["howtospendit.com","howtospendit.ft.com"]),3,3,e.ref(7),3,e.pc_(7,147),3,3,3),77841:e.r(1,3,3),77848:e.r(1,1,1),77849:e.r(1,2,2),78924:e.r(24,14,"Belgium"),79157:e.r(82,[329,351,409,391,428,440,443]),79176:e.r(79,e.y(3,335),3,3),79183:e.r(49,["https://rankings.ft.com/business-education/masters-in-business-administration","rankings.ft.com/rankings/2142/global-mba-ranking-2015","rankings.ft.com/rankings/2152/online-mba-ranking-2015","rankings.ft.com/rankings/2632/global-mba-ranking-2016","rankings.ft.com/rankings/2634/online-mba-ranking-2016","rankings.ft.com/rankings/2710/global-mba-ranking-2017","rankings.ft.com/rankings/2711/online-mba-ranking-2017","rankings.ft.com/rankings/2808/global-mba-ranking-2018","rankings.ft.com/rankings/2809/online-mba-ranking-2018","rankings.ft.com/rankings/2825/global-mba-ranking-2019","rankings.ft.com/rankings/2826/online-mba-ranking-2019","rankings.ft.com/rankings/2837/global-mba-ranking-2020","rankings.ft.com/rankings/2838/online-mba-ranking-2020","rankings.ft.com/rankings/2859/global-mba-ranking-2021","rankings.ft.com/rankings/2860/online-mba-ranking-2021","rankings.ft.com/rankings/2866/mba-2022","rankings.ft.com/rankings/2868/online-mba-ranking-2022","rankings.ft.com/rankings/2909/mba-2023","rankings.ft.com/rankings/2942/online-mba-2023","rankings.ft.com/rankings/2951/mba-2024","rankings.ft.com/rankings/2953/online-mba-2024"],["/global-mba-ranking-20","/mba-202","/online-mba-202","/online-mba-ranking-20"]),79184:e.r(49,["https://rankings.ft.com/rankings/2944/executive-education-open-2023","https://rankings.ft.com/rankings/2945/executive-education-custom-2023","https://rankings.ft.com/rankings/2955/executive-education-custom-2024","https://rankings.ft.com/rankings/2956/executive-education-open-2024","https://rankings.ft.com/rankings/2963/executive-mba-2024",424,"rankings.ft.com/rankings/2452/executive-mba-ranking-2015","rankings.ft.com/rankings/2674/executive-mba-ranking-2016","rankings.ft.com/rankings/2766/executive-mba-ranking-2017","rankings.ft.com/rankings/2818/executive-mba-ranking-2018","rankings.ft.com/rankings/2832/executive-mba-ranking-2019","rankings.ft.com/rankings/2848/executive-mba-ranking-2020","rankings.ft.com/rankings/2863/emba-2021","rankings.ft.com/rankings/2876/emba-2022","rankings.ft.com/rankings/2950/emba-2023"],["/emba-202","/executive-mba-ranking-20",345]),79187:e.r(49,["https://rankings.ft.com/rankings/2961/masters-in-management-2024","rankings.ft.com/business-education/masters-in-management","rankings.ft.com/home/masters-in-management","rankings.ft.com/rankings/2282/masters-in-management-2015","rankings.ft.com/rankings/2654/masters-in-management-2016","rankings.ft.com/rankings/2736/masters-in-management-2017","rankings.ft.com/rankings/2817/masters-in-management-2018","rankings.ft.com/rankings/2829/masters-in-management-2019","rankings.ft.com/rankings/2847/masters-in-management-2020","rankings.ft.com/rankings/2875/masters-of-management-2022","rankings.ft.com/rankings/2948/masters-in-management-2023","rankings.ft.com/rankings/5/masters-in-management-2021"],["masters-in-management"]),79188:e.r(49,[424,"rankings.ft.com/home/executive-education","rankings.ft.com/rankings/2162/executive-education-open-2015","rankings.ft.com/rankings/2172/executive-education-customised-2015","rankings.ft.com/rankings/2635/executive-education-customised-2016","rankings.ft.com/rankings/2636/executive-education-open-2016","rankings.ft.com/rankings/2713/executive-education-open-2017","rankings.ft.com/rankings/2714/executive-education-customised-2017","rankings.ft.com/rankings/2812/executive-education-customised-2018","rankings.ft.com/rankings/2813/executive-education-open-2018","rankings.ft.com/rankings/2827/executive-education-customised-2019","rankings.ft.com/rankings/2828/executive-education-open-2019","rankings.ft.com/rankings/2839/executive-education-customised-2020","rankings.ft.com/rankings/2840/executive-education-open-2020","rankings.ft.com/rankings/2861/executive-education-open-directory-2021","rankings.ft.com/rankings/2862/executive-education-custom-directory-2021","rankings.ft.com/rankings/2871/executive-education-custom-2022","rankings.ft.com/rankings/2872/executive-education-open-2022","rankings.ft.com/rankings/2944/executive-education-open-2023","rankings.ft.com/rankings/2945/executive-education-custom-2023","rankings.ft.com/rankings/2955/executive-education-custom-2024","rankings.ft.com/rankings/2956/executive-education-open-2024"],[345]),79190:e.r(49,["https://rankings.ft.com/business-education/masters-in-finance","rankings.ft.com/home/masters-in-finance","rankings.ft.com/rankings/2/masters-in-finance-post-experience-2021","rankings.ft.com/rankings/2271/masters-in-finance-pre-experience-2015","rankings.ft.com/rankings/2281/masters-in-finance-post-experience-2015","rankings.ft.com/rankings/2650/masters-in-finance-pre-experience-2016","rankings.ft.com/rankings/2652/masters-in-finance-post-experience-2016","rankings.ft.com/rankings/2733/masters-in-finance-post-experience-2017","rankings.ft.com/rankings/2734/masters-in-finance-pre-experience-2017","rankings.ft.com/rankings/2814/masters-in-finance-pre-experience-2018","rankings.ft.com/rankings/2815/masters-in-finance-post-experience-2018","rankings.ft.com/rankings/2842/masters-in-finance-pre-experience-2020","rankings.ft.com/rankings/2843/masters-in-finance-post-experience-2020","rankings.ft.com/rankings/2864/masters-in-finance-pre-experience-2021","rankings.ft.com/rankings/2870/masters-in-finance-post-experience-2022","rankings.ft.com/rankings/2874/masters-in-finance-pre-experience-2022","rankings.ft.com/rankings/2946/masters-in-finance-pre-experience-2023","rankings.ft.com/rankings/2958/masters-in-finance-2024","rankings.ft.com/rankings/2959/masters-in-finance-post-experience-2024"],["masters-in-finance"]),79436:e.r(79,e.ref(10),1,1),81707:e.r(94,1,1,46),81780:e.r(93,"Technology"),81781:e.r(93,"Innovation"),81782:e.r(93,"Renewable energy"),81783:e.r(91,e.y_(["name"],41),e.y_(["name"],42),"Carbon capture and storage"),81784:e.r(93,"Natural gas"),81785:e.r(93,"Fintech"),81786:e.r(93,"Digital health"),81787:e.r(93,"Sustainability"),81788:e.r(93,"Sustainable capitalism"),81789:e.r(93,"Scientific research"),81790:e.r(93,"Future of work"),81791:e.r(93,"Corporate social responsibility"),81792:e.r(93,"ESG investing"),81793:e.r(93,"Infrastructure investment"),81794:e.r(92,26,57),81795:e.r(92,160,58),85612:e.q(e.acqs([e.cb(0,e.ref(46),e.ge(1),1),e.tw(e.cb(0,e.t,e.ge(3),3),24192e5)])),85622:e.q(e.ocqs([e.isp("financial_times_redshift","UPL006",!1,"85622"),e.cb(0,e.pc_(7,72),e.ge(3),3),e.cb(0,e.os(e.s,0,["ft.com/due-diligence"]),e.ge(1),1)])),85906:e.q(e.ocqs([e.tw(e.cb(0,e.ref(41),e.ge(3),3),3888e6),e.tw(e.cb(0,e.a([e.ref(9),e.ref(29)]),e.ge(3),3),3888e6)])),85907:e.r(40,e.ref(41),3,3,5184e6,0,e.a([e.ref(9),e.ref(29)]),3,3),85908:e.r(60,3,3,e.a([e.ref(9),e.ref(29)]),3,3,41),86173:e.r(53,3,3,e.pc_(7,47),e.s,1,["app.ft.com/stream/climatecapital","www.ft.com/climate-capital"]),86956:e.r(0,e.cb(0,e.ref(19),e.ge(1),1),e.y(6,389),e.ref(8)),87678:e.r(13,4,[427,409,341,402]),87696:e.r(77,e.t,3,3),87738:e.r(8,5,5,4,4),87739:e.r(8,14,14,4,4),87740:e.r(8,39,39,4,4),87741:e.r(9,6,6,5,5),87742:e.r(9,24,24,5,5),87744:e.r(9,96,96,5,5),88113:e.r(8,5,5,5,5),88865:e.r(49,["rankings.ft.com/business-education/regional-rankings","rankings.ft.com/home/regional-rankings","rankings.ft.com/rankings/2482/european-business-school-rankings-2015","rankings.ft.com/rankings/2688/european-business-school-rankings-2016","rankings.ft.com/rankings/2772/european-business-school-rankings-2017","rankings.ft.com/rankings/2824/european-business-school-rankings-2018","rankings.ft.com/rankings/2836/european-business-school-rankings-2019","rankings.ft.com/rankings/2858/european-business-school-rankings-2020","rankings.ft.com/rankings/2869/european-business-school-rankings-2021","rankings.ft.com/rankings/2943/european-business-school-rankings-2022","rankings.ft.com/rankings/2954/european-business-school-rankings-2023"],["/european-business-school-rankings-20","regional-rankings"]),91003:e.r(13,4,[439,383,385]),92621:e.r(8,9,9,5,5),92622:e.r(9,22,22,4,4),94606:e.r(83,1,["ft-energy-source"]),98074:e.r(54,5184e6,e.pc_(7,96),1,["app.ft.com/stream/ft-wealth","https://www.ft.com/ft-wealth"]),99503:e.r(86,3,3,["6mcSJNbE","6sRE59sU","GtumZ+WS","HUvJapBV","LsEs8Pp7","oKO3uW3T","y4I9kmj0"]),99536:e.r(69,4,e.ref(8),1,1),99689:e.r(93,"Workplace diversity & equality")}),rootCompressionLookup:e=>[(t,n,r)=>e.q(e.acqs([e.cb(0,e.a([n,r]),e.ge(1),1),t])),(t,n)=>e.q(e.acqs([e.cb(0,e.ref(46),e.ge(1),1),e.tw(e.cb(0,e.t,e.ge(n),t),72576e5)])),(t,n,r)=>e.q(e.acqs([e.ocqs(t),e.ocqs([n,r])])),(t,n,r)=>e.q(e.acqs([e.ocqs(t),e.tw(n,r)])),(t,n,r)=>e.q(e.acqs([e.ocqs([e.cb(0,n,e.ge(1),1),e.cb(0,e.bsc_(0,r),e.ge(1),1)]),e.cb(0,t,e.ge(1),1)])),(t,n,r,i,a,o,s,c)=>e.q(e.acqs([e.ocqs([e.tw(e.cb(0,s,e.ge(1),1),i),e.tw(e.cb(0,c,e.ge(1),1),a)]),e.tw(e.cb(0,n,e.ge(o),r),t)])),(t,n)=>e.q(e.acqs([e.scq(e.cw(2,e.pge(25,t)),e.vq(e.sw(6,e.t,["properties","engaged_time"],e.ge(n))),e.ge(10)),e.cb(1,e.ref(34),e.ge(1),1)])),(t,n,r)=>e.q(e.acqs([e.tw(n,r),t])),(t,n,r,i)=>e.q(e.acqs([e.tw(e.cb(0,e.a([e.ref(24),e.ref(r)]),e.ge(n),t),6048e5),e.tw(e.cb(0,e.a([e.ref(24),e.ref(i)]),e.le(264),265),6048e5)])),(t,n,r,i)=>e.q(e.acqs([e.tw(e.cb(0,e.a([e.ref(24),e.ref(r)]),e.ge(n),t),2592e6),e.tw(e.cb(0,e.a([e.ref(24),e.ref(i)]),e.le(1049),1050),2592e6)])),(t,n,r)=>e.q(e.cb(0,t,e.ge(r),n)),(t,n,r,i)=>e.q(e.cb(0,e.a([r,i]),e.ge(n),t)),t=>e.q(e.cb(0,e.a([e.ref(23),e.ref(t)]),e.ge(1),1)),(t,n)=>e.q(e.cb(0,e.a([e.ref(43),e.os(e.w,t,n)]),e.ge(1),1)),(t,n,r,i,a)=>e.q(e.cb(0,e.a([e.y(r,i),e.ref(a)]),e.ge(n),t)),t=>e.q(e.cb(0,e.a([e.y(14,293),e.ref(23),e.ref(t)]),e.ge(1),1)),t=>e.q(e.cb(0,e.a([e.y(20,t),e.tg(16734816e5)]),e.ge(1),1)),(t,n,r)=>e.q(e.cb(0,e.a([e.ps(t,n),e.ref(r)]),e.ge(1),1)),(t,n)=>e.q(e.cb(0,e.os(e.s,t,n),e.ge(1),1)),t=>e.q(e.cb(0,e.os(e.s,10,t),e.ge(1),1)),t=>e.q(e.cb(0,e.ref(t),e.ge(1),1)),(t,n)=>e.q(e.cb(0,e.bsc_(t,n),e.ge(1),1)),(t,n,r,i,a,o,s,c)=>e.q(e.cb(0,e.o([e.os(r,i,a),e.os(o,s,c)]),e.ge(n),t)),(t,n)=>e.q(e.cb(0,e.y(t,n),e.ge(1),1)),(t,n)=>e.q(e.cb(0,e.pe(t,n),e.ge(1),1)),(t,n)=>e.q(e.cb(0,e.ps(t,n),e.ge(1),1)),t=>e.q(e.cb(0,e.ps(t,449),e.ge(1),1)),t=>e.q(e.cb(1,e.a([e.pe(9,t),e.tg(1726056e6)]),e.ge(1),1)),t=>e.q(e.cb(1,e.os(e.e,9,t),e.ge(1),1)),t=>e.q(e.cb(4,t,e.ge(1),1)),(t,n)=>e.q(e.ocqs([t,n])),(t,n,r)=>e.q(e.ocqs([e.cb(t,n,e.ge(1),1),e.cb(0,r,e.ge(1),1)])),(t,n,r,i,a,o,s,c,u)=>e.q(e.ocqs([e.cb(n,r,i,a),e.cb(o,s,c,u),t])),(t,n,r,i,a,o)=>e.q(e.ocqs([e.cb(r,i,a,o),t,n])),(t,n,r,i,a,o,s,c,u,l,f)=>e.q(e.ocqs([e.cb(0,e.os(e.s,a,o),e.ge(s),t),e.cb(0,n,e.ge(c),r),e.cb(0,e.os(e.s,u,l),e.ge(f),i)])),(t,n,r,i,a,o)=>e.q(e.ocqs([e.isp("financial_times_redshift",t,!1,n),e.isp("financial_times_redshift",r,!1,i),e.isp("financial_times_redshift",a,!1,o)])),(t,n,r,i)=>e.q(e.ocqs([e.tw(e.cb(t,n,e.ge(1),1),145152e5),e.tw(e.cb(r,i,e.ge(1),1),145152e5)])),(t,n,r,i,a,o,s,c,u)=>e.q(e.ocqs([e.tw(e.cb(0,t,e.ge(r),n),24192e5),e.tw(e.cb(0,i,e.ge(c),a),24192e5),e.tw(e.cb(0,o,e.ge(u),s),24192e5)])),(t,n,r,i,a,o,s)=>e.q(e.ocqs([e.tw(e.cb(0,t,e.ge(r),n),2592e6),e.tw(e.cb(0,a,e.ge(s),o),i)])),(t,n,r,i,a,o,s,c)=>e.q(e.ocqs([e.tw(e.cb(0,t,e.ge(r),n),2592e6),e.tw(e.cb(0,e.af_u(s,c),e.ge(o),a),i)])),(t,n,r,i,a,o,s,c)=>e.q(e.ocqs([e.tw(e.cb(0,t,e.ge(r),n),5184e6),e.tw(e.cb(a,o,e.ge(c),s),i)])),(t,n,r,i,a,o,s,c,u,l,f,m,d,g,p)=>e.q(e.ocqs([e.tw(e.cb(0,t,e.ge(r),n),7776e6),e.cb(0,i,e.ge(u),a),e.cb(0,e.os(l,f,m),e.ge(d),o),e.cb(s,e.os(e.s,1,g),e.ge(p),c)])),(t,n,r,i,a,o)=>e.q(e.ocqs([e.tw(e.cb(0,t,e.ge(3),3),7776e6),e.tw(e.cb(0,e.af_u(["properties","article","topics"],e.bsc([],a)),e.ge(3),3),7776e6),e.tw(e.cb(0,e.af_u(i,e.bsc([],o)),e.ge(3),3),7776e6),e.isp("financial_times_redshift",n,!1,r)])),(t,n,r,i,a,o,s,c,u,l,f,m)=>e.q(e.ocqs([e.tw(e.cb(0,n,e.ge(i),r),t),e.tw(e.cb(0,s,e.ge(f),c),a),e.tw(e.cb(0,u,e.ge(m),l),o)])),(t,n,r,i,a,o,s,c,u,l,f,m,d,g)=>e.q(e.ocqs([e.tw(e.cb(0,n,e.ge(i),r),t),e.tw(e.cb(0,s,e.ge(f),c),a),e.tw(e.cb(0,u,e.ge(m),l),o),e.tw(d,g)])),(t,n,r,i,a,o,s)=>e.q(e.ocqs([e.tw(e.cb(0,r,e.ge(a),i),n),e.cb(o,s,e.ge(1),1),t])),(t,n,r,i,a,o,s)=>e.q(e.ocqs([e.tw(e.cb(0,r,e.ge(a),i),n),e.tw(o,s),t])),(t,n,r,i,a,o,s,c,u,l,f,m,d)=>e.q(e.ocqs([e.tw(e.cb(0,a,e.ge(m),o),t),e.tw(e.cb(0,s,e.ge(3),3),n),e.isp("financial_times_redshift",r,!1,i),e.tw(e.cb(0,c,e.ge(d),u),7776e6),e.tw(e.cb(l,f,e.ge(1),1),7776e6)])),(t,n,r,i,a,o,s,c,u,l,f,m,d,g,p,y,h,v,b,w)=>e.q(e.ocqs([e.tw(e.cb(0,u,e.ge(y),l),r),e.tw(e.cb(0,f,e.ge(h),m),i),e.tw(e.cb(0,e.af_u(["properties","article","topics"],e.bsc([],w)),e.ge(v),d),a),e.tw(e.cb(0,g,e.ge(b),p),o),e.isp("financial_times_redshift",s,!1,c),t,n])),(t,n)=>e.q(e.ocqs([e.tw(e.cb(0,e.a([e.y(0,423),e.os(e.s,1,t)]),e.ge(1),1),7776e6),e.tw(e.cb(0,e.a([e.y(0,423),e.os(e.s,1,n)]),e.ge(1),1),7776e6)])),(t,n,r)=>e.q(e.ocqs([e.tw(e.cb(0,e.a([e.y(0,453),e.af_u(["properties","articleST","contentCategory"],e.bsc([],n))]),e.ge(3),3),7776e6),e.tw(e.cb(0,e.a([e.y(0,453),e.os(e.s,19,t)]),e.ge(3),3),7776e6),e.tw(e.cb(0,e.a([e.y(0,453),e.os(e.s,1,r)]),e.ge(3),3),7776e6)])),(t,n,r)=>e.q(e.ocqs([e.tw(e.cb(0,e.a([e.y(0,453),e.af_u(["properties","articleST","contentCategory"],e.bsc([],n))]),e.ge(3),3),7776e6),e.tw(e.cb(0,e.a([e.y(0,453),e.os(e.s,19,t)]),e.ge(3),3),7776e6),e.tw(e.cb(0,e.a([e.y(0,453),e.ps(1,r)]),e.ge(3),3),7776e6)])),(t,n,r,i)=>e.q(e.ocqs([e.tw(e.cb(0,e.a([e.y(0,456),e.af_u(["properties","articleST","contentCategory"],e.bsc([],i))]),e.ge(3),3),7776e6),e.tw(e.cb(0,e.a([e.y(0,456),e.os(e.s,19,n)]),e.ge(3),3),7776e6),e.tw(e.cb(0,e.a([e.y(0,456),e.os(e.s,1,t)]),e.ge(3),3),7776e6),e.tw(e.cb(0,e.a([e.y(0,456),e.af_u(["properties","articleST","secondaryTags"],e.bsc([],r))]),e.ge(3),3),7776e6)])),(t,n,r,i,a,o)=>e.q(e.ocqs([e.tw(e.cb(0,e.os(i,a,o),e.ge(n),t),7776e6),e.tw(e.cb(0,r,e.ge(3),3),7776e6)])),(t,n,r,i)=>e.q(e.ocqs([e.tw(e.cb(0,e.os(e.s,r,i),e.ge(3),3),5184e6),e.tw(e.cb(0,n,e.ge(3),3),t)])),(t,n,r)=>e.q(e.ocqs([e.tw(e.cb(0,e.os(e.s,1,r),e.ge(1),1),145152e5),e.tw(e.cb(t,n,e.ge(1),1),145152e5)])),(t,n,r,i,a,o)=>e.q(e.ocqs([e.tw(e.cb(0,e.af_u(["properties","article","topics"],e.bsc([],o)),e.ge(n),t),7776e6),e.tw(e.cb(0,r,e.ge(a),i),7776e6)])),(t,n,r,i,a,o,s,c)=>e.q(e.ocqs([e.tw(e.cb(0,e.af_u(["properties","article","topics"],e.bsc([],s)),e.ge(n),t),2592e6),e.tw(e.cb(0,e.af_u(o,e.bsc([],c)),e.ge(a),r),2592e6),e.tw(e.cb(0,i,e.ge(1),1),2592e6)])),(t,n,r,i,a,o,s,c,u,l)=>e.q(e.ocqs([e.tw(e.cb(0,e.af_u(["properties","article","topics"],e.bsc([],l)),e.ge(n),t),7776e6),e.tw(e.cb(0,e.os(e.s,1,s),e.ge(a),r),7776e6),e.tw(e.cb(0,e.os(e.s,c,u),e.ge(o),i),7776e6)])),(t,n,r,i,a)=>e.q(e.ocqs([e.tw(e.cb(0,e.ref(a),e.ge(n),t),2592e6),e.tw(e.cb(0,r,e.ge(1),1),2592e6),e.tw(e.cb(0,i,e.ge(1),1),7776e6)])),(t,n,r,i,a,o)=>e.q(e.ocqs([e.tw(e.cb(0,e.ref(o),e.ge(n),t),7776e6),e.tw(e.cb(0,r,e.ge(a),i),7776e6)])),(t,n,r,i)=>e.q(e.ocqs([e.tw(e.cb(0,e.o(i),e.ge(4),4),24192e5),e.tw(e.cb(0,t,e.ge(r),n),24192e5)])),(t,n,r)=>e.q(e.ocqs([e.tw(e.cb(0,e.o([t,n]),e.ge(1),1),7776e6),e.tw(e.cb(0,e.ps(1,r),e.ge(1),1),7776e6)])),(t,n,r)=>e.q(e.ocqs([e.tw(e.cb(0,e.pc_(n,r),e.ge(3),3),24192e5),e.tw(e.cb(0,t,e.ge(3),3),24192e5)])),(t,n)=>e.q(e.ocqs([e.tw(e.cb(0,e.pc_(7,t),e.ge(1),1),2592e6),e.cb(0,e.af_u(["properties","user","followedConcepts"],e.e_(["name"],n)),e.ge(1),1)])),(t,n,r,i)=>e.q(e.ocqs([e.tw(e.cb(0,e.pc_(7,i),e.ge(1),1),2592e6),e.isp("financial_times_redshift",n,!1,r),t])),(t,n,r,i,a,o)=>e.q(e.ocqs([e.tw(e.cb(0,e.y(t,n),e.ge(1),1),145152e5),e.scq(e.tw(e.cw(2,e.pc(["aggregations","SegmentEntry"],r)),7776e6),e.tw(e.cw(3,e.pe(13,i)),7776e6),e.ge(1)),e.scq(e.tw(e.cw(2,e.pc(["aggregations","SegmentEntry"],a)),7776e6),e.tw(e.cw(3,e.pe(13,o)),7776e6),e.ge(1))])),(t,n,r)=>e.q(e.ocqs([e.tw(e.cb(0,e.ps(1,t),e.ge(1),1),145152e5),e.tw(e.cb(1,e.os(e.e,n,r),e.ge(1),1),145152e5)])),(t,n)=>e.q(e.isp("financial_times_redshift",t,!1,n)),(t,n,r,i)=>e.q(e.tw(e.cb(t,n,e.ge(i),r),2592e6)),(t,n,r,i)=>e.q(e.tw(e.cb(t,n,e.ge(i),r),7776e6)),(t,n)=>e.q(e.tw(e.cb(t,n,e.ge(1),1),145152e5)),(t,n,r)=>e.q(e.tw(e.cb(t,e.pe(n,r),e.ge(1),1),145152e5)),t=>e.q(e.tw(e.cb(t,e.pe(8,3583799191),e.ge(1),1),145152e5)),(t,n)=>e.q(e.tw(e.cb(t,e.ps(1,n),e.ge(1),1),145152e5)),(t,n,r,i,a)=>e.q(e.tw(e.cb(n,r,e.ge(a),i),t)),(t,n,r)=>e.q(e.tw(e.cb(0,t,e.ge(r),n),6048e5)),(t,n,r)=>e.q(e.tw(e.cb(0,t,e.ge(r),n),24192e5)),(t,n,r)=>e.q(e.tw(e.cb(0,t,e.ge(r),n),5184e6)),(t,n,r)=>e.q(e.tw(e.cb(0,t,e.ge(r),n),72576e5)),(t,n)=>e.q(e.tw(e.cb(0,e.a([t,n]),e.ge(1),1),72576e5)),t=>e.q(e.tw(e.cb(0,e.a([t,e.ref(8)]),e.ge(1),1),145152e5)),t=>e.q(e.tw(e.cb(0,e.a([e.ref(43),e.os(e.w,4,t)]),e.ge(1),1),72576e5)),(t,n)=>e.q(e.tw(e.cb(0,e.os(e.s,t,n),e.ge(1),1),145152e5)),t=>e.q(e.tw(e.cb(0,e.af_u(["properties","article","authors"],e.bsc([],t)),e.ge(3),3),7776e6)),t=>e.q(e.tw(e.cb(0,e.af_u(["properties","article","topics"],e.bsc([],t)),e.ge(3),3),7776e6)),(t,n,r)=>e.q(e.tw(e.cb(0,e.af_u(["properties","article","topics"],e.bsc([],r)),e.ge(n),t),24192e5)),(t,n,r)=>e.q(e.tw(e.cb(0,e.af_u(["properties","article","topics"],e.bsc([],r)),e.ge(n),t),2592e6)),t=>e.q(e.tw(e.cb(0,e.af_u(["properties","user","followedConcepts"],e.o(t)),e.ge(1),1),6048e5)),t=>e.q(e.tw(e.cb(0,e.af_u(["properties","user","followedConcepts"],e.o(t)),e.ge(1),1),145152e5)),(t,n,r)=>e.q(e.tw(e.cb(0,e.af_u(["properties","user","followedConcepts"],e.o(r)),e.ge(n),t),7776e6)),(t,n,r)=>e.q(e.tw(e.cb(0,e.af_u(["properties","user","followedConcepts"],e.o([t,n,e.e_(["name"],r)])),e.ge(1),1),7776e6)),(t,n)=>e.q(e.tw(e.cb(0,e.af_u(["properties","user","followedConcepts"],e.o([e.y_(["name"],t),e.y_(["name"],n)])),e.ge(1),1),7776e6)),t=>e.q(e.tw(e.cb(0,e.af_u(["properties","user","followedConcepts"],e.e_(["name"],t)),e.ge(1),1),7776e6)),(t,n,r)=>e.q(e.tw(e.cb(0,e.ref(r),e.ge(n),t),7776e6)),(t,n,r,i)=>e.q(e.tw(e.cb(0,e.o([t,e.os(n,r,i)]),e.ge(1),1),7776e6)),(t,n,r)=>e.q(e.tw(e.cb(0,e.o([t,e.os(e.w,n,r)]),e.ge(1),1),290304e5)),(t,n,r,i,a,o)=>e.q(e.tw(e.cb(0,e.o([r,i,a,e.os(e.cx,5,o)]),e.ge(n),t),24192e5)),(t,n,r,i,a,o,s,c,u)=>e.q(e.tw(e.cb(0,e.o([r,e.os(i,a,o),e.os(s,c,u)]),e.ge(n),t),24192e5)),(t,n,r,i)=>e.q(e.tw(e.cb(0,e.o([r,e.os(e.cx,5,i)]),e.ge(n),t),24192e5)),(t,n,r)=>e.q(e.tw(e.cb(0,e.o([e.os(e.w,4,t),e.y(3,n),e.os(e.w,2,r)]),e.ge(1),1),290304e5)),(t,n,r)=>e.q(e.tw(e.cb(0,e.o([e.pe(1,r),e.os(e.cx,16,t),e.os(e.cx,5,n)]),e.ge(4),4),24192e5)),(t,n)=>e.q(e.tw(e.cb(0,e.pc_(t,n),e.ge(3),3),2592e6)),(t,n)=>e.q(e.tw(e.cb(0,e.y(t,n),e.ge(1),1),7776e6)),t=>e.q(e.tw(e.cb(0,e.y(2,t),e.ge(1),1),290304e5)),t=>e.q(e.tw(e.cb(0,e.pe(12,t),e.ge(1),1),7776e6)),(t,n)=>e.q(e.tw(e.cb(0,e.ps(t,n),e.ge(1),1),7776e6)),t=>e.q(e.tw(e.cb(1,e.os(e.e,9,t),e.ge(1),1),145152e5)),t=>e.q(e.tw(e.cb(5,e.a([e.y(0,449),e.pe(24,t)]),e.ge(1),1),7776e6))],stateSyncReplays:e=>[],subexpressionsLookup:e=>[e.os(e.w,6,[389,426]),e.af_u(["properties","article","topics"],e.bsc([],["8I4mrWhV","8LKDsnBx","FjDuYWVl","JG2FWgMF","RwZkCtZ2","l9pto/aI","maDvxs/Y"])),e.os(e.w,0,[317,449]),e.af_u(["properties","user","followedConcepts"],e.ref(21)),e.os(e.w,6,[442,379,426,334,389]),e.os(e.w,6,[316,442,379,426,334,389]),e.af_u(["properties","article","topics"],e.bsc([],["2NfUXCxn","8I4mrWhV","8LKDsnBx","BO2HubCC","DQczFymy","DSO9jPvt","ExJgy/uw","FjDuYWVl","G7Tb5Yjb","Ivt25G9k","L4k9wc43","LLV1K7n3","M7KVQo64","NDnVdnyp","O6t9GPTY","OY2iZHXt","OxhhoJ42","Q1xIDVU+","Q2DMBg5n","RnTpmt25","RwZkCtZ2","WbA1NnIR","YZObhnj3","Zm57TwOR","aHfQqb8V","bjFTmmpl","dB5ghnUH","dMHvXxQk","dOVuhxdu","gO0Uksdp","hIk8KcQT","ic51eEZ+","iuN7tkpT","lKOHXbMc","lTparofD","maDvxs/Y","n97IRyaW","nJK0Hj6P","o1kRfd1e","oxl6d+Qn","p3sZA8jj","qFsjbacH","qXBKKtmv","sEC0F5uL","uYfj8VWi","ua7BESgQ","wOzA0nSM","x6AIn7wO","x9KnX/j+","xXYE21hp","xtJnmVjC","zAdV1ySA","znfWId4O","ztctt8rF"])),e.os(e.s,1,[319,450]),e.bsc_(0,["4hZKPVJe","69Q7FrEP"]),e.os(e.cx,5,[130,220,71,138,140,139]),e.o([e.ref(30),e.ref(12)]),e.af_u(["properties","article","topics"],e.ref(20)),e.os(e.w,2,[439,269,438,384,151,153]),e.os(e.w,2,[396,376]),e.os(e.e,23,[4858985271,4824899484,4916164028,4906443106,4872154766,4834564230,17071129,16506769,4761211409,4898257415,17291809,4815530075,17226649,4743050551,4853829738,139158049,4923337424,4855421277,4509060898,4813437271,4903037490,4944239958,4817001997,4951224467,47499049,4815623192,4932063272,4821286752,16856809,4833099352,4919686922,4908664202,4990614892,16606609,4729402017,4803865617,4803380530,190695889,4402353290,208114849,4903630543,99573049,4790213476,4865351256,16201129,4834652375,16429729,4601481767,4787259116,4907562621,16944049,4742800448,75516409,4768716171,17374129,5008320878,4780354078,4785014140,4906024717,4820968557,5004026819,4944210671,4797037407,4623321291,5002841659,4797023706,4797299218,4916804777,4854441313,5001344291,4847952126,4932711580,4731334718,60482929,34001929,104920129,17428489,4744239359,4851878110,5010099352,4836769175,4768040047,108761929,4981327397,4940469115,4982884449,4837749047,135231769,4763251086,16048729,4840716212,4976591234,4809538686,4764082999,16572049,4826067961,4837151972,114655369,4795192211,4918913461,16392169,4906859471,4827105242,4633795193,4797776870,4813435324,4896952214,16226089,4791337153,4990804981,32810689,4882861129,17136289,4948433720,4949125323,4882854844,4836285792,4923090942,4952844402,4943669893,201786649,4743041008,208772329,4895750046,5001245965,21148129,4769068934,4950385678,4950719254,4943674249,4921795801,4743267505,4834366073,5001465531,4772240387,4910371343,4889913312,4961187027,4930771836,5019396366,4921151670,4875670240,4771320122,16185409,4906867579,4844389104,17003809,4823770701]),e.af_u(["properties","article","topics"],e.ref(45)),e.af_u(["properties","user","followedConcepts"],e.o([e.y_(["name"],178),e.y_(["name"],183),e.y_(["name"],117),e.y_(["name"],108),e.y_(["name"],111),e.y_(["name"],105),e.y_(["name"],106),e.y_(["name"],107),e.y_(["name"],112),e.y_(["name"],109),e.y_(["name"],110),e.y_(["name"],304),e.y_(["name"],252),e.y_(["name"],305),e.y_(["name"],22)])),e.af_u(["properties","user","followedConcepts"],e.o([e.y_(["name"],307),e.y_(["name"],282),e.y_(["name"],243),e.y_(["name"],195),e.y_(["name"],120),e.y_(["name"],145),e.y_(["name"],247),e.y_(["name"],173),e.y_(["name"],272),e.y_(["name"],208),e.y_(["name"],278),e.y_(["name"],279),e.y_(["name"],241),e.y_(["name"],280),e.y_(["name"],60),e.y_(["name"],21),e.y_(["name"],45),e.y_(["name"],252),e.y_(["name"],56),e.y_(["name"],276)])),e.nt(e.ref(35)),e.bsc_(14,["l2kSHxD3"]),e.bsc([],["LLV1K7n3","M7KVQo64","Q2DMBg5n","dB5ghnUH","xXYE21hp"]),e.o([e.y_(["name"],133),e.y_(["name"],68),e.y_(["name"],301),e.y_(["name"],175),e.y_(["name"],169)]),e.af_u(["properties","article","topics"],e.bsc([],["+rCU8bqy","5CVmsSTu","BO2HubCC","Ivt25G9k","JFX3qVpG","JPItQaxe","YlqAyjLi","dtXAbhnW","fjkfC+YQ","hj18jVV6","iuN7tkpT","kb7bx1mp","nJK0Hj6P","nYK76oEQ","oxl6d+Qn","p2k2LStm","q65HQXut","rl9abmYc","tJ22vhbn","zAdV1ySA"])),e.os(e.w,0,[449,317]),e.os(e.w,0,[423,344,317,449]),e.af_u(["properties","article","topics"],e.bsc([],["3sykcaEl","T7dVJXJo","pY8t79Zq"])),e.af_u(["properties","article","topics"],e.bsc([],["1QzXYsvv","2NfUXCxn","4QCmrVnV","4tdBDAvw","55VH1CJX","Esb4IpM2","GOJNQHhT","Hm8G/ORc","IdpwIWvn","J9j2BJLS","LLV1K7n3","Lw8p+uFl","Mo4UCZQ4","NDnVdnyp","O6t9GPTY","Q2DMBg5n","Qd/is9K5","StnEyGJV","SyidSdCA","TWA5jdiB","UCkKiShJ","VVN/61Xl","WMbqASkn","aHfQqb8V","bbpxVTzE","cbssUFrb","dB5ghnUH","dOVuhxdu","gO0Uksdp","lKOHXbMc","oXoIcTTb","oxl6d+Qn","qGN4MvFt","qXBKKtmv","rPRstb2a","ua7BESgQ","x/5Ttbhq","x6AIn7wO","z5xLc7yb","znfWId4O","zri4eg1m"])),e.af_u(["properties","article","brand"],e.bsc([],["AjID0s4Y","ZjdjcCBy","lTparofD","tmnRBuR0","x1FNfK0T"])),e.nt(e.ps(17,245)),e.af_u(["properties","article","topics"],e.ref(42)),e.o([e.os(e.w,4,[385,383,150,151]),e.os(e.w,3,[444,265])]),e.af_u(["properties","article","topics"],e.bsc([],["/X3X2UmV","1arDIMtv","E/Ubgub6","Fg01I+M1","G7Tb5Yjb","GOJNQHhT","I+/WanMw","LNWzpG3e","Q/zEG/fD","TJYlwv+N","YZObhnj3","fDYZPYVR","iP4PNVDe","nJK0Hj6P","qFsjbacH"])),e.bsc_(0,["2bcXmReh","8LK5tT1k","9B1e5ujN","9WouXzTe","NIMeeJN0","W5+hsorX","p0Gmp3fI","wtOUIu/9"]),e.os(e.cx,18,[417,416,261]),e.bsc_(30,["gNy902M1"]),e.os(e.s,17,[330,331]),e.o([e.y_(["name"],311),e.y_(["name"],257),e.y_(["name"],256),e.y_(["name"],238),e.y_(["name"],230),e.y_(["name"],218),e.y_(["name"],215),e.y_(["name"],217),e.y_(["name"],216),e.y_(["name"],214),e.y_(["name"],211),e.y_(["name"],210),e.y_(["name"],213),e.y_(["name"],212),e.y_(["name"],202),e.y_(["name"],134),e.y_(["name"],64),e.y_(["name"],38)]),e.af_u(["properties","article","topics"],e.bsc([],["OCw62zMZ","XnYBl4Fw","YdQ5InCm","dfeZo8LF","rI+/EHaA"])),e.os(e.w,3,[435,410,338,411,403,393,401,339,337,335]),e.os(e.cx,7,[94,253,147,93]),e.af_u(["properties","user","followedConcepts"],e.ref(36)),e.af_u(["properties","article","topics"],e.ref(44)),e.bsc([],["/mefF6VZ","0Biwguij","2h0Q1Tlz","EVvFW9dS","GtumZ+WS","HUvJapBV","y4I9kmj0"]),e.os(e.w,3,[403,401,393,338,335,295,206,205,90,32]),e.bsc([],["eTN55f/x","xI+wWlTj"]),e.bsc([],["2NfUXCxn","4QCmrVnV","8I4mrWhV","8LKDsnBx","BO2HubCC","DQczFymy","DSO9jPvt","ExJgy/uw","FjDuYWVl","G7Tb5Yjb","Ivt25G9k","JG2FWgMF","L4k9wc43","LLV1K7n3","M7KVQo64","NDnVdnyp","O6t9GPTY","OY2iZHXt","OxhhoJ42","PjOGmkWo","Q1xIDVU+","Q2DMBg5n","RnTpmt25","RwZkCtZ2","WbA1NnIR","YZObhnj3","Zm57TwOR","aHfQqb8V","bjFTmmpl","dB5ghnUH","dMHvXxQk","dOVuhxdu","gO0Uksdp","hIk8KcQT","ic51eEZ+","iuN7tkpT","jToAt0jU","l9pto/aI","lKOHXbMc","maDvxs/Y","n97IRyaW","nJK0Hj6P","o1kRfd1e","oxl6d+Qn","p3sZA8jj","qXBKKtmv","sEC0F5uL","uYfj8VWi","ua7BESgQ","vW2QxDLj","wOzA0nSM","x6AIn7wO","x9KnX/j+","xXYE21hp","xtJnmVjC","zAdV1ySA","znfWId4O","ztctt8rF"]),e.bsc_(3,["9VBwDnL7","D09RRNYC","JAxN9yUC","P4HpHWmo","TtlsQles","VL5yZM+Q","XSgR4Z7i","g8L8UU2f","gk9gHCqB","sbety2Xu"])]}})})));var Ce=n(637),Le=n(229);async function Ae(m){let{contextsInitTimestampPerformance:d,master:g}=m;const p=await g.next(),y=performance.now();Object.entries(p.globals??{}).forEach((e=>{let[t,n]=e;Object.defineProperty(self,t,{value:n})}));const h=new Z(p.permutiveConfig);h.measureBetween("waiting_worker_high_priority_config",d,y);const v=function(t){var n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.RP;return t.loggingEnabled&&void 0!==(null===(n=self.console)||void 0===n?void 0:n.log)?new z(r):new x}(p.permutiveConfig,p.sdkInitTimestampDate),b=p.metricsEnabled?new A(p.sdkInitTimestampPerformance,p.timeOriginMainContext,v):new G;b.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"worker_evaluated",time_origin:"sdk_init"},d),b.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"worker_received_high_priority_config",time_origin:"sdk_init"},y);const w=(0,r.zG)(g.next,h.traceTask("waiting_worker_low_priority_config"))();w.then((()=>b.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"worker_received_low_priority_config",time_origin:"sdk_init"})));const _=(0,r.zG)((()=>g.read()),function(e,n){const i=e=>(0,r.zG)(e,O.Hd((e=>e in n)),(e=>{let{left:t,right:n}=e;return{buffers:n,nonBuffers:t}}));return a=>{const{buffers:o,nonBuffers:s}=i(e),[c,u]=t.Ue({...s,...(0,r.zG)(o,O.Su((e=>()=>{const t=o[e];return o[e]=n[e].empty,t})))});return(async()=>{for(;;){const e=(0,r.zG)(await a(),F.UI(i),F.ur({concat:(e,t)=>({nonBuffers:{...e.nonBuffers,...t.nonBuffers},buffers:(()=>{const r={...e.buffers};for(const e in t.buffers)r[e]=e in r?n[e].concat(r[e],t.buffers[e]):t.buffers[e];return r})()})})),t=(0,r.zG)(e.buffers,O.Su(((e,t)=>(o[e]=n[e].concat(o[e],t),()=>{const t=o[e];return o[e]=n[e].empty,t}))));u({...c.current,...e.nonBuffers,...t})}})(),(0,r.zG)(e,O.Su((e=>(0,r.zG)(c,t.UI((t=>t[e]))))))}}({contextualCohorts:a.YP,consent:p.consent,enrichmentReplacementMap:a.YP,eventSourceId:p.eventSourceId,identities:a.YP,newEvents:o.cS,pageviewState:p.pageviewState,priorCachedEventsResponses:o.cS,sessionId:p.sessionId,userId:p.userId,userIdIsNewlyGenerated:p.userIdIsNewlyGenerated,viewId:p.pageviewState.viewId,webClient:a.G(p.webClient)},{newEvents:o.uZ(),priorCachedEventsResponses:o.uZ()}),(0,s.rO)({newEvents:(0,Ce.F)(b,"pageview_received_by_worker")}),(e=>({...e,currentTimestampSecs:Ge((0,r.zG)(p.initialTimestampSecs,a.EQ((()=>0),(e=>e-Date.now()/1e3))))}))),{eventsCachedInWorker:E,coreService:S}=await function(s,m,d,g,p,y){g.debug("SDK core started",s);const h=500,v=new I(y),b=new k(s.permutiveConfig),w=new te(b,s.permutiveConfig,v,y,g,(()=>d.webClient.current)),_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};w.reportError(e,null==t?void 0:t.userId,null==t?void 0:t.timestamp)},E=(0,r.zG)(c.Y3((()=>Promise.resolve().then(n.bind(n,579)).then((e=>e.watson))),(()=>"Failed to import watson.")),c.UI((e=>(0,r.zG)(d.webClient,t.UI(a.UI((e=>e.url))),t.D8(a.Eh(Le.Eq)),(n=>e({config:s.permutiveConfig,metrics:y,permutiveApi:v,permutiveUrls:b,pageUrl:n,trace:p,watsonEnabled:(0,r.zG)(d.pageviewState,t.UI((e=>e.watsonEnabled)))})))))),S=(0,r.zG)(K.initialise(s.permutiveConfig,g,_,p,y,d.userId,(()=>(0,r.zG)($.connect(new M(s.permutiveConfig),y,new T,s.organizationId,`events_${d.userId.current}`,`keys_${d.userId.current}`,"events",g,d.consent,s.isSecureContext),p.traceTask("connect_idb_events_cache")))),p.traceTask("initialise_events_cache"),c.At((()=>()=>y.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"events_cache_initialised",time_origin:"sdk_init"},performance.now()))),c.EQ((e=>{g.error(`Worker failed to initialise IndexedDB event cache: ${e}`);const n={},[i,a]=t.gS(o.uZ()),s=()=>new Promise((e=>{const t=String(Math.random());n[t]=r=>{delete n[t],e(r)},a([[t,void 0]])}));return(0,r.zG)(d.priorCachedEventsResponses,t.UI((e=>(0,r.zG)(e(),o.UI((e=>{var t;let[r,i]=e;return null===(t=n[r])||void 0===t?void 0:t.call(n,i)})))))),{eventsCachedInWorker:!1,coreOutput:{priorCachedEventsRequests:i},coreConfig:{eventsCache:f.t$(s)}}}),(e=>({eventsCachedInWorker:!0,coreOutput:{priorCachedEventsRequests:t.a9(D.of(o.bM()))},coreConfig:{eventsCache:f.F2(e)}})))),A=(0,r.zG)(!0,c.DT(r.yR,(()=>"IndexedDB disabled.")),c.tS((()=>(0,r.zG)(C.K.initialise(new M(s.permutiveConfig),y,g,new T,`worker_${s.organizationId}`,"core_service_state","keys","core_service_state",4,s.isSecureContext),p.traceTask("initialise-core-idb")))),c.tS((e=>(0,L.Yt)(c.Hi)({persistCoreState:u(e,"core"),persistLalState:u(e,"lal")})))),G=()=>new Promise((e=>(0,r.zG)(d.consent,t.YP((t=>{t&&e()}))))),P=o=>(0,r.zG)(c.fF(A),c.YO("servicePersistence"),c.Qt("eventsCache",c.fF((()=>o))),c.Qt("coreService",(0,r.zG)(c.Y3((()=>Promise.resolve().then(n.bind(n,14)).then((e=>e.service))),(e=>`Failed to import core service: ${e}`)),p.traceTask("import-core-service"))),c.Qt("lookalikeModelsService",c.Y3((()=>Promise.resolve().then(n.bind(n,182)).then((e=>e.lookalikeModelsService))),(()=>"Failed to import lookalike models."))),c.Qt("optimisedActivationsConfig",c.Y3((()=>Promise.resolve().then(n.bind(n,903)).then((e=>e.optimisedActivationsConfig))),(()=>"Failed to import lookalike models."))),c.Qt("watson",E),q.mU((()=>G)),c.UI((n=>{let{coreService:o,eventsCache:c,lookalikeModelsService:u,optimisedActivationsConfig:w,servicePersistence:E,watson:S}=n;const I={config:s.permutiveConfig,customQueries:ke(),logger:g,metrics:y,optimisedActivationsConfig:w,permutiveApi:v,permutiveUrls:b,reportError:_,trackPageviewComplete:s.trackPageviewComplete,migratedStateMaps:(0,r.zG)(a.lo(!s.isFirstPageview),a.EQ((()=>q.of({external:a.bM(),internal:a.bM()})),(()=>D.of(m.then((e=>e.migratedStateMaps)))))),trace:p,watson:a.G(S),performance:a.ij(self.performance)};return(0,r.zG)(E,f.UI((n=>{let{persistCoreState:s,persistLalState:f}=n;return(0,r.zG)(u({...I,...d}),f,i.VS((n=>{let[u,f]=n;return(0,r.zG)(d,o({...I,...c.coreConfig,lookalikeModels:a.G(f)}),(m=h,g=t.a9(!1),n=>i=>{const{value:a,state:o}=n(i),[s,c]=t.Ue(o.current),u=(0,e.UM)((()=>c(o.current)),m),l=(0,r.zG)(t.vP(o,s),t.UI((e=>{let[t,n]=e;return t===n})));return(0,r.zG)(g,t.bw((e=>e&&u()))),{value:(0,r.bc)(l,a),state:(0,r.zG)(t.vP(g,o,s),t.UI((e=>{let[t,n,r]=e;return t?n:r})))}}),l(d.consent),s,i.UI((e=>{let[n,[i,a]]=e;return{...a,stateFlushed:(0,r.zG)(t.vP(u,n,i),t.UI((e=>{let[t,n,r]=e;return t&&n&&r})))}})));var m,g})),(e=>{const{value:n}=e({stopped:t.a9(!1),previousState:{}});return e=>({value:n,state:t.a9(void 0)})}))})),f.fS((e=>(g.warn("Worker running in non-persistent mode.",e),(0,r.zG)(d,o({...I,...c.coreConfig,lookalikeModels:a.YP}),i.Hr("stateFlushed",(()=>t.a9(!0))),l(d.consent))))),i.UI((e=>({...e,...c.coreOutput}))))})));return async()=>{const e=S(),t=P(e)(),{eventsCachedInWorker:n}=await e;return{eventsCachedInWorker:n,coreService:t}}}(p,w,_,v,h,b)();g.send({eventsCachedInWorker:E});const P=await S;var U,N;if(f.nM(P))return v.error(`Failed to start worker: ${P.left}`),void(null===(U=(N=self).close)||void 0===U||U.call(N));const B=P.right,j=await w,H=(await B)({stopped:t.a9(!1),previousState:j.previousState}),[Q,V]=t.Ue(b.getNoMetricsTracked());(0,e.UM)((()=>V(b.getNoMetricsTracked())),100),function(e,n,i){const o=(0,r.zG)(t.vP(n),t.UI((0,r.ls)(O.UI((e=>"function"==typeof e?e:D.of(e))),(0,L.Yt)(D.G5))));let s=o.current();e(s),(0,r.zG)(o,t.YP((t=>{const n=t(),o=(0,r.zG)(n,O.z7(((e,t)=>{var n;return t!==s[e]&&(null===(n=i[e])||void 0===n||!n.isEmpty(t))})),a.DT((0,R.ff)(O.xb)));a.pC(o)&&(s={...s,...o.value},e(o.value))})))}(g.send,{activations:H.value.activations,cohorts:t.vP(H.value.cohorts),context:H.value.context,eventsToPublish:H.value.eventsToPublish,eventsToPublishOnPageUnload:H.value.eventsToPublishOnPageUnload,externalData:H.value.externalData,geoIP:H.value.geoIP,metrics:(0,r.zG)(Q,t.UI((()=>()=>b.consume()))),priorCachedEventsRequests:H.value.priorCachedEventsRequests,realtime:H.value.realtime,state:H.state,transitionsSinceInit:H.value.transitionsSinceInit,workerStateFlushed:H.value.stateFlushed,stateMigratedThisInitialisation:H.value.stateMigratedThisInitialisation,secureSignal:H.value.secureSignal},{eventsToPublish:{isEmpty:o.xb},metrics:{isEmpty:o.xb}})}function Ge(n){const r=()=>Math.floor(Date.now()/1e3)+n,[i,a]=t.Ue(r());return(0,e.UM)((()=>a(r())),1e3),i}const Pe=t=>{const n=[],r=[],i=()=>{for(;n.length>0&&r.length>0;)r.shift()()},a=t=>new Promise((n=>{r.push((()=>n(t()))),(0,e.HJ)(i)}));return t.addEventListener("message",(0,e.GL)((t=>{null!==t.data&&(n.push(t.data),(0,e.HJ)(i))}))),{next:()=>a((()=>n.shift())),read:()=>a((()=>n.splice(0)))}};!async function(){const t=self;Ae({contextsInitTimestampPerformance:e.NC,master:{...Pe(t),send:e=>t.postMessage(e)}})}()})()})();',"Worker",void 0,void 0)}},1005:e=>{e.exports=function(e,t,n,r){var i=self||window;try{try{var a;try{a=new i.Blob([e])}catch(t){(a=new(i.BlobBuilder||i.WebKitBlobBuilder||i.MozBlobBuilder||i.MSBlobBuilder)).append(e),a=a.getBlob()}var o=i.URL||i.webkitURL,s=o.createObjectURL(a),c=new i[t](s,n);return o.revokeObjectURL(s),c}catch(r){return new i[t]("data:application/javascript,".concat(encodeURIComponent(e)),n)}}catch(e){if(!r)throw Error("Inline worker is not supported");return new i[t](r,n)}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{var e=__webpack_require__(6371);const t=(()=>{try{return self.document.currentScript}catch{return null}})();(()=>{var n,r;(0,e.ho)(!0);const i="permutive.main.import_runWebSdk",a=`${i}_start`;null===(n=performance)||void 0===n||null===(r=n.mark)||void 0===r||r.call(n,a),(0,e.SF)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,618))))().then((n=>{var r,o;null===(r=performance)||void 0===r||null===(o=r.measure)||void 0===o||o.call(r,i,a),n.runSdk({contextsInitTimestampPerformance:e.NC,contextsInitTimestamp:e.RP,currentScript:t})})).catch(console.error)})()})()})();